/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

/*!

	    Copyright (c) 2011 Peter van der Spek

	    Permission is hereby granted, free of charge, to any person obtaining a copy
	    of this software and associated documentation files (the "Software"), to deal
	    in the Software without restriction, including without limitation the rights
	    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	    copies of the Software, and to permit persons to whom the Software is
	    furnished to do so, subject to the following conditions:

	    The above copyright notice and this permission notice shall be included in
	    all copies or substantial portions of the Software.

	    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	    THE SOFTWARE.

	 */

/*! Backstretch - v2.0.4 - 2013-06-19
* http://srobbin.com/jquery-plugins/backstretch/
* Copyright (c) 2013 Scott Robbin; Licensed MIT */

/**
 * FastClick: Set up handling of fast clicks
 *
 * On touch WebKit (eg Android, iPhone) onclick events are usually 
 * delayed by ~300ms to ensure that they are clicks rather than other
 * interactions such as double-tap to zoom.
 *
 * To work around this, add a document listener which converts touches
 * to clicks on a global basis, excluding scrolls and gestures.  The 
 * default click events are then cancelled to prevent double-clicks.
 *
 * This function automatically adapts if no action is required (eg if 
 * touch events are not supported), and also handles functionality such
 * as preventing actions in the page while the section selector
 * is displaying.
 *
 * One alternative is to use ontouchend events for everything, but that
 * prevents non-touch interaction, and
 * requires checks everywhere to ensure that a touch wasn't a 
 * scroll/swipe/etc.
 *
 * ------
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the 
 * "Software"), to deal in the Software without restriction, including 
 * without limitation the rights to use, copy, modify, merge, publish, 
 * distribute, sublicense, and/or sell copies of the Software, and to 
 * permit persons to whom the Software is furnished to do so, subject 
 * to the following conditions:
 * 
 * The below copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS 
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN 
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN 
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
 * SOFTWARE.
 *
 * @licence MIT License (http://www.opensource.org/licenses/mit-license.php)
 * @copyright (c) 2011 Assanka Limited
 * @author Rowan Beentje <rowan@assanka.net>, Matt Caruana Galizia <matt@assanka.net>
 */

/**
 * BxSlider v4.1 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Copyright 2012, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
 * Written while drinking Belgian ales and listening to jazz
 *
 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
 */

/*!
	 * jQuery resize event - v1.1 - 3/14/2010
	 * http://benalman.com/projects/jquery-resize-plugin/
	 * 
	 * Copyright (c) 2010 "Cowboy" Ben Alman
	 * Dual licensed under the MIT and GPL licenses.
	 * http://benalman.com/about/license/
	 */

// Copyright (c) 2010 "Cowboy" Ben Alman,

// Dual licensed under the MIT and GPL licenses.

// http://benalman.com/about/license/

/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */

/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */

/*! Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */

/**
* simplePagination.js v1.5
* A simple jQuery pagination plugin.
* http://flaviusmatis.github.com/simplePagination.js/
*
* Copyright 2012, Flavius Matis
* Released under the MIT license.
* http://flaviusmatis.github.com/license.html
*/

/*
 
 bootpag - jQuery plugin for dynamic pagination

 Copyright (c) 2013 botmonster@7items.com

 Licensed under the MIT license:
   http://www.opensource.org/licenses/mit-license.php

 Project home:
   http://botmonster.com/jquery-bootpag/

 Version:  1.0.4

*/

Ndn_Require.define("models/Ndn/Widget/CssInjector",["jquery","underscore","require"],function(e,t,i){var n=["VideoPlayer/Inline","VideoPlayer/Inline590","VideoLauncher/Horizontal","VideoLauncher/VerticalTower"],o=_nw2e.appUrl,a={};return{isCssFileInjected:function(e){return!!a[e]},getCssFilesNeeded:function(e){var i=["NdnEmbed","NdnEmbed2"];return e&&t.contains(n,e)&&i.push("models/Ndn/Widget/"+e+"Model"),i},injectCssFiles:function(t){Ndn_Require.require(["models/Ndn/Widget"],e.proxy(function(i){if(i.isBuilt())for(var n=0;n<t.length;n++){var r=t[n],s=o+"/css/"+r+".css";this.isCssFileInjected(r)||(document.createStyleSheet?document.createStyleSheet(s):e("head").append('<link rel="stylesheet" type="text/css" href="'+s+'" />'),a[r]=!0)}else{for(var n=0;n<t.length;n++){var r=t[n],s=o+"/less/"+r+".less";this.isCssFileInjected(r)||(e("head").append('<link rel="stylesheet/less" type="text/css" href="'+s+'" />'),a[r]=!0)}e("head").append('<script src="'+o+'/js/lib/less.js"></script>')}},this))},injectCss:function(e){this.injectCssFiles(this.getCssFilesNeeded(e))}}}),Ndn_Require.define("models/Ndn/PlayerServices/Cache",["backbone","jquery"],function(e,t){var i,n={},o={};return{cachePlaylistData:function(e,i){if(e.playlistId){var o="undefined"==typeof n[e.playlistId]||!n[e.playlistId].isCompletelyLoaded&&n[e.playlistId].items.length<e.items.length;o&&(e.isCompletelyLoaded=e.items.length<i,n[e.playlistId]=e,t.each(e.items,t.proxy(function(e,t){this.cacheVideoData(t)},this)))}},getPlaylistData:function(e,t){return"undefined"!=typeof n[e]&&(n[e].isCompletelyLoaded||"undefined"==typeof t||n[e].items.length>=t)?n[e]:null},cacheVideoData:function(e){"undefined"==typeof o[e.videoId]&&(o[e.videoId]=e,i=e)},getLastCachedVideoData:function(){return i},getVideoData:function(e){return"undefined"!=typeof o[e]?o[e]:void 0},getCache:function(){return o}}}),Ndn_Require.define("models/Ndn/PlayerServices/Parser/DeliverySettings",["jquery","models/Ndn/Utils/UrlParser"],function(e,t){var i={"boolean":{slider_dfp_allowed:!0,launchModal:!1,analytics_chartbeat:!1,playOnInViewToggle:!1,secretMediaTimeoutUI:!1,rmmEarlyContent:!1,easi_flash_slider:!0,videojs:!1,bumper_inview:!0,thumbnails_inview:!1,da_html5_slider_d:!1,da_blacksheep:!1,da_premium:!1},integer:{rmm_cp:0,easiTimeout:20,floatPercent:40,muteInterval:0,pb_default:1,rmm_easi_attempts:2,da_inview_d:15,da_inview_nd:15,da_inline_d:15,da_inline_nd:15,da_slider_d:15,da_slider_nd:15,easi_t_inview_d:15,easi_t_inview_nd:15,easi_t_inline_d:15,easi_t_inline_nd:15,inview_version:1,inview_stp_percent:50,da_spree_d:0},string:{da_override_d:"",da_override_nd:"",float_player:"",forceHtmlForSections:"",da_spree_pause:"0"}},n={};e.each(i,function(t,i){e.each(i,function(e){n[e]=t})});var o=function(){var i={},o=t.getUrlParam("ndn_deliverySettings")||"",a=t.parseParams(o);return e.each(a,function(e,t){var o=n[e];o&&(i[e]=t)}),i}();return{parseSettings:function(t){var a={},r=this;return e.each(t,function(){var e=this.Name,t=n[e];"undefined"!=typeof t&&(a[e]=r.parseSettingValue(this.Value,t))}),e.each(n,function(e,t){"undefined"==typeof a[e]&&(a[e]=i[t][e])}),e.each(o,function(e,t){var i=n[e];i&&(a[e]=r.parseSettingValue(o[e],i))}),a},parseSettingValue:function(e,t){return"boolean"==t?"true"==e.toLowerCase()||"1"==e.toLowerCase():"integer"==t?parseInt(e):"string"==t?e:void 0}}}),Ndn_Require.define("models/Ndn/PlayerServices/Parser",["underscore","jquery","backbone","models/Ndn/App","models/Ndn/PlayerServices/Parser/DeliverySettings"],function(e,t,i,n,o){var a={parseResponse:function(i,r){var s,l=i.LandingURL&&"http://landing.newsinc.com/shared/video.html"!=i.LandingURL?i.LandingURL:"http://launch.newsinc.com/share.html",d=function(){var e=i.LandingPageAllowed?"studio":"popup";return"studio"==e||n.isEmbeddedByIframe()||t.each(i.DeliverySettings,function(){return"launchModal"==this.Name&&"true"==this.Value||n.getSetting("launchModalEmbeds")?(e="modal",!1):void 0}),e}(),c="studio"==d?l:"http://"+n.getAppDomain()+"/",u=o.parseSettings(i.DeliverySettings),p={playlists:{},associatedPlaylists:[],defaultConfig:{widgetId:i.WidgetID,trackingGroup:i.TrackingGroup,type:"VideoPlayer/Single","float":"default",siteSection:i.SiteSectionName,autoPlay:!i.DisableVideoPlayOnLoad,continuousPlay:i.ContinuousPlay,videoId:"",playlistId:"",adsEnabled:!i.DisableAds,rmmSoundOn:!1,playOnMouseover:!!i.PlayOnMouseover||!1,playOnInView:!1,hideWhenUnavailable:!1},launchToStudio:{enabled:i.LandingPageAllowed,url:i.LandingURL},settings:{behavior:{},deliverySettings:u,launcher:{behavior:d,landingPageUrl:c},share:{enabled:!i.DisableSocialNetworking&&!i.DisableSingleEmbed,mode:{email:!i.DisableSocialNetworking,social:!i.DisableSingleEmbed},directLinkLandingPageUrl:l},dfp:function(){function e(e){var t;return(t=e.match(/_(\d+)$/))?t[1]:void 0}var t,n=!1;return i.Dfp?(i.Dfp.Substituted?(n=!0,t={accountNumber:i.Dfp.Substituted.Account,adOwnershipGroupId:i.Dfp.Substituted.OwnershipGroup,adTrackingGroupId:i.Dfp.Substituted.TrackingGroup},t.adTrackingGroupId!=i.Dfp.Direct.TrackingGroup&&(t.unused={adTrackingGroupId:i.Dfp.Direct.TrackingGroup,adTrackingGroupNumber:e(i.Dfp.Direct.TrackingGroup)||"",reason:i.Dfp.SubstitutedReason||""})):t={accountNumber:i.Dfp.Direct.Account,adOwnershipGroupId:i.Dfp.Direct.OwnershipGroup,adTrackingGroupId:i.Dfp.Direct.TrackingGroup},t.adTrackingGroupNumber=e(t.adTrackingGroupId)||"",t.isSafeViralOverride=n,t.adCampaignId=t.adTrackingGroupNumber,t.defaultAdCampaignId=i.TrackingGroup,t):{}}(),analytics:{},ads:{enabled:!i.DisableAds,server:i.AdServer}},distributor:{name:i.DistributorName},siteSection:i.SiteSectionName},h=this.parsePlaylistsData(i.Playlists,r);return e.each(h,function(e){p.associatedPlaylists.push({id:e.playlistId,label:e.title}),e.items.length&&(s=e.playlistId,p.playlists[s]=e)}),p.defaultConfig.playlistId=s,e.each(i.Playlists,function(e){if(9999999==e.playlistid&&e.Contents[0]){for(var t=e.Contents[0],i=p.playlists[s].items,n=0;n<i.length;n++){var o=i[n];if(o.videoId==t.ContentID){p.videoIndex=n;break}}"undefined"==typeof p.videoIndex&&(p.videosData=p.videosData||[],p.videosData.push(a.parseVideoData(t)))}if(-1===e.playlistid)for(var n=0;n<e.Contents.length;n++){var t=e.Contents[n];p.videosData=p.videosData||[],p.videosData.push(a.parseVideoData(t))}}),p},parsePlaylistsData:function(t,i){var n=[];return e.each(t,function(t){if(9999999!==t.playlistid){var i={playlistId:t.playlistid,title:t.Title,items:[]},o=e.sortBy(t.Contents,function(e){return e.ContentOrder});e.each(o,function(e){i.items.push(a.parseVideoData(e))}),n.push(i)}}),n},parseVideoData:function(t){for(var i={videoId:t.ContentID,videoTitle:this.stripStringOfHtml(t.Name),description:this.stripStringOfHtml(t.Description),providerVideoId:t.SourceGuid,antiKeywords:t.AKW,publishedOn:t.PubDate,hasDynamicStillImages:!1,mediaContent:[],subtitles:[],provider:{id:t.CPID,trackingGroup:t.ContentPartnerID,name:t.ProducerName,category:t.ProducerCategory,logoUrl:this.getAssetUrl("producerLogo",t.ProducerLogo)},settings:{share:{embedCode:{enabled:!!t.EmbedCodeAccessible}}}},o=[],r=0;r<t.Assets.length;r++){var s=t.Assets[r];if("src"==s.AssetType)o.push(s);else if("stillFrame"==s.AssetType)i.stillImageUrl=this.getAssetUrl("stillFrame",s.AssetLocation),i.stillImageXLUrl=i.stillImageXLUrl||i.stillImageUrl;else if("StillFrameXL"==s.AssetType)i.stillImageXLUrl=this.getAssetUrl("stillFrame",s.AssetLocation);else if("thumbnail"==s.AssetType)i.thumbnailUrl=this.getAssetUrl("thumbnail",s.AssetLocation);else if(e.contains(["closedcaption","smpte-tt","vtt"],s.AssetType)){var l="vtt"==s.AssetType?"text/vtt":"application/ttml+xml";i.subtitles.push({type:l,language:"en-us",url:this.getAssetUrl("subtitle",s.AssetLocation)})}else"kraken"==s.AssetType&&(i.hasDynamicStillImages=!0)}var d=e.sortBy(o,function(e){return e.AssetSortOrder}),c=function(){for(var e,t=0;t<d.length;t++)"video/progressive"==d[t].AssetMimeType&&(e=d[t].AssetLocation);return function(t){return"/"!=t.AssetLocation.charAt(0)?t.AssetLocation:"video/f4m"==t.AssetMimeType&&n.isOnSsl()?a.getAssetUrl("video/progressive",e):a.getAssetUrl(t.AssetMimeType,t.AssetLocation)}}();return i.mediaContent=e.map(d,function(e){return{type:"video/progressive"!=e.AssetMimeType?e.AssetMimeType:"video/mp4",medium:"video",duration:e.Duration,url:c(e)}}),i.duration=i.mediaContent[0].duration,i.displayDuration=a.prettifyVideoDuration(i.mediaContent[0].duration),i},stripStringOfHtml:function(e){var t=/(<([^>]+)>)/gi;return e.replace(t,"")},getAssetUrl:function(e,t){return"/"!=t.charAt(0)?t:this.getAssetBaseUrl(e)+t},getAssetBaseUrl:function(e){var t={producerLogo:["http://assets.newsinc.com","https://assets-s.newsinc.com"],stillFrame:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],thumbnail:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],subtitle:["http://content.newsinc.com","https://content-s.newsinc.com"],"video/mp4":["http://content-mp4.newsinc.com","https://content-s.newsinc.com"],"application/x-mpeg":["http://ndn_mp4-vh.akamaihd.net","https://ndn_mp4-vh.akamaihd.net"],"application/x-mpegURL":["http://ndnmedia-vh.akamaihd.net","https://ndnmedia-vh.akamaihd.net"],"video/f4m":["http://ndnmedia-vh.akamaihd.net","https://ndnmedia-vh.akamaihd.net"],"video/x-flv":["rtmp://cp98516.edgefcs.net","rtmp://cp98516.edgefcs.net"],"video/progressive":["http://ndnmedia-a.akamaihd.net","https://ndnmedia-a.akamaihd.net"]};return"undefined"!=typeof t[e]?t[e]["http:"==window.location.protocol?0:1]:void 0},prettifyVideoDuration:function(e){var t=parseInt(e,10);t=0>t?0:t;var i=Math.floor(t/60),n=i>59?n=Math.floor(i/60):n,o=t%60;return o=10>o?"0"+o:o,n>0&&"undefined"!=n?(i%=60,i=10>i?"0"+i:i,t=n+":"+i+":"+o):t=i+":"+o,t}};return a}),Ndn_Require.define("models/Ndn/PlayerServices",["jquery","underscore","require","models/Ndn/PlayerServices/Cache","models/Ndn/PlayerServices/Parser","models/Ndn/Utils/UrlParser","models/Ndn/App","models/Ndn/Debug"],function(e,t,i,n,o,a,r,s){var l={getBaseUrl:function(e){return"undefined"==typeof e&&(e=a.getUrlVar("ndn_playerServicesEnv")||""),e=e.replace(/[^A-Za-z0-9-_]/g,""),"//"+(e?e+"-":"")+"lps2.newsinc.com"},getEndpointUrl:function(e,t,i,n,o,a,s,l){var d=this.getBaseUrl(),c="&insid="+(r.getPageViewSessionId()||"")+"&uut="+(r.getUniqueUserId()||"")+"&embedIndex="+e+"&ver="+r.getBuild()+"&benv="+r.getEnv()+"&embedOriginUrl="+encodeURIComponent(r.getEmbedOriginUrl());if(s&&l)return d+"/player/show/"+s+"/"+l+"?trackingGroupId="+(i?i:"0")+"&widgetId="+(t?t:"0")+"&playlistId="+(n?n:"0")+c;var u=this.getItemLimit(a);return d+"/player/show/"+(i||"0")+"/"+(t||"0")+"/"+(n||"0")+"/"+(o||"0")+"/3"+(u?"/"+u:"")+"?d="+(new Date).getTime()+c},getItemLimit:function(e){return e&&40>=e?t.contains([1,3],e)||(e=e>15?40:15):e=null,e},fetch:function(t){var i=t.embedIndex,n=t.trackingGroup,a=t.configId,r=t.playlistItemsLimit,d=t.playlistId,c=t.videoId,u=t.providerId,p=t.providerStoryId,h="undefined"!=typeof t.cacheData?t.cacheData:!0;return e.Deferred(e.proxy(function(t){e.ajax({type:"GET",url:this.getEndpointUrl(i,a,n,d,c,r,u,p),contentType:"json",dataType:"jsonp"}).done(function(e){if(s.log("playerServices","[Ndn_PlayerServices] Response:",e),!e||!e.Playlists)return t.reject();var i=o.parseResponse(e,r);s.inMode("playerServices")&&console.log("[Ndn_PlayerServices] Parsed response:",i),h&&l.cachePlaylistAndVideoData(i,r),t.resolve(i)}).fail(function(){t.reject({reason:u||p?"storyVideoUnavailable":""})})},this)).promise()},cachePlaylistAndVideoData:function(t,i){e.each(t.playlists,function(){n.cachePlaylistData(this,i)}),t.videosData&&e.each(t.videosData,function(){n.cacheVideoData(this)})},getPlaylist:function(e){},getPlaylistData:function(t,i,o){s.log("playerServices","Ndn_PlayerServices.getPlaylistData(",arguments,");");var a=i.config,r=i.embedIndex,l="undefined"==typeof o?i.settings.behavior.playlistItemsLimit:0;return e.Deferred(e.proxy(function(i){var o=n.getPlaylistData(t,l);o?i.resolve(o):this.fetch({embedIndex:r,trackingGroup:a.trackingGroup,configId:a.widgetId,playlistId:t,playlistItemsLimit:l}).done(e.proxy(function(){o=n.getPlaylistData(t,l),o?i.resolve(o):i.reject()},this)).fail(i.reject)},this)).promise()},getVideoData:function(t,i){var o=i.getConfig(),a=i.get("embedIndex");return e.Deferred(e.proxy(function(i){var r=n.getVideoData(t);r?i.resolve(r):this.fetch({embedIndex:a,trackingGroup:o.trackingGroup,configId:o.widgetId,playlistId:o.playlistId,playlistItemsLimit:1,videoId:t}).done(e.proxy(function(){r=n.getVideoData(t),r?i.resolve(r):i.reject()},this)).fail(i.reject)},this)).promise()}};return l}),Ndn_Require.define("models/Ndn/VideoFeeder",["underscore","jquery","backbone","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache"],function(e,t,i,n,o){var a=i.Model.extend({defaults:{videoData:null,playlistId:null,videoIndex:null,lastPlaylistId:null,playlistIndex:null,productSettings:null,playlists:null},initialize:function(e){this.set({productSettings:e.productSettings,playlists:e.playlists,playlistIndex:"undefined"!=typeof e.playlistIndex?e.playlistIndex:null,playlistId:"undefined"!=typeof e.playlistId?e.playlistId:null,videoIndex:"undefined"!=typeof e.videoIndex?e.videoIndex:null,videoData:"undefined"!=typeof e.videoData?e.videoData:null})},reset:function(){this.set({playlistIndex:null,playlistId:null,videoIndex:null,videoData:null})},getCurrentVideo:function(){return{playlistIndex:this.get("playlistIndex"),playlistId:this.get("playlistId"),videoIndex:this.get("videoIndex"),videoData:this.get("videoData")}},getPlaylistItemsFromCache:function(e){var t=this.get("playlists"),i=this.getPlaylistIdByIndex(e),n=t[e],a=n[1],r=i?o.getPlaylistData(i,a):t[0];if(i){var r=o.getPlaylistData(i,a);return r?r.items:null}return t[0]},getPlaylistIdByIndex:function(t){var i=this.get("playlists")[t];return i?e.contains(["undefined","object"],typeof i[0])?null:i[0]:!1},setCurrentVideo:function(e){this.set({playlistIndex:e.playlistIndex,playlistId:this.getPlaylistIdByIndex(e.playlistIndex),videoIndex:e.videoIndex,videoData:this.getPlaylistItemsFromCache(e.playlistIndex)[e.videoIndex]})},setNextVideo:function(e){if(!e||!e.playlistIndex&&!e.videoIndex)return this.reset();var t;if(e.videoIndex>0)t={playlistIndex:e.playlistIndex,videoIndex:e.videoIndex-1};else{if(0==e.playlistIndex)return this.reset();var i=this.getPlaylistItemsFromCache(e.playlistIndex-1);t={playlistIndex:e.playlistIndex-1,videoIndex:i.length-1}}this.setCurrentVideo(t)},getNextVideo:function(){var e=this;return this.peekNextVideo().always(function(t){e.set(t),e.trigger("videoFed",t)})},peekNextVideo:function(e){e=e||{};var i,a,r=e.currentVideo||this.getCurrentVideo();null===r.playlistIndex&&null===r.videoIndex?(a=this.getPlaylistItemsFromCache(0),i={playlistIndex:0,playlistId:this.getPlaylistIdByIndex(0),videoIndex:0,videoData:a&&a[0]}):(a=this.getPlaylistItemsFromCache(r.playlistIndex),i=a[r.videoIndex+1]?{playlistIndex:r.playlistIndex,playlistId:r.playlistId,videoIndex:r.videoIndex+1,videoData:a[r.videoIndex+1]}:{playlistIndex:r.playlistIndex+1,videoIndex:0});var s=this;return t.Deferred(function(e){if(i.videoData)return e.resolve(i);var t=s.get("playlists"),a=t[i.playlistIndex];if(!a)return e.reject();var r=a[1]||0,l=s.getPlaylistIdByIndex(i.playlistIndex);n.getPlaylistData(l,s.get("productSettings"),r).done(function(){var t=o.getPlaylistData(l);return i.playlistId=l,i.videoData=t.items[i.videoIndex],i.videoData?e.resolve(i):i.playlistId==lastPlaylistId?e.reject():void 0})}).promise()},peekNextVideos:function(e,i,n){n=n||[];var o=i||new a({productSettings:this.get("productSettings"),playlists:this.get("playlists"),playlistIndex:this.get("playlistIndex"),playlistId:this.get("playlistId"),videoIndex:this.get("videoIndex"),videoData:this.get("videoData")}),r=this;return t.Deferred(function(t){o.getNextVideo().done(function(i){n.push(i),e--,e?r.peekNextVideos(e,o,n).always(function(){t.resolve(n)}):t.resolve(n)}).fail(function(){t.resolve(n)})}).promise()}});return a}),Ndn_Require.define("models/Ndn/Viewer/Step",["jquery","backbone","models/Ndn/Debug"],function(e,t,i){return t.Model.extend({defaults:{viewer:null,stepName:null,currentStep:null,parentStep:null,sessions:null},initialize:function(e){this.set({viewer:e.viewer,stepName:e.stepName,parentStep:e.parentStep,sessions:[]}),"top"==e.stepName&&this.setCurrentStep(this)},start:function(){return i.inMode("steps")&&console.log("step"+this.get("stepName")+": START"),this.get("viewer").getSteps().getCurrentStep().recordStep(this),this},end:function(){return i.inMode("steps")&&console.log("step"+this.get("stepName")+": END"),this.setCurrentStep(this.getParentStep()),this},isRootStep:function(){return null===this.get("parentStep")},getRootStep:function(){return this.isRootStep()?this:this.getParentStep().getRootStep()},getParentStep:function(){return this.get("parentStep")},setParentStep:function(e){this.getParentStep()||this.set("parentStep",e)},setCurrentStep:function(e){this.isRootStep()?this.set("currentStep",e):this.getRootStep().setCurrentStep(e)},concludeAllSteps:function(){for(;!this.getCurrentStep().isRootStep();)this.getCurrentStep().end()},getCurrentStep:function(){return this.getRootStep().get("currentStep")},recordSession:function(e){this.get("sessions").push(e)},recordStep:function(e){e.setParentStep(this),this.get("sessions").push(e),this.setCurrentStep(e)},getData:function(){for(var e=[],t=this.get("sessions"),i=0;i<t.length;i++){var n=t[i];"number"==typeof n?e.push(n):e.push(n.getData())}return[this.get("stepName"),e]}})}),Ndn_Require.define("models/Ndn/Utils/DomElement",["jquery"],function(e){var t={},i=function(){var e=0;return function(){return"ndnDomElementCondition"+e++}}();return{getFullHtml:function(e){var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML},onceMeetsCondition:function(n,o,a,r){"undefined"==typeof a&&(a=i()),"undefined"==typeof r&&(r=500);var s=e(n);return e.Deferred(function(e){if(o(s))return e.resolve();if(s.data(a))t[a][s.data(a)].done(function(){e.resolve()});else{var i=setInterval(function(){o(s)&&(clearInterval(s.data(a)),s.removeData(a),e.resolve(),delete t[a][i])},r);t[a]=t[a]||{},t[a][i]=e,s.data(a,i)}}).promise()},onceVisible:function(e){return this.onceMeetsCondition(e,function(e){return e.is(":visible")},"isVisible")},onceHasWidthAndHeight:function(e){return this.onceMeetsCondition(e,function(e){return e.width()&&e.height()},"ndnWidthAndHeightInterval")}}}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule",["jquery","underscore","backbone","models/Ndn/Debug"],function(e,t,i,n){return i.Model.extend({defaults:{viewer:null,isActive:null,isReady:null,sessionParams:null,state:null,containerElement:null,preEventListener:null,postEventListener:null,scheduleLog:null,originalScheduleLog:null,currentQuartile:null,moduleSessionIndex:null,isHalted:null,debugInfo:null},initialize:function(t){this.set({viewer:t.viewer,containerElement:t.containerElement,isActive:!1,isReady:!1,state:{},moduleSessionIndex:-1,preEventListener:new i.Model,postEventListener:new i.Model,debugInfo:{jqueryVersion:e.fn.jquery}}),this.maintainVisibility(),this.mantainState(),this.maintainScheduleLog(),this.manageEvents(),this.initializeEventProcessing(),this.surfaceEvents(t.eventsReceiver||this.getViewer())},manageEvents:function(){var e=this,i=this.getPreEventListener(),n=this.getPostEventListener();i.on({"adRequest adLoad adStart":function(){e.trigger("adPlayerStart")},videoStart:function(){e.isAdPlayerEnabled()&&e.trigger("adPlayerEnd")},viewerModuleEnd:function(){e.isContentPlayerEnabled()||e.trigger("adPlayerEnd")}}),i.on({videoStart:function(){e.isContentPlayerEnabled()||e.endSession()}}),n.on({videoEnd:function(){return e.isContentPlayerEnabled()?e.endSession():void 0}}),function(){function o(t){e.set("currentQuartile",t);var i=e.getSessionParams();e.trigger(e.isShowingAdPlayer()?"adQuartile":"videoQuartile",{quartile:t,currentTime:100==t?e.getDuration():e.getCurrentTime(),playerWidth:e.getContainerElement().width(),playerHeight:e.getContainerElement().height(),videoData:i.videoData,cpvNumber:i.cpvNumber})}i.on({"adEnd videoEnd":function(){o(100)}}),n.on({"adStart videoStart":function(){o(0)},"adTimeUpdate videoTimeUpdate":function(){var i=Math.floor(e.getCurrentTime()/e.getDuration()*100);t.contains([25,50,75],i)&&i>e.get("currentQuartile")&&o(i)}})}()},getPreEventListener:function(){return this.get("preEventListener")},getPostEventListener:function(){return this.get("postEventListener")},maintainScheduleLog:function(){var t={adRequest:"adRequests",adEnd:"adsPlayed",videoEnd:"videosCompleted"},i=this;e.each(t,function(e,t){i.on(e,function(){i.incrementScheduleItem(t)})})},maintainVisibility:function(){this.on({viewerModuleStart:function(){this.getContainerElement().show()},viewerModuleEnd:function(){}})},incrementScheduleItem:function(e){var t=this.getScheduleLog(),i={};i[e]=(t[e]||0)+1,this.updateScheduleLog(i)},onBadEvent:function(e){n.inMode("unexpectedEvents")&&console.log("[Ndn_Viewer_ViewerModule UNEXPECTED EVENT] "+e+(self.isActive()?"":" (inactive)"))},initializeEventProcessing:function(){var e=this.trigger,i=this,o=this.getViewer(),a=this.getPreEventListener(),r=this.getPostEventListener();this.trigger=function(s,l){var d=i.getModuleSessionIndex();n.inMode("attemptedEvents")&&console.log("[Ndn_Viewer_ViewerModule ATTEMPTED EVENT] "+s);var c=function(e){i.onBadEvent(e)};if(!i.isActive()&&"ready"!=s)return c(s);var u={viewerModuleStart:function(){return i.isSessionActive()},adPlayerStart:function(){return i.isShowingAdPlayer()},adPlayerEnd:function(){return!i.isShowingAdPlayer()},videoStart:function(){return i.isShowingVideo()},adStart:function(){return i.isShowingAd()},adEnd:function(){return!i.isShowingAd()},videoEnd:function(){return!i.isShowingVideo()},videoTimeUpdate:function(){return!i.isShowingVideo()||!i.isPlaying()},adTimeUpdate:function(){return!i.isShowingAd()||!i.isPlaying()},videoPause:function(){return!i.isShowingVideo()||!i.isPlaying()},adPause:function(){return!i.isShowingAd()||!i.isPlaying()},videoResume:function(){return!i.isShowingVideo()||i.isPlaying()},adResume:function(){return!i.isShowingAd()||i.isPlaying()}};return"undefined"!=typeof u[s]&&u[s]()?c(s):(o&&(l=t.extend({viewer:t.extend(o.getViewerEventData(),{moduleSessionIndex:d,sessionLog:i.getScheduleLog()})},l||{})),d==i.getModuleSessionIndex()&&a.trigger(s,l),d==i.getModuleSessionIndex()&&e.apply(i,[s,l]),void(d==i.getModuleSessionIndex()&&r.trigger(s,l)))}},getSessionLog:function(){var i=t.extend({},this.get("originalScheduleLog")),n=this.getScheduleLog(),o={};return e.each(n,function(e,t){var a=i[e]||0,r=n[e];o[e]=r-a}),o},getScheduleLog:function(){return this.get("scheduleLog")||{}},updateScheduleLog:function(e){var i=this.get("scheduleLog");i&&(i=t.extend(i,e),this.set("scheduleLog",i))},toggleAdPlayer:function(e){this.set("adPlayerEnabled",e)},toggleContentPlayer:function(e){this.set("contentPlayerEnabled",e)},isAdPlayerEnabled:function(){return this.get("adPlayerEnabled")},isContentPlayerEnabled:function(){return this.get("contentPlayerEnabled")},applySessionDefaults:function(e,i){var n=t.extend(i,e);t.extend(e,n)},startSession:function(e,i){this.set({isActive:!0,sessionParams:e,scheduleLog:i,originalScheduleLog:t.extend({},i),state:{},moduleSessionIndex:this.getModuleSessionIndex()+1}),this.trigger("viewerModuleStart")},getSessionParams:function(){return this.get("sessionParams")},makeSessionClosure:function(e){var t=this.getViewer(),i=t.getSessionIndex();return function(){return t.getSessionIndex()==i?e.apply(this,arguments):void 0}},isActive:function(){return this.get("isActive")},halt:function(){this.set("isHalted",!0),this.endSession()},endSession:function(){if(this.isActive()){var e=this.getViewer();e&&e.logSession(this.getSessionLog()),this.trigger("viewerModuleEnd",{halted:this.get("isHalted")})}},toggleReady:function(e){this.set("isReady",e),this.trigger(e?"ready":"unready")},isReady:function(){return this.get("isReady")},onceReady:function(e){this.isReady()?e():this.once("ready",function(){e()})},getContainerElement:function(){return this.get("containerElement")},updateState:function(e){this.set("state",t.extend({},this.getState(),e))},getState:function(){return this.get("state")},isShowingVideo:function(){return this.getState().isShowingVideo},isShowingAd:function(){return this.getState().isShowingAd},isPlaying:function(){return this.getState().isPlaying},isPlayingVideo:function(){return this.isPlaying()&&this.isShowingVideo()},isPlayingAd:function(){return this.isPlaying()&&this.isShowingAd()},isShowingAdPlayer:function(){return this.getState().isShowingAdPlayer},isSessionActive:function(){return this.getState().isSessionActive},mantainState:function(){this.on({viewerModuleStart:function(){this.updateState({isSessionActive:!0})},adPlayerStart:function(){this.updateState({isShowingAdPlayer:!0})},adPlayerEnd:function(){this.updateState({isShowingAdPlayer:!1})},videoStart:function(){this.updateState({isShowingVideo:!0,isShowingAd:!1,isPlaying:!0})},adStart:function(){this.updateState({isShowingVideo:!1,isShowingAd:!0,isPlaying:!0})},adEnd:function(){this.updateState({isShowingAd:!1,isPlaying:!1})},videoEnd:function(){this.updateState({isShowingVideo:!1,isPlaying:!1})},"adPause videoPause":function(){this.updateState({isPlaying:!1})},"adResume videoResume":function(){this.updateState({isPlaying:!0})},"viewerModuleStart viewerModuleEnd":function(){this.updateState({isAdPlayerShowing:!1,isShowingVideo:!1,isShowingAd:!1,isPlaying:!1})},viewerModuleEnd:function(){this.updateState({isActive:!1,isSessionActive:!1})}})},getModuleSessionIndex:function(){return this.get("moduleSessionIndex")},surfaceEvents:function(t){var i=this;if(t){var n=["viewerModuleStart","adPlayerStart","adRequest","adLoad","adStart","adPause","adResume","adTimeUpdate","adTimeout","adEnd","adError","adUnavailable","adCompanion","adPlayerEnd","adMute","adUnmute","adQuartile","debugInfo","error","playerLoad","videoLoad","fullscreenStart","fullscreenEnd","click","videoQuartile","videoStartRequest","videoStart","videoPause","videoResume","videoTimeUpdate","videoEnd","viewerModuleEnd"];e.each(n,function(){var e=this+"";i.on(e,function(n){(i.isActive()||"viewerModuleEnd"==e)&&("viewerModuleEnd"==e&&i.set("isActive",!1),t.trigger(e,n))})})}},getViewer:function(){return this.get("viewer")},debug:function(e,i){this.set("debugInfo",t.extend(this.getDebugInfo(),e)),i&&this.trigger("debugInfo",this.getDebugInfo())},getDebugInfo:function(){return this.get("debugInfo")},pause:function(){},play:function(){},getPlaybackMode:function(){},getCurrentTime:function(){},getDuration:function(){}})}),Ndn_Require.define("lib/secret-media",[],function(){return function(Aa,F,Ba){function Ca(e,t){function i(){}i.prototype=e;var n,o=new i;for(n in t)o[n]=t[n];return t.toString!==Object.prototype.toString&&(o.toString=t.toString),o}function Ia(e){return e instanceof Array?function(){return l.iter(e)}:"function"==typeof e.iterator?G(e,e.iterator):e.iterator}function G(e,t){if(null==t)return null;null==t.__id__&&(t.__id__=Ja++);var i;return null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[t.__id__],null==i&&(i=function(){return i.method.apply(i.scope,arguments)},i.scope=e,i.method=t,e.hx__closures__[t.__id__]=i),i}F.secretmedia=F.secretmedia||{},F.secretmedia.pptjs=F.secretmedia.pptjs||{},F.secretmedia.asbridge=F.secretmedia.asbridge||{},F.secretmedia.sdk=F.secretmedia.sdk||{};var I=function(){return m.__string_rec(this,"")},X=function(e,t){t=t.split("u").join(""),this.r=new RegExp(e,t)};X.__name__=!0,X.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},__class__:X};var q=function(){};q.__name__=!0,q.urlEncode=function(e){return encodeURIComponent(e)},q.startsWith=function(e,t){return e.length>=t.length&&l.substr(e,0,t.length)==t},q.endsWith=function(e,t){var i=t.length,n=e.length;return n>=i&&l.substr(e,n-i,i)==t},q.isSpace=function(e,t){var i=l.cca(e,t);return i>8&&14>i||32==i},q.ltrim=function(e){for(var t=e.length,i=0;t>i&&q.isSpace(e,i);)i++;return i>0?l.substr(e,i,t-i):e},q.rtrim=function(e){for(var t=e.length,i=0;t>i&&q.isSpace(e,t-i-1);)i++;return i>0?l.substr(e,0,t-i):e},q.trim=function(e){return q.ltrim(q.rtrim(e))},q.replace=function(e,t,i){return e.split(t).join(i)},q.hex=function(e,t){var i="",n=d.unmangle("_229");do i=n.charAt(15&e)+i,e>>>=4;while(e>0);if(null!=t)for(;i.length<t;)i="0"+i;return i},q.fastCodeAt=function(e,t){return e.charCodeAt(t)};var l=function(){};l.__name__=!0,l.cca=function(e,t){var i=e.charCodeAt(t);return i!=i?void 0:i},l.substr=function(e,t,i){return null!=t&&0!=t&&null!=i&&0>i?"":(null==i&&(i=e.length),0>t?(t=e.length+t,0>t&&(t=0)):0>i&&(i=e.length+i-t),e.substr(t,i))},l.indexOf=function(e,t,i){var n=e.length;for(0>i&&(i+=n,0>i&&(i=0));n>i;){if(e[i]===t)return i;i++}return-1},l.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var pa=function(){};pa.__name__=!0;var Da=function(){};Da.__name__=!0,Da.exists=function(e,t){for(var i=Ia(e)();i.hasNext();){var n=i.next();if(t(n))return!0}return!1};var la=function(){this.length=0};la.__name__=!0,la.prototype={iterator:function(){return new fa(this.h)},__class__:la};var fa=function(e){this.head=e,this.val=null};fa.__name__=!0,fa.prototype={hasNext:function(){return null!=this.head},next:function(){return this.val=this.head[0],this.head=this.head[1],this.val},__class__:fa};var Fa={__name__:!0,_1:function(e,t){var i=d.unmangle("_1");return e[i](t)},_2:function(e,t,i){var n=d.unmangle("_2");e[n](t,i)}};Math.__name__=!0;var t=function(){};t.__name__=!0,t.hasField=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.field=function(e,t){try{return e[t]}catch(i){return i instanceof n&&(i=i.val),null}},t.setField=function(e,t,i){e[t]=i},t.callMethod=function(e,t,i){return t.apply(e,i)};var k=function(){};k.__name__=!0,k.string=function(e){return m.__string_rec(e,"")},k.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=l.cca(e,1)&&88!=l.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t},k.random=function(e){return 0>=e?0:Math.floor(Math.random()*e)};var N=function(){};N.__name__=!0;var ga=function(e){this.url=e,this.headers=new la,this.params=new la,this.async=!0};ga.__name__=!0,ga.prototype={setPostData:function(e){return this.postData=e,this},cancel:function(){null!=this.req&&(this.req.abort(),this.req=null)},request:function(e){var t=this;t.responseData=null;var i=this.req=J.createXMLHttpRequest(),o=function(e){if(4==i.readyState){var o;try{o=i.status}catch(a){a instanceof n&&(a=a.val),o=null}if(null!=o&&(e=window.location.protocol.toLowerCase(),new X("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(e)&&(o=null!=i.responseText?200:404)),void 0==o&&(o=null),null!=o&&t.onStatus(o),null!=o&&o>=200&&400>o)t.req=null,t.onData(t.responseData=i.responseText);else if(null==o)t.req=null,t.onError("Failed to connect or resolve host");else switch(o){case 12029:t.req=null,t.onError("Failed to connect to host");break;case 12007:t.req=null,t.onError("Unknown host");break;default:t.req=null,t.responseData=i.responseText,t.onError("Http Error #"+i.status)}}};this.async&&(i.onreadystatechange=o);var a=this.postData;if(null!=a)e=!0;else for(var r=new fa(this.params.h);null!=r.head;){var s;r.val=r.head[0],r.head=r.head[1],s=r.val,a=null==a?"":a+"&",a+=encodeURIComponent(s.param)+"="+encodeURIComponent(s.value)}try{if(e)i.open("POST",this.url,this.async);else if(null!=a){var l=1>=this.url.split("?").length;i.open("GET",this.url+(l?"?":"&")+a,this.async),a=null}else i.open("GET",this.url,this.async)}catch(d){return d instanceof n&&(d=d.val),t.req=null,void this.onError(d.toString())}for(!Da.exists(this.headers,function(e){return"Content-Type"==e.header})&&e&&null==this.postData&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e=new fa(this.headers.h);null!=e.head;)e.val=e.head[0],e.head=e.head[1],
r=e.val,i.setRequestHeader(r.header,r.value);i.send(a),this.async||o(null)},onData:function(e){},onError:function(e){},onStatus:function(e){},__class__:ga};var qa=function(e,t){this.high=e,this.low=t};qa.__name__=!0,qa.prototype={__class__:qa};var h=function(){};h.__name__=!0,h.trace=function(e,t){m.__trace(e,t)};var ha=function(){};ha.__name__=!0,ha.getString=function(e){for(var t=0,i=ha.content;t<i.length;){var n=i[t];if(++t,n.name==e)return null!=n.str?n.str:A.decode(n.data).toString()}return null};var Y=function(e){var t=this;this.id=setInterval(function(){t.run()},e)};Y.__name__=!0,Y.delay=function(e,t){var i=new Y(t);return i.run=function(){i.stop(),e()},i},Y.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Y};var w=function(e){this.length=e.byteLength,this.b=new ra(e),this.b.bufferValue=e,e.hxBytes=this,e.bytes=this.b};w.__name__=!0,w.alloc=function(e){return new w(new sa(e))},w.ofString=function(e){for(var t=[],i=0;i<e.length;){var n=q.fastCodeAt(e,i++);n>=55296&&56319>=n&&(n=n-55232<<10|1023&q.fastCodeAt(e,i++)),127>=n?t.push(n):(2047>=n?t.push(192|n>>6):(65535>=n?t.push(224|n>>12):(t.push(240|n>>18),t.push(128|n>>12&63)),t.push(128|n>>6&63)),t.push(128|63&n))}return new w(new ra(t).buffer)},w.prototype={get:function(e){return this.b[e]},set:function(e,t){this.b[e]=255&t},getString:function(e,t){if(0>e||0>t||e+t>this.length)throw new n(B.OutsideBounds);for(var i="",o=this.b,a=String.fromCharCode,r=e,s=e+t;s>r;){var l=o[r++];if(128>l){if(0==l)break;i+=a(l)}else if(224>l)i+=a((63&l)<<6|127&o[r++]);else if(240>l)var d=o[r++],i=i+a((31&l)<<12|(127&d)<<6|127&o[r++]);else var d=o[r++],c=o[r++],l=(15&l)<<18|(127&d)<<12|(127&c)<<6|127&o[r++],i=i+a((l>>10)+55232),i=i+a(1023&l|56320)}return i},toString:function(){return this.getString(0,this.length)},__class__:w};var A=function(){};A.__name__=!0,A.encode=function(e,t){null==t&&(t=!0);var i=new Z(A.BYTES).encodeBytes(e).toString();if(t)switch(e.length%3){case 1:i+="==";break;case 2:i+="="}return i},A.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new Z(A.BYTES).decodeBytes(w.ofString(e))};var Z=function(e){for(var t=e.length,i=1;t>1<<i;)i++;if(i>8||t!=1<<i)throw new n("BaseCode : base length must be a power of two.");this.base=e,this.nbits=i};Z.__name__=!0,Z.prototype={encodeBytes:function(e){for(var t=this.nbits,i=this.base,n=8*e.length/t|0,o=w.alloc(n+(0==8*e.length%t?0:1)),a=0,r=0,s=(1<<t)-1,l=0,d=0;n>d;){for(;t>r;)r+=8,a<<=8,a|=e.get(l++);r-=t,o.set(d++,i.b[a>>r&s])}return r>0&&o.set(d++,i.b[a<<t-r&s]),o},initTable:function(){for(var e=[],t=0;256>t;){var i=t++;e[i]=-1}for(t=0,i=this.base.length;i>t;){var n=t++;e[this.base.b[n]]=n}this.tbl=e},decodeBytes:function(e){var t=this.nbits;null==this.tbl&&this.initTable();for(var i=this.tbl,o=e.length*t>>3,a=w.alloc(o),r=0,s=0,l=0,d=0;o>d;){for(;8>s;){var s=s+t,r=r<<t,c=i[e.get(l++)];if(-1==c)throw new n("BaseCode : invalid encoded char");r|=c}s-=8,a.set(d++,r>>s&255)}return a},__class__:Z};var K=function(){};K.__name__=!0,K.encode=function(e){var t=new K;return e=t.doEncode(K.str2blks(e)),t.hex(e)},K.str2blks=function(e){for(var t=(e.length+8>>6)+1,i=[],n=16*t,o=0;n>o;){var a=o++;i[a]=0}for(n=0;n<e.length;)i[n>>2]|=l.cca(e,n)<<(8*e.length+n)%4*8,n++;return i[n>>2]|=128<<(8*e.length+n)%4*8,e=8*e.length,t=16*t-2,i[t]=255&e,i[t]|=(e>>>8&255)<<8,i[t]|=(e>>>16&255)<<16,i[t]|=(e>>>24&255)<<24,i},K.prototype={bitOR:function(e,t){return(e>>>1|t>>>1)<<1|1&e|1&t},bitXOR:function(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t},bitAND:function(e,t){return(e>>>1&t>>>1)<<1|1&e&t&1},addme:function(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i},hex:function(e){for(var t="",i=0;i<e.length;){var n=e[i];++i;for(var o=0;4>o;)var a=o++,t=t+("0123456789abcdef".charAt(n>>8*a+4&15)+"0123456789abcdef".charAt(n>>8*a&15))}return t},rol:function(e,t){return e<<t|e>>>32-t},cmn:function(e,t,i,n,o,a){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(n,a)),o),i)},ff:function(e,t,i,n,o,a,r){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(~t,n)),e,t,o,a,r)},gg:function(e,t,i,n,o,a,r){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(i,~n)),e,t,o,a,r)},hh:function(e,t,i,n,o,a,r){return this.cmn(this.bitXOR(this.bitXOR(t,i),n),e,t,o,a,r)},ii:function(e,t,i,n,o,a,r){return this.cmn(this.bitXOR(i,this.bitOR(t,~n)),e,t,o,a,r)},doEncode:function(e){for(var t=1732584193,i=-271733879,n=-1732584194,o=271733878,a=0;a<e.length;)var r=t,s=i,l=n,d=o,t=this.ff(t,i,n,o,e[a],7,-680876936),o=this.ff(o,t,i,n,e[a+1],12,-389564586),n=this.ff(n,o,t,i,e[a+2],17,606105819),i=this.ff(i,n,o,t,e[a+3],22,-1044525330),t=this.ff(t,i,n,o,e[a+4],7,-176418897),o=this.ff(o,t,i,n,e[a+5],12,1200080426),n=this.ff(n,o,t,i,e[a+6],17,-1473231341),i=this.ff(i,n,o,t,e[a+7],22,-45705983),t=this.ff(t,i,n,o,e[a+8],7,1770035416),o=this.ff(o,t,i,n,e[a+9],12,-1958414417),n=this.ff(n,o,t,i,e[a+10],17,-42063),i=this.ff(i,n,o,t,e[a+11],22,-1990404162),t=this.ff(t,i,n,o,e[a+12],7,1804603682),o=this.ff(o,t,i,n,e[a+13],12,-40341101),n=this.ff(n,o,t,i,e[a+14],17,-1502002290),i=this.ff(i,n,o,t,e[a+15],22,1236535329),t=this.gg(t,i,n,o,e[a+1],5,-165796510),o=this.gg(o,t,i,n,e[a+6],9,-1069501632),n=this.gg(n,o,t,i,e[a+11],14,643717713),i=this.gg(i,n,o,t,e[a],20,-373897302),t=this.gg(t,i,n,o,e[a+5],5,-701558691),o=this.gg(o,t,i,n,e[a+10],9,38016083),n=this.gg(n,o,t,i,e[a+15],14,-660478335),i=this.gg(i,n,o,t,e[a+4],20,-405537848),t=this.gg(t,i,n,o,e[a+9],5,568446438),o=this.gg(o,t,i,n,e[a+14],9,-1019803690),n=this.gg(n,o,t,i,e[a+3],14,-187363961),i=this.gg(i,n,o,t,e[a+8],20,1163531501),t=this.gg(t,i,n,o,e[a+13],5,-1444681467),o=this.gg(o,t,i,n,e[a+2],9,-51403784),n=this.gg(n,o,t,i,e[a+7],14,1735328473),i=this.gg(i,n,o,t,e[a+12],20,-1926607734),t=this.hh(t,i,n,o,e[a+5],4,-378558),o=this.hh(o,t,i,n,e[a+8],11,-2022574463),n=this.hh(n,o,t,i,e[a+11],16,1839030562),i=this.hh(i,n,o,t,e[a+14],23,-35309556),t=this.hh(t,i,n,o,e[a+1],4,-1530992060),o=this.hh(o,t,i,n,e[a+4],11,1272893353),n=this.hh(n,o,t,i,e[a+7],16,-155497632),i=this.hh(i,n,o,t,e[a+10],23,-1094730640),t=this.hh(t,i,n,o,e[a+13],4,681279174),o=this.hh(o,t,i,n,e[a],11,-358537222),n=this.hh(n,o,t,i,e[a+3],16,-722521979),i=this.hh(i,n,o,t,e[a+6],23,76029189),t=this.hh(t,i,n,o,e[a+9],4,-640364487),o=this.hh(o,t,i,n,e[a+12],11,-421815835),n=this.hh(n,o,t,i,e[a+15],16,530742520),i=this.hh(i,n,o,t,e[a+2],23,-995338651),t=this.ii(t,i,n,o,e[a],6,-198630844),o=this.ii(o,t,i,n,e[a+7],10,1126891415),n=this.ii(n,o,t,i,e[a+14],15,-1416354905),i=this.ii(i,n,o,t,e[a+5],21,-57434055),t=this.ii(t,i,n,o,e[a+12],6,1700485571),o=this.ii(o,t,i,n,e[a+3],10,-1894986606),n=this.ii(n,o,t,i,e[a+10],15,-1051523),i=this.ii(i,n,o,t,e[a+1],21,-2054922799),t=this.ii(t,i,n,o,e[a+8],6,1873313359),o=this.ii(o,t,i,n,e[a+15],10,-30611744),n=this.ii(n,o,t,i,e[a+6],15,-1560198380),i=this.ii(i,n,o,t,e[a+13],21,1309151649),t=this.ii(t,i,n,o,e[a+4],6,-145523070),o=this.ii(o,t,i,n,e[a+11],10,-1120210379),n=this.ii(n,o,t,i,e[a+2],15,718787259),i=this.ii(i,n,o,t,e[a+9],21,-343485551),t=this.addme(t,r),i=this.addme(i,s),n=this.addme(n,l),o=this.addme(o,d),a=a+16;return[t,i,n,o]},__class__:K};var L=function(){this.h={}};L.__name__=!0,L.__interfaces__=[N],L.prototype={set:function(e,t){null!=r[e]?this.setReserved(e,t):this.h[e]=t},get:function(e){return null!=r[e]?this.getReserved(e):this.h[e]},setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},remove:function(e){if(null!=r[e]){if(e="$"+e,null==this.rh||!this.rh.hasOwnProperty(e))return!1;delete this.rh[e]}else{if(!this.h.hasOwnProperty(e))return!1;delete this.h[e]}return!0},keys:function(){var e=this.arrayKeys();return l.iter(e)},arrayKeys:function(){var e,t=[];for(e in this.h)this.h.hasOwnProperty(e)&&t.push(e);if(null!=this.rh)for(e in this.rh)36==e.charCodeAt(0)&&t.push(e.substr(1));return t},__class__:L};var B={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:["Blocked",0]};B.Blocked.toString=I,B.Blocked.__enum__=B,B.Overflow=["Overflow",1],B.Overflow.toString=I,B.Overflow.__enum__=B,B.OutsideBounds=["OutsideBounds",2],B.OutsideBounds.toString=I,B.OutsideBounds.__enum__=B,B.Custom=function(e){return e=["Custom",3,e],e.__enum__=B,e.toString=I,e};var n=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,n)};n.__name__=!0,n.__super__=Error,n.prototype=Ca(Error.prototype,{__class__:n});var m=function(){};m.__name__=!0,m.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")},m.__trace=function(e,t){var i;if(i=null!=t?t.fileName+":"+t.lineNumber+": ":"",i+=m.__string_rec(e,""),null!=t&&null!=t.customParams)for(var n=0,o=t.customParams;n<o.length;){var a=o[n];++n,i+=","+m.__string_rec(a,"")}var r;"undefined"!=typeof document&&null!=(r=document.getElementById("haxe:trace"))?r.innerHTML+=m.__unhtml(i)+"<br/>":"undefined"!=typeof Aa&&null!=Aa.log&&Aa.log(i)},m.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;return null!=t?t:(e=m.__nativeClassName(e),null!=e?m.__resolveNativeClass(e):null)},m.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];i=e[0]+"(",t+="	";for(var o=2,a=e.length;a>o;)var r=o++,i=2!=r?i+(","+m.__string_rec(e[r],t)):i+m.__string_rec(e[r],t);return i+")"}for(i=e.length,o="[",t+="	",a=0;i>a;)r=a++,o+=(r>0?",":"")+m.__string_rec(e[r],t);return o+"]"}try{o=e.toString}catch(s){return s instanceof n&&(s=s.val),"???"}if(null!=o&&o!=Object.toString&&"function"==typeof o&&(i=e.toString(),"[object Object]"!=i))return i;i=null,o="{\n",t+="	",a=null!=e.hasOwnProperty;for(i in e)a&&!e.hasOwnProperty(i)||"prototype"==i||"__class__"==i||"__super__"==i||"__interfaces__"==i||"__properties__"==i||(2!=o.length&&(o+=", \n"),o+=t+i+" : "+m.__string_rec(e[i],t));return t=t.substring(1),o+("\n"+t+"}");case"function":return"<function>";case"string":return e;default:return String(e)}},m.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var n=0,o=i.length;o>n;){var a=n++,a=i[a];if(a==t||m.__interfLoop(a,t))return!0}return m.__interfLoop(e.__super__,t)},m.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Ka:return(0|e)===e;case Ga:return"number"==typeof e;case Ha:return"boolean"==typeof e;case String:return"string"==typeof e;case Array:return e instanceof Array&&null==e.__enum__;case La:return!0;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t||m.__interfLoop(m.getClass(e),t))return!0}else if("object"==typeof t&&m.__isNativeObj(t)&&e instanceof t)return!0;return t==Ma&&null!=e.__name__||t==Na&&null!=e.__ename__?!0:e.__enum__==t}},m.__nativeClassName=function(e){return e=m.__toStr.call(e).slice(8,-1),"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},m.__isNativeObj=function(e){return null!=m.__nativeClassName(e)},m.__resolveNativeClass=function(e){return Ba[e]};var J=function(){};J.__name__=!0,J.getLocalStorage=function(){try{var e=window.localStorage;return e.getItem(""),e}catch(t){return t instanceof n&&(t=t.val),null}},J.getSessionStorage=function(){try{var e=window.sessionStorage;return e.getItem(""),e}catch(t){return t instanceof n&&(t=t.val),null}},J.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw new n("Unable to create XMLHttpRequest object.")};var H=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{this.a=[];for(var t=0;e>t;){var i=t++;this.a[i]=0}this.byteLength=e}};H.__name__=!0,H.sliceImpl=function(e,t){var i=new ra(this,e,null==t?null:t-e),n=new sa(i.byteLength);return new ra(n).set(i),n},H.prototype={slice:function(e,t){return new H(this.a.slice(e,t))},__class__:H};var O=function(){};O.__name__=!0,O._new=function(e,t,i){if("number"==typeof e){for(i=[],t=0;e>t;){var o=t++;i[o]=0}i.byteLength=i.length,i.byteOffset=0,i.buffer=new H(i)}else if(m.__instanceof(e,H))null==t&&(t=0),null==i&&(i=e.byteLength-t),i=0==t?e.a:e.a.slice(t,t+i),i.byteLength=i.length,i.byteOffset=t,i.buffer=e;else{if(!(e instanceof Array&&null==e.__enum__))throw new n("TODO "+k.string(e));i=e.slice(),i.byteLength=i.length,i.byteOffset=0,i.buffer=new H(i)}return i.subarray=O._subarray,i.set=O._set,i},O._set=function(e,t){if(m.__instanceof(e.buffer,H)){if(e.byteLength+t>this.byteLength)throw new n("set() outside of range");for(var i=0,o=e.byteLength;o>i;){var a=i++;this[a+t]=e[a]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new n("TODO");if(e.length+t>this.byteLength)throw new n("set() outside of range");for(i=0,o=e.length;o>i;)a=i++,this[a+t]=e[a]}},O._subarray=function(e,t){var i=O._new(this.slice(e,t));return i.byteOffset=e,i};var x=function(){};x.__name__=!0,x.prototype={__class__:x};var ia=function(e){this.prefix=e};ia.__name__=!0,ia.__interfaces__=[x],ia.prototype={encode:function(e){return q.startsWith(e,this.prefix)||(e=this.prefix+e),e},decode:function(e){return q.startsWith(e,this.prefix)&&(e=l.substr(e,this.prefix.length,null)),e},__class__:ia};var R=function(e,t){null==t&&(t=""),this.obfuscate=new C(e),this.prefixer=new ia(t)};R.__name__=!0,R.__interfaces__=[x],R.fromUrl=function(e,t){null==t&&(t="");var i=new ia(t).decode(e),i=u.getTopLevelDomain(i);return new R(i,t)},R.prototype={encode:function(e){return e=this.obfuscate.encode(e),this.prefixer.encode(e)},decode:function(e){return e=this.prefixer.decode(e),this.obfuscate.decode(e)},__class__:R};var aa=F.secretmedia.sdk.SdkJs=function(e,t,i,n,o){null==o&&(o=""),null==n&&(n=""),null==i&&(i=!1),this.ppt=new ma(e,t,i,n,o)};aa.__name__=!0,aa.main=function(){v.overrideTrace()},aa.prototype={unblock:function(e,t){this.ppt.unblock(e,t)},proxify:function(e){return this.ppt.proxify(e)},__class__:aa},N=F.SMSdk=function(e,t,i,n,o){aa.call(this,e,t,i,n,o)},N.__name__=!0,N.main=function(){},N.__super__=aa,N.prototype=Ca(aa.prototype,{__class__:N});var ba=function(e,t){null==t&&(t=""),this.config=e,this.prefix=t};ba.__name__=!0,ba.fromAppKey=function(e,t){null==t&&(t="");var i=ta.decode(e);return new ba({gitHash:pa.gitHash,publisherId:i[d.unmangle("_62")],sdkVersion:"1.0.0",proxyDomain:i[d.unmangle("_55")]},t)},ba.prototype={getConfigUrl:function(){var e={};d.set("_57",e,this.config.publisherId),d.set("_55",e,this.config.proxyDomain),d.set("_58",e,this.config.sdkVersion),d.set("_59",e,this.config.gitHash);var t=d.unmangle("_60");return d.set("_61",e,t),e=ua.encode(e),this.prefix+e},parseConfig:function(e){return va.decode(e)},getProxy:function(e){return new R(this.config.proxyDomain,this.prefix)},__class__:ba};var S={__ename__:!0,__constructs__:["InvalidAbsoluteUrl","InvalidScheme","InvalidSubDomain"],InvalidAbsoluteUrl:function(e){return e=["InvalidAbsoluteUrl",0,e],e.__enum__=S,e.toString=I,e},InvalidScheme:function(e){return e=["InvalidScheme",1,e],e.__enum__=S,e.toString=I,e},InvalidSubDomain:function(e){return e=["InvalidSubDomain",2,e],e.__enum__=S,e.toString=I,e}},d={__name__:!0,_new:function(e){return e},unmangle:function(e){return d.map[e]},set:function(e,t,i){return t[d.unmangle(e)]=i}},u=function(){};u.__name__=!0,u.isSpecial=function(e){for(var t=0,i=u.SPECIAL_PREFIXES;t<i.length;){var n=i[t];if(++t,0==e.indexOf(n))return!0}return!1},u.makeAbsolute=function(e,t){if(""==e)return t;if(u.isSpecial(e))return e;var i,o=e.indexOf("?");i=o>=0?l.substr(e,o,null):null;var a;a=null!=i?l.substr(e,0,o):e;var o=a.indexOf("//"),r=a.indexOf("/");if(o>0&&o==r)return e;var r=t.indexOf("//"),s=t.indexOf("/");if(0>=r||r!=s)throw new n(S.InvalidAbsoluteUrl(t));if(0==o)return l.substr(t,0,r)+e;var o=l.substr(t,0,r),s=l.substr(t,r+2,null),r=s.indexOf("/"),r=0>r?s:l.substr(s,0,r),s=l.substr(s,r.length+1,null),d=s.indexOf("?"),s=(null!=(d>=0?l.substr(s,d,null):null)?l.substr(s,0,d):s).split("/");for(s.pop(),a=a.split("/"),null!=i&&(d=a.pop(),a.push(d+i)),i=""==a[0]?[]:s.slice(0),s=0;s<a.length;)switch(d=a[s],++s,d){case"..":i.pop();break;case".":break;default:i.push(d)}return""!=i[0]&&i.unshift(""),o+"//"+r+i.join("/")},u.getDomain=function(e){var t=e.indexOf("//");if(0>t||t!=e.indexOf("/"))throw new n(S.InvalidAbsoluteUrl(e));return e=l.substr(e,t+2,null),t=e.indexOf("/"),t>0?l.substr(e,0,t):e},u.getTopLevelDomain=function(e){return u.getDomain(e).split(".").slice(-2).join(".")},u.getExtension=function(e){var t=e.indexOf("?");return t>-1&&(e=l.substr(e,0,t)),e=e.split("."),1<e.length?e.pop():""},u.current=function(){return window.document.location.href};var T=function(){this.nextId=0,this.instances=new L,this.callbacks=new L,v.overrideTrace()};T.__name__=!0,T.prototype={callCallback:function(e,t){try{var i=this.callbacks.get(e);if(null!=i)return h.trace(d.unmangle("_125")+k.string(i.fun)+d.unmangle("_9")+k.string(t),{fileName:"BridgeBase.hx",lineNumber:87,className:"secretmedia.asbridge.BridgeBase",methodName:"callCallback"}),this.callbacks.remove(e),i.fun.apply(i.scope,t)}catch(o){o instanceof n&&(o=o.val),h.trace(d.unmangle("_126")+k.string(o)+d.unmangle("_127")+e+d.unmangle("_128")+k.string(t)+")",{fileName:"BridgeBase.hx",lineNumber:93,className:"secretmedia.asbridge.BridgeBase",methodName:"callCallback"})}return null},createCallback:function(e,t){var i=d.unmangle("_129")+this.nextId++ +"_"+Math.round(1e4*Math.random());return h.trace(d.unmangle("_130")+i,{fileName:"BridgeBase.hx",lineNumber:107,className:"secretmedia.asbridge.BridgeBase",methodName:"createCallback"}),this.callbacks.set(i,{scope:e,fun:t}),i},addInstance:function(e){var t=d.unmangle("_131")+this.nextId++ +"_"+Math.round(1e4*Math.random());return h.trace(d.unmangle("_132")+t,{fileName:"BridgeBase.hx",lineNumber:124,className:"secretmedia.asbridge.BridgeBase",methodName:"addInstance"}),this.instances.set(t,e),t},findInstance:function(e){return this.instances.get(e)},__class__:T};var ca=F.secretmedia.asbridge.BridgeToAs=function(){this.loadedCbk=[],T.call(this),this.bridgeName="_"+Math.floor(1e5*Math.random()),t.setField(window,this.bridgeName,this)};ca.__name__=!0,ca.main=function(){},ca.__super__=T,ca.prototype=Ca(T.prototype,{loadSwf:function(e,t,i){var n=this;if(h.trace(e,{fileName:"BridgeToAs.hx",lineNumber:45,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),null!=this.objectTag)h.trace(d.unmangle("_107"),{fileName:"BridgeToAs.hx",lineNumber:47,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),t();else if(this.loadedCbk.push({success:t,timeout:i}),null==this.flashLoader){this.flashLoader=new wa,t=new L,i=d.unmangle("_108");var o=d.unmangle("_109");null!=r[i]?t.setReserved(i,o):t.h[i]=o,i=d.unmangle("_110"),o=d.unmangle("_111"),null!=r[i]?t.setReserved(i,o):t.h[i]=o,i=d.unmangle("_112"),null!=r[i]?t.setReserved(i,"1"):t.h[i]="1",i=d.unmangle("_113"),null!=r[i]?t.setReserved(i,"1"):t.h[i]="1",i=new L,i.set(T.FLASHVAR_BRIDGE_NAME,this.bridgeName);var a=this.flashLoader.createSwfObject(e,""+this.bridgeName+d.unmangle("_115"),t,t,i),s=Y.delay(function(){for(h.trace(d.unmangle("_116")+2e3,{fileName:"BridgeToAs.hx",lineNumber:66,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),window.document.body.removeChild(a);0<n.loadedCbk.length;)n.loadedCbk.shift().timeout()},2e3);this.onFlashLoaded=function(){for(h.trace(d.unmangle("_117")+k.string(a),{fileName:"BridgeToAs.hx",lineNumber:71,className:"secretmedia.asbridge.BridgeToAs",methodName:"loadSwf"}),n.objectTag=a,s.stop();0<n.loadedCbk.length;)n.loadedCbk.shift().success()},window.document.body.appendChild(a)}},callAsCallback:function(e,t){h.trace(this.bridgeName,{fileName:"BridgeToAs.hx",lineNumber:88,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsCallback",customParams:[e,t]});for(var i=0,n=t.length;n>i;){var o=i++;"string"==typeof t[o]&&(t[o]="'"+k.string(t[o])+"'")}return this.callAsMethod(d.unmangle("_121"),[e,t])},callAsMethod:function(e,i){if(null==i&&(i=[]),null==this.objectTag){var o=window.document.getElementsByTagName(d.unmangle("_72"));this.objectTag=this.findMyFlash(o),null==this.objectTag&&(o=window.document.getElementsByTagName(d.unmangle("_118")),this.objectTag=this.findMyFlash(o))}if(null!=this.objectTag&&null!=t.field(this.objectTag,e)){h.trace(this.objectTag,{fileName:"BridgeToAs.hx",lineNumber:117,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod",customParams:[e,t.field(this.objectTag,e)]});try{return t.callMethod(this.objectTag,t.field(this.objectTag,e),i)}catch(a){a instanceof n&&(a=a.val),h.trace(d.unmangle("_119")+k.string(a),{fileName:"BridgeToAs.hx",lineNumber:123,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod"})}}else h.trace(d.unmangle("_120")+this.bridgeName+")",{fileName:"BridgeToAs.hx",lineNumber:127,className:"secretmedia.asbridge.BridgeToAs",methodName:"callAsMethod",customParams:[this.objectTag,e]});return null},findMyFlash:function(e){for(var i=0;i<e.length;){var n=e[i];if(++i,null!=t.field(n,this.bridgeName))return n}return null},__class__:ca});var wa=function(){};wa.__name__=!0,wa.prototype={createSwfObject:function(e,i,n,o,a){for(var s="",l=a.keys();l.hasNext();)var c=l.next(),s=s+(c+"="+q.urlEncode(null!=r[c]?a.getReserved(c):a.h[c])+"&");for(a=d.unmangle("_94"),null!=r[a]?n.setReserved(a,s):n.h[a]=s,a=d.unmangle("_94"),null!=r[a]?o.setReserved(a,s):o.h[a]=s,s=d.unmangle("_61"),a=d.unmangle("_95"),null!=r[s]?n.setReserved(s,a):n.h[s]=a,t.hasField(window,d.unmangle("_96"))?(s=d.unmangle("_97"),a=d.unmangle("_98"),null!=r[s]?n.setReserved(s,a):n.h[s]=a,s=d.unmangle("_27"),null!=r[s]?o.setReserved(s,e):o.h[s]=e):(s=d.unmangle("_99"),null!=r[s]?n.setReserved(s,e):n.h[s]=e),s=e="",a=n.keys();a.hasNext();)l=a.next(),e+=" "+l+d.unmangle("_100")+(null!=r[l]?n.getReserved(l):n.h[l])+'"';for(n=o.keys();n.hasNext();)a=n.next(),s+=" "+a+d.unmangle("_100")+(null!=r[a]?o.getReserved(a):o.h[a])+'"';for(i=d.unmangle("_101")+i+'"'+e+">",n=o.keys();n.hasNext();)e=n.next(),i+=d.unmangle("_102")+e+d.unmangle("_103")+(null!=r[e]?o.getReserved(e):o.h[e])+d.unmangle("_104");return i+=d.unmangle("_105"),o=window.document.createElement(d.unmangle("_106")),o.innerHTML=i,i=o.firstChild,o.removeChild(i),i},__class__:wa};var ta=function(){};ta.__name__=!0,ta.encode=function(e){return e=JSON.stringify(e),A.encode(w.ofString(e))},ta.decode=function(e){return e=A.decode(e).toString(),JSON.parse(e)};var va=function(){};va.__name__=!0,va.decode=function(e){return e=A.decode(e.substring(15)).toString(),JSON.parse(e)},va.encode=function(e){throw new n(d.unmangle("_42"))};var ua=function(){};ua.__name__=!0,ua.encode=function(e){var t=JSON.stringify(e),t=(new D).encode(t);return d.unmangle("_54")+U.string(V.BASE32,30)+"."+e[d.unmangle("_55")]+"/"+t},ua.decode=function(e){var t=e.indexOf("?");for(t>=0&&(e=e.substring(0,t)),e=e.split("/");""==e[0];)e.shift();return e=(new D).decode(e.slice(1).join("/")),JSON.parse(e)};var C=function(e){if(2!=e.split(".").length)throw new n("Invalid proxy domain "+e+" (should be a top level domain, with 1 dot only)");this.proxyDomain=e,this.hosts=new na,this.paths=new D,this.queryStrings=new ja};C.__name__=!0,C.__interfaces__=[x],C.chunkSubdomain=function(e){if(63<=e.length){for(var t=[],i=0;i<e.length;)t.push(l.substr(e,i,60)),i+=60;return t.join(".")}return e},C.prototype={isEncoded:function(e){return e=u.getDomain(e),q.endsWith(e,this.proxyDomain)},encode:function(e){if(u.isSpecial(e)||this.isEncoded(e))return e;var t=e.indexOf("#"),i="";t>-1&&(i=e.substring(t),e=e.substring(0,t));for(var t=e.indexOf(d.unmangle("_245"))+d.unmangle("_245").length,t=e.indexOf("/",t),o=e.substring(0,t),t=e.substring(t),a=2*(Math.round(43*Math.random())+6),r=null,s=C.SCHEMES.keys();s.hasNext();){var c=s.next(),p=c+d.unmangle("_245");if(0==e.indexOf(p)){r=k.string(a+C.SCHEMES.get(c)),o=o.substring(p.length);break}}if(null==r)throw new n(S.InvalidScheme(e));return e=this.hosts.encode(r+o),e=C.chunkSubdomain(e),o="",a=d.unmangle("_246"),r=t.indexOf(a),r>0?(s=t.substring(0,r+a.length),o=l.substr(t,r+a.length,null),0<o.length&&(o=l.substr(o,0,1)+this.queryStrings.encode(l.substr(o,1,null))),a=this.paths.encode(s)+a):a=this.paths.encode(t),t=u.getExtension(t),-1<l.indexOf(C.KEEP_EXTENSIONS,t,0)&&(a+="."+t),d.unmangle("_247")+e+"."+this.proxyDomain+"/"+a+o+i},decode:function(e){if(!this.isEncoded(e))return e;var t=e.indexOf("#"),i="";t>-1&&(i=e.substring(t),e=e.substring(0,t));var o=e.indexOf(d.unmangle("_245"))+d.unmangle("_245").length,a=e.indexOf("/",o)+1,t=e.substring(0,a-1),t=t.substring(o),t=t.split(".");if(3>t.length)throw new n(S.InvalidSubDomain(e));t.pop(),t.pop();for(var t=t.join(""),t=this.hosts.decode(t),o=k.parseInt(t.substring(0,2)),r="",s=C.SCHEMES.keys();s.hasNext();){var c=s.next();if(o%2==C.SCHEMES.get(c)){r=c;break}}if(""==r)throw new n(S.InvalidScheme(e));return t=r+d.unmangle("_245")+t.substring(2),e=e.substring(a),a="",o=e.indexOf("?"),o>=0&&(a=e.substring(o),a=l.substr(a,0,1)+this.queryStrings.decode(l.substr(a,1,null)),e=e.substring(0,o)),o=e.indexOf("."),o>=0&&(e=e.substring(0,o)),e=this.paths.decode(e),t+e+a+i},__class__:C};var V=function(){};V.__name__=!0;var na=function(e){null==e&&(e=-1),this.keys=new oa(d.unmangle("_230"),d.unmangle("_231")),this.seed=-1==e?(new Date).getHours():e};na.__name__=!0,na.__interfaces__=[x],na.prototype={encode:function(e){var t=V.BASE32.charAt(this.seed%24);return e=new W(this.keys,t).encode(e),t+M.encode(e,!1).toLowerCase()},decode:function(e){var t=l.substr(e,0,1),t=new W(this.keys,t);return e=l.substr(e,1,null).toUpperCase(),t.decode(M.decode(e,!1))},__class__:na};var oa=function(e,t){this.key=e,this.shared=t};oa.__name__=!0,oa.prototype={md5Pair:function(e){return e=K.encode(e+this.shared),{a:da.parseHex(e.charAt(0)),b:da.parseHex(e.charAt(1))+1}},__class__:oa};var D=function(){this.keys=new oa(d.unmangle("_45"),d.unmangle("_46"))};D.__name__=!0,D.__interfaces__=[x],D.prototype={encodeSpecialChars:function(e){for(var t=D.replacements.keys();t.hasNext();){var i=t.next(),n=D.replacements.get(i);e=q.replace(e,i,n[k.random(n.length)])}return e},decodeSpecialChars:function(e){for(var t=D.replacements.keys();t.hasNext();)for(var i=t.next(),n=0,o=D.replacements.get(i);n<o.length;){var a=o[n];++n,e=q.replace(e,a,i)}return e},encode:function(e){var t=U.string(V.BASE64,8),i=this.keys.md5Pair(t),n=new W(this.keys,t),t=t+U.string(V.BASE64,i.a),t=t+A.encode(n.encode(e),!1),t=t+U.string(V.BASE64,i.b);return this.encodeSpecialChars(t)},decode:function(e){e=this.decodeSpecialChars(e);var t=l.substr(e,0,8),i=this.keys.md5Pair(t),t=new W(this.keys,t),n=8+i.a;return e=l.substr(e,n,e.length-n-i.b),t.decode(A.decode(e,!1)).toString()},__class__:D};var ja=function(){};ja.__name__=!0,ja.__interfaces__=[x],ja.prototype={encode:function(e){return e.split("&amp;").map(function(e){for(var t="",i=0,n=e.length;n>i;)var o=i++,a=e.charAt(o),t=0!=o&&0==o%3&&0>e.substring(o-2,o).indexOf("%")&&new X("^[a-zA-Z0-9]$","").match(a)?t+("%"+q.hex(l.cca(a,0),2)):t+a;return t}).join("&amp;")},decode:function(e){return e.split("&amp;").map(function(e){for(var t="",i=0;i<e.length;){var n=e.charAt(i);if("%"==n){var o=l.substr(e,i+1,2),o=da.decodeChar(o);null!=o&&new X("^[a-zA-Z0-9]$","").match(o)?(t+=o,i+=2):t+=n}else t+=n;i++}return t}).join("&amp;")},__class__:ja};var W=function(e,t){this.keys=e,this.salt=t};W.__name__=!0,W.prototype={encode:function(e){return e=[this.keys.key,e].join(":"),xa.encode(w.ofString(e),this.salt,this.keys.shared)},decode:function(e){if(e=xa.encode(e,this.salt,this.keys.shared).toString().split(":"),e[0]!=this.keys.key)throw new n(d.unmangle("_56"));return e.slice(1).join(":")},__class__:W};var M=function(){};M.__name__=!0,M.encode=function(e,t){null==t&&(t=!0);var i=new Z(M.BYTES).encodeBytes(e).toString();if(t&&0<i.length%8)for(var n=0,o=8-i.length%8;o>n;)n++,i+="=";return i},M.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==l.cca(e,e.length-1);)e=l.substr(e,0,-1);return new Z(M.BYTES).decodeBytes(w.ofString(e))};var da=function(){};da.__name__=!0,da.parseHex=function(e){return k.parseInt(d.unmangle("_47")+e)},da.encodeChar=function(e){return q.hex(l.cca(e,0),2)},da.decodeChar=function(e){return e=k.parseInt(d.unmangle("_47")+e),null==e?null:String.fromCharCode(e)};var U=function(){};U.__name__=!0,U["char"]=function(e){return e.charAt(k.random(e.length))},U.string=function(e,t){for(var i=[],n=0;t>n;)n++,i.push(e.charAt(k.random(e.length)));return i.join("")},U.pick=function(e){return e[k.random(e.length)]};var xa=function(){};xa.__name__=!0,xa.encode=function(e,t,i){for(var n=Math.floor(e.length/16),n=n+1,o="",a=0;n>a;)var r=a++,o=o+K.encode(t+r+K.encode(i));for(t=w.alloc(e.length),i=0,n=e.length;n>i;)a=i++,t.set(a,e.b[a]^l.cca(o,a));return t};var ya=function(){};ya.__name__=!0,ya.prototype={substitute:function(e,i,n){var o=d.unmangle(i);null==t.field(e,"_"+o)&&t.setField(e,"_"+o,t.field(e,o)),e[o]=function(){return h.trace(d.unmangle("_8")+o+d.unmangle("_9")+arguments[0],{fileName:"Interceptor.hx",lineNumber:32,className:"secretmedia.dom.Interceptor",methodName:"substitute"}),n(this,t.field(e,"_"+o),arguments)}},poll:function(e,t){var i=null,i=function(n){for(n=0;n<e.length;){var o=e[n];++n;for(var o=window.document.getElementsByTagName(o),a=0;a<o.length;){var r=o[a];++a,t(r)}}window.requestAnimationFrame(i)};i()},__class__:ya};var y=function(e,t,i){null==i&&(i=""),this.urls=new R(e,i),e=J.getLocalStorage(),i=null;var o=d.unmangle("_0");if(null!=e&&null!=e.getItem(o)?i=e.getItem(o):null!=t?this.whiteList=t:i=ha.getString(o),null!=i)try{this.whiteList=JSON.parse(i)}catch(a){a instanceof n&&(a=a.val),h.trace("VirtDom:: Error parsing the white list "+i,{fileName:"VirtDom.hx",lineNumber:85,className:"secretmedia.dom.VirtDom",methodName:"new"})}h.trace("VirtDom:: White list is now",{fileName:"VirtDom.hx",lineNumber:88,className:"secretmedia.dom.VirtDom",methodName:"new",customParams:[this.whiteList]})};y.__name__=!0,y.startVirtualDom=function(e,t,i){if(null==i&&(i=""),y.doOnlyOnce(window.document.getElementsByTagName("html")[0])){h.trace(d.unmangle("_5")+e,{fileName:"VirtDom.hx",lineNumber:42,className:"secretmedia.dom.VirtDom",methodName:"startVirtualDom"}),e=new y(e,t,i),t=new ya,i=window;var n;n=i[d.unmangle("_6")][d.unmangle("_7")],t.substitute(n,"_10",G(e,e.appendChildAndInsertBefore)),t.substitute(n,"_33",G(e,e.appendChildAndInsertBefore)),t.substitute(i[d.unmangle("_34")],"_35",G(e,e.createNewElement)),t.substitute(i[d.unmangle("_34")],"_37",G(e,e.postMessage)),t.poll([d.unmangle("_30"),d.unmangle("_25"),d.unmangle("_23"),d.unmangle("_24")],G(e,e.processPolledElement))}},y.callSuper=function(e,t,i){var o=null;try{o=t.apply(e,i)}catch(a){a instanceof n&&(a=a.val),h.trace(d.unmangle("_32"),{fileName:"VirtDom.hx",lineNumber:101,className:"secretmedia.dom.VirtDom",methodName:"callSuper"})}return o},y.doOnlyOnce=function(e){return null==Fa._1(e,d.unmangle("_3"))?(Fa._2(e,d.unmangle("_3"),d.unmangle("_4")),!0):!1},y.prototype={appendChildAndInsertBefore:function(e,t,i){return h.trace(d.unmangle("_11"),{fileName:"VirtDom.hx",lineNumber:115,className:"secretmedia.dom.VirtDom",methodName:"appendChildAndInsertBefore"}),i[0]=this.processElement(i[0]),y.callSuper(e,t,i)},createNewElement:function(e,t,i){return h.trace(d.unmangle("_36"),{fileName:"VirtDom.hx",lineNumber:129,className:"secretmedia.dom.VirtDom",methodName:"createNewElement"}),e=y.callSuper(window.document,t,i),this.processElement(e),e},postMessage:function(e,t,i){return h.trace(d.unmangle("_38"),{fileName:"VirtDom.hx",lineNumber:145,className:"secretmedia.dom.VirtDom",methodName:"postMessage"}),i[1]="*",y.callSuper(e,t,i)},processPolledElement:function(e){this.processElement(e,!0)},processElement:function(e,t){null==t&&(t=!1);try{var i;switch(e.nodeType){case 3:i=null;break;default:i=e.tagName.toUpperCase();
}if(i==d.unmangle("_23")){var o=e.src;if(this.changeSrc(e),t&&e.src!=o){var a=e.parentNode;a.removeChild(e);var r=window.document.createElement("script");r.src=o,a.insertBefore(r,a.firstChild),h.trace(d.unmangle("_22")+r.src,{fileName:"VirtDom.hx",lineNumber:182,className:"secretmedia.dom.VirtDom",methodName:"processElement"})}}else if(i==d.unmangle("_24"))this.changeSrc(e);else if(i==d.unmangle("_25")){var s=e.src;if(this.changeSrc(e),t&&e.src!=s){var l=e.parentNode;null!=l&&(l.insertBefore(e,l.firstChild),h.trace(d.unmangle("_22")+e.src,{fileName:"VirtDom.hx",lineNumber:196,className:"secretmedia.dom.VirtDom",methodName:"processElement"}))}}else i==d.unmangle("_30")&&this.processObject(e)}catch(c){c instanceof n&&(c=c.val),h.trace(d.unmangle("_31")+k.string(e),{fileName:"VirtDom.hx",lineNumber:206,className:"secretmedia.dom.VirtDom",methodName:"processElement"})}return e},isInWhiteList:function(e){if(1==this.whiteList[d.unmangle("_19")])return!0;if(null!=this.whiteList[d.unmangle("_20")])for(var t=0,i=this.whiteList[d.unmangle("_20")];t<i.length;){var n=i[t];if(++t,new X(n.url,"i").match(e))return!0}return h.trace(d.unmangle("_21")+e,{fileName:"VirtDom.hx",lineNumber:240,className:"secretmedia.dom.VirtDom",methodName:"isInWhiteList"}),!1},processUrl:function(e){return e=this.urls.encode(u.makeAbsolute(e,window.document.location.href)),h.trace(d.unmangle("_18")+e,{fileName:"VirtDom.hx",lineNumber:246,className:"secretmedia.dom.VirtDom",methodName:"processUrl"}),e},changeSrc:function(e){var t=e[d.unmangle("_12")];switch(t){case"":break;default:y.doOnlyOnce(e)&&this.isInWhiteList(t)&&(h.trace(d.unmangle("_13")+k.string(e)+" "+e.src,{fileName:"VirtDom.hx",lineNumber:255,className:"secretmedia.dom.VirtDom",methodName:"changeSrc"}),e.src=this.processUrl(e.src))}return e},processObject:function(e){var t=!1,i=e.data;if(""==i)for(var i=e.getElementsByTagName(d.unmangle("_26")),n=0;n<i.length;){var o=i[n];if(++n,o.name==d.unmangle("_27")&&y.doOnlyOnce(o)){this.isInWhiteList(o.value)&&(o.value=this.processUrl(o.value),t=!0,h.trace(d.unmangle("_28")+k.string(e)+" "+o.value,{fileName:"VirtDom.hx",lineNumber:277,className:"secretmedia.dom.VirtDom",methodName:"processObject"}));break}}else""!=i&&y.doOnlyOnce(e)&&this.isInWhiteList(e.data)&&(h.trace(d.unmangle("_13")+k.string(e)+" "+e.data,{fileName:"VirtDom.hx",lineNumber:285,className:"secretmedia.dom.VirtDom",methodName:"processObject"}),e.data=this.processUrl(e.data),t=!0);return t&&(t=e.getElementsByTagName(d.unmangle("_25")),0<t.length&&(t=t[0],h.trace(d.unmangle("_29")+k.string(e)+" "+k.string(t),{fileName:"VirtDom.hx",lineNumber:295,className:"secretmedia.dom.VirtDom",methodName:"processObject"}),this.changeSrc(t))),e},__class__:y},x=function(){},x.__name__=!0,x.prototype={__class__:x};var v=function(){};v.__name__=!0,v.__interfaces__=[x],v.overrideTrace=function(){var e=new v;return h.trace=G(e,e.trace),e},v.prototype={isDebug:function(){return this.eval(v.isDebugExpr)},trace:function(e,t){this.isDebug()&&this.call(v.traceFunction,Ea.toArray(e,t))},log:function(e,t){this.call(v.traceFunction,[e,t].filter(function(e){return null!=e}))},eval:function(a){return eval(a)},call:function(a,b){return eval("("+a+")").apply(null,[b])},__class__:v};var ka=function(e,t){null==t&&(t=!1),this.document=e,this.alwaysFire=t};ka.__name__=!0,ka.__interfaces__=[x],ka.prototype={log:function(e,i){if(null==i||!t.hasField(i,d.unmangle("_73"))||!t.hasField(i,d.unmangle("_74")))return h.trace(d.unmangle("_75"),{fileName:"FontLogger.hx",lineNumber:42,className:"secretmedia.logger.FontLogger",methodName:"log"});if(this.alwaysFire||1>100*Math.random()){var n=d.unmangle("_76")+e+"-"+k.string(i.clientId)+d.unmangle("_77")+k.string(i.appKey);this.send(n,i)}},trace:function(e,t){},send:function(e,t){var i=this.document.createElement("style");i.textContent=d.unmangle("_78")+e+d.unmangle("_79"),i.type=d.unmangle("_80"),this.document.head.appendChild(i)},__class__:ka};var Ea=function(){};Ea.__name__=!0,Ea.toArray=function(e,t){var i=[e];return null!=t&&(null!=t.customParams&&(i=i.concat(t.customParams)),i.unshift(""+t.fileName+":"+t.lineNumber+" "+t.className+d.unmangle("_86")+t.methodName)),i};var ea=function(e){this.strategy=e};ea.__name__=!0,ea.__interfaces__=[x],ea.send=function(e,t){null==t&&(t={}),null==t.location&&(t.location=window.document.location.href);var i=JSON.stringify(t),n=new ga(e);n.setPostData(i),n.request(!0)},ea.prototype={log:function(e,t){var i=d.unmangle("_63")+e,i=this.strategy.encode(i);ea.send(i,t)},trace:function(e,t){},__class__:ea};var za=function(){this.allowDetectionStateCache=!0,this.alwaysFireFontLogger=!1;var e=J.getLocalStorage();null!=e&&"true"==e.getItem(P.ENABLE_DEBUG)&&(this.alwaysFireFontLogger="true"==e.getItem(P.ALWAYS_FIRE_FONT_LOGGER),this.allowDetectionStateCache="false"!=e.getItem(P.ALLOW_DETECTION_STATE_CACHE))};za.__name__=!0,za.prototype={setDetectionState:function(e){var t=J.getSessionStorage();null!=t&&t.setItem(P.DETECTION_STATE,e)},getDetectionState:function(){if(0==this.allowDetectionStateCache)return null;var e=J.getSessionStorage();return null!=e?e.getItem(P.DETECTION_STATE):null},__class__:za};var P={__name__:!0},p={__name__:!0},Q=function(e){this.pingSwfUrl=e};Q.__name__=!0,Q.detectFlashPlayer=function(){if(null!=window.navigator.plugins&&0<window.navigator.plugins.length&&(t.hasField(window.navigator.plugins,d.unmangle("_154"))||t.hasField(window.navigator.plugins,d.unmangle("_155")))){var e=window.document.createElement(d.unmangle("_118"));t.setField(e,d.unmangle("_61"),d.unmangle("_95")),window.document.body.appendChild(e);var i="Pan"in e;return window.document.body.removeChild(e),i?(h.trace(d.unmangle("_157"),{fileName:"Detector.hx",lineNumber:171,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!0):(h.trace(d.unmangle("_156"),{fileName:"Detector.hx",lineNumber:168,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!1)}return h.trace(d.unmangle("_158"),{fileName:"Detector.hx",lineNumber:174,className:"secretmedia.pptjs.Detector",methodName:"detectFlashPlayer"}),!1},Q.isPptCompatible=function(){try{return null!=J.getSessionStorage()&&("undefined"!=typeof InstallTrigger||!!window.chrome&&!!window.chrome.webstore)}catch(e){return e instanceof n&&(e=e.val),!1}},Q.prototype={testDom:function(e){var t=!1;try{var i=window.document.createElement(d.unmangle("_106"));i.setAttribute(d.unmangle("_133"),e),i.setAttribute(d.unmangle("_134"),e),i.setAttribute(d.unmangle("_135"),d.unmangle("_136")),window.document.body.appendChild(i),t=0==i.offsetWidth||0==i.offsetHeight,window.document.body.removeChild(i)}catch(o){o instanceof n&&(o=o.val),h.trace(d.unmangle("_137"),{fileName:"Detector.hx",lineNumber:44,className:"secretmedia.pptjs.Detector",methodName:"testDom",customParams:[o]})}return h.trace(d.unmangle("_138")+e+d.unmangle("_139")+(null==t?"null":""+t),{fileName:"Detector.hx",lineNumber:46,className:"secretmedia.pptjs.Detector",methodName:"testDom"}),t},testUrls:function(e,t,i,n){var o=this;if(0<e.length){var a=e.shift();this.ping(a,function(){h.trace(d.unmangle("_144")+a,{fileName:"Detector.hx",lineNumber:58,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),o.pingFlash(a,function(){h.trace(d.unmangle("_148")+a,{fileName:"Detector.hx",lineNumber:60,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),o.testUrls(e,t,i,n)},function(){h.trace(d.unmangle("_149"),{fileName:"Detector.hx",lineNumber:63,className:"secretmedia.pptjs.Detector",methodName:"testUrls",customParams:[a]}),i(303)},function(){h.trace(d.unmangle("_150"),{fileName:"Detector.hx",lineNumber:68,className:"secretmedia.pptjs.Detector",methodName:"testUrls",customParams:[a]}),n(2)})},function(e){h.trace(d.unmangle("_151")+a,{fileName:"Detector.hx",lineNumber:72,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),i(303)},function(){h.trace(d.unmangle("_152")+a,{fileName:"Detector.hx",lineNumber:77,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),n(1)})}else h.trace(d.unmangle("_153"),{fileName:"Detector.hx",lineNumber:82,className:"secretmedia.pptjs.Detector",methodName:"testUrls"}),t()},ping:function(e,t,i,n){var o=new ga(e),a=!1,r=Y.delay(function(){h.trace(d.unmangle("_140"),{fileName:"Detector.hx",lineNumber:97,className:"secretmedia.pptjs.Detector",methodName:"ping"}),a=!0,o.cancel(),n()},2e3);o.onData=function(e){a||(t(),r.stop())},o.onError=function(e){h.trace(d.unmangle("_141")+e,{fileName:"Detector.hx",lineNumber:110,className:"secretmedia.pptjs.Detector",methodName:"ping"}),a||(i(e),r.stop())},o.onStatus=function(e){a||(h.trace(d.unmangle("_142")+e+d.unmangle("_143"),{fileName:"Detector.hx",lineNumber:118,className:"secretmedia.pptjs.Detector",methodName:"ping"}),o.cancel())},o.request()},pingFlash:function(e,t,i,n){var o=this;null==this.bridge&&(this.bridge=new ca),this.bridge.loadSwf(this.pingSwfUrl,function(){var a=o.bridge.createCallback(o.bridge,function(o){switch(h.trace(d.unmangle("_145")+o+d.unmangle("_127")+e+")",{fileName:"Detector.hx",lineNumber:136,className:"secretmedia.pptjs.Detector",methodName:"pingFlash"}),o){case d.unmangle("_122"):t();break;case d.unmangle("_123"):i();break;case d.unmangle("_124"):n()}});h.trace(d.unmangle("_146")+e+")",{fileName:"Detector.hx",lineNumber:143,className:"secretmedia.pptjs.Detector",methodName:"pingFlash"}),o.bridge.callAsMethod(d.unmangle("_147"),[e,a])},function(){n()})},start:function(e,t,i,n){1!=e.enable?(h.trace(d.unmangle("_159"),{fileName:"Detector.hx",lineNumber:204,className:"secretmedia.pptjs.Detector",methodName:"start"}),n(111)):this.testDom(e.divId)?(h.trace(d.unmangle("_160")+e.divId+")",{fileName:"Detector.hx",lineNumber:210,className:"secretmedia.pptjs.Detector",methodName:"start"}),i(302)):(h.trace(d.unmangle("_161")+e.divId+")",{fileName:"Detector.hx",lineNumber:214,className:"secretmedia.pptjs.Detector",methodName:"start"}),0!=e.testUrls?this.testUrls(e.urls,function(){h.trace(d.unmangle("_162"),{fileName:"Detector.hx",lineNumber:218,className:"secretmedia.pptjs.Detector",methodName:"start"}),t(402)},function(e){h.trace(d.unmangle("_163"),{fileName:"Detector.hx",lineNumber:222,className:"secretmedia.pptjs.Detector",methodName:"start"}),i(e)},function(e){h.trace(d.unmangle("_164"),{fileName:"Detector.hx",lineNumber:226,className:"secretmedia.pptjs.Detector",methodName:"start"}),n(e)}):(h.trace(d.unmangle("_165"),{fileName:"Detector.hx",lineNumber:231,className:"secretmedia.pptjs.Detector",methodName:"start"}),t(402)))},__class__:Q};var z={__ename__:!0,__constructs__:["NO_CONFIG_YET","CONSTRUCTOR_PARAM","LOADED"],NO_CONFIG_YET:["NO_CONFIG_YET",0]};z.NO_CONFIG_YET.toString=I,z.NO_CONFIG_YET.__enum__=z,z.CONSTRUCTOR_PARAM=["CONSTRUCTOR_PARAM",1],z.CONSTRUCTOR_PARAM.toString=I,z.CONSTRUCTOR_PARAM.__enum__=z,z.LOADED=["LOADED",2],z.LOADED.toString=I,z.LOADED.__enum__=z;var ma=F.secretmedia.pptjs.Ppt=function(e,t,i,o,a){if(null==a&&(a=""),null==o&&(o=""),null==i&&(i=!1),this.postLogger=this.fontLogger=null,this.initCallbacks=[],this.configProvenance=z.NO_CONFIG_YET,this.state=p.NONE,v.overrideTrace(),this.appKey=e,this.clientId=t,this.adBlockAlreadyDetected=i,this.prefix=a,this.browserStorageConfig=new za,this.fontLogger=new ka(window.document,this.browserStorageConfig.alwaysFireFontLogger),h.trace("hash: "+pa.gitHash+", appKey: "+e,{fileName:"Ppt.hx",lineNumber:184,className:"secretmedia.pptjs.Ppt",methodName:"new"}),Q.isPptCompatible()){try{this.context=ba.fromAppKey(e,a),this.publisherId=this.context.config.publisherId}catch(r){r instanceof n&&(r=r.val),this.state=p.DISABLED,h.trace("could not decrypt app key "+k.string(r),{fileName:"Ppt.hx",lineNumber:219,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.fontLogger.log(k.string(7),{appKey:e,clientId:t})}try{this.proxyDomain=this.context.config.proxyDomain,""!=o?(this.configProvenance=z.CONSTRUCTOR_PARAM,this.onConfigSuccess(o)):(this.configUrl=this.context.getConfigUrl(),this.loadConfig())}catch(r){r instanceof n&&(r=r.val),this.state=p.DISABLED,h.trace("could not make config file URL: "+k.string(r),{fileName:"Ppt.hx",lineNumber:244,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.fontLogger.log(k.string(8),{appKey:e,clientId:t})}}else h.trace("this browser is not supported",{fileName:"Ppt.hx",lineNumber:187,className:"secretmedia.pptjs.Ppt",methodName:"new"}),this.state=p.DISABLED,this.fontLogger.log(k.string(105),{appKey:e,clientId:t})};ma.__name__=!0,ma.main=function(){v.overrideTrace(),h.trace(d.unmangle("_188"),{fileName:"Ppt.hx",lineNumber:49,className:"secretmedia.pptjs.Ppt",methodName:"main"})},ma.prototype={callInitCallbacks:function(){h.trace(""+this.initCallbacks.length+d.unmangle("_178"),{fileName:"Ppt.hx",lineNumber:254,className:"secretmedia.pptjs.Ppt",methodName:"callInitCallbacks"});for(var e=0,t=this.initCallbacks;e<t.length;){var i=t[e];++e,i()}this.initCallbacks=[]},loadConfig:function(){this.state=p.INIT_PENDING,this.configProvenance=z.LOADED,h.trace(d.unmangle("_186"),{fileName:"Ppt.hx",lineNumber:268,className:"secretmedia.pptjs.Ppt",methodName:"loadConfig",customParams:[this.configUrl]});var e=new ga(this.configUrl);e.onData=G(this,this.onConfigSuccess),e.onError=G(this,this.onConfigError),e.request()},onConfigTimeout:function(){h.trace(d.unmangle("_185"),{fileName:"Ppt.hx",lineNumber:282,className:"secretmedia.pptjs.Ppt",methodName:"onConfigTimeout"}),this.state=p.DISABLED,this.callInitCallbacks()},onConfigTimeoutPingFlash:function(){h.trace(d.unmangle("_184"),{fileName:"Ppt.hx",lineNumber:294,className:"secretmedia.pptjs.Ppt",methodName:"onConfigTimeoutPingFlash"}),this.onConfigTimeout()},onConfigError:function(e){h.trace(d.unmangle("_187"),{fileName:"Ppt.hx",lineNumber:304,className:"secretmedia.pptjs.Ppt",methodName:"onConfigError",customParams:[e]}),this.state=p.OUR_DOMAIN_BLOCKED,this.ourDomainBlocked(null,202)},onConfigErrorPingFlash:function(){h.trace(d.unmangle("_181"),{fileName:"Ppt.hx",lineNumber:317,className:"secretmedia.pptjs.Ppt",methodName:"onConfigErrorPingFlash"}),this.state=p.OUR_DOMAIN_BLOCKED,this.ourDomainBlocked(null,200)},onConfigSuccess:function(e){h.trace(d.unmangle("_170"),{fileName:"Ppt.hx",lineNumber:331,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"});try{this.config=this.context.parseConfig(e)}catch(t){t instanceof n&&(t=t.val),h.trace(d.unmangle("_171"),{fileName:"Ppt.hx",lineNumber:337,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess",customParams:[t,e]})}null!=this.config.proxyUrl&&""!=this.config.proxyUrl&&(this.proxyDomain=this.config.proxyUrl),h.trace(d.unmangle("_172"),{fileName:"Ppt.hx",lineNumber:343,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess",customParams:[this.config]}),this.postLogger=new ea(this.context.getProxy(this.config)),e=d.unmangle("_173"),e=this.proxify(u.makeAbsolute("//smblock.s3.amazonaws.com/sdk/master/ping.swf",window.location.href)),this.detector=new Q(e),1==this.adBlockAlreadyDetected?(this.state=p.BLOCKED,this.onConfigSuccessPingFlash()):0==this.config.testProxyDomainInFlash||0==Q.detectFlashPlayer()?(h.trace(d.unmangle("_179")+k.string(this.config.testProxyDomainInFlash),{fileName:"Ppt.hx",lineNumber:360,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"}),this.onConfigSuccessPingFlash()):(h.trace(d.unmangle("_180")+this.configUrl,{fileName:"Ppt.hx",lineNumber:365,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccess"}),this.detector.pingFlash(this.configUrl,G(this,this.onConfigSuccessPingFlash),G(this,this.onConfigErrorPingFlash),G(this,this.onConfigTimeoutPingFlash)))},onConfigSuccessPingFlash:function(){h.trace(d.unmangle("_177"),{fileName:"Ppt.hx",lineNumber:372,className:"secretmedia.pptjs.Ppt",methodName:"onConfigSuccessPingFlash"}),this.state==p.INIT_PENDING&&(this.state=p.INIT_DONE),this.callInitCallbacks()},proxify:function(e){h.trace(d.unmangle("_174")+e+" "+k.string(this.config),{fileName:"Ppt.hx",lineNumber:387,className:"secretmedia.pptjs.Ppt",methodName:"proxify"}),this.configProvenance==z.NO_CONFIG_YET&&h.trace(d.unmangle("_175"),{fileName:"Ppt.hx",lineNumber:390,className:"secretmedia.pptjs.Ppt",methodName:"proxify"});try{return this.context.getProxy(this.config).encode(e)}catch(t){return t instanceof n&&(t=t.val),h.trace(d.unmangle("_176")+k.string(t),{fileName:"Ppt.hx",lineNumber:397,className:"secretmedia.pptjs.Ppt",methodName:"proxify"}),e}},unblock:function(e,t){var i=this;h.trace(d.unmangle("_189")+e+" "+k.string(t),{fileName:"Ppt.hx",lineNumber:410,className:"secretmedia.pptjs.Ppt",methodName:"unblock"});var o=function(e,o){try{h.trace(d.unmangle("_190")+e+" "+(null==o?"null":""+o),{fileName:"Ppt.hx",lineNumber:414,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),t(e,o)}catch(a){a instanceof n&&(a=a.val),h.trace(d.unmangle("_191"),{fileName:"Ppt.hx",lineNumber:418,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[a,t]}),null!=i.postLogger?i.postLogger.log(k.string(9),{appKey:i.appKey,clientId:i.clientId}):i.fontLogger.log(k.string(9),{appKey:i.appKey,clientId:i.clientId})}};switch(this.state){case d.unmangle("_88"):case d.unmangle("_87"):h.trace(d.unmangle("_192"),{fileName:"Ppt.hx",lineNumber:431,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[e]}),this.initCallbacks.push(function(){h.trace(d.unmangle("_193"),{fileName:"Ppt.hx",lineNumber:434,className:"secretmedia.pptjs.Ppt",methodName:"unblock",customParams:[e,i.state]}),i.unblock(e,t)});break;case d.unmangle("_93"):this.disabled(e,o,null);break;case d.unmangle("_90"):this.notBlocked(e,o,null);break;case d.unmangle("_91"):this.blocked(e,o,null);break;case d.unmangle("_92"):this.ourDomainBlocked(e,null);break;case d.unmangle("_89"):h.trace(d.unmangle("_199"),{fileName:"Ppt.hx",lineNumber:449,className:"secretmedia.pptjs.Ppt",methodName:"unblock"});var a=this.browserStorageConfig.getDetectionState();if(null!=a)switch(a){case d.unmangle("_93"):this.state=p.DISABLED,h.trace(d.unmangle("_200"),{fileName:"Ppt.hx",lineNumber:457,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.disabled(e,o,107);break;case d.unmangle("_90"):this.state=p.NOT_BLOCKED,h.trace(d.unmangle("_201"),{fileName:"Ppt.hx",lineNumber:461,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.notBlocked(e,o,404);break;case d.unmangle("_91"):this.state=p.BLOCKED,h.trace(d.unmangle("_202"),{fileName:"Ppt.hx",lineNumber:465,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.blocked(e,o,307);break;default:this.state=p.DISABLED,h.trace(d.unmangle("_203"),{fileName:"Ppt.hx",lineNumber:469,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),this.disabled(e,o,109)}else this.detector.start(this.config,function(t){i.state=p.NOT_BLOCKED,h.trace(d.unmangle("_204")+t+d.unmangle("_205"),{fileName:"Ppt.hx",lineNumber:477,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.NOT_BLOCKED),i.notBlocked(e,o,t)},function(t){h.trace(d.unmangle("_204")+t+d.unmangle("_206"),{fileName:"Ppt.hx",lineNumber:483,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.BLOCKED),i.blocked(e,o,t)},function(t){i.state=p.DISABLED,h.trace(d.unmangle("_204")+t+d.unmangle("_207"),{fileName:"Ppt.hx",lineNumber:490,className:"secretmedia.pptjs.Ppt",methodName:"unblock"}),1==i.config.cacheDetection&&i.browserStorageConfig.setDetectionState(p.DISABLED),i.disabled(e,o,t)})}},ourDomainBlocked:function(e,t){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:507,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),h.trace(d.unmangle("_183"),{fileName:"Ppt.hx",lineNumber:508,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:509,className:"secretmedia.pptjs.Ppt",methodName:"ourDomainBlocked"}),null!=t&&(null!=this.postLogger?this.postLogger.log(k.string(t),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(t),{appKey:this.appKey,clientId:this.clientId}))},handleError:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:527,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),h.trace(d.unmangle("_208")+e,{fileName:"Ppt.hx",lineNumber:528,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:529,className:"secretmedia.pptjs.Ppt",methodName:"handleError"}),this.state=p.DISABLED,t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},blocked:function(e,t,i){null!=this.config.vastUrl&&""!=this.config.vastUrl&&(h.trace(d.unmangle("_196")+this.config.vastUrl+")",{fileName:"Ppt.hx",lineNumber:553,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),e=this.config.vastUrl),e=this.proxify(e),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:558,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),h.trace(d.unmangle("_197")+e,{fileName:"Ppt.hx",lineNumber:559,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:560,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),this.state=p.BLOCKED,this.config.virtualDom?y.startVirtualDom(this.proxyDomain,this.config.whiteList,this.prefix):h.trace(d.unmangle("_198"),{fileName:"Ppt.hx",lineNumber:568,className:"secretmedia.pptjs.Ppt",methodName:"blocked"}),t(e,!0),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},notBlocked:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:589,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),h.trace(d.unmangle("_195")+e,{fileName:"Ppt.hx",lineNumber:590,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:591,className:"secretmedia.pptjs.Ppt",methodName:"notBlocked"}),t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},disabled:function(e,t,i){h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:611,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),h.trace(d.unmangle("_194")+e,{fileName:"Ppt.hx",lineNumber:612,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),h.trace(d.unmangle("_182"),{fileName:"Ppt.hx",lineNumber:613,className:"secretmedia.pptjs.Ppt",methodName:"disabled"}),t(e,!1),null!=i&&(null!=this.postLogger?this.postLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}):this.fontLogger.log(k.string(i),{appKey:this.appKey,clientId:this.clientId}))},__class__:ma};var Ja=0;Array.prototype.indexOf&&(l.indexOf=function(e,t,i){return Array.prototype.indexOf.call(e,t,i)}),String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=["Date"];var Ka={__name__:["Int"]},La={__name__:["Dynamic"]},Ga=Number;Ga.__name__=["Float"];var Ha=Boolean;Ha.__ename__=["Bool"];var Ma={__name__:["Class"]},Na={};null==Array.prototype.map&&(Array.prototype.map=function(e){for(var t=[],i=0,n=this.length;n>i;){var o=i++;t[o]=e(this[o])}return t}),null==Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=[],i=0,n=this.length;n>i;){var o=this[i++];e(o)&&t.push(o)}return t}),ha.content=[{name:"__",data:"eyJfMCI6IndoaXRlTGlzdCIsIl8xIjoiZ2V0QXR0cmlidXRlIiwiXzIiOiJzZXRBdHRyaWJ1dGUiLCJfMyI6ImRhdGEtcGFzc3BhcnRvdXQiLCJfNCI6ImZvcnRib3lhcmQiLCJfNSI6InN0YXJ0VmlydHVhbERvbSAiLCJfNiI6IkhUTUxFbGVtZW50IiwiXzciOiJwcm90b3R5cGUiLCJfOCI6IkNhbGwgdG8gIiwiXzkiOiIgd2l0aCAiLCJfMTAiOiJhcHBlbmRDaGlsZCIsIl8xMSI6IlZpcnREb206OiBhcHBlbmRDaGlsZEFuZEluc2VydEJlZm9yZSIsIl8xMiI6InNyYyIsIl8xMyI6IlZpcnREb206OiBwcm94aWZpZWQgIiwiXzE0IjoiYWJvdXQ6IiwiXzE1IjoibWFpbHRvOiIsIl8xNiI6ImNocm9tZToiLCJfMTciOiJqYXZhc2NyaXB0OiIsIl8xOCI6IlZpcnREb206OiBlbmNvZGVVcmwgcmV0dXJucyAiLCJfMTkiOiJ3aGl0ZUxpc3RBbGwiLCJfMjAiOiJmcm9tanMiLCJfMjEiOiJWaXJ0RG9tOjogV2hpdGUgbGlzdCByZWplY3Q6ICIsIl8yMiI6IlZpcnREb206OiByZWF0dGFjaCAiLCJfMjMiOiJTQ1JJUFQiLCJfMjQiOiJJRlJBTUUiLCJfMjUiOiJFTUJFRCIsIl8yNiI6IlBBUkFNIiwiXzI3IjoibW92aWUiLCJfMjgiOiJWaXJ0RG9tOjogcHJveGlmaWVkIChQQVJBTSB0YWcpICIsIl8yOSI6IlZpcnREb206OiBmb3VuZCBlbWJlZCB0YWcgaW4gb2JqZWN0IHRhZyAiLCJfMzAiOiJPQkpFQ1QiLCJfMzEiOiJWaXJ0RG9tOjogRXJyb3Igd2hpbGUgcHJvY2Vzc2luZyBlbGVtZW50ICIsIl8zMiI6IlZpcnREb206OiBFcnJvciB3aGlsZSBpbnZva2luZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uIiwiXzMzIjoiaW5zZXJ0QmVmb3JlIiwiXzM0Ijoid2luZG93IiwiXzM1IjoiY3JlYXRlRWxlbWVudCIsIl8zNiI6IlZpcnREb206OiBjcmVhdGVFbGVtZW50IiwiXzM3IjoicG9zdE1lc3NhZ2UiLCJfMzgiOiJWaXJ0RG9tOjogcG9zdE1lc3NhZ2UiLCJfMzkiOiJFUmVnOjptYXRjaGVkIiwiXzQwIjoiTm8gc3RyaW5nIG1hdGNoZWQiLCJfNDEiOiIjX19kZWxpbV9fIyIsIl80MiI6Ik5vdCBpbXBsZW1lbnRlZCIsIl80MyI6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLCJfNDQiOiJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3IiwiXzQ1Ijoic2VjcmV0bWVkaWEiLCJfNDYiOiJ0b3RvdG90b3QiLCJfNDciOiIweCIsIl80OCI6InVoQUZ6IiwiXzQ5IjoicE9pZCIsIl81MCI6InhhYXhhIiwiXzUxIjoiZFNWS2N6IiwiXzUyIjoieGFaWnIiLCJfNTMiOiJkc29palYiLCJfNTQiOiIvLyIsIl81NSI6ImNvbmZpZ1VybCIsIl81NiI6IkNhbm5vdCBkZWNvZGUgc3RyaW5nOiBrZXkgaXMgaW52YWxpZCIsIl81NyI6ImlkUHVibGlzaGVyIiwiXzU4Ijoic21TZGtWZXJzaW9uIiwiXzU5IjoiZ2l0SGFzaCIsIl82MCI6ImNvbmZpZyIsIl82MSI6InR5cGUiLCJfNjIiOiJwdWJsaXNoZXJJZCIsIl82MyI6ImxvZzovLyIsIl82NCI6IlJlZmxlY3QuZ2V0UHJvcGVydHkiLCJfNjUiOiJnZXRfIiwiXzY2Ijoic2V0XyIsIl82NyI6IlJlZmxlY3Quc2V0UHJvcGVydHkiLCJfNjgiOiJfX2lkX18iLCJfNjkiOiJoeF9fY2xvc3VyZXNfXyIsIl83MCI6ImZ1bmN0aW9uIiwiXzcxIjoic3RyaW5nIiwiXzcyIjoib2JqZWN0IiwiXzczIjoiY2xpZW50SWQiLCJfNzQiOiJhcHBLZXkiLCJfNzUiOiJNaXNzaW5nIGZpZWxkcyBpbiB0aGUgZGF0YSBvYmplY3QuIE11c3QgaGF2ZSBjbGllbnRJZCBhbmQgYXBwS2V5IiwiXzc2IjoiLy9jYWNoZS5mcmVlZm9udHN0b3JlLmNvbS9hcmlhbC0iLCJfNzciOiIudHRmPyIsIl83OCI6IkBmb250LWZhY2UgeyBmb250LWZhbWlseTogXCJkYWZvbnRcIjsgc3JjOiB1cmwoIiwiXzc5IjoiKTt9IiwiXzgwIjoidGV4dC9jc3MiLCJfODEiOiJzZWNyZXRtZWRpYS5lbmFibGVMb2dzIiwiXzgyIjoiKGZ1bmN0aW9uKCl7XG5cdFx0aWYoIHR5cGVvZiB3aW5kb3cgPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgbG9jYXRpb24gPT0gXCJ1bmRlZmluZWRcIiApIHtcbiAgICAgIC8vIG5vZGVqcyBjYXNlXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0dmFyIHdpbiA9IHdpbmRvdztcblx0XHR0cnkge1xuXHRcdFx0d2luID0gd2luZG93LnRvcDtcblx0XHR9XG4gICAgY2F0Y2goZSkge31cbiAgICB0cnl7XG4gICAgICByZXR1cm4gd2luLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiIiwiXzgzIjoiXCIpID09PSBcInRydWVcIiB8fFxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCIiLCJfODQiOiJcIikgPT09IFwidHJ1ZVwiIHx8XG4gICAgICAgIFtcImxvY2FsaG9zdFwiLCBcIjEyNy4wLjAuMVwiXS5pbmRleE9mKCBsb2NhdGlvbi5ob3N0bmFtZSApID4gLTE7XG4gICAgfVxuICAgIGNhdGNoKGUpe1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblx0fSkoKSIsIl84NSI6ImZ1bmN0aW9uKCl7XG5cdFx0dmFyIGEgPSBhcmd1bWVudHMsYztcblx0XHR0cnkgeyBjID0gd2luZG93LnRvcC5jb25zb2xlOyB9IGNhdGNoICggZSApIHsgYyA9IGNvbnNvbGU7IH1cbiAgICAgICAgYy5sb2cuYXBwbHkoYywgYVswXSk7XG5cdH0iLCJfODYiOiI6OiIsIl84NyI6Ik5PTkUiLCJfODgiOiJJTklUX1BFTkRJTkciLCJfODkiOiJJTklUX0RPTkUiLCJfOTAiOiJOT1RfQkxPQ0tFRCIsIl85MSI6IkJMT0NLRUQiLCJfOTIiOiJPVVJfRE9NQUlOX0JMT0NLRUQiLCJfOTMiOiJESVNBQkxFRCIsIl85NCI6IkZsYXNoVmFycyIsIl85NSI6ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIiwiXzk2IjoiQWN0aXZlWE9iamVjdCIsIl85NyI6ImNsYXNzaWQiLCJfOTgiOiJjbHNpZDpkMjdjZGI2ZS1hZTZkLTExY2YtOTZiOC00NDQ1NTM1NDAwMDAiLCJfOTkiOiJkYXRhIiwiXzEwMCI6Ij1cIiIsIl8xMDEiOiI8b2JqZWN0IGlkPVwiIiwiXzEwMiI6IjxwYXJhbSBuYW1lPVwiIiwiXzEwMyI6IlwiIHZhbHVlPVwiIiwiXzEwNCI6IlwiIC8+IiwiXzEwNSI6Ijwvb2JqZWN0PiIsIl8xMDYiOiJkaXYiLCJfMTA3IjoiYWxyZWFkeSBsb2FkZWQiLCJfMTA4IjoiYWxsb3dzY3JpcHRhY2Nlc3MiLCJfMTA5IjoiYWx3YXlzIiwiXzExMCI6ImFsbG93bmV0d29ya2luZyIsIl8xMTEiOiJhbGwiLCJfMTEyIjoid2lkdGgiLCJfMTEzIjoiaGVpZ2h0IiwiXzExNCI6ImJyaWRnZU5hbWUiLCJfMTE1IjoiX29iaiIsIl8xMTYiOiJUaW1lb3V0ISAiLCJfMTE3Ijoib25GbGFzaExvYWRlZCBjYWxsZWQgYnkgQVMgIiwiXzExOCI6ImVtYmVkIiwiXzExOSI6IkVycm9yIGluIEFTOiAiLCJfMTIwIjoiY2FsbENhbGxiYWNrIEVycm9yOiBjb3VsZCBub3QgZmluZCB0aGUgRmxhc2ggb2JqZWN0IHRhZyAoaWQ9IiwiXzEyMSI6ImNhbGxDYWxsYmFjayIsIl8xMjIiOiJsb2FkZWQiLCJfMTIzIjoiYmxvY2tlZCIsIl8xMjQiOiJ0aW1lb3V0IiwiXzEyNSI6ImNhbGxpbmcgIiwiXzEyNiI6IkVycm9yIGNhbGxpbmcgY2FsbGJhY2s6ICIsIl8xMjciOiIgKCIsIl8xMjgiOiIsICIsIl8xMjkiOiJjYmtfIiwiXzEzMCI6IkJyaWRnZUJhc2U6OiBjcmVhdGVDYWxsYmFjayAiLCJfMTMxIjoiaW5zdF8iLCJfMTMyIjoiQnJpZGdlQmFzZTo6IGFkZEluc3RhbmNlICIsIl8xMzMiOiJjbGFzcyIsIl8xMzQiOiJpZCIsIl8xMzUiOiJzdHlsZSIsIl8xMzYiOiJ3aWR0aDoxcHg7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZjAwMDAiLCJfMTM3IjoiRXJyb3I6IEphdmFzY3JpcHQgRE9NIHRlc3QgZmFpbGVkIHdpdGggYW4gZXJyb3IgIiwiXzEzOCI6InRlc3REb20gcmV0dXJucyBkaXYgIiwiXzEzOSI6IiBpcyBoaWRkZW46ICIsIl8xNDAiOiJUaW1lb3V0ISIsIl8xNDEiOiJvbkVycm9yICIsIl8xNDIiOiJvblN0YXR1cyAiLCJfMTQzIjoiID0+IGNhbmNlbCByZXF1ZXN0IiwiXzE0NCI6InRlc3QgVVJMcyBpbiBwcm9nZXNzLCB0aGlzIFVSTCBpcyBub3QgYmxvY2tlZCBpbiBKUzogIiwiXzE0NSI6IlBpbmcgaXMgYmFjayB3aXRoICIsIl8xNDYiOiJQaW5nIHN0YXJ0cyAoIiwiXzE0NyI6InBpbmciLCJfMTQ4IjoidGVzdCBVUkxzIGluIHByb2dlc3MsIHRoaXMgVVJMIGlzIG5vdCBibG9ja2VkIGluIEZsYXNoOiAiLCJfMTQ5IjoidGVzdCBVUkxzIGVuZCwgYmxvY2tlZCBpbiBGbGFzaCIsIl8xNTAiOiJ0ZXN0IFVSTHMgZW5kLCB0aW1lb3V0IGluIEZsYXNoISIsIl8xNTEiOiJ0ZXN0IFVSTHMgZW5kLCBibG9ja2VkIGluIEpTOiAiLCJfMTUyIjoidGVzdCBVUkxzIGVuZCwgdGltZW91dCBpbiBKUyEgIiwiXzE1MyI6InRlc3QgVVJMcyBlbmQsIE5PVCBibG9ja2VkICIsIl8xNTQiOiJTaG9ja3dhdmUgRmxhc2giLCJfMTU1IjoiU2hvY2t3YXZlIEZsYXNoIDIuMCIsIl8xNTYiOiJmbGFzaCBpcyBpbnN0YWxsZWQgYnV0IE5PVCBhY3RpdmF0ZWQiLCJfMTU3IjoiZmxhc2ggaXMgaW5zdGFsbGVkIGFuZCBhY3RpdmF0ZWQiLCJfMTU4IjoiZmxhc2ggaXMgTk9UIGluc3RhbGxlZCIsIl8xNTkiOiJEZXRlY3Rpb24gaXMgZGlzYWJsZWQgZnJvbSBjb25maWciLCJfMTYwIjoidGVzdERvbSA9PiBibG9ja2VkICgiLCJfMTYxIjoidGVzdERvbSA9PiBOT1QgYmxvY2tlZCAoIiwiXzE2MiI6InRlc3RVcmxzID0+IG5vdCBibG9ja2VkIiwiXzE2MyI6InRlc3RVcmxzID0+IGJsb2NrZWQiLCJfMTY0IjoidGVzdFVybHMgdGltZW91dCA9PiBkaXNhYmxlZCIsIl8xNjUiOiJ0ZXN0VXJscyBpcyBkaXNhYmxlZCBmcm9tIGNvbmZpZyA9PiBub3QgYmxvY2tlZCIsIl8xNjYiOiJzZWNyZXRtZWRpYS5lbmFibGVEZWJ1ZyIsIl8xNjciOiJzZWNyZXRtZWRpYS5hbHdheXNGaXJlRm9udExvZ2dlciIsIl8xNjgiOiJzZWNyZXRtZWRpYS5hbGxvd0RldGVjdGlvblN0YXRlQ2FjaGUiLCJfMTY5Ijoic2VjcmV0bWVkaWEuZGV0ZWN0aW9uU3RhdGUiLCJfMTcwIjoiYmVnaW4gcGFyc2UgY29uZmlnIGZpbGUiLCJfMTcxIjoiRXJyb3IgcGFyc2luZyBjb25maWcgZmlsZSAiLCJfMTcyIjoiZW5kIHBhcnNlIGNvbmZpZyBmaWxlICIsIl8xNzMiOiIvc2RrL3B1Yi9waW5nLnN3ZiIsIl8xNzQiOiJwcm94eWZ5ICIsIl8xNzUiOiJFcnJvcjogcHJveGlmaWVkIGNhbGxlZCBiZWZvcmUgdGhlIGNvbmZpZyBhbmQgZGV0ZWN0aW9uIGhhdmUgb2NjdXJlZCIsIl8xNzYiOiJFcnJvciAiLCJfMTc3Ijoib25Db25maWdTdWNjZXNzUGluZ0ZsYXNoIiwiXzE3OCI6IiBjYWxsYmFja3MiLCJfMTc5Ijoic2tpcCBmbGFzaCBwaW5nOiAiLCJfMTgwIjoiZmxhc2ggcGluZyBjb25maWcgVVJMICIsIl8xODEiOiJFcnJvciBsb2FkaW5nIGNvbmZpZyBmcm9tIEZsYXNoIiwiXzE4MiI6IioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioiLCJfMTgzIjoiQWRibG9jayBkZXRlY3RlZCBhbmQgb3VyIGRvbWFpbiBibG9ja2VkIiwiXzE4NCI6IlRJTUVPVVQgbG9hZGluZyBjb25maWcgaW4gRmxhc2guIiwiXzE4NSI6IlRJTUVPVVQgbG9hZGluZyBjb25maWcuIERvIG5vdGhpbmcgYW55bW9yZSwganVzdCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgYXMgaWYgdGhlcmUgaXMgbm8gYWQgYmxvY2siLCJfMTg2IjoiYmVnaW4gbG9hZCBjb25maWcgZmlsZSAiLCJfMTg3IjoiRXJyb3IgbG9hZGluZyBjb25maWcgPT4gb3VyIGRvbWFpbiBpcyBibG9ja2VkIiwiXzE4OCI6IlBwdDo6IEJvb3RzdHJhcCIsIl8xODkiOiJ1bmJsb2NrIGNhbGxlZCBieSBob3N0LCAiLCJfMTkwIjoiY2JrIGNhbGxlZCAiLCJfMTkxIjoiRXJyb3Igd2hpbGUgY2FsbGluZyB0aGUgY2FsbGJhY2sgcGFzc2VkIHRvIGNiazogIiwiXzE5MiI6IlVuYmxvY2ssIGluaXQgcGVuZGluZywgZGVsYXkgZXhlY3V0aW9uIiwiXzE5MyI6IlVuYmxvY2sgaXMgYmFjayBhZnRlciBpbml0IiwiXzE5NCI6IlNNIGRpc2FibGVkICIsIl8xOTUiOiJBZGJsb2NrIG5vdCBkZXRlY3RlZCAiLCJfMTk2IjoiY29uZmlnLnZhc3RVcmwgZGV0ZWN0ZWQsIG91ciB2YXN0IHdpbGwgYmUgcHJveGlmaWVkIGluc3RlYWQgb2YgdGhlIHByb3ZpZGVkIG9uZSAoIiwiXzE5NyI6IkFkYmxvY2sgZGV0ZWN0ZWQgIiwiXzE5OCI6IlZpcnR1YWxEb20gaXMgZGlzYWJsZWQ6IGZyb20gY29uZmlnIiwiXzE5OSI6IioqIHN0YXJ0IGRldGVjdG9yIiwiXzIwMCI6IioqIGRldGVjdGlvbiBzdGF0ZSB3YXMgY2FjaGVkOiBkaXNhYmxlZCIsIl8yMDEiOiIqKiBkZXRlY3Rpb24gc3RhdGUgd2FzIGNhY2hlZDogbm90IGJsb2NrZWQiLCJfMjAyIjoiKiogZGV0ZWN0aW9uIHN0YXRlIHdhcyBjYWNoZWQ6IGJsb2NrZWQiLCJfMjAzIjoiKiogZGV0ZWN0aW9uIHN0YXRlIHdhcyBjYWNoZWQgYnV0IHRoZSBzdGF0ZSBpcyB1bmtub3duLCBub3cgZGlzYWJsZWQiLCJfMjA0IjoiKiogc3RhcnQgaXMgYmFjayAgKCIsIl8yMDUiOiIsIG5vdCBibG9ja2VkKSIsIl8yMDYiOiIsIGJsb2NrZWQpIiwiXzIwNyI6IiwgZGlzYWJsZWQpIiwiXzIwOCI6IkFuIGVycm9yIG9jY3VyZWQsIHZhc3RVcmw9ICIsIl8yMDkiOiJhbHRlcm5hdGVVcmwiLCJfMjEwIjoicHJveHlCYXNlIiwiXzIxMSI6IlRvbyBtYW55IGFyZ3VtZW50cyIsIl8yMTIiOiJObyBzdWNoIGNvbnN0cnVjdG9yICIsIl8yMTMiOiJDb25zdHJ1Y3RvciAiLCJfMjE0IjoiIG5lZWQgcGFyYW1ldGVycyIsIl8yMTUiOiIgZG9lcyBub3QgbmVlZCBwYXJhbWV0ZXJzIiwiXzIxNiI6IiBpcyBub3QgYSB2YWxpZCBlbnVtIGNvbnN0cnVjdG9yIGluZGV4IiwiXzIxNyI6Il9fY2xhc3NfXyIsIl8yMTgiOiJfX3Byb3BlcnRpZXNfXyIsIl8yMTkiOiJfX25hbWVfXyIsIl8yMjAiOiJfX2ludGVyZmFjZXNfXyIsIl8yMjEiOiJfX3N1cGVyX18iLCJfMjIyIjoiX19tZXRhX18iLCJfMjIzIjoiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoyMzQ1NjciLCJfMjI0IjoiJmFtcDsiLCJfMjI1IjoiJmx0OyIsIl8yMjYiOiImZ3Q7IiwiXzIyNyI6IiZxdW90OyIsIl8yMjgiOiImIzAzOTsiLCJfMjI5IjoiMDEyMzQ1Njc4OUFCQ0RFRiIsIl8yMzAiOiJzbSIsIl8yMzEiOiJ0byIsIl8yMzIiOiJodHRwcyIsIl8yMzMiOiJodHRwIiwiXzIzNCI6ImxvZyIsIl8yMzUiOiJtcDQiLCJfMjM2IjoibXAzIiwiXzIzNyI6ImZsdiIsIl8yMzgiOiJtcGVnIiwiXzIzOSI6IndtdiIsIl8yNDAiOiJ3ZWJtIiwiXzI0MSI6IjNncCIsIl8yNDIiOiJmNHYiLCJfMjQzIjoiZjRtIiwiXzI0NCI6InVrbiIsIl8yNDUiOiI6Ly8iLCJfMjQ2IjoiLnN3ZiIsIl8yNDciOiJodHRwOi8vIn0"
}];var r={},sa=Ba.ArrayBuffer||H;null==sa.prototype.slice&&(sa.prototype.slice=H.sliceImpl);var ra=Ba.Uint8Array||O._new;pa.gitHash=q.trim("fb603bc\n"),A.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A.BYTES=w.ofString(A.CHARS),new qa(0,0),m.__toStr={}.toString,O.BYTES_PER_ELEMENT=1,ba.VERSION="1.0.0",d.map=JSON.parse(ha.getString("__")),u.DOUBLE_SLASH="//",u.SPECIAL_PREFIXES=[d.unmangle("_14"),d.unmangle("_15"),d.unmangle("_16"),d.unmangle("_17")],d.unmangle("_122"),d.unmangle("_123"),d.unmangle("_124"),T.FLASHVAR_BRIDGE_NAME=d.unmangle("_114"),ca.TIMEOUT_DELAY_MS=2e3,C.SCHEMES=function(e){e=new L;var t=d.unmangle("_232");return null!=r[t]?e.setReserved(t,1):e.h[t]=1,t=d.unmangle("_233"),null!=r[t]?e.setReserved(t,0):e.h[t]=0,t=d.unmangle("_234"),null!=r[t]?e.setReserved(t,2):e.h[t]=2,e}(this),C.KEEP_EXTENSIONS=[d.unmangle("_235"),d.unmangle("_236"),d.unmangle("_237"),d.unmangle("_238"),d.unmangle("_239"),d.unmangle("_240"),d.unmangle("_241"),d.unmangle("_242"),d.unmangle("_243"),d.unmangle("_244")],V.BASE64=d.unmangle("_43"),V.BASE32=d.unmangle("_44"),D.SALT_LENGTH=8,D.SEPARATOR=":",D.replacements=function(e){e=new L;var t=[d.unmangle("_48"),d.unmangle("_49"),d.unmangle("_50")];return null!=r["+"]?e.setReserved("+",t):e.h["+"]=t,t=[d.unmangle("_51"),d.unmangle("_52"),d.unmangle("_53")],null!=r["/"]?e.setReserved("/",t):e.h["/"]=t,e}(this),ja.AMP="&amp;",W.SEPARATOR=":",M.CHARS=d.unmangle("_223"),M.BYTES=w.ofString(M.CHARS),v.KEY_ENABLE_LOGS=d.unmangle("_81"),v.isDebugExpr=d.unmangle("_82")+v.KEY_ENABLE_LOGS+d.unmangle("_83")+v.KEY_ENABLE_LOGS+d.unmangle("_84"),v.traceFunction=d.unmangle("_85"),ka.PERCENT_SENT=1,P.ENABLE_DEBUG=d.unmangle("_166"),P.ALWAYS_FIRE_FONT_LOGGER=d.unmangle("_167"),P.DETECTION_STATE=d.unmangle("_169"),P.ALLOW_DETECTION_STATE_CACHE=d.unmangle("_168"),p.NONE=d.unmangle("_87"),p.INIT_PENDING=d.unmangle("_88"),p.INIT_DONE=d.unmangle("_89"),p.NOT_BLOCKED=d.unmangle("_90"),p.BLOCKED=d.unmangle("_91"),p.OUR_DOMAIN_BLOCKED=d.unmangle("_92"),p.DISABLED=d.unmangle("_93"),Q.TIMEOUT_DELAY_MS=2e3,N.main()}("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),SMSdk}),Ndn_Require.define("models/Ndn/AdBlockDetector",["jquery","underscore","backbone","lib/secret-media","models/Ndn/EventHub"],function(e,t,i,n,o){var a,r,s="eyJjb25maWdVcmwiOiJjemFyaXR6YWxhdWdoYWJseS5jb20iLCJwdWJsaXNoZXJJZCI6Ijk3In0=",l=null;return{reset:function(){l=null,r&&r.reject()},getDetectionProcess:function(){return r||(r=this.detectAdBlock()),r.promise()},detectAdBlock:function(){var t=this;return e.Deferred(function(e){t.getSdk().unblock("",function(i,n){e&&"rejected"!=e.state()&&(l=n,o.trigger("adBlockDetectionComplete",{adBlockDetectionId:t.getCachedScenarioId()}),e.resolve())})})},isDetectionComplete:function(){return null!==l},hasAdBlocker:function(t){var i=this;return e.Deferred(e.proxy(function(e){function n(){e.resolve(i.getCachedScenarioId())}return!t||i.isDetectionComplete()?n():void i.getDetectionProcess().done(n)},this)).promise()},proxify:function(e){return this.getSdk().proxify(e)},getSdk:function(){return a||(a=new n(s,"")),a},getCachedScenarioId:function(){return null===l?2:l===!0?1:0}}}),function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof Ndn_Require.define&&Ndn_Require.define.amd?Ndn_Require.define("mustache",t):e.Mustache=t}(this,function(){function e(e,t){return v.call(e,t)}function t(t){return!e(g,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return A[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function a(e,t){this.view=e||{},this.parent=t,this._cache={}}function r(){this.clearCache()}function s(e,t,i,n){for(var o,a,r,l="",d=0,c=e.length;c>d;++d)switch(o=e[d],a=o[1],o[0]){case"#":if(r=i.lookup(a),"object"==typeof r)if(E(r))for(var u=0,p=r.length;p>u;++u)l+=s(o[4],t,i.push(r[u]),n);else r&&(l+=s(o[4],t,i.push(r),n));else if("function"==typeof r){var h=null==n?null:n.slice(o[3],o[5]);r=r.call(i.view,h,function(e){return t.render(e,i)}),null!=r&&(l+=r)}else r&&(l+=s(o[4],t,i,n));break;case"^":r=i.lookup(a),(!r||E(r)&&0===r.length)&&(l+=s(o[4],t,i,n));break;case">":r=t.getPartial(a),"function"==typeof r&&(l+=r(i));break;case"&":r=i.lookup(a),null!=r&&(l+=r);break;case"name":r=i.lookup(a),null!=r&&(l+=b.escape(r));break;case"text":l+=a}return l}function l(e){for(var t,i=[],n=i,o=[],a=0,r=e.length;r>a;++a)switch(t=e[a],t[0]){case"#":case"^":o.push(t),n.push(t),n=t[4]=[];break;case"/":var s=o.pop();s[5]=t[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(t)}return i}function d(e){for(var t,i,n=[],o=0,a=e.length;a>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t)));return n}function c(e){return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}function u(e,n){function a(){if(I&&!S)for(;N.length;)delete C[N.pop()];else N=[];I=!1,S=!1}if(e=e||"",n=n||b.tags,"string"==typeof n&&(n=n.split(h)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var r,s,u,g,v,_=c(n),E=new o(e),A=[],C=[],N=[],I=!1,S=!1;!E.eos();){if(r=E.pos,u=E.scanUntil(_[0]))for(var T=0,w=u.length;w>T;++T)g=u.charAt(T),t(g)?N.push(C.length):S=!0,C.push(["text",g,r,r+1]),r+=1,"\n"==g&&a();if(!E.scan(_[0]))break;if(I=!0,s=E.scan(y)||"name",E.scan(p),"="===s?(u=E.scanUntil(f),E.scan(f),E.scanUntil(_[1])):"{"===s?(u=E.scanUntil(new RegExp("\\s*"+i("}"+n[1]))),E.scan(m),E.scanUntil(_[1]),s="&"):u=E.scanUntil(_[1]),!E.scan(_[1]))throw new Error("Unclosed tag at "+E.pos);if(v=[s,u,r,E.pos],C.push(v),"#"===s||"^"===s)A.push(v);else if("/"===s){if(0===A.length)throw new Error('Unopened section "'+u+'" at '+r);var P=A.pop();if(P[1]!==u)throw new Error('Unclosed section "'+P[1]+'" at '+r)}else if("name"===s||"{"===s||"&"===s)S=!0;else if("="===s){if(n=u.split(h),2!==n.length)throw new Error("Invalid tags at "+r+": "+n.join(", "));_=c(n)}}var P=A.pop();if(P)throw new Error('Unclosed section "'+P[1]+'" at '+E.pos);return C=d(C),l(C)}var p=/\s*/,h=/\s+/,g=/\S/,f=/\s*=/,m=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,v=RegExp.prototype.test,_=Object.prototype.toString,E=Array.isArray||function(e){return"[object Array]"===_.call(e)},A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},o.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},a.make=function(e){return e instanceof a?e:new a(e)},a.prototype.push=function(e){return new a(e,this)},a.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){t=i.view;for(var n=e.split("."),o=0;t&&o<n.length;)t=t[n[o++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},r.prototype.clearCache=function(){this._cache={},this._partialCache={}},r.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var n=b.parse(e,t);i=this._cache[e]=this.compileTokens(n,e)}return i},r.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},r.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},r.prototype.compileTokens=function(e,t){var i=this;return function(n,o){if(o)if("function"==typeof o)i._loadPartial=o;else for(var r in o)i.compilePartial(r,o[r]);return s(e,i,a.make(n),t)}},r.prototype.render=function(e,t,i){return this.compile(e)(t,i)};var b={};b.name="mustache.js",b.version="0.7.2",b.tags=["{{","}}"],b.Scanner=o,b.Context=a,b.Writer=r,b.parse=u,b.escape=n;var C=new r;return b.clearCache=function(){return C.clearCache()},b.compile=function(e,t){return C.compile(e,t)},b.compilePartial=function(e,t,i){return C.compilePartial(e,t,i)},b.compileTokens=function(e,t){return C.compileTokens(e,t)},b.render=function(e,t,i){return C.render(e,t,i)},b.to_html=function(e,t,i,n){var o=b.render(e,t,i);return"function"!=typeof n?o:void n(o)},b}()),Ndn_Require.define("models/Ndn/TemplateSet",["underscore","backbone","mustache"],function(e,t,i){return t.Model.extend({defaults:{rendered:[],templates:{}},initialize:function(e){this.set("templates",e)},getTemplate:function(t,n){var o=this.get("templates")[t][0],a=this.get("templates")[t][1];return"undefined"==typeof n?("undefined"==typeof this.get("rendered")[t]&&(this.get("rendered")[t]=i.to_html(o,a)),this.get("rendered")[t]):i.to_html(o,e.extend({},a,n))}})}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		auto_replay='false' branding_preload='none' core_player_name='ndn-player'\n		dvr_enabled='0' fullscreen_enabled='true' hds_live_low_latency='true'\n		mbr_start_index='2' netsession_install_prompt_frequency_secs='-1'\n		show_feature_bar='false' use_last_known_bitrate='false'\n		use_netsession_client='false' volume='75'>\n	</player>\n	<locale id=\"en\"></locale>\n</application>"}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets_small.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		branding_preload='none' core_player_name='ndn-player' dvr_enabled='0'\n		hds_live_low_latency='true' mbr_start_index='2'\n		netsession_install_prompt_frequency_secs='-1' show_feature_bar='false'\n		use_last_known_bitrate='false' use_netsession_client='false'>\n	</player>\n	<!-- \n	<view skin='{{akamaiJsLibFolderUrl}}/ndn.assets.small.swf'>\n		<element id='adOptions'>\n			<element id='adChoices' target='http://assets.newsinc.com/info/adchoices.html' />\n			<element id='adCountdown' />\n            <element id=\"adCount\" />\n		</element>\n		<element id='captionDisplay' style='bottom: 0px; opacity:1;' />\n		<element id='controls' scrubPosition='top' backgroundAlpha='.8' height='40' itemMargin='12' autoHideDelay='1' transitionTime='0.5'>\n			<element id='playPauseBtn' />\n			<element id='scrubBar' collapsedHeight='4' style='background: linear-gradient(90deg, #232323 #232323); height: 4px;' />\n			<element id='progressBar' style='background: linear-gradient(90deg, #0099CC #0099CC);' />\n			<element id='loadedBar' style='background: linear-gradient(90deg, #666666 #666666);' />\n			<element id='streamTimeIndicator' position='left'>\n				<element id='streamTime' />\n				<element id='streamDuration' color='#666666' />\n			</element>\n			<element id='shareBtn' />\n			<element id='facebookBtn' />\n			<element id='twitterBtn' />\n			<element id='volumeBar' backgroundColor='#111111' trackColor='#C1C1C3' color='#0099CC' position='relative' width='25' />\n			<element id='volumeBtn' />\n			<element id='fullscreenBtn' />\n			<element id='posterBackground' color='#000000' alpha='1' />\n		</element>\n		<element id=\"loadingView\" radius=\"0\" />\n	</view>\n	-->\n	<locale id=\"en\"></locale>\n</application>"}),Ndn_Require.define("lib/amp.premier/config/skin/templates",["models/Ndn/TemplateSet","models/Ndn/App","text!lib/amp.premier/config/skin/ndn_assets.xml","text!lib/amp.premier/config/skin/ndn_assets_small.xml"],function(e,t,i,n){var o={akamaiJsLibFolderUrl:t.getAppUrl()+"/js/lib/amp.premier",akamaiResourcesFolderUrl:t.getAppUrl()+"/resources"};return new e({ndn_assets:[i,o],ndn_assets_small:[n,o]})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Amp/Config",["underscore","jquery","models/Ndn/App","models/Ndn/Utils/UserAgent","models/Ndn/AdBlockDetector","models/Ndn/Analytics","models/Ndn/Debug","lib/amp.premier/config/skin/templates"],function(e,t,i,n,o,a,r,s){return{generateDefaultConfig:function(t){t.akamaiJsLibFolderUrl=t.akamaiJsLibFolderUrl||i.getAppUrl()+"/js/lib/amp.premier",t.akamaiResourcesFolderUrl=t.akamaiResourcesFolderUrl||i.getAppUrl()+"/resources",t.aaspUrl="http:"==window.location.protocol?"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.4/osmf2.0/AkamaiAdvancedStreamingPlugin.swf":t.akamaiResourcesFolderUrl+"/plugins/AkamaiAdvancedStreamingPlugin.swf";var n={resources:[],domain:"newsinc.com",target:"_top",params:{},plugins:{AkamaiAdvancedStreamingPlugin:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",ComscorePlugin:t.akamaiResourcesFolderUrl+"/plugins/ComscorePlugin.swf",ComscoreStreamSensePlugin:t.akamaiResourcesFolderUrl+"/plugins/ComscoreStreamSensePlugin.swf"},paths:{player:t.akamaiJsLibFolderUrl+"/",resources:t.akamaiResourcesFolderUrl+"/"},fullscreen:{"native":!0},controls:{autoHide:5,mode:"auto"},captioning:{enabled:!0},info:{enabled:!1},share:{enabled:!0,facebook:!0,twitter:!0},autoplay:!1,volumepanel:{},volume:.75,rules:{PDL:{regexp:"Android 4"}},playoverlay:{enabled:!1},language:"en",locales:{en:{MSG_NEXT_VIDEO:t.adOverlayText,MSG_SECONDS:"seconds"}},debug:r.inMode("ampDebug"),mode:"auto"};return n=e.extend(n,this.getFlashConfig(t)),t.comscoreEnabled&&(n=e.extend(n,this.getComscoreConfig(t))),t.imaEnabled&&(n=e.extend(n,this.getImaConfig(t))),n},getFlashConfig:function(e){return{flash:{swf:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer.swf",debug:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer-debug.swf",vars:{locale_setting:"en",ad_server_timeout:30,ad_media_server_timeout:30,context_menu_mode:"short",overlay_ad_delay:3,volume:1,auto_replay:!1,fullscreen_enabled:!0,share_enabled:!0,auto_play:!1,hinting_rules:"%7B%22flashTablets%22%3A%7B%22label%22%3A%22Android%202%20%26%203%20or%20Kindle%20Fire%201%22%2C%22regexp%22%3A%22Android%20%5B23%5D%7CSilk/1%22%7D%2C%22html5Phones%22%3A%7B%22label%22%3A%22iPhone%22%2C%22regexp%22%3A%22iPhone%22%7D%2C%22html5Tablets%22%3A%7B%22label%22%3A%22HTML5%20Tablets%22%2C%22regexp%22%3A%22iPad%7CAndroid%204%7CSilk/2%22%7D%2C%22desktop%22%3A%7B%22label%22%3A%22Desktop%22%2C%22regexp%22%3A%22%5E%28%28%3F%21iPad%7CiPhone%7CAndroid%7CBlackBerry%7CPlayBook%7CSilk%29.%29*%24%22%7D%2C%22android_4_gets_m3u8%22%3A%7B%22regexp%22%3A%22Android%204%22%7D%7D",externalTarget:"_top",domain:"newsinc.com",embedDomain:"newsinc.com",show_play_button_overlay:!1,auto_play_list:!1,core_ads_enabled:!0,suppress_events:"mediaPlayerDataFeedUpdated",hds_enable_ssl_transfer:!0,next_video_timer:-1},params:{wmode:n.isIe()||n.isFirefox()||n.isSafari()&&n.isWindows()?"transparent":"direct"},xml:s.getTemplate("ndn_assets",e),view:{attributes:{skin:e.akamaiJsLibFolderUrl+"/ndn.assets.swf"},elements:{captionDisplay:{attributes:{initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 26%; height:13%; windowColor:0xffffff; windowOpacity:0; font:Arial; fontColor:0xffffff; fontOpacity:1; fontBGColor:0x000000; fontBGOpacity:0.6; edgeType:none; edgeColor:0x00ff00; edgeOpacity:1; scroll:none; fontSize:12;"}},controls:{attributes:{scrubPosition:"top",backgroundAlpha:".8",height:"51",autoHideDelay:"1",transitionTime:"0.50"},elements:{playPauseBtn:{},scrubBar:{attributes:{collapsedHeight:"5",style:"background: linear-gradient(90deg, #232323 #232323); height: 9px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #0099CC #0099CC);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #666666 #666666);"}},streamTimeIndicator:{attributes:{position:"left"},elements:{streamTime:{},streamDuration:{attributes:{color:"#666666"}}}},captionBtn:{},shareBtn:{},facebookBtn:{},twitterBtn:{},volumeBar:{attributes:{backgroundColor:"#111111",trackColor:"#C1C1C3",color:"#0099CC",position:"relative",width:"25"}},volumeBtn:{},fullscreenBtn:{},posterBackground:{attributes:{color:"#000000",alpha:"1"}}}},loadingView:{attributes:{radius:"0"}},adOptions:{elements:{adChoices:{attributes:{target:"http://assets.newsinc.com/info/adchoices.html"}},adCountdown:{},adCount:{}}}}}}}},getComscoreConfig:function(e){return{comscore:{url:i.isOnSsl()?"https://sb.scorecardresearch.com/b":"http://b.scorecardresearch.com/b",data:{c1:"1",c2:"11112732",c3:"#{comscore.distributorName}",c4:"#{comscore.providerName}",c5:"",c6:"#{comscore.siteSection}",c10:"#{comscore.providerCategory}"},events:{ads:[{type:"started",data:{c4:"#{comscore.providerName} 09",c5:"09"}}],video:[{type:"started",data:{c4:"#{comscore.providerName} #{comscore.c5}",c5:"#{comscore.c5}"}}]}},comscorestreamsense:{enabled:!0,resources:[{type:"text/javascript",src:e.akamaiResourcesFolderUrl+"/js/streamsense.4.1412.05.min.js"}],data:{clientId:"11112732",publisherSecret:"c3798e9f708f2d61a9cf8232b0503d5a",metadata:{ads:{ns_st_ci:"#{comscore.videoAssetId}",c3:"#{comscore.distributorName}",c4:"#{comscore.providerName}",c6:"#{comscore.siteSection}",ca2:"null",ca4:"null",ca6:"null"},video:{ns_st_ci:"#{comscore.videoAssetId}",c3:"#{comscore.distributorName}",c4:"#{comscore.providerName}",c6:"#{comscore.siteSection}",ca2:"#{comscore.ca2}",ca3:"#{comscore.ca3}",ca6:"null"}}}}}},getImaConfig:function(e){return{ima:{enabled:!0,version:3,resources:function(){var t=[{type:"text/javascript",src:window.location.protocol+"//s0.2mdn.net/instream/html5/ima3.js",debug:"//imasdk.googleapis.com/js/sdkloader/ima3_debug.js"}];return 1===e.adBlockDetectionId&&(t.push({id:"GoogleIMAPlugin",src:o.proxify(e.akamaiResourcesFolderUrl+"/plugins/GoogleIMAPlugin.swf"),blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"}),t.push({id:"IMAOverlayAdPlugin",src:o.proxify(e.akamaiResourcesFolderUrl+"/plugins/IMAOverlayAdPlugin.swf"),blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"})),t}(),vpaidAllowed:!0,vpaidMode:"insecure",companion:{width:"300",height:"250"},adTagUrl:"#{dfp.adTagUrl}",ppid:"#{dfp.ppid}",disableCompanionAds:!0}}},generatePlayerConfig:function(t){var i={feed:{enabled:!0},mode:t.playbackMode||"auto"};return t.comscoreEnabled===!1&&(i=e.extend(i,{comscore:{enabled:!1},comscorestreamsense:{enabled:!1}})),i}}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var i=this.length>>>0;for(t=+t||0,1/0===Math.abs(t)&&(t=0),0>t&&(t+=i,0>t&&(t=0));i>t;t++)if(this[t]===e)return t;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],o=2<=arguments.length?arguments[1]:void 0,a=0;i>a;a++)if(a in t){var r=t[a];e.call(o,r,a,t)&&n.push(r)}return n}),Date.now||(Date.now=function(){return+new Date}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Bind must be called on a function");var i=[].slice,n=i.call(arguments,1),o=this,a=function(){return o.apply(this instanceof t?this:e||{},n.concat(i.call(arguments)))};return t.prototype=o.prototype,a.prototype=new t,a}),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,a,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,i=0;a>i;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}function i(e,t,i){this.name=e,this.body=t,this.type=i}function n(){}function o(){}function a(){this.subCommands=[],this.initializeMacroCommand()}function r(e,t){this.mediatorName=e||this.constructor.NAME,this.viewComponent=t}function s(e,t){this.proxyName=e||this.constructor.NAME,null!=t&&this.setData(t)}function l(e){if(null!=l.instanceMap[e])throw Error(l.MULTITON_MSG);this.initializeNotifier(e),l.instanceMap[e]=this,this.initializeFacade()}function d(e){if(null!=d.instanceMap[e])throw Error(d.MULTITON_MSG);this.multitonKey=e,d.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(e){if(c.instanceMap[e])throw Error(c.MULTITON_MSG);this.multitonKey=e,c.instanceMap[e]=this,this.proxyMap=[],this.initializeModel()}function u(e){if(null!=u.instanceMap[e])throw Error(u.MULTITON_MSG);this.multitonKey=e,u.instanceMap[this.multitonKey]=this,this.commandMap=[],this.initializeController()}function p(e,t,i){for(var n,o,e=e.split("."),i=i||h.global,a=0,r=e.length;r>a;a++)n=i,o=e[a],i=null==i[o]?i[o]={}:i[o];return null==t?i:n[o]=t}if(null==e&&(e=window),!e.puremvc){t.prototype.setNotifyMethod=function(e){this.notify=e},t.prototype.setNotifyContext=function(e){this.context=e},t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.getNotifyContext=function(){return this.context},t.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},t.prototype.compareNotifyContext=function(e){return e===this.context},t.prototype.notify=null,t.prototype.context=null,i.prototype.getName=function(){return this.name},i.prototype.setBody=function(e){this.body=e},i.prototype.getBody=function(){return this.body},i.prototype.setType=function(e){this.type=e},i.prototype.getType=function(){return this.type},i.prototype.toString=function(){var e="Notification Name: "+this.getName(),e=e+("\nBody:"+(null==this.body?"null":this.body.toString()));return e+="\nType:"+(null==this.type?"null":this.type)},i.prototype.name=null,i.prototype.type=null,i.prototype.body=null,n.prototype.sendNotification=function(e,t,i){var n=this.getFacade();n&&n.sendNotification(e,t,i)},n.prototype.initializeNotifier=function(e){this.multitonKey=""+e,this.facade=this.getFacade()},n.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(n.MULTITON_MSG);return l.getInstance(this.multitonKey)},n.prototype.multitonKey=null,n.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",o.prototype=new n,o.prototype.constructor=o,o.prototype.execute=function(){},a.prototype=new n,a.prototype.constructor=a,a.prototype.subCommands=null,a.prototype.initializeMacroCommand=function(){},a.prototype.addSubCommand=function(e){this.subCommands.push(e)},a.prototype.execute=function(e){for(;0<this.subCommands.length;){var t=new(this.subCommands.shift());t.initializeNotifier(this.multitonKey),t.execute(e)}},r.NAME="Mediator",r.prototype=new n,r.prototype.constructor=r,r.prototype.getMediatorName=function(){return this.mediatorName},r.prototype.setViewComponent=function(e){this.viewComponent=e},r.prototype.getViewComponent=function(){return this.viewComponent},r.prototype.listNotificationInterests=function(){return[]},r.prototype.handleNotification=function(){},r.prototype.onRegister=function(){},r.prototype.onRemove=function(){},r.prototype.mediatorName=null,r.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new n,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(e){this.data=e},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(e){return null==e?null:(null==l.instanceMap[e]&&(l.instanceMap[e]=new l(e)),l.instanceMap[e])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=u.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=d.getInstance(this.multitonKey))},l.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},l.prototype.removeCommand=function(e){this.controller.removeCommand(e)},l.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},l.prototype.registerProxy=function(e){this.model.registerProxy(e)},l.prototype.retrieveProxy=function(e){return this.model.retrieveProxy(e)},l.prototype.removeProxy=function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},l.prototype.hasProxy=function(e){return this.model.hasProxy(e)},l.prototype.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},l.prototype.retrieveMediator=function(e){return this.view.retrieveMediator(e)},l.prototype.removeMediator=function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},l.prototype.hasMediator=function(e){return this.view.hasMediator(e)},l.prototype.sendNotification=function(e,t,n){this.notifyObservers(new i(e,t,n))},l.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},l.prototype.initializeNotifier=function(e){this.multitonKey=e},l.hasCore=function(e){return null!=l.instanceMap[e]},l.removeCore=function(e){null!=l.instanceMap[e]&&(c.removeModel(e),d.removeView(e),u.removeController(e),delete l.instanceMap[e])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",d.prototype.initializeView=function(){},d.getInstance=function(e){return null==e?null:(null==d.instanceMap[e]&&(d.instanceMap[e]=new d(e)),d.instanceMap[e])},d.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},d.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,i=this.observerMap[e.getName()],n=[],o=0;o<i.length;o++)t=i[o],n.push(t);for(o=0;o<n.length;o++)t=n[o],t.notifyObserver(e)}},d.prototype.removeObserver=function(e,t){for(var i=this.observerMap[e],n=0;n<i.length;n++)if(1==i[n].compareNotifyContext(t)){i.splice(n,1);break}0==i.length&&delete this.observerMap[e]},d.prototype.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){e.initializeNotifier(this.multitonKey),this.mediatorMap[e.getMediatorName()]=e;var i=e.listNotificationInterests();if(0<i.length)for(var n=new t(e.handleNotification,e),o=0;o<i.length;o++)this.registerObserver(i[o],n);e.onRegister()}},d.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},d.prototype.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var i=t.listNotificationInterests(),n=0;n<i.length;n++)this.removeObserver(i[n],t);delete this.mediatorMap[e],t.onRemove()}return t},d.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},d.removeView=function(e){delete d.instanceMap[e]},d.prototype.mediatorMap=null,d.prototype.observerMap=null,d.instanceMap=[],d.prototype.multitonKey=null,d.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(e){return null==e?null:(null==c.instanceMap[e]&&(c.instanceMap[e]=new c(e)),c.instanceMap[e])},c.prototype.registerProxy=function(e){e.initializeNotifier(this.multitonKey),this.proxyMap[e.getProxyName()]=e,e.onRegister()},c.prototype.retrieveProxy=function(e){return this.proxyMap[e]},c.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},c.prototype.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},c.removeModel=function(e){delete c.instanceMap[e]},c.prototype.proxyMap=null,c.instanceMap=[],c.MULTITON_MSG="Model instance for this Multiton key already constructed!",u.prototype.initializeController=function(){this.view=d.getInstance(this.multitonKey)},u.getInstance=function(e){return null==e?null:(null==this.instanceMap[e]&&(this.instanceMap[e]=new this(e)),this.instanceMap[e])},u.prototype.executeCommand=function(e){var t=this.commandMap[e.getName()];null!=t&&(t=new t,t.initializeNotifier(this.multitonKey),t.execute(e))},u.prototype.registerCommand=function(e,i){null==this.commandMap[e]&&this.view.registerObserver(e,new t(this.executeCommand,this)),this.commandMap[e]=i},u.prototype.hasCommand=function(e){return null!=this.commandMap[e]},u.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},u.removeController=function(e){delete this.instanceMap[e]},u.prototype.view=null,u.prototype.commandMap=null,u.prototype.multitonKey=null,u.instanceMap=[],u.MULTITON_MSG="controller key for this Multiton key already constructed";var h={global:function(){return this}(),extend:function(e,t){if("function"!=typeof e)throw new TypeError("#extend- child should be Function");if("function"!=typeof t)throw new TypeError("#extend- parent should be Function");if(t!==e){var i=new Function;return i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},decorate:function(e,t){for(var i in t)e[i]=t[i];return e}};e.puremvc={View:d,Model:c,Controller:u,SimpleCommand:o,MacroCommand:a,Facade:l,Mediator:r,Observer:t,Notification:i,Notifier:n,Proxy:s,define:function(e,t,i){e||(e={});var n=e.name,o=e.parent,a="function"==typeof o,r=e.scope||null;if("parent"in e&&!a)throw new TypeError("Class parent must be Function");if(e.hasOwnProperty("constructor")){if(e=e.constructor,"function"!=typeof e)throw new TypeError("Class constructor must be Function");
}else e=a?function(){o.apply(this,arguments)}:new Function;if(a&&h.extend(e,o),t&&(a=e.prototype,h.decorate(a,t),a.constructor=e),i&&h.decorate(e,i),n){if("string"!=typeof n)throw new TypeError("Class name must be primitive string");p(n,e,r)}return e},declare:p}}}(this);var swfobject=function(){function e(){if(!x){try{var e=I.getElementsByTagName("body")[0].appendChild(I.createElement("span"));e.parentNode.removeChild(e)}catch(t){return}x=!0;for(var e=w.length,i=0;e>i;i++)w[i]()}}function t(e){x?e():w[w.length]=e}function i(e){if("undefined"!=typeof N.addEventListener)N.addEventListener("load",e,!1);else if("undefined"!=typeof I.addEventListener)I.addEventListener("load",e,!1);else if("undefined"!=typeof N.attachEvent)h(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function n(){var e=I.getElementsByTagName("body")[0],t=I.createElement("object");t.setAttribute("type","application/x-shockwave-flash");var i=e.appendChild(t);if(i){var n=0;!function(){if("undefined"!=typeof i.GetVariable){var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),R.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>n)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,o()}()}else o()}function o(){var e=P.length;if(e>0)for(var t=0;e>t;t++){var i=P[t].id,n=P[t].callbackFn,o={success:!1,id:i};if(0<R.pv[0]){var d=p(i);if(d)if(!g(P[t].swfVersion)||R.wk&&312>R.wk)if(P[t].expressInstall&&r()){o={},o.data=P[t].expressInstall,o.width=d.getAttribute("width")||"0",o.height=d.getAttribute("height")||"0",d.getAttribute("class")&&(o.styleclass=d.getAttribute("class")),d.getAttribute("align")&&(o.align=d.getAttribute("align"));for(var c={},d=d.getElementsByTagName("param"),u=d.length,h=0;u>h;h++)"movie"!=d[h].getAttribute("name").toLowerCase()&&(c[d[h].getAttribute("name")]=d[h].getAttribute("value"));s(o,c,i,n)}else l(d),n&&n(o);else m(i,!0),n&&(o.success=!0,o.ref=a(i),n(o))}else m(i,!0),n&&((i=a(i))&&"undefined"!=typeof i.SetVariable&&(o.success=!0,o.ref=i),n(o))}}function a(e){var t=null;return(e=p(e))&&"OBJECT"==e.nodeName&&("undefined"!=typeof e.SetVariable?t=e:(e=e.getElementsByTagName("object")[0])&&(t=e)),t}function r(){return!k&&g("6.0.65")&&(R.win||R.mac)&&!(R.wk&&312>R.wk)}function s(e,t,i,n){k=!0,E=n||null,A={success:!1,id:i};var o=p(i);o&&("OBJECT"==o.nodeName?(v=d(o),_=null):(v=o,_=i),e.id="SWFObjectExprInst",("undefined"==typeof e.width||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),("undefined"==typeof e.height||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),I.title=I.title.slice(0,47)+" - Flash Player Installation",n=R.ie&&R.win?"ActiveX":"PlugIn",n="MMredirectURL="+encodeURI(N.location).toString().replace(/&/g,"%26")+"&MMplayerType="+n+"&MMdoctitle="+I.title,t.flashvars="undefined"!=typeof t.flashvars?t.flashvars+("&"+n):n,R.ie&&R.win&&4!=o.readyState&&(n=I.createElement("div"),i+="SWFObjectNew",n.setAttribute("id",i),o.parentNode.insertBefore(n,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()),c(e,t,i))}function l(e){if(R.ie&&R.win&&4!=e.readyState){var t=I.createElement("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=I.createElement("div");if(R.win&&R.ie)t.innerHTML=e.innerHTML;else if((e=e.getElementsByTagName("object")[0])&&(e=e.childNodes))for(var i=e.length,n=0;i>n;n++)1==e[n].nodeType&&"PARAM"==e[n].nodeName||8==e[n].nodeType||t.appendChild(e[n].cloneNode(!0));return t}function c(e,t,i){var n,o=p(i);if(R.wk&&312>R.wk)return n;if(o)if("undefined"==typeof e.id&&(e.id=i),R.ie&&R.win){var a,r="";for(a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?r+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(r+=" "+a+'="'+e[a]+'"'));a="";for(var s in t)t[s]!=Object.prototype[s]&&(a+='<param name="'+s+'" value="'+t[s]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+a+"</object>",M[M.length]=e.id,n=p(e.id)}else{s=I.createElement("object"),s.setAttribute("type","application/x-shockwave-flash");for(var l in e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?s.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&s.setAttribute(l,e[l]));for(r in t)t[r]!=Object.prototype[r]&&"movie"!=r.toLowerCase()&&(e=s,a=r,l=t[r],i=I.createElement("param"),i.setAttribute("name",a),i.setAttribute("value",l),e.appendChild(i));o.parentNode.replaceChild(s,o),n=s}return n}function u(e){var t=p(e);t&&"OBJECT"==t.nodeName&&(R.ie&&R.win?(t.style.display="none",function(){if(4==t.readyState){var i=p(e);if(i){for(var n in i)"function"==typeof i[n]&&(i[n]=null);i.parentNode.removeChild(i)}}else setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=null;try{t=I.getElementById(e)}catch(i){}return t}function h(e,t,i){e.attachEvent(t,i),D[D.length]=[e,t,i]}function g(e){var t=R.pv;return e=e.split("."),e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)||0,e[2]=parseInt(e[2],10)||0,t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>=e[2]?!0:!1}function f(e,t,i,n){if(!R.ie||!R.mac){var o=I.getElementsByTagName("head")[0];o&&(i=i&&"string"==typeof i?i:"screen",n&&(C=b=null),b&&C==i||(n=I.createElement("style"),n.setAttribute("type","text/css"),n.setAttribute("media",i),b=o.appendChild(n),R.ie&&R.win&&"undefined"!=typeof I.styleSheets&&0<I.styleSheets.length&&(b=I.styleSheets[I.styleSheets.length-1]),C=i),R.ie&&R.win?b&&"object"==typeof b.addRule&&b.addRule(e,t):b&&"undefined"!=typeof I.createTextNode&&b.appendChild(I.createTextNode(e+" {"+t+"}")))}}function m(e,t){if(L){var i=t?"visible":"hidden";x&&p(e)?p(e).style.visibility=i:f("#"+e,"visibility:"+i)}}function y(e){return null!=/[\\\"<>\.;]/.exec(e)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(e):e}var v,_,E,A,b,C,N=window,I=document,S=navigator,T=!1,w=[function(){T?n():o()}],P=[],M=[],D=[],x=!1,k=!1,L=!0,R=function(){var e="undefined"!=typeof I.getElementById&&"undefined"!=typeof I.getElementsByTagName&&"undefined"!=typeof I.createElement,t=S.userAgent.toLowerCase(),i=S.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),i=i?/mac/.test(i):/mac/.test(t),t=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,a=[0,0,0],r=null;if("undefined"!=typeof S.plugins&&"object"==typeof S.plugins["Shockwave Flash"])!(r=S.plugins["Shockwave Flash"].description)||"undefined"!=typeof S.mimeTypes&&S.mimeTypes["application/x-shockwave-flash"]&&!S.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(T=!0,o=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof N.ActiveXObject)try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");s&&(r=s.GetVariable("$version"))&&(o=!0,r=r.split(" ")[1].split(","),a=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}catch(l){}return{w3:e,pv:a,wk:t,ie:o,win:n,mac:i}}();return function(){R.w3&&(("undefined"!=typeof I.readyState&&"complete"==I.readyState||"undefined"==typeof I.readyState&&(I.getElementsByTagName("body")[0]||I.body))&&e(),x||("undefined"!=typeof I.addEventListener&&I.addEventListener("DOMContentLoaded",e,!1),R.ie&&R.win&&(I.attachEvent("onreadystatechange",function(){"complete"==I.readyState&&(I.detachEvent("onreadystatechange",arguments.callee),e())}),N==top&&function(){if(!x){try{I.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),R.wk&&function(){x||(/loaded|complete/.test(I.readyState)?e():setTimeout(arguments.callee,0))}(),i(e)))}(),function(){R.ie&&R.win&&window.attachEvent("onunload",function(){for(var e=D.length,t=0;e>t;t++)D[t][0].detachEvent(D[t][1],D[t][2]);for(e=M.length,t=0;e>t;t++)u(M[t]);for(var i in R)R[i]=null;R=null;for(var n in swfobject)swfobject[n]=null;swfobject=null})}(),{registerObject:function(e,t,i,n){if(R.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=i,o.callbackFn=n,P[P.length]=o,m(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return R.w3?a(e):void 0},embedSWF:function(e,i,n,o,a,l,d,u,p,h){var f={success:!1,id:i};R.w3&&!(R.wk&&312>R.wk)&&e&&i&&n&&o&&a?(m(i,!1),t(function(){n+="",o+="";var t={};if(p&&"object"==typeof p)for(var y in p)t[y]=p[y];if(t.data=e,t.width=n,t.height=o,y={},u&&"object"==typeof u)for(var v in u)y[v]=u[v];if(d&&"object"==typeof d)for(var _ in d)y.flashvars="undefined"!=typeof y.flashvars?y.flashvars+("&"+_+"="+d[_]):_+"="+d[_];if(g(a))v=c(t,y,i),t.id==i&&m(i,!0),f.success=!0,f.ref=v;else{if(l&&r())return t.data=l,void s(t,y,i,h);m(i,!0)}h&&h(f)})):h&&h(f)},switchOffAutoHideShow:function(){L=!1},ua:R,getFlashPlayerVersion:function(){return{major:R.pv[0],minor:R.pv[1],release:R.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(e,t,i){return R.w3?c(e,t,i):void 0},showExpressInstall:function(e,t,i,n){R.w3&&r()&&s(e,t,i,n)},removeSWF:function(e){R.w3&&u(e)},createCSS:function(e,t,i,n){R.w3&&f(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,callDomLoadFunctions:e,getQueryParamValue:function(e){var t=I.location.search||I.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return y(t);for(var t=t.split("&"),i=0;i<t.length;i++)if(t[i].substring(0,t[i].indexOf("="))==e)return y(t[i].substring(t[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(k){var e=p("SWFObjectExprInst");e&&v&&(e.parentNode.replaceChild(v,e),_&&(m(_,!0),R.ie&&R.win&&(v.style.display="block")),E&&E(A)),k=!1}}}}();!function(){function e(){var e,t,i,n=this;t=null,this.getSDK=function(){return t},this.setSDK=function(i){var n,o;t=i,e();for(n in t)o=t[n],window[n]=o;return t},this.saveSDK=function(e,t){var n,o,a;if(null!=t&&null!=e&&""!==e){if(null==t.main)for(n in t)if(o=t[n],(null!=o?o.VERSION:void 0)===e){t.main=o;break}return null==(a=t.version)&&(t.version=e),i.push(t),this[e]=t,t}},i=[],this.getVersions=function(){return i.slice()},this.getVersion=function(e){return this[e]},this.setVersion=function(e){return t=this.getVersion(e),null==t?null:(this.setSDK(t),t)},this.revert=function(){return this.setSDK(i[0])},this.noConflict=function(){var e;return e=this.getSDK(),this.revert(),e},this.create=function(){var e;return e=function(e,t){return this.prototype=e.prototype,e.apply(this,t)},function(i){return new e(t.main,arguments)}}(),(e=function(){var e,i,o,a,r;if(null!=(a=window.com)&&null!=(r=a.akamai)?r.amp:void 0)for(e in window)if(o=window[e],(o===window.AMP||o===window.AMPremier)&&null!=(null!=o?o.VERSION:void 0)&&""!==o.VERSION&&o.VERSION!==(null!=t?t.version:void 0)&&null==n[o.VERSION]){i={},i.main=o,i.com=window.com,window.AMP&&(i.AMP=window.AMP),window.AMPPremier&&(i.AMPremier=window.AMPPremier),window.Utils&&(i.Utils=window.Utils),window.QueryString&&(i.QueryString=window.QueryString),window.QueryParams&&(i.QueryParams=window.QueryParams),n.saveSDK(o.VERSION,i);break}})()}function t(e){return{}.hasOwnProperty(e)}function i(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e}function n(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1}function o(e,t){return function(){return e.apply(t,arguments)}}function a(){}function r(e,t){this.config=e,r.__super__.constructor.call(this,t)}function s(e){this.viewComponent=e,s.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now()),this.dispatcher=new l(this),this.logger=Pt,this.moduleMap={}}function l(e,t){this.target=null!=e?e:this,this.catchErrors=null!=t?t:!0,this.listenerMap={}}function d(e){this.list=null!=e?e:[],d.__super__.constructor.call(this),this.handlers={change:this.changeHandler.bind(this)}}function c(e){var t,i,n,o;e.className=Lo.PREFIX+"player",i=rt.create("install-flash",e),o=rt.create(null,i,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed."),t=rt.create(null,i,"a"),t.href="http://www.adobe.com/go/getflashplayer",n=rt.create(null,t,"img"),n.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",n.alt="Get Adobe Flash player"}function u(){this.map={}}function p(){p.__super__.constructor.call(this)}function h(){h.__super__.constructor.call(this)}function g(){g.__super__.constructor.call(this)}function f(){f.__super__.constructor.call(this)}function m(){m.__super__.constructor.call(this)}function y(){y.__super__.constructor.call(this)}function v(){v.__super__.constructor.call(this)}function _(){_.__super__.constructor.call(this)}function E(){E.__super__.constructor.call(this)}function A(){A.__super__.constructor.call(this)}function b(){b.__super__.constructor.call(this)}function C(){C.__super__.constructor.call(this)}function N(){N.__super__.constructor.call(this)}function I(){I.__super__.constructor.call(this)}function S(){S.__super__.constructor.call(this)}function T(){T.__super__.constructor.call(this)}function w(){w.__super__.constructor.call(this)}function P(){P.__super__.constructor.call(this)}function M(){M.__super__.constructor.call(this)}function D(){D.__super__.constructor.call(this)}function x(){x.__super__.constructor.call(this)}function k(){k.__super__.constructor.call(this)}function L(){L.__super__.constructor.call(this)}function R(){R.__super__.constructor.call(this)}function O(){O.__super__.constructor.call(this)}function V(){V.__super__.constructor.call(this)}function G(){G.__super__.constructor.call(this)}function U(){U.__super__.constructor.call(this)}function B(){B.__super__.constructor.call(this)}function H(){H.__super__.constructor.call(this)}function F(){F.__super__.constructor.call(this)}function j(){j.__super__.constructor.call(this)}function z(){z.__super__.constructor.call(this)}function Y(e){null==this.cssPrefix&&(this.cssPrefix=Lo.PREFIX),Y.__super__.constructor.call(this,this.mediatorName,e)}function W(e){W.__super__.constructor.call(this,e)}function q(e,t,i,n){this.componentName=null!=e?e:this.componentName,this.componentType=null!=t?t:this.componentType,this.parent=i,this.element=n,null==this.mediatorName&&(this.mediatorName=this.createMediatorName()),q.__super__.constructor.call(this,this.viewComponent)}function X(){X.__super__.constructor.call(this,null,null,null,null)}function Z(){Z.__super__.constructor.call(this)}function J(){J.__super__.constructor.call(this)}function K(){K.__super__.constructor.call(this)}function Q(){Q.__super__.constructor.call(this)}function $(){}function ee(){ee.__super__.constructor.call(this)}function te(){te.__super__.constructor.call(this)}function ie(){ie.__super__.constructor.call(this),this.keyHandler=this.keypress.bind(this)}function ne(){ne.__super__.constructor.call(this)}function oe(){oe.__super__.constructor.call(this)}function ae(e){this.data=null!=e?e:{},ae.__super__.constructor.call(this)}function re(){}function se(){se.__super__.constructor.call(this,null,{}),this.data.audioTracks=new d,this.data.videoTracks=new d,this.data.textTracks=new d}function le(e){le.__super__.constructor.call(this,e)}function de(e){de.__super__.constructor.call(this,e)}function ce(){ce.__super__.constructor.call(this,this.constructor.NAME,{}),this.setupHDN1()}function ue(e){ue.__super__.constructor.call(this,e)}function pe(){pe.__super__.constructor.call(this)}function he(){he.__super__.constructor.call(this)}function ge(){ge.__super__.constructor.call(this)}function fe(e,t){this.player=e,this.config=t,fe.__super__.constructor.call(this,this.constructor.NAME),this.proxy=new at(this.config),this.player.registerProxy(this.proxy)}function me(e,t){this.mediatorName=""+this.componentType+"-mediator",me.__super__.constructor.call(this,e,null,null,t)}function ye(){ye.__super__.constructor.call(this)}function ve(){ve.__super__.constructor.call(this)}function _e(e,t){this.componentName=e,this.layers=[],_e.__super__.constructor.call(this,null,null,null,t)}function Ee(e){Ee.__super__.constructor.call(this,this.type,e)}function Ae(){Ae.__super__.constructor.call(this)}function be(){be.__super__.constructor.call(this)}function Ce(){Ce.__super__.constructor.call(this)}function Ne(){Ne.__super__.constructor.call(this)}function Ie(){}function Se(){Se.__super__.constructor.call(this)}function Te(){Te.__super__.constructor.call(this)}function we(e){we.__super__.constructor.call(this,e)}function Pe(e){Pe.__super__.constructor.call(this,e)}function Me(){Me.__super__.constructor.call(this,Me.NAME),this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1},"desktop"===Dt.getDevice()&&(this.initialized=!0),this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this)},this.resumeHandlers={seeked:this.resumeseeked.bind(this),loadedmetadata:this.resumeloadedmetadata.bind(this)}}function De(){De.__super__.constructor.call(this)}function xe(e,t){this.supportedTypes=null!=e?e:this.supportedTypes,this.config=t,xe.__super__.constructor.call(this),this.temporalTypes=["vod","live","ondemand"]}function ke(e){this.player=e,ke.__super__.constructor.call(this)}function Le(e){this.flashObjectID+=Date.now(),this.plugins={},this.displayState=Go.NORMAL,this.debug=/debug\=true/.test(location.search),Le.__super__.constructor.call(this,e)}function Re(e){this.module=e,Re.__super__.constructor.call(this,e.getModuleName(),this)}function Oe(){}function Ve(){Ve.__super__.constructor.call(this)}function Ge(){}function Ue(e){null!=e&&this.parse(e)}function Be(e){Be.__super__.constructor.call(this,e)}function He(){He.__super__.constructor.call(this),null==this.contextName&&(this.contextName=this.constructor.NAME)}function Fe(){Fe.__super__.constructor.call(this)}function je(){je.__super__.constructor.call(this)}function ze(){ze.__super__.constructor.call(this)}function Ye(){Ye.__super__.constructor.call(this)}function We(){We.__super__.constructor.call(this)}function qe(){qe.__super__.constructor.call(this)}function Xe(){Xe.__super__.constructor.call(this)}function Ze(){Ze.__super__.constructor.call(this)}function Je(){Je.__super__.constructor.call(this)}function Ke(){Ke.__super__.constructor.call(this)}function Qe(){Qe.__super__.constructor.call(this)}function $e(){$e.__super__.constructor.call(this)}function et(){et.__super__.constructor.call(this)}function tt(){tt.__super__.constructor.call(this)}function it(){it.__super__.constructor.call(this)}function nt(){this.plugins=[],this.registered=0,nt.__super__.constructor.call(this,this.constructor.NAME,{})}function ot(e){this.element=e}function at(e){var t,i;if(at.__super__.constructor.call(this),this.data={language:navigator.language||navigator.browserLanguage,locales:ht.defaults.locales},null!=e&&(null!=e.language&&(this.data.language=e.language),null!=e.locales))for(i in e.locales)if(null!=this.data.locales[i])for(t in e.locales[i])this.data.locales[i][t]=e.locales[i][t];else this.data.locales[i]=e.locales[i]}function rt(){}function st(){st.__super__.constructor.call(this)}function lt(e){this.message=lt.MESSAGE+e}function dt(e){dt.__super__.constructor.call(this,e)}function ct(e){ct.__super__.constructor.call(this,e)}function ut(e){this.token=new RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g"),ut.__super__.constructor.call(this,e)}function pt(e){pt.__super__.constructor.call(this,e)}function ht(e){var t,i,n;null==e&&(e={}),t=Dt.override(ht.defaults,e),/amp\-debug\=true/.test(location.search.toLowerCase())===!0&&(t.debug=!0),t.mode=Dt.getPlaybackMode(t.mode),t.version=ti.getVersion();for(i in t)n=t[i],this[i]=n}function gt(e){gt.__super__.constructor.call(this,e)}function ft(){ft.__super__.constructor.call(this,this.constructor.NAME,{}),this.data={},this.contextMap={},this.configurationMap={}}function mt(){mt.__super__.constructor.call(this),this.device=Dt.getDevice()}function yt(e){this.defaults=ht.defaults,yt.__super__.constructor.call(this,e)}function vt(){vt.__super__.constructor.call(this)}function _t(e,t,i){var a;this.target=e,this.type=t,this.handler=i,this.trigger=o(this.trigger,this),_t.instances.push(this),this.types=[],a=this.type,n.call(_t.EVENTS,a)>=0?Dt.isTouchDevice()?(this.types.push(_t.TOUCH_EVENTS[this.type]),this.type===_t.TOUCH_EVENTS[1]&&this.types.push(_t.TOUCH_EVENTS[4])):this.types.push(_t.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type),this.bind()}function Et(){Et.__super__.constructor.call(this)}function At(e,t){this.defaultPlaybackCore=e,this.getPlaybackOrder=t,At.__super__.constructor.call(this),this.playbackCoreMap=[]}function bt(){this.data={metadata:{}},bt.__super__.constructor.call(this)}function Ct(){Ct.__super__.constructor.call(this)}function Nt(e,t,i){Nt.__super__.constructor.call(this,e,t,i)}function It(){this.item=[],this.metadata={}}function St(){this.metadata={}}function Tt(e,t){this.type=e,null!=t&&(this.detail=this.data=t)}function wt(){}function Pt(){}function Mt(){Mt.__super__.constructor.call(this)}function Dt(){}function xt(){xt.__super__.constructor.call(this,this,!1)}function kt(e,t,i,n,o){this.labelText=e,this.onclick=null!=o?o:this.onclick,kt.__super__.constructor.call(this,n,null,t,i)}function Lt(e,t){this.element=e,this.timeout=t,Lt.__super__.constructor.call(this),this.resetHandler=this.reset.bind(this)}function Rt(e){Rt.__super__.constructor.call(this,null,null,e)}function Ot(e,t){this.player=e,this.config=t,Ot.__super__.constructor.call(this),this.dispatcher=new l(this),this.createDefaults()}function Vt(){Vt.__super__.constructor.call(this)}function Gt(){Gt.__super__.constructor.call(this)}function Ut(){Ut.__super__.constructor.call(this)}function Bt(){Bt.__super__.constructor.call(this)}function Ht(){Ht.__super__.constructor.call(this)}function Ft(){Ft.__super__.constructor.call(this)}function jt(){jt.__super__.constructor.call(this)}function zt(){zt.__super__.constructor.call(this)}function Yt(e,t){Yt.__super__.constructor.call(this,e,t)}function Wt(e){Wt.__super__.constructor.call(this,e)}function qt(e){qt.__super__.constructor.call(this,null,e)}function Xt(e,t){this.direction=null!=t?t:this.direction,Xt.__super__.constructor.call(this,null,null,e)}function Zt(e){Zt.__super__.constructor.call(this,null,null,e)}function Jt(e){Jt.__super__.constructor.call(this,null,e)}function Kt(e){this.panels=[],this.closeHandler=this.mouseupHandler.bind(this),Kt.__super__.constructor.call(this,null,null,e)}function Qt(e){Qt.__super__.constructor.call(this,e,"horizontal")}function $t(e){$t.__super__.constructor.call(this,null,e)}function ei(){ei.__super__.constructor.call(this)}function ti(){}function ii(){return ii.__super__.constructor.apply(this,arguments)}function ni(){ni.__super__.constructor.call(this)}function oi(){oi.__super__.constructor.call(this)}function ai(){ai.__super__.constructor.call(this)}function ri(){ri.__super__.constructor.call(this)}function si(){si.__super__.constructor.call(this)}function li(){li.__super__.constructor.call(this)}function di(){di.__super__.constructor.call(this)}function ci(){ci.__super__.constructor.call(this)}function ui(){ui.__super__.constructor.call(this)}function pi(){pi.__super__.constructor.call(this)}function hi(){hi.__super__.constructor.call(this)}function gi(){gi.__super__.constructor.call(this)}function fi(){fi.__super__.constructor.call(this)}function mi(){mi.__super__.constructor.call(this)}function yi(){yi.__super__.constructor.call(this)}function vi(){vi.__super__.constructor.call(this)}function _i(){_i.__super__.constructor.call(this)}function Ei(){Ei.__super__.constructor.call(this)}function Ai(){Ai.__super__.constructor.call(this)}function bi(e,t){bi.__super__.constructor.call(this,e,t)}function Ci(e,t,i,n,o,a,r,s,l,d,c,u){this.id=e,this.title=t,this.duration=i,this.position=n,this.type=o,this.partner=a,this.advertiser=r,this.companions=s,this.request=l,this.metadata=d,this.totalAds=c,this.currentTime=u}function Ni(e){Ni.__super__.constructor.call(this,e)}function Ii(e){Ii.__super__.constructor.call(this,e)}function Si(e){Si.__super__.constructor.call(this,e),this.intervals=[],this.loadedmetadata=this.onLoadedMetadata.bind(this)}function Ti(e){Ti.__super__.constructor.call(this,e)}function wi(){wi.__super__.constructor.call(this)}function Pi(){Pi.__super__.constructor.call(this)}function Mi(e){Mi.__super__.constructor.call(this,e),this.helper=new wt}function Di(){Di.__super__.constructor.call(this)}function xi(){xi.__super__.constructor.call(this)}function ki(){ki.__super__.constructor.call(this)}function Li(){Li.__super__.constructor.call(this)}function Ri(e,t){null==t&&(t={}),Ri.__super__.constructor.call(this,e,t),null!=t.url&&(this.url=t.url),null!=t.data&&(this.data=t.data),this.player.load=function(){}}function Oi(){Oi.__super__.constructor.call(this)}function Vi(e,t){null==t&&(t={}),Vi.__super__.constructor.call(this,e,t)}function Gi(){Gi.__super__.constructor.call(this)}function Ui(e){Ui.__super__.constructor.call(this,e)}function Bi(){Bi.__super__.constructor.call(this)}function Hi(){Hi.__super__.constructor.call(this)}function Fi(e,t,i){this.startTime=e,this.endTime=t,this.id=i}function ji(){ji.__super__.constructor.call(this)}function zi(){}function Yi(){}function Wi(){}function qi(){var e,t=this;this.captions=[],this.head=document.getElementsByTagName("head")[0],e=window.com||{},e.akamai=e.akamai||{},e.akamai.amp=e.akamai.amp||{},e.akamai.amp.plugins=e.akamai.amp.plugins||{},e.akamai.amp.plugins.subply=e.akamai.amp.plugins.subply||{},e.akamai.amp.plugins.subply.response=function(e){t.parse(e),t.poll()},null==window.com&&(window.com=e),qi.__super__.constructor.call(this,this.constructor.NAME)}function Xi(){Xi.__super__.constructor.call(this)}function Zi(){Zi.__super__.constructor.call(this)}function Ji(){Ji.__super__.constructor.call(this)}function Ki(){Ki.__super__.constructor.call(this)}function Qi(e,t){Qi.__super__.constructor.call(this,e,t)}function $i(e,t){var i,n=this;this.kind=e.kind,this.type=e.type,this.src=e.src,this.language=e.srclang,this.label=e.label||this.srclang||this.kind,this.cues=e.cues||[],this.styles=e.styles||{},this.activeCues=[],this.isLive=/live-subply/.test(this.type),null==this.src||""===this.src||this.isLive?setTimeout(t,1):i=Dt.get(this.src,{onload:function(){try{CaptionParsers[n.type].parse(n,i.response)}catch(e){return void Pt.error("Could not parse caption track: "+n.src)}"function"==typeof t&&t()},onerror:function(){Pt.error("Could not load caption track: "+n.src)}})}function en(e,t,i,n){en.__super__.constructor.call(this,e,t,i,n)}function tn(e){this.activeCaptions=[],this.providers={},this.tracks=[],this.rendererMap=[],this.settings={},tn.__super__.constructor.call(this,e)}function nn(e){nn.__super__.constructor.call(this,null,null,e,null)}function on(e){on.__super__.constructor.call(this,e)}function an(e){an.__super__.constructor.call(this,null,null,e,null)}function rn(e){rn.__super__.constructor.call(this,e)}function sn(){sn.__super__.constructor.call(this)}function ln(e,t){null==t&&(t={}),ln.__super__.constructor.call(this,e,t)}function dn(){dn.__super__.constructor.call(this)}function cn(e){cn.__super__.constructor.call(this,e)}function un(){un.__super__.constructor.call(this)}function pn(){pn.__super__.constructor.call(this)}function hn(e){hn.__super__.constructor.call(this,e)}function gn(){return gn.__super__.constructor.apply(this,arguments)}function fn(){fn.__super__.constructor.call(this)}function mn(){mn.__super__.constructor.call(this)}function yn(){yn.__super__.constructor.call(this)}function vn(){return vn.__super__.constructor.apply(this,arguments)}function _n(e){_n.__super__.constructor.call(this,e)}function En(){En.__super__.constructor.call(this)}function An(){An.__super__.constructor.call(this)}function bn(){bn.__super__.constructor.call(this)}function Cn(){Cn.__super__.constructor.call(this)}function Nn(){Nn.__super__.constructor.call(this)}function In(){In.__super__.constructor.call(this)}function Sn(){Sn.__super__.constructor.call(this)}function Tn(){Tn.__super__.constructor.call(this)}function wn(){wn.__super__.constructor.call(this)}function Pn(){Pn.__super__.constructor.call(this)}function Mn(){Mn.__super__.constructor.call(this)}function Dn(){Dn.__super__.constructor.call(this)}function xn(){xn.__super__.constructor.call(this)}function kn(){kn.__super__.constructor.call(this)}function Ln(){Ln.__super__.constructor.call(this)}function Rn(e){Rn.__super__.constructor.call(this,e)}function On(e){On.__super__.constructor.call(this,e)}function Vn(e,t){Vn.__super__.constructor.call(this,e,t)}function Gn(){return Gn.__super__.constructor.apply(this,arguments)}function Un(){Un.__super__.constructor.call(this)}function Bn(){return Bn.__super__.constructor.apply(this,arguments)}function Hn(e){Hn.__super__.constructor.call(this,e)}function Fn(){Fn.__super__.constructor.call(this)}function jn(){jn.__super__.constructor.call(this)}function zn(){zn.__super__.constructor.call(this)}function Yn(){Yn.__super__.constructor.call(this)}function Wn(){Wn.__super__.constructor.call(this)}function qn(){qn.__super__.constructor.call(this)}function Xn(){Xn.__super__.constructor.call(this)}function Zn(){return Zn.__super__.constructor.apply(this,arguments)}function Jn(){Jn.__super__.constructor.call(this)}function Kn(e){Kn.__super__.constructor.call(this,e)}function Qn(){Qn.__super__.constructor.call(this)}function $n(){$n.__super__.constructor.call(this)}function eo(){eo.__super__.constructor.call(this)}function to(e){to.__super__.constructor.call(this,null,null,null,e,onclick)}function io(e){io.__super__.constructor.call(this,e,null,null,null)}function no(e){no.__super__.constructor.call(this,e)}function oo(e){oo.__super__.constructor.call(this,e)}function ao(e){ao.__super__.constructor.call(this,e)}function ro(e,t){null==t&&(t={}),ro.__super__.constructor.call(this,e,t)}function so(e){so.__super__.constructor.call(this,e)}function lo(e,t){lo.__super__.constructor.call(this,e,t)}function co(){co.__super__.constructor.call(this),this.controls={}}function uo(){uo.__super__.constructor.call(this)}function po(){po.__super__.constructor.call(this)}function ho(e){this.name=this.playbackCoreName+"-"+Date.now(),ho.__super__.constructor.call(this,e.types)}function go(e){var t,i=this;this.name=e,this.data={paused:!1,ended:!1,error:null,duration:0,currentTime:0,src:null},this.startNode=null,this.iframe=document.querySelector("iframe[name="+this.name+"]"),this.iframe.video=this,this.iframe.onload=function(){raptor.api.init(i.iframe)},raptor.api.on("ready",function(e,t){raptor.settings("defaultIFrame",i.name),raptor.api.load()}),raptor.api.on("play",function(e,t){t.frameName===i.name&&(i.data.paused=!1,i.dispatchEvent("play"),i.dispatchEvent("playing"))}),raptor.api.on("pause",function(e,t){t.frameName===i.name&&(i.updateData(),i.data.paused=!0,i.dispatchEvent("pause"))}),raptor.api.on("error",function(e,t){t.frameName===i.name&&(i.data.error=t,i.dispatchEvent("error"))}),raptor.api.on("inboundReady",function(e,t){t&&t.frameName!==i.name||(i.updateData(),i.dispatchEvent("loadedmetadata"))}),raptor.api.on("timeUpdate",function(e,t){t&&t.frameName!==i.name||i.updateData(t)}),raptor.api.on("clipEnd",function(e,t){t&&t.frameName!==i.name||i.dispatchEvent("interactivebreakstart");
}),raptor.api.on("clipStart",function(e,t){t&&t.frameName!==i.name||("true"===t.isStart&&(i.startNode=raptor.api.nodes(i.name)[t.clipname]),i.dispatchEvent("interactivebreakend"))}),raptor.api.on("projectEnd",function(e,t){t&&t.frameName!==i.name||(i.data.ended=!0,i.dispatchEvent("ended"))}),t=function(e,t){console.log("RAPT: ",e.type,e,t)},raptor.api.on("inboundReady",t),raptor.api.on("play",t),raptor.api.on("pause",t),raptor.api.on("error",t),raptor.api.on("clipStart",t),raptor.api.on("clipEnd",t),raptor.api.on("clipSwitch",t),raptor.api.on("projectStart",t),raptor.api.on("projectEnd",t),raptor.api.on("progress",t),raptor.api.on("button",t),raptor.api.on("windowed",t),raptor.api.on("userTimed",t),raptor.api.on("fullscreen",t),raptor.api.on("volume",t),raptor.api.on("mute",t),raptor.api.on("unmute",t)}function fo(e){fo.__super__.constructor.call(this,e)}function mo(){mo.__super__.constructor.call(this)}function yo(e,t){yo.__super__.constructor.call(this,e,t),Dt.flashTypes.push(Dt.mimeTypes.m3u8)}function vo(e){this.hlsConfig=e.data,e.withCredentials===!0&&(this.hlsConfig.xhrSetup=function(e,t){e.withCredentials=!0}),vo.__super__.constructor.call(this,e.types,e),this.temporalTypes=["vod","live","dvr"]}function _o(){_o.__super__.constructor.call(this)}function Eo(e){Eo.__super__.constructor.call(this,e)}function Ao(e){Ao.__super__.constructor.call(this,e)}function bo(){bo.__super__.constructor.call(this)}function Co(){Co.__super__.constructor.call(this)}var No,Io,So;if(null==(So=window.AKAMAI_MEDIA_PLAYER)&&(window.AKAMAI_MEDIA_PLAYER=new e),Io="AMP Premier - NDN v1.53.x.0004",null==window.AKAMAI_MEDIA_PLAYER[Io]){No=window.AKAMAI_MEDIA_PLAYER[Io]={},a.construct=function(){var e,t,i;i=this.deserialize(window.location.search);for(e in i)t=i[e],a[e]=t;return!0},a.serialize=function(e,t){var i,n,o,a;o=[];for(n in e)a=e[n],null!=a&&(i=t?t+"["+n+"]":n,o.push("object"==typeof a?this.serialize(a,i):encodeURIComponent(i)+"="+encodeURIComponent(a)));return o.join("&")},a.deserialize=function(e){var t;return null!=e&&(t={},e=e.replace(/^[^?]*\?/,""),e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,n,o){t[decodeURIComponent(i)]=decodeURIComponent(o)})),t},a.constructed=a.construct(),i(r,puremvc.Proxy),r.NAME="ModuleProxy",r.prototype.defaults=null,r.prototype.config=null,r.prototype.initializeNotifier=function(e){r.__super__.initializeNotifier.call(this,e),this.createData()},r.prototype.createData=function(){this.setData(this.config)},r.prototype.setData=function(e){var t,i,n,o,a;null==e&&(e={}),n={},a=this.defaults;for(i in a)t=a[i],o=i in e?e[i]:t,n[i]=o;return r.__super__.setData.call(this,n),e},r.prototype.destory=function(){},i(s,puremvc.Facade),s.prototype.logger=null,s.prototype.config=null,s.prototype.moduleName=null,s.prototype.moduleMap=null,s.prototype.viewComponent=null,s.prototype.dispatcher=null,s.prototype.oninitialized=null,s.prototype.onerror=null,s.prototype.parentModule=null,s.prototype.initialize=function(e,t){this.config=e,this.parentModule=t,this.loadResources()},s.prototype.loadResources=function(){var e,t,i,n,o;if(!(null!=(n=this.config.resources)?n.length:void 0)>0)return void this.resourcesLoaded();for(o=this.config.resources,t=0,i=o.length;i>t;t++)e=o[t],e.src=this.evaluatePaths(e.src),null!=e.debug&&(e.debug=this.evaluatePaths(e.debug));ti.addResources(this.config.resources,this.resourcesLoaded.bind(this),this.resourcesError.bind(this))},s.prototype.evaluatePaths=function(e){var t,i,n;if(null!=e)return t=this.config.paths||(null!=(i=this.parentModule)&&null!=(n=i.config)?n.paths:void 0),null!=t&&(e=e.replace(/#{paths\.[^}]*}/g,function(e){return Oe.eval(e,null,null,null,t)})),e},s.prototype.resourcesError=function(e){"function"==typeof this.onerror&&this.onerror(this)},s.prototype.resourcesLoaded=function(){this.createFramework(),"function"==typeof this.oninitialized&&this.oninitialized(this)},s.prototype.createFramework=function(){this.createModel(),this.createController(),this.createView()},s.prototype.createModel=function(){this.registerProxy(new r(this.config))},s.prototype.createView=function(){},s.prototype.createController=function(){this.registerCommand(xo.DISPATCH_EVENT,Ve)},s.prototype.getModuleName=function(){return this.moduleName},s.prototype.getConfig=function(){return this.config},s.prototype.hasModule=function(e){return null!=this.moduleMap[e]},s.prototype.getModules=function(){var e,t,i,n;t={},n=this.moduleMap;for(e in n)i=n[e],t[e]=i.module;return t},s.prototype.registerModule=function(e){var t,i;i=e.getModuleName(),null!=e&&null==this.moduleMap[i]&&(t=new Re(e),this.moduleMap[i]=t,this.registerMediator(t),e.onRegister())},s.prototype.retrieveModule=function(e){return this.moduleMap[e].module},s.prototype.removeModule=function(e){var t,i;return t=this.moduleMap[e],null!=t?(delete this.moduleMap[e],this.removeMediator(e),i=t.module,i.onRemove.call(i),i):void 0},s.prototype.listNotificationInterests=function(){return[]},s.prototype.listNotificationPublications=function(){return[]},s.prototype.getViewComponent=function(){return this.viewComponent},s.prototype.setViewComponent=function(e){return this.viewComponent=e,e},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.destroy=function(){var e,t,i,n;if(null!=this.getModules()){i=this.getModules();for(e in i)t=i[e],this.removeModule(e),t.destroy()}null!=(n=this.retrieveProxy(r.NAME))&&"function"==typeof n.destroy&&n.destroy(),puremvc.Facade.removeCore(this.multitonKey),null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");for(e in this)this[e]=null,delete this[e]},s.prototype.addEventListener=function(e,t){this.dispatcher.addEventListener(e,t)},s.prototype.logEvent=function(e){var t;/(timeupdate|progress)/.test(e.type)!==!0&&(t=this.getModuleName().toUpperCase(),e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e))},s.prototype.dispatchEvent=function(e){this.logEvent(e),this.dispatcher.dispatchEvent(e)},s.prototype.removeEventListener=function(e,t){this.dispatcher.removeEventListener(e,t)},l.prototype.addEventListener=function(e,t,i){null!=t&&null!=e&&(null==this.listenerMap[e]&&(this.listenerMap[e]=[]),-1===this.listenerMap[e].indexOf(t)&&this.listenerMap[e].push(t))},l.prototype.dispatchEvent=function(e){var t,i,n,o;if(i=this.listenerMap[e.type],t=this.target["on"+e.type],e.target=this.target,null!=t&&t.apply(this.target,[e]),null!=i)for(n=0,o=i.length;o>n;n++)t=i[n],t.apply(this.target,[e])},l.prototype.callListener=function(e,t){try{t.apply(this.target,[e])}catch(i){if(this.catchErrors!==!0)throw i;this.processEventError(i,e,t)}},l.prototype.processEventError=function(e,t,i){var n,o,a;o=e.fileName||e.sourceURL,a=e.lineNumber||e.line,n={message:e.message,name:"AMP Event Listener Error",file:o,fileName:o,line:a,lineNumber:a,error:e,event:t,listener:i,functionName:i.name,toString:function(){var e;return e=""+this.name+":",e+="\n	"+this.error.toString(),null!=this.event&&(e+="\n		event: "+this.event.type),null!=this.listener&&(e+="\n		function: "+this.listener.name),null!=this.file&&(e+="\n		file: "+this.file),null!=this.line&&(e+="\n		line: "+this.line),e}},setTimeout(function(e){throw e},0,n)},l.prototype.removeEventListener=function(e,t,i){var n,o;if(null!=t&&null!=e&&(o=this.listenerMap[e],null!=o&&(n=null!=o?o.indexOf(t):void 0,-1!==n)))return o.splice(n,1)},i(d,l),d.prototype.onchange=null,d.prototype.list=null,d.prototype.changeHandler=function(e){this.dispatchEvent(e)},d.prototype.add=function(e,t){null==t&&(t=!0),this.list.push(e),e.addEventListener("change",this.handlers.change),t===!0&&this.dispatchEvent({type:"addtrack"})},d.prototype.set=function(e){var t,i,n,o;if(this.clear(),null!=e&&0!==e.length){for(t=n=0,o=e.length;o>n;t=++n)i=e[t],this.add(i,!1),this[t]=null,delete this[t];this.dispatchEvent({type:"addtrack"})}},d.prototype.item=function(e){return this.list[e]},d.prototype.remove=function(e,t){var i;return null==t&&(t=!0),n.call(this,e)>=0?(i=this.list.splice(e,1),i.removeEventListener("change",this.handlers.change),t===!0&&this.dispatchEvent({type:"removetrack"}),i):void 0},d.prototype.clear=function(){var e,t,i,n;if(0!==this.list.length){for(e=i=0,n=this.length;n>i;e=++i)t=this[e],this.remove(t,!1),this.list[e]=null,delete this.list[e];this.dispatchEvent({type:"removetrack"})}},d.prototype.forEach=function(e,t){var i,n,o,a,r;if(null!=e)for(r=this.list,i=o=0,a=r.length;a>o;i=++o)n=r[i],e.call(t,n,i,this.list)},d.prototype.getTrackById=function(e){var t,i,n,o;for(o=this.list,i=0,n=o.length;n>i;i++)if(t=o[i],t.id===e)return t},d.prototype.getLength=function(){return this.list.length},c.prototype.initialize=function(){},c.prototype.getModules=function(){return[]},u.prototype.map=null,u.prototype.add=function(e,t){this.map[e]=t},u.prototype.item=function(e){return this.map[e]},u.prototype.remove=function(e){var t;return t=this.map[e],null!=t&&(this.map[e]=null,delete this.map[e]),t},i(p,u),p.prototype.add=function(e,t,i){var n,o,a;return a=Pt.enabled&&null!=e.debug?e.debug:e.src,n=this.item(a),e.enabled===!1||(null!=n?n.loaded:void 0)===!0?void t():(null!=n?n.loaded:void 0)===!1?void n.callbacks.push(t):(e.loaded=!1,e.callbacks=[t],o=this.resourceLoaded.bind(e),p.__super__.add.call(this,a,e),e.type===Dt.mimeTypes.js?void Dt.loadScript(a,o,document.body,i):(e.type===Dt.mimeTypes.css&&Dt.loadStyleSheet(a),void o()))},p.prototype.resourceLoaded=function(){var e,t,i,n;for(this.loaded=!0,t=this.callbacks,this.callbacks=null,delete this.callbacks,i=0,n=t.length;n>i;i++)(e=t[i])();t=null},p.prototype.addResources=function(e,t,i){var n,o,a,r=this;return!(null!=e?e.length:void 0)>0?void t():(o=0,a=function(){r.add(e[o],n,i)},n=function(){o++,o>=e.length?t():a()},void a())},i(h,puremvc.SimpleCommand),h.prototype.execute=function(e){var t,i;this.sendNotification(xo.READY,this.facade.config),t=null!=(i=this.facade.config)?i.media:void 0,null!=t&&this.sendNotification(xo.SET_MEDIA,t)},i(g,puremvc.SimpleCommand),g.prototype.applicationState=null,g.prototype.media=null,g.prototype.player=null,g.prototype.playback=null,g.prototype.config=null,g.prototype.logger=null,g.prototype.bindings=null,g.prototype.params=null,g.prototype.playerCore=null,g.prototype.security=null,g.prototype.tracks=null,g.prototype.initializeNotifier=function(e){var t;g.__super__.initializeNotifier.call(this,e),this.player=this.facade.player||this.facade,this.applicationState=this.player.appState,this.media=this.player.media,this.config=this.player.configuration,this.logger=this.player.logger,this.bindings=this.player.bindings,this.params=this.player.params,this.playerCore=this.player.playerCore,this.security=this.player.security,this.tracks=this.player.tracks,this.playback=(null!=(t=this.player.playerCore)?t.getActivePlaybackCore():void 0)||this.player.playback},i(f,g),f.prototype.execute=function(e){var t;switch(this.applicationState.getPlayState()){case Vo.ENDED:t=xo.REPLAY;break;case Vo.PAUSED:case Vo.READY:t=xo.PLAY;break;case Vo.PLAYING:t=xo.PAUSE;break;case Vo.WAITING:this.facade.getMediaElement().paused===!0&&(t=xo.PLAY)}this.sendNotification(t,!0)},i(m,g),m.prototype.execute=function(e){var t;t=this.applicationState.getDisplayState()===Go.FULL_SCREEN?Go.NORMAL:Go.FULL_SCREEN,this.sendNotification(xo.CHANGE_DISPLAY_STATE,t)},i(y,g),y.prototype.dispatchEvent=function(e,t){var i;"string"!=typeof e&&(t=null!=e.getBody()?e.getBody():{},e=e.getName()),i=new Tt(e,t),this.sendNotification(xo.DISPATCH_EVENT,i)},y.prototype.dispatchEventAfterCommand=function(e,t){setTimeout(this.dispatchEvent.bind(this,e,t),0)},y.prototype.execute=function(e){this.dispatchEvent(e)},i(v,y),v.prototype.execute=function(e){this.applicationState.getIsUserActive()!==!0&&(this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PLAYING),v.__super__.execute.call(this,e))};var To={EXTERNAL:"external"},wo={AUTO:"auto",PERSISTENT:"persistent",NONE:"none"};i(_,y),_.prototype.execute=function(e){this.playback.pause(),this.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),_.__super__.execute.call(this,e)},i(E,g),E.prototype.execute=function(e){this.config.setAutoplay(e.getBody())},i(A,g),A.prototype.execute=function(e){this.config.setLoop(e.getBody())},i(b,g),b.prototype.execute=function(e){this.playback.setVolume(e.getBody())},i(C,puremvc.SimpleCommand),C.prototype.execute=function(e){var t;t=e.getBody(),this.sendNotification(xo.MEDIA_CHANGE,t),this.facade.getAutoplay()===!0&&this.sendNotification(xo.PLAY)},i(N,g),N.prototype.execute=function(e){var t,i,n,o=this;i=e.getBody(),0===i&&this.media.getType()===Dt.mimeTypes.m3u8&&(i=.25),i!==this.playback.getCurrentTime()&&(this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.WAITING),this.sendNotification(xo.DISPLAY_TIME,{currentTime:i,duration:this.playback.getDuration()}),this.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),n=this.facade.getMediaElement(),this.applicationState.pausedBeforeSeek=n.paused,0===n.readyState?(t=function(e){n.removeEventListener("loadedmetadata",t,!1),o.playback.setCurrentTime(i)},n.addEventListener("loadedmetadata",t,!1)):this.playback.setCurrentTime(i))},i(I,y),I.prototype.execute=function(e){this.applicationState.getSeeking()!==!0&&(this.applicationState.setSeeking(!0),I.__super__.execute.call(this,e))},i(S,y),S.prototype.execute=function(e){var t=this;return this.applicationState.getIsUserActive()===!0?void setTimeout(this.sendNotification.bind(this,e.getName(),e.getBody()),100):void setTimeout(function(){var i;t.applicationState.setSeeking(!1),t.dispatchEvent(e),i=t.applicationState.pausedBeforeSeek===!0?Vo.PAUSED:Vo.PLAYING,t.sendNotification(xo.CHANGE_PLAY_STATE,i)},1)},i(T,g),T.prototype.execute=function(e){"function"==typeof this.playback.replay?this.playback.replay():this.media.getType()===Dt.mimeTypes.m3u8?this.playback.setCurrentTime(.25):this.playback.setCurrentTime(0),this.sendNotification(xo.PLAY),this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PLAYING)},i(w,g),w.prototype.execute=function(e){this.playback.pause(),this.playback.getCurrentTime()!==this.playback.getDuration()&&this.playback.setCurrentTime(this.playback.getDuration())},i(P,y),P.prototype.execute=function(e){this.config.getLoop()===!0?(P.__super__.execute.call(this,e),this.sendNotification(xo.REPLAY)):(this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.ENDED),this.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),P.__super__.execute.call(this,e))},i(M,g),M.prototype.execute=function(e){this.sendNotification(xo.PLAY_REQUEST),this.sendNotification(xo.DISPLAY_TIME,{currentTime:0,duration:this.media.getDuration()}),this.sendNotification(xo.STARTED,e.getBody())},i(D,g),D.prototype.execute=function(e){this.applicationState.setIsUserActive(e.getBody())},i(x,y),x.prototype.execute=function(e){this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.WAITING),x.__super__.execute.call(this,e)},i(k,g),k.prototype.execute=function(e){this.playback.setMuted(e.getBody())},i(L,y),L.prototype.execute=function(e){var t;t=e.getBody(),this.security.setMedia(t),this.security.getAuthorized()===!1?this.sendNotification(Ro.AUTHORIZE,t):this.sendNotification(xo.MEDIA_VALIDATED,t),L.__super__.execute.call(this,e)},i(R,y),R.prototype.execute=function(e){var t;this.media.authorized=!0,t=this.security.createURL(this.media.getSrc()),this.media.setSrc(t),this.sendNotification(xo.MEDIA_VALIDATED,this.media.getData()),R.__super__.execute.call(this,e)},i(O,g),O.prototype.execute=function(e){this.playback.initialized=!0},i(V,g),V.prototype.execute=function(e){this.playerCore.registerPlaybackCore(e.getBody())},i(G,g),G.prototype.execute=function(e){var t;t=e.getBody(),this.sendNotification(xo.CHANGE_CONTENT,{from:this.media.getData(),to:t}),this.media.updateData(t),this.sendNotification(xo.UPDATE_DATA_BINDINGS),this.sendNotification(xo.CHANGE_CONTENT,this.media.getData())},i(U,y),U.prototype.execute=function(e){this.sendNotification(xo.DISPLAY_TIME,{currentTime:this.playback.getCurrentTime(),duration:this.playback.getDuration()}),U.__super__.execute.call(this,e)},i(B,g),B.prototype.execute=function(e){this.playback.setMuted(!this.playback.getMuted())},i(H,y),H.prototype.execute=function(e){this.media.started!==!0&&(this.media.started=!0,H.__super__.execute.call(this,e))},i(F,g),F.prototype.execute=function(e){var t,i,n,o,a;for(n=this.player.getMediaElement(),i=e.getBody(),o=0,a=i.length;a>o;o++)t=i[o],n.addEventListener(t,this.playback.handlers[t])},i(j,g),j.prototype.execute=function(e){var t,i,n,o,a;for(n=this.player.getMediaElement(),i=e.getBody(),o=0,a=i.length;a>o;o++)t=i[o],n.removeEventListener(t,this.playback.handlers[t])},i(z,y),z.prototype.execute=function(e){this.applicationState.setVolume(e.getBody()),z.__super__.execute.call(this,e)},i(Y,puremvc.Mediator),Y.prototype.config=null,Y.prototype.cssPrefix=null,Y.prototype.classList=null,Y.prototype.initializeNotifier=function(e){var t;Y.__super__.initializeNotifier.call(this,e),t=this.facade.player||this.facade,this.config=t.retrieveProxy(r.NAME),this.classList=this.classList=new ot(this.viewComponent)},i(W,Y),W.prototype.localizationManager=null,W.prototype.initializeNotifier=function(e){var t;W.__super__.initializeNotifier.call(this,e),t=this.facade.player||this.facade,this.localizationManager=t.retrieveProxy(at.NAME)},i(q,W),q.prototype.componentName=null,q.prototype.componentType=null,q.prototype.parent=null,q.prototype.element=null,q.prototype.classList=null,q.prototype.state=null,q.prototype.disabled=!1,q.prototype.onRegister=function(){this.viewComponent=this.createViewComponent(this.parent,this.element),this.classList=this.viewComponent._classList,rt.bindEvents(this.viewComponent,this)},q.prototype.createViewComponent=function(e,t){var i;return i=this.getTypeList(),rt.create(i,e,t)},q.prototype.createMediatorName=function(){var e;return e=this.getTypeList(),e.push("mediator"),e.push(rt.createUID()),e.join("-")},q.prototype.getTypeList=function(){var e;return e=[],null!=this.componentName&&e.push(this.componentName),null!=this.componentType&&(e=e.concat(this.componentType)),e},q.prototype.create=function(e,t,i,n){return null==t&&(t=this),t===!1&&(t=null),rt.create(e,t,i,n)},q.prototype.createText=function(e,t,i,n){return null==i&&(i=this),rt.create(e,i,n,t)},q.prototype.setState=function(e){return e!==this.state?(null!=this.state&&this.classList.remove(this.state),this.state=e,null!=this.state&&this.classList.add(this.state),e):void 0},q.prototype.getState=function(){return this.state},q.prototype.setDisabled=function(e){return e!==this.disabled?(this.disabled=e,this.disabled?this.classList.add("disabled"):this.classList.remove("disabled"),e):void 0},q.prototype.getDisabled=function(){return this.disabled},i(X,q),X.prototype.componentType="overlay",X.prototype.onRegister=function(){X.__super__.onRegister.call(this),this.registerOverlay()},X.prototype.onRemove=function(){X.__super__.onRemove.call(this),this.removeOverlay()},X.prototype.registerOverlay=function(){this.sendNotification(xo.ADD_OVERLAY,this.viewComponent)},X.prototype.removeOverlay=function(){this.sendNotification(xo.REMOVE_OVERLAY,this.viewComponent)},i(Z,X),Z.prototype.componentName="context-menu",Z.prototype.contextMenu=null,Z.prototype.onRegister=function(){var e=this;Z.__super__.onRegister.call(this),_t.create(this.facade.viewComponent,_t.CONTEXTMENU,function(t){return t.preventDefault(),e.contextMenuHandler(t),!1})},Z.prototype.contextMenuHandler=function(e){var t,i=this;this.contextMenu&&this.removeContextMenu(),this.contextMenu=rt.create("context-menu",document.body,"ul"),t=rt.create("context-item",this.contextMenu,"li",this.facade.getVersion()),this.contextMenu.style.top=e.pageY+"px",this.contextMenu.style.left=e.pageX+"px",_t.create(document.body,_t.CLICK,function(e){return i.removeContextMenu(e),!1})},Z.prototype.removeContextMenu=function(e){try{_t.clear(document.body,_t.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(t){}},i(J,X),J.prototype.componentName="end-slate",J.prototype.onRegister=function(){null!=this.config.getEndSlate()&&J.__super__.onRegister.call(this)},J.prototype.listNotificationInterests=function(){return[xo.MEDIA_CHANGE]},J.prototype.handleNotification=function(e){var t,i,n,o,a;switch(e.getName()){case xo.MEDIA_CHANGE:n=e.getBody(),t=this.config.getEndSlate(),a=this.getViewComponent(),i="",null!=t&&(o=t.usePoster===!0?n.poster:t.url,null!=o&&""!==o&&(i='<img src="'+o+'" class="end-slate-image" />')),null!=a&&(a.innerHTML=i)}},i(K,X),K.prototype.componentName="waiting",K.prototype.bar=null,K.prototype.text=null,K.prototype.onRegister=function(){K.__super__.onRegister.call(this),this.bar=this.create("waiting-bar"),this.text=this.createText("waiting-text",this.localizationManager.getString($.MSG_BUFFERING))},i(Q,X),Q.prototype.componentName="loading",$.MSG_LIVE="MSG_LIVE",$.MSG_REPLAY="MSG_REPLAY",$.MSG_BUFFERING="MSG_BUFFERING_TEXT",$.MSG_CC="MSG_CC",$.MSG_CC_TITLE="MSG_CC_TITLE",$.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE",$.MSG_CC_PRESETS="MSG_CC_PRESETS",$.MSG_CC_FONT="MSG_CC_FONT",$.MSG_CC_EDGE="MSG_CC_EDGE",$.MSG_CC_SIZE="MSG_CC_SIZE",$.MSG_CC_SCROLL="MSG_CC_SCROLL",$.MSG_CC_COLOR="MSG_CC_COLOR",$.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND",$.MSG_CC_EDGE="MSG_CC_EDGE",$.MSG_CC_WINDOW="MSG_CC_WINDOW",$.MSG_CC_OPACITY="MSG_CC_OPACITY",$.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED",$.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED",$.MSG_CC_RESET="MSG_CC_RESET",$.MSG_CC_CANCEL="MSG_CC_CANCEL",$.MSG_CC_APPLY="MSG_CC_APPLY",$.MSG_CC_PREVIEW_TEXT="MSG_CC_PREVIEW_TEXT",$.MSG_SECONDS="MSG_SECONDS",$.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE",$.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO",$.MSG_NEXT_AD="MSG_NEXT_AD",$.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR",$.MSG_VIEW_ALL="MSG_VIEW_ALL",$.MSG_VIDEO="MSG_VIDEO",i(ee,X),ee.prototype.componentName="replay",ee.prototype.replay=null,ee.prototype.icon=null,ee.prototype.label=null,ee.prototype.onRegister=function(){ee.__super__.onRegister.call(this),this.replay=this.create("replay-button"),this.replay.onclick=this.onclick.bind(this),this.icon=this.create("replay-icon",this.replay),this.label=this.createText("replay-label",this.localizationManager.getString($.MSG_REPLAY),this.replay)},ee.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(xo.REPLAY),!1},i(te,g),te.prototype.execute=function(e){var t;t=this.config.getControls().mode!==wo.PERSISTENT?e.getBody():Bo.ACTIVE,this.applicationState.setActiveState(t)},i(ie,y),ie.interval=null,ie.keyHandler=null,ie.prototype.keypress=function(e){switch(e.keyCode||e.which||e.charCode){case 27:break;case 32:this.facade.getEnded()||(this.facade.getPaused()?this.facade.play():this.facade.pause())}},ie.prototype.execute=function(e){var t,i,n,o,a=this;return n=e.getBody(),this.applicationState.setDisplayState(n),this.config.getFullscreen().mode===To.EXTERNAL?void this.sendNotifications(n):(t=this.facade.getMediaElement(),o=this.facade.getViewComponent(),i={},null!=o.webkitRequestFullScreen?(i.enter=o.webkitRequestFullScreen.bind(o),i.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),i.event="onwebkitfullscreenchange",i.element="webkitFullscreenElement",i.error="webkitfullscreenerror"):null!=o.requestFullscreen?(i.enter=o.requestFullscreen.bind(o),i.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),i.event="onfullscreenchange",i.element="fullscreenElement",i.error="fullscreenerror"):null!=o.mozRequestFullScreen?(i.enter=o.mozRequestFullScreen.bind(o),i.exit=document.mozCancelFullScreen.bind(document),i.event="onmozfullscreenchange",i.element="mozFullscreenElement",i.error="mozfullscreenerror"):null!=o.msRequestFullscreen?(i.enter=o.msRequestFullscreen.bind(o),i.exit=document.msExitFullscreen.bind(document),i.event="MSFullscreenChange",i.element="msFullscreenElement",i.error="MSFullscreenError"):null!=t.webkitEnterFullscreen&&(i.enter=t.webkitEnterFullscreen.bind(t),i.exit=t.webkitExitFullscreen.bind(t),i.event=null,i.error=null),n===Go.FULL_SCREEN?(null!=i.event?o[i.event]=function(e){null==document[i.element]&&a.sendNotification(xo.CHANGE_DISPLAY_STATE,Go.NORMAL)}:(clearInterval(ie.interval),ie.interval=setInterval(function(){t.webkitDisplayingFullscreen!==!0&&(a.sendNotification(xo.CHANGE_DISPLAY_STATE,Go.NORMAL),clearInterval(ie.interval))},100)),null!=i.error&&document.addEventListener(i.error,this.facade.logger.error.bind(this.facade.logger)),i.enter(),this.playback.keyHandler=this.keypress.bind(this),window.addEventListener("keypress",this.playback.keyHandler)):n===Go.NORMAL&&(window.removeEventListener("keypress",this.playback.keyHandler),this.playback.keyHandler=null,null!=i&&"function"==typeof i.exit&&i.exit(),t[i.event]=null,clearInterval(ie.interval)),void this.sendNotifications(n))},ie.prototype.sendNotifications=function(e){setTimeout(this.sendNotification.bind(this,xo.FULL_SCREEN_CHANGE,e),100),this.dispatchEvent("fullscreenchange",e===Go.FULL_SCREEN)},i(ne,y),ne.prototype.execute=function(e){var t;t=e.getBody(),t&&this.playback.initialized!==!0&&this.sendNotification(xo.INITIALIZED),this.playback.initialized===!0&&(this.media.getSrc()||this.media.getSource())&&(this.playback.getStarted()||this.sendNotification(xo.START),this.playback.play(),ne.__super__.execute.call(this,e))},i(oe,g),oe.prototype.execute=function(e){var t;t=this.applicationState.getActiveState()===Bo.ACTIVE?Bo.INACTIVE:Bo.ACTIVE,this.sendNotification(xo.CHANGE_ACTIVE_STATE,t)},i(ae,l),ae.prototype.getKind=function(){return this.data.kind},ae.prototype.getLabel=function(){return this.data.label},ae.prototype.getLanguage=function(){return this.data.language},ae.prototype.getId=function(){return this.data.id},ae.prototype.setEnabled=function(e){e!==this.data.enabled&&(this.data.enabled=e,this.changeEnabled(e),this.dispatchEvent("change"))},ae.prototype.changeEnabled=function(e){},ae.prototype.getEnabled=function(){return this.data.enabled},re.createTextContent=function(e,t){var i;return i=/[\&<>]/.test(t)?e.createCDATASection(t):e.createTextNode(t)},re.updateTextContent=function(e,t){var i;return i=re.createTextContent(e.ownerDocument,t),e.removeChild(e.childNodes[0]),e.appendChild(i),e},re.serialize=function(e){var t;if(null!=e){if("string"==typeof e)return e;try{return t=new XMLSerializer,t.serializeToString(e)}catch(i){try{return t=document.implementation.createLSSerializer(),xmlSerializer.writeToString(e)}catch(n){try{return e.xml}catch(o){}}}}},re.parse=function(e){var t,i;return window.DOMParser?(t=new DOMParser,i=t.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(e)),i},i(se,puremvc.Proxy),se.NAME="TracksProxy",se.prototype.clear=function(){this.data.audioTracks.clear(),this.data.videoTracks.clear(),this.data.textTracks.clear()},se.prototype.getAudioTracks=function(){return this.data.audioTracks},se.prototype.getVideoTracks=function(){return this.data.videoTracks},se.prototype.getTextTracks=function(){return this.data.textTracks},i(le,s),le.prototype.moduleName="amp",le.prototype.playerType=null,le.prototype.config=null,le.prototype.mediaElement=null,le.prototype.hidden=!1,le.prototype.l10n=null,le.prototype.setViewComponent=function(e){return e.amp=this,le.__super__.setViewComponent.call(this,e)},le.prototype.setMediaElement=function(e){return this.mediaElement=e,e},le.prototype.getPlayerType=function(){return this.playerType},le.prototype.getVersion=function(){return ti.getVersion()},le.prototype.createPlugins=function(){this.sendNotification(Oo.REGISTER_PLUGINS,this.config)},le.prototype.createMediaElement=function(){return null},le.prototype.createFramework=function(){le.__super__.createFramework.call(this),this.mediaElement=this.createMediaElement(),this.createPlugins()},le.prototype.getLanguage=function(){return this.retrieveProxy(at.NAME).getLanguage()},le.prototype.setLanguage=function(e){return this.retrieveProxy(at.NAME).setLanguage(e),e},le.prototype.getMediaElement=function(){return this.mediaElement},le.prototype.getContainer=function(){return this.getViewComponent()},le.prototype.getAudioTracks=function(){},le.prototype.evaluateBinding=function(e){},le.prototype.canPlayType=function(e){},le.prototype.load=function(){},le.prototype.play=function(){},le.prototype.replay=function(){},le.prototype.pause=function(){},le.prototype.end=function(){},le.prototype.setParams=function(e){},le.prototype.getParams=function(){},le.prototype.setAutoplay=function(e){},le.prototype.getAutoplay=function(){},le.prototype.setLoop=function(e){},le.prototype.getLoop=function(){},le.prototype.setMuted=function(e){},le.prototype.getMuted=function(){},le.prototype.mute=function(){return this.setMuted(!0)},le.prototype.unmute=function(){return this.setMuted(!1)},le.prototype.setMedia=function(e){var t,i,n,o;if(i=e.src,t=null!=(n=e.source)&&null!=(o=n[0])?o.src:void 0,!(null!=i&&""!==i||null!=t&&""!==t))throw new Error("[AMP ERROR] Invalid Media")},le.prototype.getMedia=function(){},le.prototype.setCurrentTime=function(e){},le.prototype.getCurrentTime=function(){},le.prototype.getCurrentTimeUTC=function(){},le.prototype.getDuration=function(){},le.prototype.setSrc=function(e){},le.prototype.getSrc=function(){},le.prototype.setSource=function(e){},le.prototype.getSource=function(){},le.prototype.setVolume=function(e){},le.prototype.getVolume=function(){},le.prototype.getSeeking=function(){},le.prototype.getPaused=function(){},le.prototype.getEnded=function(){},le.prototype.setDisplayState=function(e){},le.prototype.getDisplayState=function(){},le.prototype.enterFullScreen=function(){},le.prototype.exitFullScreen=function(){},le.prototype.setHidden=function(e){var t;e!==this.hidden&&(this.hidden=e,t=this.viewComponent.style,this.hidden?(this.hiddenData={width:t.width,height:t.height,paused:this.getPaused()},t.width=t.height="0px",this.hiddenData.paused===!1&&this.pause()):(t.width=this.hiddenData.width,t.height=this.hiddenData.height,this.hiddenData.paused===!1&&this.play(),this.hiddenData=null))},le.prototype.getHidden=function(){return this.hidden},le.prototype.recordContentChange=function(e){},le.prototype.setPlaybackRate=function(){},le.prototype.getPlaybackRate=function(){},i(de,le),de.prototype.playerType="html",de.prototype.media=null,de.prototype.bindings=null,de.prototype.configuration=null,de.prototype.params=null,de.prototype.appState=null,de.prototype.security=null,de.prototype.playerCore=null,de.prototype.tracks=null,de.prototype.mediator=null,de.prototype.createMediaElement=function(){var e;return this.mediator=new me("html5","video"),this.sendNotification(xo.PLAYBACK_CORE_CHANGE,this.mediator),e=this.mediator.getViewComponent(),null==e.dataset&&(e.dataset={}),e},de.prototype.createModel=function(){var e;this.bindings=new ft,this.registerProxy(this.bindings),this.security=new ce,this.registerProxy(this.security),this.configuration=new yt(this.config),this.registerProxy(this.configuration),this.registerProxy(new at(this.config)),this.appState=new mt,this.registerProxy(this.appState),this.appState.setRenderMode(Uo.HTML),e=new xe,this.registerProxy(e),this.media=new bt,this.registerProxy(this.media),this.playerCore=new At(e,this.config.getPlaybackOrder),this.registerProxy(this.playerCore),this.params=new gt(this.config.params),this.registerProxy(this.params),this.tracks=new se,this.registerProxy(this.tracks),this.bindings.initialize()},de.prototype.createView=function(){var e,t,i,n,o;this.registerMediator(new _e("html5",this.getViewComponent())),this.registerMediator(new nt),this.registerMediator(new ve),this.registerMediator(new $e),e=new Qe,this.registerMediator(e),this.registerMediator(new Q),this.config.debug!==!0&&this.config.controls&&this.config.controls["native"]!==!0&&"none"!==this.config.controls.mode&&this.registerMediator(new Z),(null!=(t=this.config.controls)?t.enabled:void 0)!==!1&&(null!=(i=this.config.controls)?i["native"]:void 0)!==!0&&"none"!==(null!=(n=this.config.controls)?n.mode:void 0)&&this.registerMediator(new K),
this.registerMediator(new ee),this.registerMediator(new J),(null!=(o=this.config.titlebar)?o.enabled:void 0)===!0&&this.registerMediator(new tt),this.registerMediator(new et)},de.prototype.createController=function(){de.__super__.createController.call(this),this.registerCommand(Oo.PLUGINS_INITIALIZED,h),this.registerCommand(xo.PLAY,ne),this.registerCommand(xo.PLAYING,v),this.registerCommand(xo.PAUSE,_),this.registerCommand(xo.CHANGE_PLAY_STATE,je),this.registerCommand(xo.TOGGLE_FULL_SCREEN,m),this.registerCommand(xo.CHANGE_DISPLAY_STATE,ie),this.registerCommand(xo.TOGGLE_ACTIVE,oe),this.registerCommand(xo.CHANGE_ACTIVE_STATE,te),this.registerCommand(xo.SET_MEDIA,ze),this.registerCommand(xo.CHANGE_MEDIA,Ke),this.registerCommand(xo.MEDIA_VALIDATED,C),this.registerCommand(xo.MEDIA_CHANGE,Je),this.registerCommand(xo.UPDATE_DATA_BINDINGS,Xe),this.registerCommand(xo.START,M),this.registerCommand(xo.SEEK,N),this.registerCommand(xo.SEEKING,I),this.registerCommand(xo.SEEKED,S),this.registerCommand(xo.CHANGE_VOLUME,b),this.registerCommand(xo.CHANGE_MUTED,k),this.registerCommand(xo.CHANGE_AUTOPLAY,E),this.registerCommand(xo.CHANGE_LOOP,A),this.registerCommand(xo.END,w),this.registerCommand(xo.ENDED,P),this.registerCommand(xo.REPLAY,T),this.registerCommand(xo.ERROR,We),this.registerCommand(xo.READY,qe),this.registerCommand(xo.WAITING,x),this.registerCommand(xo.CHANGE_DURATION,Ye),this.registerCommand(xo.CHANGE_PARAMS,Ze),this.registerCommand(xo.IS_USER_ACTIVE,D),this.registerCommand(Ro.CHECK_AUTHORIZATION,L),this.registerCommand(Ro.AUTHORIZED,R),this.registerCommand(Ro.SET_KEY,Ae),this.registerCommand(Ro.SET_TOKEN,be),this.registerCommand(xo.INITIALIZED,O),this.registerCommand(xo.REGISTER_PLAYBACK_CORE,V),this.registerCommand(ko.TOGGLE_PLAY_PAUSE,f),this.registerCommand(ko.SEEK,N),this.registerCommand(xo.CHANGE_PLAYBACK_TARGET,he),this.registerCommand(xo.PLAYBACK_TARGET_CHANGE,ge),this.registerCommand(xo.RECORD_CONTENT_CHANGE,G),this.registerCommand(xo.TIME_UPDATE,U),this.registerCommand(xo.TOGGLE_MUTED,B),this.registerCommand(xo.VOLUME_CHANGE,z),this.registerCommand(xo.PLAY_REQUEST,H),this.registerCommand(xo.PLAY_STATE_CHANGE,y),this.registerCommand(xo.PROGRESS,y),this.registerCommand(xo.CAN_PLAY,y),this.registerCommand(xo.CAN_PLAY_THROUGH,y),this.registerCommand(xo.LOAD_START,y),this.registerCommand(xo.STARTED,y),this.registerCommand(xo.LOADED_METADATA,y),this.registerCommand(xo.DURATION_CHANGE,y),this.registerCommand(xo.MEDIUM_CHANGE,y),this.registerCommand(xo.TEMPORAL_TYPE_CHANGE,y),this.registerCommand(xo.LANGUAGE_CHANGE,y),this.registerCommand(xo.PLAYBACK_TARGET_AVAILABLE,y),this.registerCommand(Ro.AUTHORIZE,y),this.registerCommand(Ro.AUTHORIZATION_FAILED,y),this.registerCommand(xo.FAIL_OVER_ATTEMPT,y),this.registerCommand(xo.IS_LIVE,y),this.registerCommand(xo.TIMED_METADATA,y),this.registerCommand(xo.PAUSED,y),this.registerCommand(xo.ENABLE_VIDEO_EVENTS,F),this.registerCommand(xo.DISABLE_VIDEO_EVENTS,j)},de.prototype.evaluateBinding=function(e){return this.bindings.evaluateBinding(e)},de.prototype.recordContentChange=function(e){this.sendNotification(xo.RECORD_CONTENT_CHANGE,e)},de.prototype.canPlayType=function(e){return this.retrieveProxy(Me.NAME).canPlayType(e)},de.prototype.getAudioTracks=function(){return this.retrieveProxy(se.NAME).getAudioTracks()},de.prototype.load=function(){this.sendNotification(xo.LOAD)},de.prototype.play=function(){this.sendNotification(xo.PLAY,!0)},de.prototype.replay=function(){this.sendNotification(xo.REPLAY)},de.prototype.pause=function(){this.sendNotification(xo.PAUSE)},de.prototype.end=function(){this.sendNotification(xo.END)},de.prototype.setParams=function(e){return this.sendNotification(xo.CHANGE_PARAMS,e),e},de.prototype.getParams=function(){return this.params.getData()},de.prototype.setAutoplay=function(e){return this.sendNotification(xo.CHANGE_AUTOPLAY,e),e},de.prototype.getAutoplay=function(){var e,t,i;return t=this.retrieveProxy(Me.NAME),e=t.initialized&&(this.configuration.getAutoplay()||(null!=(i=this.getMedia())?i.autoplay:void 0)===!0)},de.prototype.setLoop=function(e){return this.sendNotification(xo.CHANGE_LOOP,e),e},de.prototype.getLoop=function(){return this.configuration.getLoop()},de.prototype.setMuted=function(e){return this.sendNotification(xo.CHANGE_MUTED,e),e},de.prototype.getMuted=function(){return this.retrieveProxy(Me.NAME).getMuted()},de.prototype.setMedia=function(e){return de.__super__.setMedia.call(this,e),this.sendNotification(xo.SET_MEDIA,e),e},de.prototype.getMedia=function(){return this.media.getData()},de.prototype.setCurrentTime=function(e){return this.sendNotification(xo.SEEK,e),e},de.prototype.getCurrentTime=function(){return this.retrieveProxy(Me.NAME).getCurrentTime()},de.prototype.getDuration=function(){return this.media.getDuration()},de.prototype.setSrc=function(e){return this.sendNotification(xo.SET_MEDIA,{src:e}),e},de.prototype.getSrc=function(){return this.retrieveProxy(Me.NAME).getSrc()},de.prototype.setSource=function(e){return this.sendNotification(xo.SET_MEDIA,{source:e}),e},de.prototype.getSource=function(){return this.media.getSource()},de.prototype.setVolume=function(e){return this.sendNotification(xo.CHANGE_VOLUME,e),e},de.prototype.getVolume=function(){return this.retrieveProxy(Me.NAME).getVolume()},de.prototype.getSeeking=function(){return this.retrieveProxy(Me.NAME).getSeeking()},de.prototype.getPaused=function(){return this.retrieveProxy(Me.NAME).getPaused()},de.prototype.getEnded=function(){return this.retrieveProxy(Me.NAME).getEnded()},de.prototype.setDisplayState=function(e){this.sendNotification(xo.CHANGE_DISPLAY_STATE,e)},de.prototype.getDisplayState=function(e){return this.appState.getDisplayState()},de.prototype.enterFullScreen=function(){this.sendNotification(xo.CHANGE_DISPLAY_STATE,Go.FULL_SCREEN)},de.prototype.exitFullScreen=function(){this.sendNotification(xo.CHANGE_DISPLAY_STATE,Go.NORMAL)},de.prototype.setPlaybackRate=function(e){this.mediaElement.playbackRate=e},de.prototype.getPlaybackRate=function(){return this.mediaElement.playbackRate},de.prototype.getQualityLevels=function(){return this.retrieveProxy(Me.NAME).getQualityLevels()},de.prototype.setQuality=function(e){return this.retrieveProxy(Me.NAME).setQuality(e)},de.prototype.getQuality=function(){return this.retrieveProxy(Me.NAME).getQuality()};var Po={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYBACK_CLOSE:"mediaPlayerPlaybackClose",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",LOAD_FEED:"mediaPlayerDataFeedRequested",FEED_UPDATED:"mediaPlayerDataFeedUpdated",FEED_LOADED:"mediaPlayerFeedLoaded",TIMED_METADATA:"mediaPlayerSendCuePoint"};i(ce,puremvc.Proxy),ce.NAME="SecurityProxy",ce.prototype.setupHDN1=function(){var e=this;return window.retrieveToken=function(t,i){var n;try{e.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",t,i),n=e.getToken(),null!=n?e.facade.getMediaElement().tokenRetrievalSuccess("&primaryToken="+n):e.sendNotification(Ro.AUTHORIZE)}catch(o){e.facade.logger.error("[AMP AUTH ERROR]: Token Retrival Error",o)}return!0}},ce.prototype.getKey=function(){return this.data.key},ce.prototype.setKey=function(e){return this.data.key=e,e},ce.prototype.getToken=function(){return this.data.token},ce.prototype.setToken=function(e){return this.data.token=e,e},ce.prototype.getSecret=function(){var e;return null==this.data.token?null:(e="",null!=this.data.key&&(e+=""+this.data.key+"="),e+=this.data.token)},ce.prototype.createURL=function(e){var t;return t=this.getSecret(),null!=t&&(e+=/\?/.test(e)?"&":"?",e+=t),e},ce.prototype.getAuthorized=function(){return this.data.authorized},ce.prototype.setAuthorized=function(e){return this.data.authorized=e,e},ce.prototype.getProvider=function(){return this.data.provider},ce.prototype.setProvider=function(e){return this.data.provider=e,e},i(ue,r),ue.NAME=r.NAME,ue.prototype.bindings=null,ue.prototype.configurationName=null,ue.prototype.configurationData=null,ue.prototype.contextName=null,ue.prototype.contextData=null,ue.prototype.value=null,ue.prototype.getConfigurationName=function(){return this.configurationName},ue.prototype.getConfigurationData=function(){return this.configurationData.value||{}},ue.prototype.getContextName=function(){return this.contextName},ue.prototype.getContextData=function(){return this.contextData},ue.prototype.onRegister=function(){var e;e=this.facade.player||this.facade,null==this.getConfigurationName()&&(this.configurationName=this.facade.moduleName),this.bindings=e.retrieveProxy(ft.NAME),this.bindings.registerConfiguration(this),null!=this.getContextName()&&this.bindings.registerContext(this)},ue.prototype.setData=function(e){var t,i,n;null==e&&(e={}),this.data={},n=this.defaults;for(t in n)i=n[t],this.data[t]=t in e?e[t]:i;return this.configurationData=new pt(this.data),this.data},ue.prototype.getValue=function(e){var t;return this.bindings.update(),this.value[e]=null!=(t=this.configurationData.data[e])?t.compile(this.bindings.getData()):void 0,this.value[e]},ue.prototype.compile=function(e,t){return null==t&&(t=!1),null==this.configurationData?null:(null==e&&(e=this.bindings.getData()),null!=this.contextName&&null!=this.contextData&&(e=Dt.clone(e),e[this.contextName]=this.contextData),this.configurationData.compile(e,t),this.value=this.configurationData.value,this.configurationData.value)};var Mo={SET_DIMENSIONS:"mediaanalytics:setDimensions"};i(pe,g),pe.prototype.execute=function(e){this.player.started=!0,this.sendNotification(xo.STARTED,e.getBody()),this.sendNotification(xo.PLAY,e.getBody())},i(he,g),he.prototype.execute=function(e){var t;t=e.getBody(),this.applicationState.setPlaybackTarget(t),"amp"!==t?this.applicationState.getPlayState()!==Vo.PAUSED&&this.facade.pause():this.applicationState.getPlayState()===Vo.PLAYING&&this.facade.play()},i(ge,y),ge.prototype.execute=function(e){var t,i;i=e.getBody().value,t="amp"===i?xo.REMOVE_APPLICATION_STATE:xo.ADD_APPLICATION_STATE,this.sendNotification(t,"remote-playback"),ge.__super__.execute.call(this,e)},i(fe,puremvc.Mediator),fe.prototype.player=null,fe.prototype.config=null,fe.prototype.proxy=null,fe.NAME="LocalizationWrapper",fe.prototype.getString=function(e){return this.proxy.getString(e)},fe.prototype.listNotificationInterests=function(){return[Po.CREATE_FLASH_VARS,Po.CREATE_XML]},fe.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f;switch(fe.__super__.handleNotification.call(this,e),c=e.getName(),i=e.getBody(),c){case Po.CREATE_FLASH_VARS:a=i.flashvars,n=i.config,a.locale_setting=this.proxy.getLocaleId();break;case Po.CREATE_XML:g=i.xml,t=g.firstChild,d=g.getElementsByTagName("locales")[0],null==d&&(d=g.createElement("locales"),t.appendChild(d)),f=this.proxy.getLocales();for(s in f){l=f[s],o=g.createElement("locale"),o.setAttribute("id",s),d.appendChild(o);for(r in l)h=l[r],u=g.createElement("property"),u.setAttribute("key",r),p=re.createTextContent(g,h),u.appendChild(p),o.appendChild(u)}}},i(me,q),me.prototype.componentType="media-element",me.prototype.created=!1,me.prototype.onRegister=function(){this.created!==!0&&(this.created=!0,me.__super__.onRegister.call(this))},i(ye,q),ye.prototype.componentType="layer",ye.prototype.onRegister=function(){ye.__super__.onRegister.call(this),this.registerLayer()},ye.prototype.onRemove=function(){ye.__super__.onRemove.call(this),this.removeLayer()},ye.prototype.registerLayer=function(){this.sendNotification(xo.ADD_LAYER,this.viewComponent)},ye.prototype.removeLayer=function(){this.sendNotification(xo.REMOVE_LAYER,this.viewComponent)},i(ve,ye),ve.prototype.componentName="video",ve.prototype.listNotificationInterests=function(){return[xo.PLAYBACK_CORE_CHANGE]},ve.prototype.mediator=null,ve.prototype.mediaElement=null,ve.prototype.handleNotification=function(e){var t,i,n;switch(n=e.getName(),t=e.getBody(),n){case xo.PLAYBACK_CORE_CHANGE:null!=this.mediaElement&&this.viewComponent.removeChild(this.mediaElement),null!=this.mediator&&this.facade.removeMediator(this.mediator.getMediatorName()),i=null!=(null!=t?t.getViewComponent:void 0),i?(this.facade.registerMediator(t),this.mediator=t,this.mediaElement=this.mediator.getViewComponent()):(this.mediator=null,this.mediaElement=t),this.facade.setMediaElement(this.mediaElement),null!=this.mediaElement&&this.viewComponent.appendChild(this.mediaElement)}},i(_e,q),_e.prototype.componentType="player",_e.prototype.core=null,_e.prototype.medium=null,_e.prototype.layers=null,_e.prototype.ready=!1,_e.prototype.onRegister=function(){var e;_e.__super__.onRegister.call(this),e=Dt.getDevice(),null!=e&&this.classList.add(e)},_e.prototype.listNotificationInterests=function(){return[xo.DISPLAY_STATE_CHANGE,xo.ACTIVE_STATE_CHANGE,xo.PLAY_STATE_CHANGE,xo.ADD_APPLICATION_STATE,xo.REMOVE_APPLICATION_STATE,xo.MEDIUM_CHANGE,xo.DURATION_CHANGE,xo.TEMPORAL_TYPE_CHANGE,xo.IS_LIVE,xo.ADD_LAYER,xo.REMOVE_LAYER,xo.READY]},_e.prototype.handleNotification=function(e){var t,i,n,o,a,r;switch(i=e.getName(),t=e.getBody(),i){case xo.ACTIVE_STATE_CHANGE:case xo.PLAY_STATE_CHANGE:case xo.DISPLAY_STATE_CHANGE:case xo.MEDIUM_CHANGE:a=t,r=a.value,n=a.previous,null!=n&&this.classList.contains(n)&&this.classList.remove(n),null!=r&&this.classList.add(r);break;case xo.ADD_APPLICATION_STATE:o=t,this.classList.add(o);break;case xo.REMOVE_APPLICATION_STATE:o=t,this.classList.remove(o);break;case xo.TEMPORAL_TYPE_CHANGE:t.previous&&this.sendNotification(xo.REMOVE_APPLICATION_STATE,t.previous),t.value&&this.sendNotification(xo.ADD_APPLICATION_STATE,t.value);break;case xo.IS_LIVE:t===!0?this.sendNotification(xo.ADD_APPLICATION_STATE,"is-live"):this.sendNotification(xo.REMOVE_APPLICATION_STATE,"is-live");break;case xo.DURATION_CHANGE:t>3600?this.sendNotification(xo.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(xo.REMOVE_APPLICATION_STATE,"long-form");break;case xo.ADD_LAYER:this.addLayer(t);break;case xo.REMOVE_LAYER:this.removeLayer(t);break;case xo.READY:this.initialize()}},_e.prototype.initialize=function(){var e,t,i,n;for(this.ready=!0,n=this.layers,t=0,i=n.length;i>t;t++)e=n[t],this.viewComponent.contains(e)||this.viewComponent.appendChild(e)},_e.prototype.addLayer=function(e){this.layers.push(e),this.ready&&this.viewComponent.appendChild(e)},_e.prototype.removeLayer=function(e){var t;this.viewComponent.contains(e)&&this.viewComponent.removeChild(e),t=this.layers.indexOf(e),t>=0&&this.layers.splice(t,1)},i(Ee,_e),Ee.NAME="FlashPlayerMediator",Ee.prototype.type="flash",Ee.prototype.listNotificationInterests=function(){return Ee.__super__.listNotificationInterests.call(this).concat([Oo.PLUGINS_INITIALIZED])},Ee.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case xo.READY:return;case Oo.PLUGINS_INITIALIZED:return void this.initialize()}Ee.__super__.handleNotification.call(this,e)},i(Ae,y),Ae.prototype.execute=function(e){this.security.setKey(e.getBody()),Ae.__super__.execute.call(this,e)},i(be,y),be.prototype.execute=function(e){this.security.setToken(e.getBody()),this.security.setAuthorized(!0),be.__super__.execute.call(this,e)};var Do={START_AUTHENTICATION:"aisauthenticationstarted",AUTHENTICATED:"aisauthenticated",AUTHENTICATING:"aisauthenticating",AUTHENTICATION_COMPLETE:"aisauthenticationcomplete",CHOOSE_AUTH_PROVIDER:"aischooseprovider",CHOOSE_PLAY_OPTIONS:"aischooseplayoptions",LAUNCH_IDP_LOGIN:"aislaunchidplogin"};i(Ce,g),Ce.prototype.plugin=null,Ce.prototype.proxy=null,Ce.prototype.initializeNotifier=function(e){Ce.__super__.initializeNotifier.call(this,e),this.proxy=this.facade.retrieveProxy(r.NAME),this.plugin=this.facade},i(Ne,Ce),Ne.prototype.execute=function(e){this.proxy.vcsSet(0)},Ie.setCookie=function(e,t,i,n,o){var a;return t=escape(t),null!=i&&(a=new Date,a.setDate(a.getDate()+i),t+="; expires="+a.toUTCString()),null!=o&&(t+="; domain="+o),null!=n&&(t+="; path="+n),document.cookie=e+"="+t},Ie.getCookie=function(e){var t,i,n,o,a,r,s;for(i=document.cookie.split(";"),r=0,s=i.length;s>r;r++)if(t=i[r],n=t.indexOf("="),o=t.substr(0,n).replace(/^\s+|\s+$/g,""),a=unescape(t.substr(n+1)),o===e)return a},Ie.deleteCookie=function(e){return this.setCookie(e,"",-1)},i(Se,Ce),Se.prototype.execute=function(e){this.proxy.vcsSet(this.proxy.currentTime)},i(Te,Ce),Te.prototype.execute=function(e){var t;t=Math.floor(e.getBody()),0!==t&&t%30===0&&t!==this.proxy.currentTime&&this.proxy.vcsSet(t),this.proxy.currentTime=t},i(we,ue),we.NAME=r.NAME,we.prototype.enabled=!0,we.prototype.plugin=null,we.prototype.setEnabled=function(e){return this.enabled=e,e},we.prototype.getEnabled=function(){return this.enabled},we.prototype.createPlugin=function(){},we.prototype.initialize=function(){this.plugin=this.createPlugin()},we.prototype.error=function(e){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",e)},i(Pe,we),Pe.NAME=r.NAME,Pe.prototype.client=null,Pe.prototype.currentTime=null,Pe.prototype.idps=null,Pe.prototype.idp=null,Pe.prototype.token=null,Pe.prototype.authz=null,Pe.prototype.defaults={platformID:null,resourceID:null,contentID:null,responseTargets:null,query:"hdnts",logos:{base:null,group:null,key:"full"}},Pe.prototype.getScript=function(){return this.value.plugin},Pe.prototype.initialize=function(){this.client=window.ais_client,this.client.setLogging(this.facade.logger.enabled),this.client.setPlatformId(this.value.platformID),this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent)),this.client.assignhandler("bounce",this.bounceHandler.bind(this)),this.client.assignhandler("chooser",this.chooserHandler.bind(this)),this.client.assignhandler("init",this.initHandler.bind(this)),this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this)),this.client.assignhandler("identity",this.identityHandler.bind(this)),this.client.assignhandler("logout_result",this.logoutHandler.bind(this)),this.client.assignhandler("vcs",this.vcsHandler.bind(this)),window.onunload=function(){}},Pe.prototype.authorize=function(){this.authz=null,this.token=null,this.disengage(),this.sendNotification(Do.START_AUTHENTICATION)},Pe.prototype.authorized=function(e){null==e&&(e=this.token),this.engage(),this.sendNotification(Do.AUTHENTICATION_COMPLETE),this.sendNotification(Ro.AUTHORIZED,e)},Pe.prototype.play=function(e){return this.sendNotification(xo.INITIALIZED),this.sendNotification(xo.PLAY),null!=e?this.sendNotification(xo.SEEK,e):void 0},Pe.prototype.engage=function(){this.facade.registerCommand(xo.TIME_UPDATE,Te),this.facade.registerCommand(xo.PAUSE,Se),this.facade.registerCommand(xo.ENDED,Ne)},Pe.prototype.disengage=function(){this.facade.removeCommand(xo.TIME_UPDATE),this.facade.removeCommand(xo.PAUSE),this.facade.removeCommand(xo.ENDED)},Pe.prototype.logout=function(){var e,t,i,n,o;switch(t=(null!=(o=this.idp.window_display)?o.method:void 0)||"redirect",i=this.getTarget(t),this.setRedirect(t),t){case"redirect":window.open(this.client.logoutFormat(i),"_top");break;case"popup":n=this.idp.window_display.width||320,e=this.idp.window_display.height||240,window.open(this.client.logoutFormat(i),"ais_popup","width="+n+",height="+e)}},Pe.prototype.bounce=function(e){this.client.bounce()},Pe.prototype.init=function(e){this.client.init()},Pe.prototype.choose=function(){this.client.chooser()},Pe.prototype.resourceAccess=function(e){null==e&&(e=this.value.resourceID),this.client.resourceAccess(e)},Pe.prototype.vcsSet=function(e){e=Dt.formatTimecode(e),this.client.vcsSet(this.value.contentID,e)},Pe.prototype.bounceHandler=function(e,t){var i;i="true"===t.authenticated.toString(),i===!1?(this.sendNotification(xo.DISPATCH_EVENT,new Tt("authenticationfailed")),this.choose()):i===!0&&this.init()},Pe.prototype.initHandler=function(e,t){var i,n,o,a,r;this.idp=t.idps,this.facade.idps={},r=t.idps;for(i in r){o=r[i],this.facade.idps.key=i;for(n in o)a=o[n],this.facade.idps[n]=a;break}for(i in t)o=t[i],"idps"!==i&&null!=o&&(this.facade[i]=o);this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key],this.facade.player.sendNotification(xo.REMOVE_APPLICATION_STATE,"authenticating"),this.sendNotification(Do.AUTHENTICATED,this.facade.idps),this.resourceAccess(this.value.resourceID)},Pe.prototype.chooserHandler=function(e,t){this.facade.sendNotification(xo.ADD_APPLICATION_STATE,"authenticating"),t.possible_idps=this.idps=this.sort(t.possible_idps,"value","display_name"),this.sendNotification(Do.CHOOSE_AUTH_PROVIDER,t)},Pe.prototype.launchIDPLogin=function(e){var t,i,n,o,a,r;switch(this.sendNotification(Do.AUTHENTICATING,!0),i=this.idps[e],n=(null!=(r=i.window_display)?r.method:void 0)||"redirect",o=this.getTarget(n),this.setRedirect(n),n){case"redirect":window.open(this.client.loginFormat(e,o),"_top");break;case"popup":n=i.window_display.method||"popup",a=i.window_display.width||320,t=i.window_display.height||240,window.open(this.client.loginFormat(e,o),"ais_popup","width="+a+",height="+t)}},Pe.prototype.identityHandler=function(e,t){var i;i=t.identity.attributes.aisuid},Pe.prototype.authz_queryHandler=function(e,t){var i,n,o;i="true"===t.authorization.toString(),i===!1?this.sendNotification(Ro.AUTHORIZATION_FAILED,t):i===!0&&(this.authz=t,n={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.player.setParams({mvpdname:n.mvpdName}),this.facade.player.sendNotification(Mo.SET_DIMENSIONS,n),this.facade.viewerId=this.client.aisuid,o=t.resource,null!=o&&(this.facade.resource=o),this.sendNotification(Ro.SET_KEY,this.value.query||this.defaults.query),this.sendNotification(Ro.SET_TOKEN,t.security_token),this.token=this.facade.player.security.getSecret(),this.sendNotification(Do.AUTHENTICATING,!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))},Pe.prototype.logoutHandler=function(e,t){top.location.href=top.location.href},Pe.prototype.vcsHandler=function(e,t){"get"===t.operation&&("00:00:00"===t.ph_pos||"00:00"===t.ph_pos?(this.client.vcsSet(this.value.contentID,t.ph_pos),this.authorized(this.token)):this.sendNotification(Do.CHOOSE_PLAY_OPTIONS,Dt.flattenTimecode(t.ph_pos)))},Pe.prototype.sort=function(e,t,i){var n,o,a,r,s,l,d,c;s={},n=[],o=0;for(r in e)l=e[r],n[o]={key:r,value:l[i]},o++;for(n.sort(function(e,i){var n,o;return n="value"===t?e.value.toLowerCase():e.key.toLowercase(),o="value"===t?i.value.toLowerCase():i.key.toLowercase(),o>n?-1:n>o?1:0}),o=d=0,c=n.length;c>d;o=++d)a=n[o],s[a.key]=e[a.key];return s},Pe.prototype.setRedirect=function(e){var t,i,n;try{t=/\/dev\./,n=window.top.location.href||window.top.location,i=t.test(n)?n.replace(t,"/"):null,Ie.setCookie(this.getTarget(e),n,1,"/",i)}catch(o){}},Pe.prototype.getTarget=function(e){return null==e&&(e="redirect"),this.value.responseTargets[e]},i(Me,puremvc.Proxy),Me.NAME="PlaybackProxy",Me.prototype.data=null,Me.prototype.initialized=!1,Me.prototype.enabled=null,Me.prototype.handlers=null,Me.prototype.resumeHandlers=null,Me.prototype.playWhenLoaded=!1,Me.prototype.metadataloaded=!1,Me.prototype.mediaProxy=null,Me.prototype.setMediaProxy=function(e){this.mediaProxy=e},Me.prototype.getMediaProxy=function(){return this.mediaProxy},Me.prototype.getEnabled=function(){return this.enabled},Me.prototype.setEnabled=function(e){return e!==this.enabled?(this.enabled=e,this.enabled===!0?this.load():this.applyHandlers(!1),e):void 0},Me.prototype.applyHandlers=function(e){var t,i,n,o,a;null==e&&(e=!0),o=this.getMediaElement(),t=e?"addEventListener":"removeEventListener",a=this.handlers;for(n in a)i=a[n],o[t](n,i)},Me.prototype.resumeloadedmetadata=function(e){var t;t=this.getMediaElement(),t.removeEventListener("loadedmetadata",this.resumeHandlers.loadedmetadata),this.handlers.durationchange(e),this.data.currentTime>0?(t.addEventListener("seeked",this.resumeHandlers.seeked),setTimeout(this.seek.bind(this),50)):this.resumecomplete()},Me.prototype.resumeseeked=function(e){this.getMediaElement().removeEventListener("seeked",this.resumeHandlers.seeked),this.resumecomplete()},Me.prototype.resumecomplete=function(){var e,t=this;this.data.loading=!1,this.applyHandlers(!0),null!=(e=this.getMediaElement().textTracks)&&e.addEventListener("addtrack",function(e){var i;i=e.track,"metadata"===i.kind&&(i.mode="hidden",i.addEventListener("cuechange",function(e){var i,n;i=e.target.activeCues[0],n={startTime:i.startTime,endTime:i.endTime,key:i.value.key,info:i.value.info,data:i.value},t.sendNotification(xo.TIMED_METADATA,n)}))}),this.playWhenLoaded===!0&&setTimeout(this.play.bind(this),0)},Me.prototype.ontimeupdate=function(e){this.data.currentTime=e.target.currentTime,this.sendNotification(xo.TIME_UPDATE,this.data.currentTime)},Me.prototype.ondurationchange=function(e){var t;t=e.target.duration,t===this.data.duration||0===t||isNaN(t)||(this.data.duration=t,/Android [4-6]/.test(navigator.userAgent)&&-1!==this.getMediaElement().src.indexOf(".m3u8")&&t===1/0||this.sendNotification(xo.CHANGE_DURATION,t))},Me.prototype.onplay=function(e){this.data.paused=!1},Me.prototype.onplaying=function(e){this.data.paused=!1,this.data.seeking=!1,this.sendNotification(xo.PLAYING)},Me.prototype.onpause=function(e){this.data.seeking!==!0&&(this.data.paused=!0,e.target.readyState>0&&(this.sendNotification(xo.PAUSED),this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PAUSED)))},Me.prototype.onloadeddata=function(e){this.sendNotification(xo.LOADED_DATA)},Me.prototype.onwaiting=function(e){this.sendNotification(xo.WAITING)},Me.prototype.onseeking=function(e){this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate),this.data.seeking=!0,this.sendNotification(xo.SEEKING)},Me.prototype.onseeked=function(e){this.data.seeking=!1,this.sendNotification(xo.SEEKED),this.getMediaElement().addEventListener("timeupdate",this.handlers.timeupdate)},Me.prototype.onended=function(e){this.data.ended=!0,this.sendNotification(xo.ENDED)},Me.prototype.onprogress=function(e){var t,i;try{i=this.getMediaElement(),t=i.buffered,this.sendNotification(xo.PROGRESS,t.end(t.length-1)/i.duration)}catch(n){}},Me.prototype.onerror=function(e){this.sendNotification(xo.ERROR,this.getMediaElement().error)},Me.prototype.onloadstart=function(e){this.sendNotification(xo.LOAD_START)},Me.prototype.oncanplay=function(e){this.sendNotification(xo.CAN_PLAY)},Me.prototype.oncanplaythrough=function(e){this.sendNotification(xo.CAN_PLAY_THROUGH),this.sendNotification(xo.PROGRESS,this.getDuration())},Me.prototype.onloadedmetadata=function(e){this.metadataloaded=!0,this.createTracks(),this.sendNotification(xo.ENABLE_FULL_SCREEN),this.sendNotification(xo.LOADED_METADATA)},Me.prototype.createTracks=function(){var e,t,i,n,o,a,r;if(e=this.getMediaElement().audioTracks,o=this.facade.retrieveProxy(se.NAME).getAudioTracks(),null!=e)for(t=e.length||0,i=a=0,r=e.length;r>a;i=++a)n=e[i],o.add(new ae(n),i+1===t)},Me.prototype.reset=function(){this.data.currentTime=0,this.data.duration=0,this.data.src=null,this.data.ended=!1,this.data.paused=!1,this.data.seeking=!1,this.data.started=!1,this.data.loading=!1},Me.prototype.getStarted=function(){return this.data.started},Me.prototype.getMediaElement=function(){return this.facade.getMediaElement()},Me.prototype.canPlayTemporalType=function(e){return"dvr"!==e},Me.prototype.canPlayType=function(e){var t;return t=document.createElement("video").canPlayType(e)||"",(/Android (4\.[1-9]|[5-6])/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&e===Dt.mimeTypes.m3u8&&(t="maybe"),"probably"===t&&/video\/f4m|x-flv/.test(e)&&/UCBrowser/.test(navigator.userAgent)&&(t=""),t},Me.prototype.getPaused=function(){return this.data.paused},Me.prototype.getEnded=function(){return this.data.ended},Me.prototype.getSeeking=function(){return this.data.seeking},Me.prototype.getCurrentTime=function(){return this.data.currentTime},Me.prototype.setCurrentTime=function(e){return e!==this.data.currentTime?(this.data.currentTime=e,this.getStarted()&&this.seek(e),e):void 0},Me.prototype.seek=function(e){null==e&&(e=this.data.currentTime),this.getMediaElement().currentTime=e},Me.prototype.getSrc=function(){return this.data.src},Me.prototype.setSrc=function(e){return(null==e||""===e)&&this.sendNotification(xo.ERROR,"The value of src is not supported: "+e),this.reset(),this.data.src=e,e},Me.prototype.getVolume=function(){return this.getMediaElement().volume},Me.prototype.setVolume=function(e){return e>=0&&1>=e&&e!==this.getMediaElement().volume&&this.sendNotification(xo.VOLUME_CHANGE,this.getMediaElement().volume=e),e},Me.prototype.getMuted=function(){return this.data.muted},Me.prototype.setMuted=function(e){var t;return this.data.muted=e,this.data.muted===!0?(this.data.volume=this.getVolume(),t=0):t=this.data.volume,this.sendNotification(xo.CHANGE_VOLUME,t),e},Me.prototype.getDuration=function(){return this.data.duration},Me.prototype.play=function(){if(this.data.ended===!0&&this.data.currentTime!==this.data.duration&&(this.data.ended=!1),this.data.started!==!0){if(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0,this.metadataloaded===!1)return}else if(this.data.loading===!0)return void(this.playWhenLoaded=!0);this.getMediaElement().play()},Me.prototype.pause=function(){this.data.paused=!0,this.getMediaElement().pause()},Me.prototype.load=function(){var e;this.sendNotification(xo.WAITING),this.data.loading=!0,this.playWhenLoaded=!1,this.metadataloaded=!1,e=this.getMediaElement(),e.addEventListener("loadedmetadata",this.handlers.loadedmetadata),e.addEventListener("loadedmetadata",this.resumeHandlers.loadedmetadata),e.addEventListener("durationchange",this.handlers.durationchange),e.addEventListener("canplaythrough",this.handlers.canplaythrough),e.addEventListener("error",this.handlers.error),this.applySrc()},Me.prototype.applySrc=function(){var e,t;e=this.getMediaElement(),e.src=this.data.src,Dt.isIPad()&&(null!=(t=Dt.getIOSversion())?t[0]:void 0)<8?setTimeout(e.load.bind(e),100):e.load()},Me.prototype.setQuality=function(e){},Me.prototype.getQuality=function(){},Me.prototype.getQualityLevels=function(){return[]},Me.prototype.destory=function(){},i(De,puremvc.SimpleCommand),De.prototype.execute=function(e){var t,i,n;t=this.facade.retrieveProxy(bt.NAME),i=this.facade.retrieveProxy(ce.NAME),n=t.getSrc()||"",-1===n.indexOf(".smil")&&(n=i.createURL(n)),t.setSrc(n),this.facade.getMediaElement().authenticationComplete({media:t.getData()})},i(xe,Me),xe.prototype.temporalTypes=null,xe.prototype.supportedTypes=null,xe.prototype.playbackCoreName="default",xe.prototype.config=null,xe.prototype.getPlaybackCoreName=function(){return this.playbackCoreName},xe.prototype.getSupportedTypes=function(){return this.supportedTypes||[]},xe.prototype.setSupportedTypes=function(e){return this.supportedTypes=e,
e},xe.prototype.getTemporalTypes=function(){return this.temporalTypes||[]},xe.prototype.setTemporalTypes=function(e){return this.temporalTypes=e,e},xe.prototype.canPlayTemporalType=function(e){return-1!==this.getTemporalTypes().indexOf(e)},xe.prototype.canPlayType=function(e){return null!=this.supportedTypes?-1!==this.getSupportedTypes().indexOf(e)?"maybe":"":xe.__super__.canPlayType.call(this,e)},i(ke,xe),ke.NAME=Me.NAME,ke.prototype.player=null,ke.prototype.initialized=!0,ke.prototype.playbackCoreName="flash",ke.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"],ke.prototype.getPaused=function(){return this.player.getPaused()},ke.prototype.getEnded=function(){return this.player.getEnded()},ke.prototype.getSeeking=function(){return this.player.getSeeking()},ke.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},ke.prototype.setCurrentTime=function(e){return this.player.setCurrentTime(e),e},ke.prototype.getSrc=function(){return this.player.getSrc()},ke.prototype.setSrc=function(e){return this.player.setSrc(e),e},ke.prototype.getVolume=function(){return this.player.getVolume()},ke.prototype.setVolume=function(e){return this.player.setVolume(e),e},ke.prototype.getMuted=function(){return this.player.getMuted()},ke.prototype.setMuted=function(e){return this.player.setMuted(e),e},ke.prototype.getDuration=function(e){return this.player.getDuration()},ke.prototype.play=function(){this.player.play()},ke.prototype.pause=function(){this.player.pause()},ke.prototype.load=function(){this.player.load()},i(Le,le),Le.prototype.initialize=function(e,t){var i,n;this.config=e,this.parentModule=t,this.createDefaults(),this.logEvents=(null!=(i=this.config.flash)?i.logEvents:void 0)===!0||"true"===(null!=(n=a["amp-flash-log"])?n.toLowerCase():void 0),Le.__super__.initialize.call(this,this.config,this.parentModule)},Le.prototype.createFramework=function(){var e,t,i,n,o,a,r,s,l,d=this;Le.__super__.createFramework.call(this),i=this.config.flash||{},a=(null!=(l=i["static"])?l.enabled:void 0)===!0?i["static"]:i,o=this.debug&&null!=a.debug?a.debug:a.swf||"amp.swf",r=i.version||"10.1",t=this.evaluatePaths(i.expressInstallSWF)||"playerProductInstall.swf",n=this.createParams(i),e=this.createAttributes(i),this.flashvars=this.createFlashVars(i),null==this.flashvars.settings_url&&(s=this.createXML(this.config),null!=s&&(this.flashvars.settings_xml=s)),swfobject.embedSWF(this.evaluatePaths(o),this.flashObjectID,"100%","100%",r,t,this.flashvars,n,e,function(e){d.createdHandler(e)})},Le.prototype.playerType="flash",Le.prototype.flashObjectID="flashObject",Le.prototype.playState=null,Le.prototype.loaded=!1,Le.prototype.flashvars=null,Le.prototype.paused=!1,Le.prototype.ended=!1,Le.prototype.muted=!1,Le.prototype.plugins=null,Le.prototype.debug=!1,Le.prototype.started=!1,Le.prototype.displayState=null,Le.prototype.logEvents=!1,Le.prototype.loop=!1,Le.prototype.media=null,Le.prototype.bindings=null,Le.prototype.configuration=null,Le.prototype.params=null,Le.prototype.appState=null,Le.prototype.security=null,Le.prototype.playback=null,Le.prototype.configuration=null,Le.prototype.flashPlugins=[{id:"AkamaiAdvancedStreamingPlugin",src:"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.10/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",absolute:!0,host:"osmf",main:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",type:"application/x-shockwave-flash"},{id:"ErrorMessagingPlugin",src:"#{paths.resources}plugins/ErrorMessagingPlugin.swf",blocking:!1,host:"akamai",main:"ErrorMessagingPlugin",type:"application/x-shockwave-flash"},{id:"VideoMetricsViewPlugin",src:"#{paths.resources}plugins/VideoMetricsViewPlugin.swf",blocking:!1,host:"akamai",main:"VideoMetricsViewPlugin",type:"application/x-shockwave-flash"},{id:"VideoStatsInfoOverlayPlugin",src:"#{paths.resources}plugins/VideoStatsInfoOverlayPlugin.swf",blocking:!1,host:"akamai",main:"VideoStatsInfoOverlayPlugin",type:"application/x-shockwave-flash"}],Le.prototype.flashView=null,Le.prototype.createModel=function(){this.appState=new mt,this.registerProxy(this.appState),this.bindings=new ft,this.registerProxy(this.bindings),this.security=new ce,this.registerProxy(this.security),this.media=new bt,this.registerProxy(this.media),this.playback=new ke(this),this.registerProxy(this.playback),this.configuration=new yt(this.config),this.registerProxy(this.configuration)},Le.prototype.createView=function(){this.registerMediator(new Ee(this.getViewComponent())),this.registerMediator(new ve),this.registerMediator(new Qe),this.registerMediator(new fe(this,this.config))},Le.prototype.createController=function(){Le.__super__.createController.call(this),this.registerCommand(Ro.AUTHORIZED,De),this.registerCommand(Ro.SET_TOKEN,be),this.registerCommand(Ro.SET_KEY,Ae),this.registerCommand(xo.CHANGE_PLAY_STATE,je),this.registerCommand(xo.PLAY_STATE_CHANGE,y),this.registerCommand(xo.START,pe),this.registerCommand(xo.STARTED,y),this.registerCommand(xo.PLAY,y),this.registerCommand(Po.FLASH_CREATED,y),this.registerCommand(xo.CHANGE_PLAYBACK_TARGET,he),this.registerCommand(xo.PLAYBACK_TARGET_CHANGE,ge)},Le.prototype.createMediaElement=function(){var e,t;return e=new me("flash","div"),this.sendNotification(xo.PLAYBACK_CORE_CHANGE,e),t=e.getViewComponent(),t.id=t.name=this.flashObjectID,t},Le.prototype.createDefaults=function(){var e,t,i,n,o,a,r,s;if(!(!(null!=(a=this.flashPlugins)?a.length:void 0)>0)){for(t=this.config.resources||[],null!=(null!=(r=this.config.flash)?r.resources:void 0)&&(t=t.concat(this.config.flash.resources)),i=Dt.mimeTypes.swf,s=this.flashPlugins,n=0,o=s.length;o>n;n++)e=s[n],null!=e&&0===t.filter(function(t){return t.id===e.id}).length&&(null==e.type&&(e.type=i),t.push(e));this.config.resources=t}},Le.prototype.createParams=function(e){var t;return t={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"},null!=e.params&&(null!=e.params.allowFullScreen&&(t.allowFullScreen=e.params.allowFullScreen),null!=e.params.allowScriptAccess&&(t.allowScriptAccess=e.params.allowScriptAccess),null!=e.params.wmode&&(t.wmode=e.params.wmode),null!=e.params.bgColor&&(t.bgColor=e.params.bgColor)),"direct"===t.wmode&&/MSIE/.test(navigator.userAgent)&&(t.wmode="transparent"),t},Le.prototype.getModules=function(){return this.plugins},Le.prototype.createPlugins=function(){var e,t,i,n,o,a;a=ti.plugins;for(i in a)if(o=a[i],i in this.config&&null!=this.config[i]&&this.config[i].enabled!==!1)if(e=o[this.getPlayerType()],null!=e)try{n=this[i]=this.plugins[i]=new e(this,this.config[i]),this.registerMediator(this.plugins[i]),t="function"==typeof n.getFeatureName?n.getFeatureName():void 0,null!=t&&(this[t]=n),null!=n.flashView&&(this.flashView=Dt.override(this.flashView,n.flashView)),this.logger.debug("[AMP] Plugin registered: "+i)}catch(r){this.logger.error("[AMP] Plugin could not be created: "+i+". "+r);continue}else this.logger.debug("[AMP] Plugin could not be found: "+i);null!=this.config.flash.view&&(this.flashView=Dt.override(this.flashView,this.config.flash.view)),this.sendNotification(Oo.PLUGINS_INITIALIZED,this.plugins)},Le.prototype.createAttributes=function(e){var t;return t={id:this.flashObjectID,name:this.flashObjectID},null!=e.attributes&&(null!=e.attributes.id&&(t.id=e.attributes.id),null!=e.attributes.name&&(t.name=e.attributes.name)),t},Le.prototype.createFlashJSON=function(e,t){var i,n;return null==e&&(e=this.config),e=JSON.stringify(e),e=this.evaluatePaths(e),e=JSON.parse(e),n=function(e,t,n){switch(typeof n){case"string":e[t]=escape(n);break;case"object":i(n)}},i=function(e){var t,i,o,a;if(e instanceof Array)for(t=o=0,a=e.length;a>o;t=++o)i=e[t],n(e,t,i);else if("object"==typeof e)for(t in e)i=e[t],n(e,t,i)},i(e),encodeURIComponent(JSON.stringify(e,null,t))},Le.prototype.createFlashVars=function(e){var t,i,n,o,a,r,s,l,d,c,u;if(t={},o=JSON.parse(JSON.stringify(this.config)),o.flash=null,delete o.flash,o.locales=null,delete o.locales,o.params=null,delete o.params,o.rules=null,delete o.rules,t.settings_json=this.createFlashJSON(o),null!=this.config.autoplay&&(t.auto_play=this.config.autoplay),null!=this.config.rules&&Dt.mergeRules(this.config.rules),t.hinting_rules=escape(JSON.stringify(Dt.rules)),null!=this.config.volume&&(t.volume=Dt.clamp(this.config.volume,0,1)),null!=this.config.target&&(t.external_target=this.config.target),null!=this.config.name&&(t.core_player_name=this.config.name),null!=this.config.domain&&(t.embed_domain=t.domain=this.config.domain),this.loop=t.auto_replay=this.config.loop===!0,null!=this.config.fullscreen&&(t.fullscreen_enabled=this.config.fullscreen.enabled!==!1&&this.config.fullscreen.mode!==To.EXTERNAL),null!=this.config.titlebar&&(t.titlebar_enabled=this.config.titlebar.enabled!==!1),null!=this.config.params&&(t.params=escape(JSON.stringify(this.config.params))),null!=this.config.version&&(t.context_menu_label=this.config.version),null!=(null!=(a=this.config.controls)?a.displaySceneMarkers:void 0)&&(t.displaySceneMarkers=this.config.controls.displaySceneMarkers),null!=this.config.media&&(null!=this.config.media.src&&(this.setSrc(this.config.media.src),t.video_url=escape(this.config.media.src)),null!=this.config.media.source&&this.config.media.source.length>0&&(this.setSource(this.config.media.source),t.video_url=escape(this.media.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),t.medium=this.config.media.medium),null!=this.config.media.title&&(t.title=encodeURIComponent(this.config.media.title)),null!=this.config.media.poster&&(t.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(t.temporalType=this.config.media.temporalType)),"audio"===this.getMedium()&&(t.controls=!0,t.auto_hide=-1),null!=(null!=(r=this.config.ima)&&null!=(s=r.overlay)?s.delay:void 0)&&(t.overlay_ad_delay=this.config.ima.overlay.delay),null!=this.config.ticker&&this.config.ticker.enabled!==!1&&(null!=this.config.ticker.url&&(t.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(t.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(t.ticker_speed=this.config.ticker.speed)),t.show_play_button_overlay=!1,t.auto_play_list=!1,t.next_video_timer=0,null==t.context_menu_mode&&(t.context_menu_mode=this.debug===!0?"long":"short"),null!=(null!=(l=this.config.flash)&&null!=(d=l.view)&&null!=(c=d.elements)&&null!=(u=c.loadingView)?u.attributes:void 0)){i="";for(n in this.config.flash.view.elements.loadingView.attributes)i+=n+":"+this.config.flash.view.elements.loadingView.attributes[n]+" ";t.loadingView=i}return this.sendNotification(Po.CREATE_FLASH_VARS,{flashvars:t,config:this.config}),t=Dt.override(t,e.vars)},Le.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_,E,A,b,C,N;if(null==(null!=e&&null!=(b=e.flash)?b.xml:void 0)&&(null==e.flash&&(e.flash={}),e.flash.xml="<application></application>"),y=re.parse(e.flash.xml),y.childNodes.length>1&&y.removeChild(y.firstChild),this.sendNotification(Po.CREATE_XML,{config:e,xml:y}),d=function(e){var t,i,n,a,r,s,l;if(a=e.resources,i=[],a instanceof Array&&(null!=a?a.length:void 0)>0)for(s=0,l=a.length;l>s;s++)n=a[s],n.type===g&&(n=Dt.clone(n),o===!0?null!=n.main&&""!==n.main?(n.src=n.main,n.type="static"):n.type="dynamic":null!=n.src&&""!==n.src?n.type="dynamic":(n.src=n.main,n.type="static"),delete n.main,i.push(n));for(t in e)r=e[t],"flash"!==t&&null!=(a=null!=r?r.resources:void 0)&&a instanceof Array&&a.length>0&&(i=i.concat(d(r)));return i},g=Dt.mimeTypes.swf,p=d(this.config),o=(null!=(C=e.flash["static"])?C.enabled:void 0)===!0,(null!=p?p.length:void 0)>0)for(l=y.getElementsByTagName("plugins"),l.length<1?(l=y.createElement("plugins"),y.firstChild.appendChild(l)):l=l[0],v=0,E=p.length;E>v;v++)if(u=p[v],u.enabled!==!1){s=y.createElement("plugin");for(a in u)f=u[a],"loaded"!==a&&("src"!==a?s.setAttribute(a,""+f):("id"===a&&"AkamaiAdvancedStreamingPlugin"===f&&this.debug===!0&&(f=f.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")),s.appendChild(re.createTextContent(y,f))));l.appendChild(s)}if(c=function(e,t){var i,n,o,a,r,s;if(null!=e.attributes){a=e.attributes;for(n in a)o=a[n],t.setAttribute(n,""+o)}if(null!=e.elements){r=e.elements;for(n in r)o=r[n],null!=o&&(i=y.createElement("element"),i.setAttribute("id",n),"state"!==i.id&&(c(o,i),t.appendChild(i)))}if(null!=e.state){if(i=y.createElement("state"),e.state.attributes){s=e.state.attributes;for(n in s)o=s[n],null!=o&&i.setAttribute(n,""+o)}t.appendChild(i)}return t},m=y.getElementsByTagName("view")[0],null==m&&(m=y.createElement("view"),y.firstChild.appendChild(m)),c(this.flashView,m),r=null!=(N=this.config.fullscreen)?N.mode:void 0,null!=r)for(n=y.getElementsByTagName("element"),_=0,A=n.length;A>_;_++)i=n[_],"fullscreenBtn"===i.getAttribute("id")&&i.setAttribute("action","external");return h=re.serialize(y),t=h.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||h,t=t.replace(/[\n\r\t]/g,""),t=this.evaluatePaths(t),encodeURIComponent(t)},Le.prototype.createdHandler=function(e){var t=this;this.mediaElement=e.ref,this.mediaElement.className=Lo.PREFIX+me.prototype.componentType,this.mediaElement.eventHandler=function(e,i){return t.eventHandler(e,i)},this.sendNotification(Po.FLASH_CREATED),null!=this.getMedium()&&this.setMedium(this.getMedium())},Le.prototype.eventHandler=function(e,t){var i,n,o,a,r,s;this.logEvents&&!this.excludedFlashEvents.test(e)&&this.logger.log("[AMP FLASH EVENT] "+e,t);try{switch(e){case Po.INITIALIZED:a=o="ready";break;case Po.RESET:null==t&&(o="ready"),this.started=!1;break;case Po.LOADING:a="loadstart";break;case Po.PLAYER_ERROR:a=o="error";break;case Po.MEDIA_ERROR:a=o="error";break;case Po.FEED_UPDATED:a="mediachange";break;case Po.ERROR_STREAM_NOT_FOUND:a=o="error";break;case Po.CAPABILITY_CHANGE:n=t.type,"canPlayChange"===n&&t.enabled===!0?(a="canplay",this.loaded=!0):"canSeekChange"===n&&t.enabled===!0?a="canplaythrough":"temporalChange"===n&&t.enabled===!0&&(a="loadedmetadata",this.started||this.sendNotification(xo.START,t));break;case Po.PLAYING:this.started||this.sendNotification(xo.START,t),a=o="playing",this.ended=!1,this.paused=!1;break;case Po.ELEMENT_EVENT:"fullscreenBtn"===t.element&&"click"===t.type&&(null!=(r=this.config)&&null!=(s=r.fullscreen)?s.mode:void 0)===To.EXTERNAL&&(o=this.getDisplayState()===Go.FULL_SCREEN?Go.NORMAL:Go.FULL_SCREEN,this.setDisplayState(o));break;case Po.PLAY_REQUEST:a="playrequest",this.loaded=!0,this.ended=!1;break;case Po.PLAY:"paused"!==this.playState&&this.started&&this.sendNotification(xo.PLAY,t);break;case Po.ENDED:a=o="ended",this.ended=!0;break;case Po.PAUSED:a="pause",o="paused",this.paused=!0;break;case Po.BUFFERING:"ended"!==this.className&&(a=o="waiting");break;case Po.DURATION_CHANGE:isNaN(t.time)||(a="durationchange",t=t.time);break;case Po.VOLUME_CHANGE:a="volumechange";break;case Po.TIME_UPDATE:a="timeupdate";break;case Po.SEEKING_CHANGE:if(this.appState.getSeeking()===!1&&t.seeking===!1)return;a=t.seeking?"seeking":"seeked",this.appState.setSeeking(t.seeking),t.seeking&&(o="seeking");break;case Po.FULLSCREEN_CHANGE:a="fullscreenchange",t="fullScreen"===t.displayState,this.applyDisplayState(t?Go.FULL_SCREEN:Go.NORMAL);break;case Po.FAIL_OVER_ATTEMPT:a="failoverattempt",t=t;break;case Po.ERROR:e=null;break;case Po.AUTHORIZE:a=Ro.AUTHORIZE;break;case Po.TIMED_METADATA:a=xo.TIMED_METADATA,t={startTime:t.time,endTime:t.time,data:t}}null!=e&&e!==a&&(n=new Tt(e,t),n.dispatcher="FLASH",this.sendNotification(xo.DISPATCH_EVENT,n),this.sendNotification(e,t)),null!=a&&("error"===a&&(i=t.error||t,this.error("Flash Error",i)),this.sendNotification(a,t),this.sendNotification(xo.DISPATCH_EVENT,new Tt(a,t))),null!=o&&this.setPlayState(o)}catch(i){this.error("Event Error: "+e,i)}},Le.prototype.error=function(e,t){this.logger.error("[AMP FLASH ERROR]",e,t)},Le.prototype.excludedFlashEvents=/(mediaPlayerPlayheadUpdate|mediaPlayerElementEvent|adComponentPlaybackProgress)/,Le.prototype.logFlashEvents=!1,Le.prototype.logEvent=function(e){"FLASH"===e.dispatcher&&this.logFlashEvents===!1||this.excludedFlashEvents.test(e.type)===!0||Le.__super__.logEvent.call(this,e)},Le.prototype.setPlayState=function(e){return e!==this.playState?(this.playState=e,this.sendNotification(xo.CHANGE_PLAY_STATE,this.playState),e):void 0},Le.prototype.setMedia=function(e){return Le.__super__.setMedia.call(this,e),null!=this.playState&&this.setPlayState("ready"),this.media.setData(e),null!=e.src&&this.setSrc(e.src),null!=e.source&&e.source.length>0&&this.setSource(e.source),this.sendNotification(xo.MEDIA_CHANGE,e),this.loaded=!0,this.mediaElement.loadURL(this.media.getSrc(),this.media.getData()),e},Le.prototype.getMedia=function(){return this.media.getData()},Le.prototype.load=function(){this.loaded=!0,this.mediaElement.loadURL(this.media.getSrc())},Le.prototype.play=function(){this.loaded||this.load(),this.mediaElement.unpause()},Le.prototype.setMuted=function(e){this.muted=e;try{e===!0?this.mediaElement.mute():this.mediaElement.unmute()}catch(t){this.error("Flash muted error",t)}return e},Le.prototype.getMuted=function(){return this.muted},Le.prototype.getLoop=function(){return this.loop},Le.prototype.getSrc=function(e){return this.mediaElement.getURL()},Le.prototype.setSrc=function(e){return this.media.setSrc(e),this.loaded=!1,this.setMedium(Dt.getMimeType(e)),e},Le.prototype.setAutoplay=function(e){return this.mediaElement.setPlayerProperty("autoplay",e),e},Le.prototype.getAutoplay=function(){return this.mediaElement.getPlayerProperty("autoplay")},Le.prototype.getMedium=function(){return this.media.getData().medium},Le.prototype.setMedium=function(e){var t,i;return t=this.media.getData(),e!==t.medium?(null!=t.medium&&(i="medium-"+t.medium),t.medium=/audio/.test(e)?"audio":"video",this.sendNotification(xo.MEDIUM_CHANGE,{value:"medium-"+t.medium,previous:i}),e):void 0},Le.prototype.setSource=function(e){var t,i,n=this;if(!(null==e||e.length<1)){if(i=this.media.getData(),i.source=e,this.loaded=!1,t=Dt.selectSource(e,function(e){return n.canPlayType(e)}),null==(null!=t?t.src:void 0)||""===t.src)throw new Error("No valid source could be found");return this.setSrc(t.src),"undefined"!=typeof type&&null!==type&&this.setMedium(type),e}},Le.prototype.getSource=function(){return this.media.getData().source},Le.prototype.getSeeking=function(){return this.appState.getSeeking()},Le.prototype.getPaused=function(){return this.paused},Le.prototype.getEnded=function(){return this.ended},Le.prototype.getFlashXML=function(){var e,t;t=decodeURIComponent(this.flashvars.settings_xml),e=re.parse(t);try{e.toString=function(){return t}}catch(i){}return e},Le.prototype.getFlashVars=function(){return this.flashvars},Le.prototype.getFlashJSON=function(){return JSON.parse(decodeURIComponent(this.flashvars.settings_json))},Le.prototype.evaluateBinding=function(e){var t;if(t=this.mediaElement.evaluateBinding(e),null!=t)try{t=JSON.parse(t)}catch(i){}return t},Le.prototype.canPlayType=function(e){return n.call(Dt.flashTypes,e)>=0?"maybe":""},Le.prototype.replay=function(){this.mediaElement.replay()},Le.prototype.pause=function(){this.mediaElement.pause()},Le.prototype.end=function(){this.mediaElement.stopPlayer()},Le.prototype.getCurrentTime=function(){return this.mediaElement.getCurrentTime()},Le.prototype.setCurrentTime=function(e){return this.mediaElement.jumpToTime(e),e},Le.prototype.getParams=function(){return this.mediaElement.getParams()},Le.prototype.setParams=function(e){return this.mediaElement.setParams(e),e},Le.prototype.getVolume=function(){return this.mediaElement.getVolume()},Le.prototype.setVolume=function(e,t){return this.mediaElement.setVolume(e,t||""),e},Le.prototype.getDuration=function(){return this.mediaElement.getDuration()},Le.prototype.getDisplayState=function(){return this.displayState},Le.prototype.setDisplayState=function(e){var t;if(e!==this.displayState&&(this.applyDisplayState(e),(null!=(t=this.config.fullscreen)?t.mode:void 0)!==To.EXTERNAL))return this.displayState===Go.FULL_SCREEN?this.mediaElement.enterFullScreen():this.mediaElement.exitFullScreen(),e},Le.prototype.applyDisplayState=function(e){var t;e!==this.displayState&&(t={value:e,previous:this.displayState},this.displayState=e,this.sendNotification(xo.DISPLAY_STATE_CHANGE,t),this.sendNotification(xo.DISPATCH_EVENT,new Tt("fullscreenchange",this.displayState===Go.FULL_SCREEN)))},Le.prototype.enterFullScreen=function(){this.setDisplayState(Go.FULL_SCREEN)},Le.prototype.exitFullScreen=function(){this.setDisplayState(Go.NORMAL)},Le.prototype.recordContentChange=function(e){this.mediaElement.recordContentChange(e)},Le.prototype.setQuality=function(e){return this.mediaElement.setQuality(e)},Le.prototype.getQuality=function(){return this.mediaElement.getQuality()},Le.prototype.getQualityLevels=function(){return this.mediaElement.getQualityLevels()},i(Re,puremvc.Mediator),Re.prototype.module=null,Re.prototype.mediator=null,Re.prototype.initializeNotifier=function(e){var t,i=this;Re.__super__.initializeNotifier.call(this,e),t=this.module.listNotificationPublications(),null!=t&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return t},this.mediator.handleNotification=function(e){i.facade.sendNotification(e.getName(),e.getBody(),e.getType())})},Re.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)},Re.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMediator(this.mediator)},Re.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()},Re.prototype.handleNotification=function(e){this.module.sendNotification(e.getName(),e.getBody(),e.getType())};var xo={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languagechange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",CHANGE_PLAYBACK_TARGET:"changeplaybacktarget",LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",IS_LIVE:"islive",CHANGE_CONTENT:"changecontent",CONTENT_CHANGED:"contentchanged",ENABLE_VIDEO_EVENTS:"enablevideoevents",DISABLE_VIDEO_EVENTS:"disablevideoevents",MEDIA_SEQUENCE_ENDED:"mediasequenceended",TIMED_METADATA:"timedmetadata"};Oe.SINGLE=/^\s*#{([^#{}]+)}\s*$/,Oe.TOKEN=/#{([^#}]*)}/g,Oe.RETURN="return ",Oe.EVENT="event",Oe.ELEMENT="element",Oe.PATHS="paths",Oe.eval=function(e,t,i,n,o){var a,r,s;return null==e?e:(r=null!=(s=this.SINGLE.exec(e))?s[1]:null,a=null!=r?this.evalBinding(r,t,i,n,o):this.evalString(e,t,i,n,o))},Oe.evalString=function(e,t,i,n,o){return e.replace(this.TOKEN,this.replaceBinding.bind(this,t,i,n,o))},Oe.replaceBinding=function(e,t,i,n,o,a,r,s){return this.evalBinding(a,e,t,i,n)},Oe.evalBinding=function(e,t,i,n,o){var a;try{a=this.exec(e,t,i,n,o)}catch(r){a="#{"+e+"}"}return a},Oe.exec=function(e,t,i,n,o){return new Function(this.EVENT,this.ELEMENT,this.PATHS,this.RETURN+e).bind(t)(i,n,o)},i(Ve,puremvc.SimpleCommand),Ve.prototype.execute=function(e){var t,i;i=this.facade.player||this.facade,t=e.getBody(),t.player=i,this.facade.dispatchEvent(t)},Ge.prototype.data=null,Ge.prototype.value=null,Ge.prototype.source=null,Ge.prototype.parse=function(e){},Ge.prototype.compile=function(e,t){null==e&&(e={}),null==t&&(t=!1)},i(Ue,Ge),Ue.prototype.data=null,Ue.prototype.value=null,Ue.prototype.source=null,Ue.prototype.parse=function(e){var t;return t=e instanceof Array?new Be(e):e instanceof Object?new pt(e):new ut(e)},i(Be,Ue),Be.prototype.parse=function(e){var t,i,n,o;for(this.data=[],t=n=0,o=e.length;o>n;t=++n)i=e[t],this.data[t]=Be.__super__.parse.call(this,i);return this.data},Be.prototype.compile=function(e,t){var i,n,o,a,r;for(null==e&&(e={}),null==t&&(t=!1),this.value=[],r=this.data,i=o=0,a=r.length;a>o;i=++o){n=r[i];try{this.value[i]=n.compile(e,t)}catch(s){this.value[i]=null,t||Pt.error(s)}}return this.value},i(He,puremvc.Proxy),He.prototype.contextName=null,He.prototype.contextData=null,He.prototype.onRegister=function(){var e,t;null!=this.getContextName()&&(e=this.facade.player||this.facade,t=e.retrieveProxy(ft.NAME),t.registerContext(this))},He.prototype.getContextName=function(){return this.contextName},He.prototype.getContextData=function(){return this.contextData},i(Fe,puremvc.Proxy),Fe.NAME="PlaybackProxy",Fe.prototype.src=null,Fe.prototype.canPlayType=function(e){return"external"===e},Fe.prototype.canPlayTemporalType=function(e){return!0},Fe.prototype.getSrc=function(){return this.src},Fe.prototype.setSrc=function(e){return(null==e||""===e)&&this.sendNotification(xo.ERROR,"The value of src is not supported: "+e),e!==this.src&&(this.src=e),e},Fe.prototype.mediaProxy=null,Fe.prototype.setMediaProxy=function(e){this.mediaProxy=e},Fe.prototype.play=function(){window.open(this.getSrc(),"_blank")},Fe.prototype.load=function(){},Fe.prototype.setVolume=function(){},Fe.prototype.pause=function(){},Fe.prototype.setEnabled=function(){},Fe.prototype.getCurrentTime=function(){return 0},Fe.prototype.setCurrentTime=function(e){},Fe.prototype.getDuration=function(){return 0};var ko={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"},Lo={PREFIX:"akamai-"},Ro={CHECK_AUTHORIZATION:"authcheckAuthorization",AUTHORIZATION_FAILED:"authauthorizationfailed",AUTHORIZE:"authauthorize",AUTHORIZED:"authauthorized",SET_TOKEN:"authsettoken",SET_KEY:"authsetkey"};i(je,g),je.prototype.execute=function(e){this.applicationState.setPlayState(e.getBody())},i(ze,g),ze.prototype.execute=function(e){var t;t=e.getBody(),this.sendNotification(xo.CHANGE_MEDIA,t),t=this.media.getData(),this.media.authorized===!0&&this.sendNotification(xo.MEDIA_VALIDATED,t)},i(Ye,g),Ye.prototype.execute=function(e){var t;t=e.getBody(),this.media.getDuration()!==t&&this.media.setDuration(t)},i(We,y),We.prototype.execute=function(e){var t;t=this.playback.getMediaElement(),_t.clear(t),this.logger.error("[AMP ERROR]",e.getBody()),this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.ERROR),We.__super__.execute.call(this,e)},i(qe,y),qe.prototype.execute=function(e){var t,i;t=null!=(i=this.facade.config)?i.volume:void 0,null!=t&&this.sendNotification(xo.CHANGE_VOLUME,t),this.playerCore.ready(),this.sendNotification(xo.CHANGE_DISPLAY_STATE,Go.NORMAL),this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.READY),this.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),this.dispatchEventAfterCommand(e)},i(Xe,g),Xe.prototype.execute=function(e){var t;t=e.getBody()||{},this.bindings.compile(t.contexts,t.suppressErrors)},i(Ze,g),Ze.prototype.execute=function(e){this.params.setData(e.getBody()),this.sendNotification(xo.UPDATE_DATA_BINDINGS,{suppressErrors:!0})},i(Je,y),Je.prototype.execute=function(e){var t;t=e.getBody(),this.playerCore.setPlaybackCore(t),this.playback.setSrc(t.src),this.playback.setCurrentTime(t.startTime||0),Je.__super__.execute.call(this,e)},i(Ke,g),Ke.prototype.execute=function(e){var t;t=e.getBody(),this.playback.setEnabled(!1),this.playback.pause(),this.sendNotification(xo.CHANGE_PLAY_STATE,Vo.READY),this.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.ACTIVE);try{this.media.setData(t)}catch(i){this.sendNotification(xo.ERROR,i.message)}this.sendNotification(xo.UPDATE_DATA_BINDINGS),this.sendNotification(Ro.AUTHORIZE)},i(Qe,ye),Qe.prototype.componentName="overlays",Qe.NAME="OverlayLayerMediator",Qe.prototype.createMediatorName=function(){return Qe.NAME},Qe.prototype.listNotificationInterests=function(){return[xo.ADD_OVERLAY,xo.REMOVE_OVERLAY]},Qe.prototype.handleNotification=function(e){var t,i;switch(t=e.getName(),i=e.getBody(),t){case xo.ADD_OVERLAY:this.viewComponent.appendChild(i);break;case xo.REMOVE_OVERLAY:this.viewComponent.removeChild(i)}},i($e,ye),$e.prototype.componentName="poster",$e.prototype.poster=null,$e.prototype.clickHandler=null,$e.prototype.onRegister=function(){$e.__super__.onRegister.call(this),this.poster=this.create("poster-content"),this.poster.onclick=this.onclick.bind(this)},$e.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(ko.TOGGLE_PLAY_PAUSE,!0),!1},$e.prototype.listNotificationInterests=function(){return[xo.CHANGE_MEDIA]},$e.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case xo.CHANGE_MEDIA:i=e.getBody().poster,t=null!=i&&""!==i?'<img src="'+i+'" class="'+this.cssPrefix+'poster-image" />':"",this.poster.innerHTML=t}},i(et,ye),et.prototype.message=null,et.prototype.componentName="error",et.prototype.onRegister=function(){et.__super__.onRegister.call(this),this.message=this.create("error-message")},et.prototype.listNotificationInterests=function(){return[xo.ERROR]},et.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case xo.ERROR:switch(t=e.getBody(),i="Error: ",t.code){case MediaError.MEDIA_ERR_ABORTED:i+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:i+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:i+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:i+="Source not supported.";break;default:i+=t}this.message.textContent=i}},i(tt,X),tt.prototype.componentName="title-bar",tt.prototype.title=null,tt.prototype.description=null,tt.prototype.onRegister=function(){tt.__super__.onRegister.call(this),this.title=this.create("title-text"),this.description=this.create("description-text")},tt.prototype.listNotificationInterests=function(){return[xo.CHANGE_MEDIA]},tt.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case xo.CHANGE_MEDIA:t=e.getBody(),i=t.title,null==i||""===i||"undefined"===i?this.classList.add("hidden"):(this.title.innerHTML=i,this.description.innerHTML=t.description?t.description:"",this.classList.remove("hidden"))}},i(it,s),it.prototype.player=null,it.prototype.proxy=null,it.prototype.initialize=function(e,t){this.player=t,this.logger=this.player.logger,
it.__super__.initialize.call(this,e,t)},it.prototype.isAvailable=function(){return!0},it.prototype.loadResources=function(){return this.isAvailable()?void it.__super__.loadResources.call(this):void this.resourcesLoaded()},it.prototype.resourcesLoaded=function(){"function"==typeof this.oninitialized&&this.oninitialized(this)},it.prototype.onRegister=function(){var e;this.isAvailable()&&(this.createFramework(),null!=(e=this.retrieveProxy(we.NAME))&&"function"==typeof e.initialize&&e.initialize()),this.sendNotification(Oo.PLUGIN_REGISTERED,this)},it.prototype.logEvent=function(e){var t;/(timeupdate|timeremaining)/.test(e.type)!==!0&&(t=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase(),null!=e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e))},it.prototype.listNotificationPublications=function(){var e,t,i;return t=[xo.ADD_LAYER,xo.REMOVE_LAYER,xo.ADD_OVERLAY,xo.REMOVE_OVERLAY,xo.ADD_APPLICATION_STATE,xo.REMOVE_APPLICATION_STATE,xo.IS_USER_ACTIVE,xo.PLAYBACK_CORE_CHANGE],t.concat(function(){var t;t=[];for(e in Oo)i=Oo[e],t.push(i);return t}())},i(nt,puremvc.Mediator),nt.NAME="PluginAdapter",nt.prototype.plugins=null,nt.prototype.registered=null,nt.prototype.onRegister=function(){return nt.__super__.onRegister.call(this)},nt.prototype.listNotificationInterests=function(){return[Oo.REGISTER_PLUGINS,Oo.PLUGIN_REGISTERED]},nt.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h;switch(s=e.getName(),t=e.getBody(),s){case Oo.REGISTER_PLUGINS:u=this.facade.getPlayerType(),i=t,d=this.onplugininitialized.bind(this),l=this.onpluginerror.bind(this),h=ti.plugins;for(r in h)if(p=h[r],r in i&&(a=i[r],null!=a&&a.enabled!==!1))if(n=p[u],null!=n)try{c=new n,c.oninitialized=d,c.onerror=l,this.plugins.push(c.initialize.bind(c,a,this.facade))}catch(g){this.logger.error("[AMP] Plugin could not be created: "+r+". "+g);continue}else this.facade.logger.debug("[AMP] Plugin could not be found: "+r);this.plugins.forEach(function(e){return e()});break;case Oo.PLUGIN_REGISTERED:this.registered++,s="function"==typeof t.getModuleName?t.getModuleName():void 0,null!=s&&(this.facade[s]=t),o="function"==typeof t.getFeatureName?t.getFeatureName():void 0,null!=o&&(this.facade[o]=t),this.facade.logger.debug("[AMP] Plugin registered: "+t.getModuleName()),this.initializedCheck()}},nt.prototype.initializedCheck=function(){this.registered===this.plugins.length&&this.sendNotification(Oo.PLUGINS_INITIALIZED,this.plugins)},nt.prototype.onplugininitialized=function(e){e.oninitialized=null,e.onerror=null,this.facade.registerModule(e)},nt.prototype.onpluginerror=function(e){this.registered++,this.facade.logger.error("[AMP] Plugin could not be registered: "+e.getModuleName()),this.initializedCheck()},ot.prototype.element=null,ot.prototype.prefix=Lo.PREFIX,ot.prototype.contains=function(e){return this.constructor.contains(e,this.element,this.prefix)},ot.prototype.add=function(e){this.constructor.add(e,this.element,this.prefix)},ot.prototype.remove=function(e){this.constructor.remove(e,this.element,this.prefix)},ot.prototype.toggle=function(e){return this.constructor.contains(e,this.element,this.prefix)},ot.contains=function(e,t,i){var n,o;return null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.contains:void 0)?t.classList.contains(n):-1!==t.className.indexOf(n)},ot.add=function(e,t,i){var n,o;null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.add:void 0)?t.classList.add(n):this.contains(e,t)||(""!==t.className?t.className+=" "+n:t.className=n)},ot.remove=function(e,t,i){var n,o,a;null==i&&(i=""),n=i+e,null!=(null!=(a=t.classList)?a.remove:void 0)?t.classList.remove(n):this.contains(e,t)&&(o=new RegExp(" ?"+n),t.className=t.className.replace(o,""))},ot.toggle=function(e,t,i){var n,o;null==i&&(i=""),n=i+e,null!=(null!=(o=t.classList)?o.toggle:void 0)?t.classList.toggle(this.prefix+e):this.contains(e,t)?this.remome(e,t):this.add(e,t)},i(at,He),at.NAME="LocalizationProxy",at.prototype.contextName="l10n",at.prototype.locale=null,at.prototype.localeId=null,at.prototype.onRegister=function(){at.__super__.onRegister.call(this),this.setLocale(this.data.language)},at.prototype.getContextData=function(){return this.locale},at.prototype.getLanguage=function(){return this.data.language},at.prototype.setLanguage=function(e){return this.data.language=e,this.setLocale(e),this.sendNotification(xo.LANGUAGE_CHANGE,e),e},at.prototype.setLocale=function(e){return this.localeId=e,this.locale=this.data.locales[this.localeId],null==this.locale&&(this.localeId=e.substring(0,2),this.locale=this.data.locales[this.localeId]),this.facade.l10n=this.locale,e},at.prototype.getLocaleId=function(){return this.localeId},at.prototype.getLocales=function(){return this.data.locales},at.prototype.setLocales=function(e){return this.data.locales=e,e},at.prototype.getString=function(e){var t;return t=this.locale||this.data.locales.en,t[e]||""},at.prototype.getLanguageString=function(e){var t,i;return"string"!=typeof e||null==e||""===e?"":(t="MSG_"+e.toUpperCase(),i=this.getString(t),""===i&&(e=e.split("-").shift(),t="MSG_"+e.toUpperCase(),i=this.getString(t)),i)},rt.create=function(e,t,i,n){var o,a,r,s,l;if(null==i&&(i="div"),"string"==typeof i&&(i=document.createElement(i)),o=new ot(i),null!=e)for("string"==typeof e&&(e=[e]),s=0,l=e.length;l>s;s++)a=e[s],o.add(a);return i._classList=o,null!=n&&(null!=i.innerText?i.innerText=n:i.textContent=n),null!=t&&(null!=t.getViewComponent&&(r=t.getViewComponent()),null!=r&&(t=r),t.appendChild(i)),i},rt.bindEvents=function(e,t,i){var o,a;null==i&&(i=["onRemove","onRegister"]);for(o in t)a=t[o],n.call(i,o)>=0||!/^on/.test(o)||null==(null!=a?a.bind:void 0)||(e[o]=a.bind(t))},rt.createUID=function(e){var t,i,n,o;return null==e&&(e=16),t=Date.now(),i=2,n=e*i-1,o=Math.round(Math.random()*n+e),(o.toString(16)+t.toString(16)).toUpperCase()},i(st,y),st.prototype.execute=function(e){this.sendNotification(xo.PLAY_REQUEST),this.playback.play(),st.__super__.execute.call(this,e)},i(lt,Error),lt.MESSAGE="Tokenization Error: Could not find token value for: ",i(dt,Ue),dt.prototype.parse=function(e){return this.source=this.data=this.value=e,e},dt.prototype.compile=function(e,t){return null==e&&(e=null),null==t&&(t=!1),this.value},i(ct,Ue),ct.prototype.exec=null,ct.prototype.parse=function(e){return this.source=this.data=e,this.exec=new Function("context","var value; with(context){value = "+this.data+";}return value;"),this.data},ct.prototype.compile=function(e,t){if(null==e&&(e={}),null==t&&(t=!1),null==this.exec)return this.value;try{this.value=this.exec(e)}catch(i){if(this.value=null,!t)throw new lt(this.data)}return this.value},i(ut,Ue),ut.prototype.exec=null,ut.prototype.tokenStart=/#{/,ut.prototype.tokenEnd=/}/,ut.prototype.token=null,ut.prototype.parse=function(e){var t,i,n,o,a,r,s,l,d;if(this.source=e,this.data=[],this.token.test(this.source)){for(s=[],n="<<>>",o=null,a=this.source.replace(this.token,function(e,t,i,a){return s.push(t),o=n,i>0&&i<a.length-e.length&&(o+=n),o}),i=a.split(n),r=0,l=0,d=i.length;d>l;l++)t=i[l],""===t&&s[r]?(this.data.push(new ct(s[r])),r++):""!==t&&this.data.push(new dt(t));1===this.data.length&&(this.data=this.data[0])}else this.data=new dt(e);return this.data},ut.prototype.compile=function(e,t){var i,n,o,a;if(null==e&&(e={}),null==t&&(t=!1),null==this.data)return this.value;try{if(this.data instanceof Ge)this.value=this.data.compile(e,t);else for(this.value="",a=this.data,n=0,o=a.length;o>n;n++)i=a[n],this.value+=i.compile(e,t)}catch(r){if(this.value=null,!t)throw new lt(this.source)}return this.value},i(pt,Ue),pt.prototype.parse=function(e){var t,i;this.source=e,this.data={};for(t in e)i=e[t],this.data[t]=pt.__super__.parse.call(this,i);return this.data},pt.prototype.compile=function(e,t){var i,n,o;null==e&&(e={}),null==t&&(t=!1),this.value={},o=this.data;for(i in o){n=o[i];try{this.value[i]=n.compile(e,t)}catch(a){this.value[i]=null,Pt.error(a)}}return this.value},ht.create=function(e){return new ht(e)},ht.defaults={paths:{player:"../amp.premier/",resources:"../resources/"},resources:[{src:"#{paths.player}amp.premier.css",type:"text/css"}],rules:{android_4_gets_m3u8:{regexp:"Android 4"}},autoplay:!0,loop:!1,target:"_blank",domain:"akamai.com",fullscreen:{},controls:{},volumepanel:{direction:"vertical"},captioning:{},playoverlay:{},flash:{swf:"#{paths.player}AkamaiPremierPlayer.swf",debug:"#{paths.player}AkamaiPremierPlayer-debug.swf",expressInstallSWF:"#{paths.player}playerProductInstall.swf","static":{enabled:!1,swf:"#{paths.player}AkamaiPremierPlayer-static.swf",debug:"#{paths.player}AkamaiPremierPlayer-static-debug.swf"},vars:{core_player_name:"amp.premier",mbr_starting_index:2,use_last_known_bitrate:!1,use_netsession_client:!1,netsession_install_prompt_frequency_secs:-1,ad_server_timeout:20,ad_control_enabled:!0,dvr_enabled:1,branding_preload:"none",hds_live_low_latency:!0,fullscreen_enabled:!0,show_feature_bar:!1,suppress_events:"mediaPlayerViewInitialized",hds_fragment_retry_data_gap_threshold:20},view:{attributes:{skin:"#{paths.player}premier.assets.swf"},elements:{infoOverlay:{attributes:{style:"top: 0px;"}},adOptions:{attributes:{style:"backgroundColor: 'rgba(0, 0, 0, 1)'"},elements:{adChoices:{attributes:{target:"http://www.akamai.com/"}},adCountdown:{},adCount:{}}},endSlate:{attributes:{enabled:"true",hideElements:"brandingLogo|viewAll"}},replayView:{},bufferingView:{}}}},locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"To",MSG_EMAIL_FROM:"From",MSG_EMAIL_VIDEO:"Email this video",MSG_EMAIL_MESSAGE_DEFAULT:"Check out this video from xxx",MSG_EMAIL_MESSAGE:"Message",MSG_EMAIL_ADDRESS_INVALID:"Invalid Email Address",MSG_EMAIL_MESSAGE_INVALID:"Please limit your message to 500 characters or less.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:" characters left",MSG_EMAIL_SEND_FAILURE:"Message could not be sent.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Your email has been sent!",MSG_SHARE_VIDEO_TEXT:"Share this video...",MSG_POST_TEXT:"Post",MSG_EMBED_TEXT:"Embed",MSG_LINK_TEXT:"Link",MSG_SHARE_CONNECT_FAILURE:"Unable to connect. Please try again.",MSG_SHARE_CONTENT_DISABLED:"Share and embed are disabled.",MSG_VERSION_TEXT:"Version",MSG_BUFFERING_TEXT:"buffering",MSG_CUSTOMIZE_CLIP_POINTS:"Customize the start and end point of the video.",MSG_PAUSE:"Pause",MSG_PREVIEW:"Preview",MSG_CURRENT:"Currrent",MSG_SEEK_TO:"Seek to",MSG_LIVE:"LIVE",MSG_DEFAULT_ERROR_MESSAGE:"Sorry, we were unable to play the media you selected. Please try again, or select alternate media.",MSG_ERROR_PREFIX:"Error encountered:",MSG_STREAM_NOT_FOUND:"Stream not found",MSG_CURRENT_WORKING_BANDWIDTH:"Current working bandwidth",MSG_CURRENT_BITRATE_PLAYING:"Current bitrate playing",MSG_MAX_BITRATE_AVAILABLE:"Max bitrate available",MSG_NOT_AVAILABLE:"Not Available",MSG_GO_LIVE:"GO LIVE",MSG_REPLAY:"Replay",MSG_NEXT_VIDEO:"Video starts in: ",MSG_RECOMMENDED:"Recommended",MSG_VIEW_ALL:"View all ",MSG_VIDEO:" videos",MSG_CC:"CC",MSG_CC_TITLE:"Caption",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_NEXT_AD:"Next ad starts in: ",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_CC_PREVIEW_TEXT:"Lorem ipsum dolor sit amet..",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian",MSG_ZH:"Chinese",MSG_CHROMECAST_MESSAGE:"Video playing on another screen",MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recommended"},es:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"a",MSG_EMAIL_FROM:"de",MSG_EMAIL_VIDEO:"Enviar este vdeo",MSG_EMAIL_MESSAGE_DEFAULT:"Echa un vistazo a este video de xxx",MSG_EMAIL_MESSAGE:"mensaje",MSG_EMAIL_ADDRESS_INVALID:"Direccin de correo electrnico no vlida",MSG_EMAIL_MESSAGE_INVALID:"Por favor limite su mensaje a 500 caracteres o menos.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:"personajes de la izquierda",MSG_EMAIL_SEND_FAILURE:"El mensaje no pudo ser enviado.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Tu email ha sido enviado!",MSG_SHARE_VIDEO_TEXT:"Comparte este vdeo...",MSG_POST_TEXT:"enviar",MSG_EMBED_TEXT:"incrustar",MSG_LINK_TEXT:"enlace",MSG_SHARE_CONNECT_FAILURE:"No se puede conectar. Por favor, intntelo de nuevo.",MSG_SHARE_CONTENT_DISABLED:"Compartir e incrustar estn desactivados.",MSG_VERSION_TEXT:"versin",MSG_BUFFERING_TEXT:"el almacenamiento en bfer",MSG_CUSTOMIZE_CLIP_POINTS:"Personalizar el inicio y el punto final del video.",MSG_PAUSE:"romper",MSG_PREVIEW:"vista previa",MSG_CURRENT:"corriente",MSG_SEEK_TO:"Tratar de",MSG_LIVE:"EN VIVO",MSG_DEFAULT_ERROR_MESSAGE:"Lo sentimos, no hemos podido jugar los medios de comunicacin seleccionados. Por favor, intntelo de nuevo, o seleccionar los medios de comunicacin alternativos.",MSG_ERROR_PREFIX:"Se produjo un error:",MSG_STREAM_NOT_FOUND:"Stream que no se encuentra",MSG_CURRENT_WORKING_BANDWIDTH:"Ancho de banda actual de trabajo",MSG_CURRENT_BITRATE_PLAYING:"Tasa de bits de reproduccin actual",MSG_MAX_BITRATE_AVAILABLE:"Tasa de bits mxima disponible",MSG_NOT_AVAILABLE:"No est disponible",MSG_GO_LIVE:"IR A VIVIR",MSG_REPLAY:"Repetir",MSG_NEXT_VIDEO:"El prximo video comienza en: ",MSG_RECOMMENDED:"Recomendado",MSG_CC:"CC",MSG_VIEW_ALL:"ver todo ",MSG_VIDEO:" vdeos.",MSG_EN:"Ingls",MSG_ES:"Espaol",MSG_DE:"Alemn",MSG_FR:"Francs",MSG_IT:"Italiano",MSG_RU:"Ruso",MSG_ZH:"Chino",MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recomendado"}}},i(gt,ue),gt.NAME="ParamsProxy",gt.prototype.defaults={},gt.prototype.configurationName="params",gt.prototype.setData=function(e){var t,i,n;this.data=(null!=(n=this.configurationData)?n.source:void 0)||{};for(t in e)i=e[t],this.data[t]=e[t];return this.configurationData=new pt(this.data),this.data};var Oo={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"};i(ft,puremvc.Proxy),ft.NAME="DataBindingProxy",ft.prototype.contextMap=null,ft.prototype.configurationMap=null,ft.prototype.paramsProxy=null,ft.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(gt.NAME),this.update()},ft.prototype.registerContext=function(e){null!=e&&(this.contextMap[e.getContextName()]=e)},ft.prototype.retrieveContext=function(e){return this.contextMap[e]},ft.prototype.removeContext=function(e){var t;return t=this.contextMap[e],delete this.contextMap[e],t},ft.prototype.registerConfiguration=function(e){null!=e&&(this.configurationMap[e.getConfigurationName()]=e,e.compile(this.context,!0))},ft.prototype.retrieveConfiguration=function(e){return this.configurationMap[e]},ft.prototype.removeConfiguration=function(e){var t;return t=this.configurationMap[e],delete this.configurationMap[e],t},ft.prototype.evaluateBinding=function(e){var t;return this.update(),t=new ut(e),t.compile(this.data),t.value},ft.prototype.update=function(e){var t,i,n,o,a,r;this.data.now=Date.now(),a=this.contextMap;for(n in a)t=a[n],-1!==(null!=e&&"function"==typeof e.indexOf?e.indexOf(n):void 0)&&(this.data[n]=t.getContextData());this.paramsProxy.compile(this.data),r=this.paramsProxy.value;for(i in r)o=r[i],this.data[i]=o;return this.data},ft.prototype.compile=function(e,t){var i,n,o,a,r;null==t&&(t=!1),this.update(e),n=Dt.clone(this.data),a=this.paramsProxy.getConfigurationName(),r=this.configurationMap;for(o in r)i=r[o],o!==a&&i.compile(n,t)};var Vo={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"},Go={NORMAL:"normal",FULL_SCREEN:"full-screen"},Uo={FLASH:"flash",HTML:"html"},Bo={ACTIVE:"active",INACTIVE:"inactive"};i(mt,puremvc.Proxy),mt.NAME="ApplicationStateProxy",mt.prototype.displayState=null,mt.prototype.playState=null,mt.prototype.renderMode=null,mt.prototype.activeState=null,mt.prototype.seeking=!1,mt.prototype.isUserActive=!1,mt.prototype.device=null,mt.prototype.volume=1,mt.prototype.playbackTarget="amp",mt.prototype.getDisplayState=function(){return this.displayState},mt.prototype.setDisplayState=function(e){var t;e!==this.displayState&&(t=this.displayState,this.displayState=e,this.sendNotification(xo.DISPLAY_STATE_CHANGE,{previous:t,value:this.displayState}))},mt.prototype.getPlayState=function(){return this.playState},mt.prototype.setPlayState=function(e){var t;if(e!==this.playState){if(this.seeking===!0)switch(e){case Vo.PLAYING:case Vo.READY:this.seeking=!1;break;default:return}t=this.playState,this.playState=e,this.sendNotification(xo.PLAY_STATE_CHANGE,{previous:t,value:this.playState})}},mt.prototype.getDevice=function(){return this.device},mt.prototype.getSeeking=function(){return this.seeking},mt.prototype.setSeeking=function(e){e!==this.seeking&&(this.seeking=e)},mt.prototype.getIsUserActive=function(){return this.isUserActive},mt.prototype.setIsUserActive=function(e){e!==this.isUserActive&&(this.isUserActive=e)},mt.prototype.getRenderMode=function(){return this.renderMode},mt.prototype.setRenderMode=function(e){e!==this.renderMode&&(this.renderMode=e)},mt.prototype.getMedium=function(){return this.medium},mt.prototype.setMedium=function(e){var t;e!==this.medium&&(t=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=e,this.sendNotification(xo.MEDIUM_CHANGE,{previous:t,value:"medium-"+this.medium}))},mt.prototype.getVolume=function(){return this.volume},mt.prototype.setVolume=function(e){return e!==this.volume?this.volume=e:void 0},mt.prototype.getPlaybackTarget=function(){return this.playbackTarget},mt.prototype.setPlaybackTarget=function(e){var t;e!==this.playbackTarget&&(t=this.playbackTarget,this.playbackTarget=e,this.sendNotification(xo.PLAYBACK_TARGET_CHANGE,{previous:t,value:this.playbackTarget}))},mt.prototype.getActiveState=function(){return this.activeState},mt.prototype.setActiveState=function(e){var t;e!==this.activeState&&(t=this.activeState,this.activeState=e,this.sendNotification(xo.ACTIVE_STATE_CHANGE,{previous:t,value:this.activeState}))},i(yt,r),yt.NAME=r.NAME,yt.prototype.getContextName=function(){return"paths"},yt.prototype.getContextData=function(){return this.getPaths()},yt.prototype.onRegister=function(){this.facade.retrieveProxy(ft.NAME).registerContext(this)},yt.prototype.setData=function(e){return null!=e.rules&&Dt.mergeRules(e.rules),yt.__super__.setData.call(this,e),e},yt.prototype.getAutoplay=function(){return this.data.autoplay},yt.prototype.setAutoplay=function(e){return this.data.autoplay=e,e},yt.prototype.getLoop=function(){return this.data.loop},yt.prototype.setLoop=function(e){return this.data.loop=e,e},yt.prototype.getEndSlate=function(){return this.data.endslate},yt.prototype.setEndSlate=function(e){return this.data.endslate=e,e},yt.prototype.getDomain=function(){return this.data.domain},yt.prototype.setDomain=function(e){return this.data.domain=e,e},yt.prototype.getTarget=function(){return this.data.target},yt.prototype.setTarget=function(e){return this.data.target=e,e},yt.prototype.getName=function(){return this.data.name},yt.prototype.setName=function(e){return this.data.name=e,e},yt.prototype.getPaths=function(){return this.data.paths},yt.prototype.setPaths=function(e){return this.data.paths=e,e},yt.prototype.getVersion=function(){return this.data.version},yt.prototype.getControls=function(){return this.data.controls},yt.prototype.setControls=function(e){return this.data.controls=e,e},yt.prototype.getFullscreen=function(){return this.data.fullscreen||{}},yt.prototype.setFullscreen=function(e){return this.data.fullscreen=e,e},i(vt,xe),vt.prototype.playbackCoreName="audio",vt.prototype.onRegister=function(){var e;e=new me("html5","audio"),this.sendNotification(xo.PLAYBACK_CORE_CHANGE,e)},vt.prototype.onRemove=function(){this.facade.createMediaElement()},vt.prototype.canPlayType=function(e){return/audio/.test(e)?"maybe":""},_t.PRESS=0,_t.RELEASE=1,_t.MOVE=2,_t.CLICK=3,_t.CONTEXTMENU=4,_t.EVENTS=[_t.PRESS,_t.RELEASE,_t.MOVE,_t.CLICK,_t.CONTEXTMENU],_t.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu"],_t.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"],_t.instances=[],_t.create=function(e,t,i){return new _t(e,t,i)},_t.bind=function(e,t){var i,n,o,a,r;for(r=_t.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],n.target===e&&(null==t||n.type===t)&&n.bind()},_t.unbind=function(e,t){var i,n,o,a,r;for(r=_t.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],n.target===e&&(null==t||n.type===t)&&n.unbind()},_t.clear=function(e,t){var i,n,o,a,r;for(r=_t.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],(null!=n?n.target:void 0)===e&&(null==t||n.type===t)&&(n.clear(),_t.instances.splice(i,1))},_t.prototype.types=null,_t.prototype.bind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.addEventListener?this.target.addEventListener(e,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+e,this.trigger)},_t.prototype.unbind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.removeEventListener?this.target.removeEventListener(e,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+e,this.trigger)},_t.prototype.clear=function(){this.unbind(),this.target=null,this.handler=null,this.type=null,this.types=null},_t.prototype.trigger=function(e){this.handler(e)},i(Et,xe),Et.prototype.playbackCoreName="dvr",Et.prototype.interval=null,Et.prototype.ondurationchange=function(e){this.updateDuration()},Et.prototype.ontimeupdate=function(e){this.updateCurrentTime()},Et.prototype.onplay=function(e){this.stopTimer(),Et.__super__.onplay.call(this,e)},Et.prototype.onplaying=function(e){this.stopTimer(),Et.__super__.onplaying.call(this,e)},Et.prototype.onpause=function(e){this.startTimer(),Et.__super__.onpause.call(this,e)},Et.prototype.canPlayTemporalType=function(e){return"dvr"===e},Et.prototype.seek=function(e){null==e&&(e=this.data.currentTime),this.getMediaElement().currentTime=e+this.getMediaElement().seekable.start(0)},Et.prototype.updateCurrentTime=function(){var e,t;t=this.getMediaElement().seekable,0!==t.length&&(e=this.getMediaElement().currentTime,this.data.currentTime=e-t.start(0),this.sendNotification(xo.TIME_UPDATE,this.data.currentTime),this.mediaProxy.setIsLive(e>=t.end(0)))},Et.prototype.updateDuration=function(){var e;e=this.getMediaElement().seekable,0!==e.length&&(this.data.duration=e.end(0)-e.start(0),this.sendNotification(xo.CHANGE_DURATION,this.data.duration))},Et.prototype.startTimer=function(){this.interval=setInterval(this.updateCurrentTime.bind(this),1e3)},Et.prototype.stopTimer=function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null,this.updateCurrentTime())},i(At,He),At.NAME="PlayerProxy",At.prototype.contextName="player",At.prototype.getPlaybackOrder=null,At.prototype.playbackCoreMap=null,At.prototype.defaultPlaybackCore=null,At.prototype.activePlaybackCore=null,At.prototype.onRegister=function(){At.__super__.onRegister.call(this),this.registerPlaybackCore(new Et),this.registerPlaybackCore(this.defaultPlaybackCore),this.registerPlaybackCore(new vt),this.activePlaybackCore=this.defaultPlaybackCore},At.prototype.ready=function(){var e;e="function"==typeof this.getPlaybackOrder?this.getPlaybackOrder(this.playbackCoreMap.map(function(e){return e.getPlaybackCoreName()})):void 0,null!=e&&(this.playbackCoreMap=this.playbackCoreMap.sort(function(t,i){return t=e.indexOf(t.getPlaybackCoreName()),i=e.indexOf(i.getPlaybackCoreName()),t===i?0:-1===t&&-1!==i?1:-1!==t&&-1===i?-1:t-i}))},At.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore},At.prototype.registerPlaybackCore=function(e){var t;t=e.getPlaybackCoreName(),null==e||this.playbackCoreMap.some(function(e){return e.getPlaybackCoreName()===t})||(e.setMediaProxy(this.facade.retrieveProxy(bt.NAME)),this.playbackCoreMap.push(e))},At.prototype.retrievePlaybackCore=function(e){var t,i,n,o;for(o=this.playbackCoreMap,i=0,n=o.length;n>i;i++)if(t=o[i],t.getPlaybackCoreName()===e)return t},At.prototype.removePlaybackCore=function(e){var t,i;return t=this.retrievePlaybackCore(e),null==t?null:(i=this.playbackCoreMap.indexOf(t),this.playbackCoreMap.splice(i,1),t)},At.prototype.setPlaybackCore=function(e){var t,i,n,o,a,r;for(r=this.playbackCoreMap,o=0,a=r.length;a>o;o++)if(t=r[o],t.canPlayTemporalType(e.temporalType)===!0&&""!==t.canPlayType(e.type)){i=t;break}return n=this.facade.retrieveProxy(Me.NAME),n!==i&&(this.facade.removeProxy(Me.NAME),this.facade.registerProxy(i),i.setData(n.getData())),this.activePlaybackCore=i,e},At.prototype.canPlayType=function(e){var t,i,n,o,a;for(a=this.playbackCoreMap,n=0,o=a.length;o>n;n++)if(i=a[n],t=i.canPlayType(e),""!==t)return t;return""},At.prototype.getContextData=function(){var e,t,i,n;return e=this.facade.retrieveProxy(yt.NAME),n=this.facade.retrieveProxy(Me.NAME),i=this.facade.retrieveProxy(bt.NAME),t=this.facade.getViewComponent(),{width:t.offsetWidth,height:t.offsetHeight,mode:"html5",autoplay:e.getAutoplay(),domain:e.getDomain(),name:e.getName(),currentTime:n.getCurrentTime(),duration:n.getDuration(),version:e.getVersion(),timecode:{duration:Dt.formatTimecode(i.getDuration()),currentTime:Dt.formatTimecode(n.getCurrentTime())}}},i(bt,He),bt.NAME="MediaProxy",bt.prototype.contextName="media",bt.prototype.data=null,bt.prototype.value=null,bt.prototype.started=!1,bt.prototype.authorized=!0,bt.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory(),scenes:this.getScenes()}},bt.prototype.setData=function(e){var t;return this.value=e,this.started=!1,this.data.autoplay=e.autoplay,this.data.type=e.type,this.setIsLive(e.isLive),this.setTemporalType(e.temporalType||"vod"),null!=e.source&&this.setSource(e.source),null!=e.src&&this.setSrc(e.src),this.data.title=e.title,null!=e.duration&&this.setDuration(e.duration),this.data.poster=e.poster,this.data.guid=e.guid,this.data.link=e.link,this.data.embed=e.embed,this.data.width=e.width,this.data.height=e.height,this.data.category=e.category,this.data.startTime=e.startTime,this.data.description=e.description,this.data.status=e.status||{},"blocked"===(null!=(t=this.data.status)?t.state:void 0)&&(this.authorized=!1),this.data.category=e.category,this.data.metadata=e.metadata||{},this.setMedium(e.medium),this.setPubDate(e.pubDate),this.setTrack(e.track),this.setScenes(e.scenes),this.setKeys(e.keys),e},bt.prototype.updateData=function(e){var t,i;for(t in e)i=e[t],t in this.data&&(this.data[t]=i)},bt.prototype.getGUID=function(){return this.data.guid},bt.prototype.setGUID=function(e){return this.data.guid=e},bt.prototype.getLink=function(){return this.data.link},bt.prototype.setLint=function(e){return this.data.link=e},bt.prototype.getStartTime=function(){return this.data.startTime||0},bt.prototype.getEmbed=function(){return this.data.embed},bt.prototype.setEmbed=function(e){return this.data.embed=e},bt.prototype.getAutoplay=function(){return this.data.autoplay},bt.prototype.setAutoplay=function(e){return this.data.autoplay=e},bt.prototype.getPubDate=function(){return this.data.pubDate},bt.prototype.setPubDate=function(e){return this.data.pubDate=e},bt.prototype.getCategory=function(){return this.data.category},bt.prototype.setCategory=function(e){return this.data.category=e},bt.prototype.getSrc=function(){return this.data.src},bt.prototype.setSrc=function(e){return this.data.src=e,null!=this.data.src&&null==this.data.type?this.setType(Dt.getMimeType(this.data.src)):void 0},bt.prototype.getType=function(){return this.data.type},bt.prototype.setType=function(e){var t;return this.data.type=e,t=/audio/.test(this.data.type)?"audio":"video",this.setMedium(t)},bt.prototype.getMedium=function(){return this.data.medium},bt.prototype.setMedium=function(e){return e!==this.data.medium?(this.data.medium=e,this.facade.retrieveProxy(mt.NAME).setMedium(e)):void 0},bt.prototype.getMetadata=function(){return this.data.metadata},bt.prototype.setMetadata=function(e){return this.data.metadata=e},bt.prototype.getSource=function(){return this.data.source},bt.prototype.setSource=function(e){var t,i;if(!(null==e||e.length<1)){if(this.data.source=e,i=this.facade.retrieveProxy(At.NAME)||this.facade,null!=i&&(t=Dt.selectSource(e,function(e){return i.canPlayType(e)})),null!=(null!=t?t.src:void 0)&&""!==t.src)return this.setSrc(t.src),this.setType(t.type);throw new Error("No valid source could be found")}},bt.prototype.getTrack=function(){return this.data.track},bt.prototype.setTrack=function(e){return this.data.track=e},bt.prototype.getTitle=function(){return this.data.title},bt.prototype.setTitle=function(e){return this.data.title=e},bt.prototype.getWidth=function(){return this.data.width},bt.prototype.setWidth=function(e){return this.data.width=e},bt.prototype.getHeight=function(){return this.data.height},bt.prototype.setHeight=function(e){return this.data.height=e},bt.prototype.getDescription=function(){return this.data.description},bt.prototype.setDescription=function(e){return this.data.description=e},bt.prototype.getCategory=function(){return this.data.category},bt.prototype.setCategory=function(e){return this.data.category=e},bt.prototype.getDuration=function(e){return this.data.duration},bt.prototype.setDuration=function(e){var t;if(0!==e&&"live"!==this.value.temporalType&&(t=navigator.userAgent,1!==e||!/Android/.test(t)||/Android.*Chrome/.test(t)))return e!==this.data.duration&&(this.data.duration=e,this.sendNotification(xo.DURATION_CHANGE,e)),e===1/0&&this.setTemporalType("live"),e},bt.prototype.getPoster=function(e){return this.data.poster},bt.prototype.setPoster=function(e){return this.data.poster=e,e},bt.prototype.getIsLive=function(){return this.data.isLive},bt.prototype.setIsLive=function(e){var t;if(e!==this.data.isLive)return t=this.data.isLive,this.data.isLive=e,this.sendNotification(xo.IS_LIVE,e),e},bt.prototype.getTemporalType=function(){return this.data.temporalType||"vod"},bt.prototype.setTemporalType=function(e){var t;e!==this.data.temporalType&&(t=this.data.temporalType,this.data.temporalType=e,this.sendNotification(xo.TEMPORAL_TYPE_CHANGE,{previous:t,value:e}),this.setIsLive("live"===this.data.temporalType||"dvr"===this.data.temporalType))},bt.prototype.getScenes=function(){return this.data.scenes},bt.prototype.setScenes=function(e){var t,i,n,o,a;if(null!=e){for(t=o=0,a=e.length;a>o;t=++o)i=e[t],i.start=isNaN(n=Dt.flattenTimecode(i.sceneStartTime))?0:n,i.end=isNaN(n=Dt.flattenTimecode(i.sceneEndTime))?0:n,i.title=i.sceneTitle||"",i.description=i.sceneDescription||"",i.position=t+1;this.data.scenes=e}},bt.prototype.getScene=function(e){var t,i,n,o,a;if(null!=this.data.scenes)for(a=this.data.scenes,t=n=0,o=a.length;o>n;t=++n)if(i=a[t],i.start<=e&&e<i.end)return i},bt.prototype.setKeys=function(e){this.data.keys=e},bt.prototype.getKeys=function(){return this.data.keys},i(Ct,bt),Ct.NAME="MediaProxy",Ct.prototype.setSource=function(e){return null==e||e.length<1?void 0:(e=e.filter(function(e){return"external"===e.type}),Ct.__super__.setSource.call(this,e))},i(Nt,le),Nt.prototype.playerType="external",Nt.prototype.createModel=function(){var e;this.bindings=new ft,this.registerProxy(this.bindings),this.registerProxy(new at(this.config)),this.appState=new mt,this.registerProxy(this.appState),e=new Fe,this.registerProxy(e),this.playerCore=new At(e),this.registerProxy(this.playerCore),this.configuration=new yt(this.config),this.registerProxy(this.configuration),this.media=new Ct,this.registerProxy(this.media),
this.params=new gt(this.config.params),this.registerProxy(this.params),this.bindings.initialize()},Nt.prototype.createView=function(){var e,t,i=this;this.registerMediator(new _e("external",this.getViewComponent())),this.registerMediator(new nt),t=new Qe,this.registerMediator(t),_t.create(t.viewComponent,_t.CLICK,function(){return i.sendNotification(xo.TOGGLE_ACTIVE)}),this.registerMediator(new $e),this.registerMediator(new tt),e=new et,this.registerMediator(e),this.viewComponent.appendChild(e.getViewComponent())},Nt.prototype.createController=function(){Nt.__super__.createController.call(this),this.registerCommand(xo.UPDATE_DATA_BINDINGS,Xe),this.registerCommand(ko.TOGGLE_PLAY_PAUSE,st),this.registerCommand(xo.PLAY,st),this.registerCommand(xo.CHANGE_PLAY_STATE,je),this.registerCommand(xo.SET_MEDIA,ze),this.registerCommand(xo.CHANGE_MEDIA,Ke),this.registerCommand(xo.MEDIA_CHANGE,Je),this.registerCommand(xo.MEDIA_VALIDATED,C),this.registerCommand(xo.ERROR,We),this.registerCommand(Oo.PLUGINS_INITIALIZED,h),this.registerCommand(xo.READY,qe),this.registerCommand(xo.CHANGE_PARAMS,Ze)},Nt.prototype.createMediaElement=function(){return document.createElement("div")},Nt.prototype.evaluateBinding=function(e){var t;return null!=(t=this.retrieveProxy(ft.NAME))?t.evaluateBinding(e):void 0},Nt.prototype.canPlayType=function(e){return"maybe"},Nt.prototype.play=function(){this.sendNotification(xo.PLAY)},Nt.prototype.setParams=function(e){return this.sendNotification(xo.CHANGE_PARAMS,e),e},Nt.prototype.getParams=function(){return this.retrieveProxy(gt.NAME).getData()},Nt.prototype.setAutoplay=function(e){return!1},Nt.prototype.getAutoplay=function(){return!1},Nt.prototype.setLoop=function(e){return!1},Nt.prototype.getLoop=function(){return!1},Nt.prototype.setMuted=function(e){return!1},Nt.prototype.getMuted=function(){return!1},Nt.prototype.setMedia=function(e){return this.sendNotification(xo.SET_MEDIA,e),e},Nt.prototype.getMedia=function(e){var t;return null!=(t=this.retrieveProxy(bt.NAME))?t.getData():void 0},Nt.prototype.setCurrentTime=function(e){return 0},Nt.prototype.getCurrentTime=function(e){return 0},Nt.prototype.getDuration=function(e){return this.retrieveProxy(bt.NAME).getDuration()},Nt.prototype.setSrc=function(e){return this.sendNotification(xo.SET_MEDIA,{src:e}),e},Nt.prototype.getSrc=function(e){return this.retrieveProxy(bt.NAME).getSrc()},Nt.prototype.setSource=function(e){return this.sendNotification(xo.SET_MEDIA,{source:e}),e},Nt.prototype.getSource=function(){return this.retrieveProxy(bt.NAME).getSource()},Nt.prototype.setVolume=function(e){return e},Nt.prototype.getVolume=function(e){return 1},Nt.prototype.getSeeking=function(){return!1},Nt.prototype.getPaused=function(){return!1},Nt.prototype.getEnded=function(){return!1},It.prototype.title=null,It.prototype.link=null,It.prototype.description=null,It.prototype.category=null,It.prototype.pubDate=null,It.prototype.language=null,It.prototype.ttl=null,It.prototype.item=null,It.prototype.metadata=null,St.prototype.src=null,St.prototype.source=null,St.prototype.title=null,St.prototype.description=null,St.prototype.link=null,St.prototype.guid=null,St.prototype.pubDate=null,St.prototype.poster=null,St.prototype.thumbnail=null,St.prototype.embed=null,St.prototype.category=null,St.prototype.type=null,St.prototype.medium=null,St.prototype.duration=null,St.prototype.track=null,St.prototype.metadata=null,St.prototype.scenes=null,St.prototype.startTime=null;var Ho={AUTO:"auto",HTML:"html",FLASH:"flash",EXTERNAL:"external",NONE:"none",HTML_AUTO:"html-auto"};Tt.prototype.type=null,Tt.prototype.target=null,Tt.prototype.detail=null,wt.prototype.getFeed=function(e,t,i){return Dt.getJson(e,t,i)},wt.prototype.getMediaNode=function(e,t,i){var n,o,a,r;return null==i&&(i=!0),a="media-"+t,n=e["media-group"]||e,o=n["media-content"],null!=o&&null!=o[a]?r=o[a]:null!=n[a]?r=n[a]:null!=e[a]?r=e[a]:null!=e[t]&&i&&(r=e[t]),r},wt.prototype.createEmbed=function(e){var t,i,n,o,a,r;try{if(t=this.getMediaNode(e,"embed"),null==t)return i;for(i={},i.url=t["@attributes"].url,i.width=t["@attributes"].width,i.height=t["@attributes"].height,i.params={},t["media-param"]instanceof Array||(t["media-param"]=[t["media-param"]]),r=t["media-param"],o=0,a=r.length;a>o;o++)n=r[o],i.params[n["@attributes"].name]=n["#text"]}catch(s){Pt.error("[AMP Feed Parse Error] embed parse error: "+s.message,s)}return i},wt.prototype.createFeed=function(e){var t,i,n,o,a,r,s,l,d;try{if(t=e.channel,i=new It,null!=t){for(i.title=t.title,i.description=t.description,i.language=t.language,i.category=t.category,i.pubDate=new Date(Date.parse(t.pubDate)),i.ttl=t.ttl,o=t.item instanceof Array?t.item:[t.item],l=0,d=o.length;d>l;l++)n=o[l],r=this.createMedia(n),i.item.push(r);for(a in t)s=t[a],a in i||(i.metadata[a]=s)}}catch(c){Pt.error("[AMP Feed Parse Error] feed parse error: "+c.message,c)}return i},wt.prototype.createMedia=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_,E;try{if(s=new St,r=this.getMediaNode(e,"content"),r instanceof Array)for(s.source=[],p=0,f=r.length;f>p;p++)n=r[p],d={src:n["@attributes"].url,type:n["@attributes"].type},i=n["media-category"],null!=i&&(t=i["@attributes"],"http://mrss.akamai.com/user_agent_hint"===t.schema&&(a=t.label||i["#text"],null!=a&&""!==a&&(null==d.rules&&(d.rules=[]),d.rules.push(a)))),s.source.push(d),s.medium=n["@attributes"].medium,s.duration=parseFloat(n["@attributes"].duration);else s.type=r["@attributes"].type,s.src=r["@attributes"].url,s.medium=r["@attributes"].medium,s.duration=parseFloat(r["@attributes"].duration);if(s.guid=e.guid,s.title=this.getMediaNode(e,"title"),s.link=e.link,s.description=this.getMediaNode(e,"description"),s.pubDate=new Date(Date.parse(e.pubDate)),s.thumbnail=s.poster=null!=(v=this.getMediaNode(e,"thumbnail"))&&null!=(_=v["@attributes"])?_.url:void 0,s.embed=this.createEmbed(e),s.scenes=null!=(E=this.getMediaNode(e,"scenes"))?E["media-scene"]:void 0,l=this.getMediaNode(e,"status",!1),null!=l&&(s.status={state:l["@attributes"].state,reason:l["@attributes"].reason}),s.category=e.category,s.category instanceof Array||(s.category=[s.category]),l=this.getMediaNode(e,"category",!1),null!=l)for(h=0,m=l.length;m>h;h++)i=l[h],null!=i["#text"]&&""!==i["#text"]&&s.category.push(i["#text"]);if(null!=s.category&&s.category.sort(function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e>t?1:t>e?-1:0}),l=this.getMediaNode(e,"subTitle"),null!=l)for(null==s.track&&(s.track=[]),l instanceof Array||(l=[l]),g=0,y=l.length;y>g;g++)c=l[g],null!=c["@attributes"]&&s.track.push({src:c["@attributes"].href,type:c["@attributes"].type,kind:"captioning",srclang:c["@attributes"].lang||"en"});i=e.category,i instanceof Array||(i=[i]),s.isLive="live"===e.temporalType||null!=i&&-1!==i.join(",").indexOf("live_stream"),s.temporalType=s.isLive?"live":"vod";for(o in e)u=e[o],o in s||(s.metadata[o]=u)}catch(A){Pt.error("[AMP Feed Parse Error] media parse error: "+A.message,A)}return s},Pt.enabled=!1,Pt.enable=function(e){return null==e&&(e=/debug\=true/.test(location.search.toLowerCase())),this.enabled=e,this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){}),e},Pt.log=function(){try{arguments.length>1&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(e){}},Pt.trace=function(){try{console.trace.apply(console,arguments)}catch(e){}},Pt.debug=function(){try{console.log.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},Pt.info=function(){try{console.info.apply(console,arguments)}catch(e){}},Pt.warn=function(){try{console.warn.apply(console,arguments)}catch(e){}},Pt.error=function(){try{console.error.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},Pt.fatal=function(){try{console.fatal.apply(console,arguments)}catch(e){}},i(Mt,l),Mt.prototype.xhr=null,Mt.prototype.headers=null,Mt.prototype.response=null,Mt.prototype.responseXML=null,Mt.prototype.responseText=null,Mt.prototype.responseType=null,Mt.prototype.withCredentials=!1,Mt.prototype.readyState=0,Mt.prototype.status=null,Mt.prototype.open=function(e,t){var i,n,o=this;try{n=new XMLHttpRequest}catch(a){n=new window.ActiveXObject("Microsoft.XMLHTTP")}if(Mt.isCORS(t))if(Object.prototype.hasOwnProperty.call(n,"withCredentials"))try{n.withCredentials=this.withCredentials}catch(a){Pt.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",a)}else"undefined"!=typeof XDomainRequest&&(i=!0,n=new XDomainRequest);if(null!=n){i&&(n.onprogress=function(){},n.ontimeout=function(){},n.onerror=function(){},n.onload=function(e){"function"==typeof n.onreadystatechange&&(n.readyState=4,n.status=200,n.contentType.match(/\/xml/)&&(n.responseXML=new ActiveXObject("Microsoft.XMLDOM"),n.responseXML.async=!1,n.responseXML.loadXML(n.responseText)),n.onreadystatechange.call(n,e,!1))}),n.onreadystatechange=function(e){var t,i;if(o.readyState=n.readyState,o.dispatchEvent(new Tt("readystatechange",n)),4===n.readyState)if(o.status=n.status,199<(t=o.status)&&400>t||0===o.status){if(null==n.responseText&&(n.responseText=n.text),o.responseText=n.responseText,null!=n.responseXML&&(null!=(i=n.responseXML.childNodes)?i.length:void 0)>0)o.response=o.responseXML=n.responseXML,o.responseType="document";else try{o.response=JSON.parse(n.responseText),o.responseType="json"}catch(a){o.response=n.responseText,o.responseType="text"}o.dispatchEvent(new Tt("load",o))}else 0!==o.status&&o.dispatchEvent(new Tt("error",o))};try{"undefined"!=typeof n.onerror&&(n.onerror=function(e){o.dispatchEvent(new Tt("error",o))})}catch(a){}n.open(e,t)}this.xhr=n},Mt.prototype.send=function(e){var t,i,n,o=this;if(null!=this.headers){n=this.headers;for(t in n)i=n[t],null!=t&&null!=i&&this.xhr.setRequestHeader(t,i)}setTimeout(function(){o.xhr.send(e)},0)},Mt.prototype.setRequestHeader=function(e,t){null!=e&&null!=t&&(null==this.headers&&(this.headers={}),this.headers[e]=t)},Mt.prototype.setRequestHeaders=function(e){return this.headers=e,e},Mt.prototype.getResponseHeader=function(e){var t;return null!=(t=this.xhr)&&"function"==typeof t.getResponseHeader?t.getResponseHeader(e):void 0},Mt.prototype.getAllResponseHeaders=function(){var e;return null!=(e=this.xhr)&&"function"==typeof e.getAllResponseHeaders?e.getAllResponseHeaders():void 0},Mt.isCORS=function(e){var t,i,n,o;return i=document.createElement("a"),i.href=e,t=""!==i.hostname?i.hostname:location.hostname,n="0"!==i.port?i.port:location.port,o=":"!==i.protocol?i.protocol:location.protocol,location.protocol!==o||location.hostname!==t||location.port!==n&&!(""===location.port&&"80"===n)},Dt.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC",Dt.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",smilxml:"application/smil+xml",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",swf:"application/x-shockwave-flash",vtt:"text/vtt",ttml:"application/ttml+xml",srt:"application/x-subrip",cea608:"text/cea-608",cea708:"text/cea-708"},Dt.flashTypes=[Dt.mimeTypes.mp4,Dt.mimeTypes.flv,Dt.mimeTypes.f4m,Dt.mimeTypes.smil,Dt.mimeTypes.smilxml],Dt.rules={flashTablets:{label:"Android 2 & 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}},Dt.getPlaybackMode=function(e){var t,i,n,o;null==e&&(e=(null!=(o=a["amp-mode"])?o.toLowerCase():void 0)||Ho.AUTO),i=!1;for(t in Ho)if(n=Ho[t],n===e){i=!0;break}return i||(e=Ho.AUTO),e===Ho.HTML_AUTO&&(e=this.isHTMLFirst()?Ho.HTML:Ho.AUTO),e!==Ho.AUTO?(e!==Ho.FLASH||this.hasFlash()||(e=Ho.NONE),e):(this.hasFlash()||(e=this.supportsHTML5Video()?Ho.HTML:Ho.NONE),e===Ho.AUTO&&(e=this.isHTML5()?Ho.HTML:Ho.FLASH),e)},Dt.getIEVersion=function(){var e,t,i;return t=-1,i=navigator.userAgent,"Microsoft Internet Explorer"===navigator.appName?e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"===navigator.appName?e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"):/Edge\/[0-9\.]+$/.test(i)&&(e=/Edge\/([0-9\.]+)/),null!=(null!=e?e.exec(i):void 0)&&(t=parseFloat(RegExp.$1)),t},Dt.getFFVersion=function(){var e,t;return e=-1,t=navigator.userAgent,/Firefox\/([0-9\.]+)$/.exec(t)&&(e=parseFloat(RegExp.$1)),e},Dt.getSafariVersion=function(){var e,t;return e=-1,t=navigator.userAgent,/Safari\/[0-9\.]+$/.test(t)&&null!=/Version\/([0-9])/.exec(t)&&(e=parseFloat(RegExp.$1)),e},Dt.isChrome=function(){return/Chrom(e|ium)/.test(navigator.userAgent)},Dt.isHTMLFirst=function(){return null!=window.MediaSource},Dt.mergeRules=function(e){var t,i,n;n=[];for(t in e)i=e[t],n.push(Dt.rules[t]=i);return n},Dt.checkRules=function(e){var t,i,n,o,a;if(null!=e&&e.length>0)for(o=0,a=e.length;a>o;o++)if(t=e[o],(n=Dt.rules[t])&&(i=new RegExp(n.regexp),i.test(navigator.userAgent)))return!0;return!1},Dt.selectSource=function(e,t){var i,n,o,a,r;for(n=0,a=e.length;a>n;n++)if(i=e[n],Dt.checkRules(i.rules))return i;for(o=0,r=e.length;r>o;o++)if(i=e[o],""!==t(i.type||Dt.getMimeType(i.src)))return i;return null},Dt.getMimeType=function(e){return this.mimeTypes[Dt.getFileExtension(e)]},Dt.selectTrack=function(e,t){var i,n,o,a;for(o=0,a=e.length;a>o;o++)if(i=e[o],i.kind===t){n=i;break}return n},Dt.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)},Dt.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)},Dt.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)},Dt.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)},Dt.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)},Dt.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)},Dt.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)},Dt.supportsHTML5Video=function(){var e;return e=document.createElement("video"),null!=e.canPlayType},Dt.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()},Dt.isIOS=function(){var e,t;return e=/iPad|iPhone|iPod/i,t=e.test(navigator.platform)||e.test(navigator.userAgent)},Dt.getIOSversion=function(){var e;return/iP(hone|od|ad)/.test(navigator.platform)?(e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]):void 0},Dt.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")},Dt.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()},Dt.getDevice=function(){var e;return e="desktop",this.isIPhone()?e="iphone":this.isIPad()?e="ipad":/Android/.test(navigator.userAgent)?e="android":this.isKindleFireHD()?e="kindlefirehd":this.isKindleFire()&&(e="kindlefire"),e},Dt.xmlToJson=function(e){var t,i,n,o,a,r,s,l,d,c,u,p;if(r={},9===e.nodeType&&(e=e.firstChild),1===e.nodeType){if(e.attributes.length>0)for(r["@attributes"]={},u=e.attributes,o=s=0,d=u.length;d>s;o=++s)t=u[o],r["@attributes"][t.nodeName]=t.nodeValue}else(3===e.nodeType||4===e.nodeType)&&(r=e.nodeValue);if(e.hasChildNodes())for(p=e.childNodes,o=l=0,c=p.length;c>l;o=++l)i=p[o],(3!==i.nodeType||/\S/.test(i.nodeValue))&&(a=i.nodeName.replace(/:/,"-"),n=this.xmlToJson(i),null==n["@attributes"]&&null!=n["#text"]&&(n=n["#text"]),null==r[a]?r[a]=n:(r[a]instanceof Array||(r[a]=[r[a]]),r[a].push(n)));return r},Dt.getXHR=function(){return new Mt},Dt.get=function(e,t,i){var n;return null==t&&(t={}),null==i&&(i=null),n=Dt.getXHR(),null!=t&&(null!=t.withCredentials&&(n.withCredentials=t.withCredentials),null!=t.onload&&(n.onload=t.onload),null!=t.onerror&&(n.onerror=t.onerror)),n.open("GET",e),null!=i&&n.setRequestHeaders(i),n.send(),n},Dt.getUTC=function(e,t){var i;if("function"==typeof e)try{i={onload:function(t){e(1e3*parseInt(t.target.responseText))},onerror:t},this.get("http://time.akamai.com",i)}catch(n){t(n)}},Dt.send=function(e,t,i,n){var o;return null==i&&(i={}),null==n&&(n={"Content-Type":"String"}),o=Dt.getXHR(),null!=i.onload&&(o.onload=i.onload),null!=i.onerror&&(o.onerror=i.onerror),o.open("POST",e),null!=n&&o.setRequestHeaders(n),o.send(t),o},Dt.loadScript=function(e,t,i,n){var o,a;return o=i||document.getElementsByTagName("head")[0],a=document.createElement("script"),a.type="text/javascript",null!=t&&(a.addEventListener?(a.onload=t,null!=n&&(a.onerror=n)):a.readyState&&(a.onreadystatechange=function(e){("loaded"===this.readyState||"complete"===this.readyState)&&(this.onreadystatechange=null,t())})),a.src=e,o.appendChild(a),a},Dt.loadStyleSheet=function(e){var t,i;return t=document.getElementsByTagName("head")[0],i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=e,t.appendChild(i)},Dt.read=function(e,t,i,n){var o,a;null==t&&(t={}),null==i&&(i=""),null==n&&(n=[]);try{return a=this.get(e,t,n),o=a.responseText||a.text,i===Dt.mimeTypes.json?JSON.parse(o):i===Dt.mimeTypes.xml&&null!=a.responseXML?a.responseXML:o}catch(r){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error("Read Error: ",r),null}},Dt.getFileExtension=function(e){return e.split(".").pop().replace(/\?.*/,"")},Dt.getResponseHeader=function(e,t,i){var n;return null==i&&(i={}),n=Dt.getXHR(),null!=i.onerror&&(n.onerror=i.onerror),n.open("HEAD",e,!1),n.send(),n.getResponseHeader(t)},Dt.getResponseHeaders=function(e,t,i){var n,o,a,r,s;if(null==i&&(i={}),a=Dt.getXHR(),null!=i.onerror&&(a.onerror=i.onerror),a.open("HEAD",e,!1),a.send(),o={},null==t)return a.getAllResponseHeaders();for(r=0,s=t.length;s>r;r++)n=t[r],o[n]=a.getResponseHeader(n);return o},Dt.isTouch=null,Dt.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(e){this.isTouch=!1}return this.isTouch},Dt.clamp=function(e,t,i){return t>e&&(e=t),e>i&&(e=i),e},Dt.beacon=function(e){var t;return t=document.getElementById("beaconId"),null==t&&(t=document.createElement("img"),t.setAttribute("id","beaconId"),t.setAttribute("height",0),t.setAttribute("width",0),document.body.appendChild(t),t.style.display="none"),t.setAttribute("src",e),t},Dt.getElementOffset=function(e,t){var i,n,o,a,r,s;for(null==t&&(t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullscreenElement),n=0,r=0,s=e.offsetWidth,i=e.offsetHeight;e&&e!==t;)"BODY"===e.tagName?(o=e.scrollLeft||document.documentElement.scrollLeft,a=e.scrollTop||document.documentElement.scrollTop,n+=e.offsetLeft-o+e.clientLeft,r+=e.offsetTop-a+e.clientTop):(n+=e.offsetLeft-e.scrollLeft+e.clientLeft,r+=e.offsetTop-e.scrollTop+e.clientTop),e=e.offsetParent;return{left:n,top:r,width:s,height:i}},Dt.override=function(e,t,i){var n,o;if(null==i&&(i=!0),null==e)return t;if(null==t)return e;i===!0&&(e=Dt.clone(e),t=Dt.clone(t));for(n in t)o=t[n],"object"==typeof o&&null!==o?(null==e[n]&&(e[n]=o instanceof Array?[]:{}),e[n]=Dt.override(e[n],o,!1)):e[n]=o;return e},Dt.clone=function(e,t){var i,n,o,a,r,s,l,d;if(null==t&&(t=!0),null==e)return e;if("object"!=typeof e)i=e;else{i=e instanceof Array?[]:{};for(a in e)if(s=e[a],"object"==typeof s&&null!==s&&t===!0)if(s instanceof Array)for(i[a]=[],l=0,d=s.length;d>l;l++)n=s[l],i[a].push(this.clone(n));else{i[a]={};for(o in s)r=s[o],i[a][o]=this.clone(r)}else i[a]=s}return i},Dt.formatTimecode=function(e,t){var i;return e=parseInt(e),isNaN(e)?"00:00":(i=Dt.formatZeroFill(e%60),e=parseInt(e/60),i=Dt.formatZeroFill(e%60)+":"+i,e=parseInt(e/60),e>0&&(i=Dt.formatZeroFill(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i)},Dt.formatZeroFill=function(e){var t;return t=e.toString(),10>e&&(t="0"+t),t},Dt.flattenTimecode=function(e,t){var i,n,o,a;if(null==t&&(t=30),null==e||""===e)return NaN;for(o=e.split(":"),i=0,4===o.length?i=parseInt(o.pop())/t:3===o.length&&(o[2]=o[2].replace(",","."),-1!==o[2].indexOf(".")&&(n=o[2].split(".")),(null!=n?n.length:void 0)>1&&(o[2]=n[0],i=parseInt(n[1])/1e3)),a=parseInt(o.pop());o.length>0;)a+=Math.pow(60,o.length)*parseInt(o.shift());return a+i},Dt.cacheBust=function(e,t,i){var n;return null==t&&(t="cacheBust"),null==i&&(i=Date.now()),n=-1===e.indexOf("?")?"?":"&",e+n+t+"="+i},Dt.formatStyleName=function(e){return e.replace(/([A-Z])/,"-$1").toLowerCase()},Dt.trim=function(e){var t;return t=e.replace(/^\s*(.*)/,"$1"),t.replace(/(.*)\s*$/,"$1")},Dt.getJson=function(e,t,i){var n;return n=Dt.getXHR(),n.open("GET",e),n.onload=function(e){var i;i="document"===n.responseType?Dt.xmlToJson(n.responseXML):n.response,"function"==typeof t&&t(i)},n.onerror=function(e){"function"==typeof i&&i(e)},n.send(),n},Dt.getSource=function(e,t,i){var n,o;o=Dt.getPlaybackMode(),n=function(e){var i,n,a,r;n=new wt,e=n.createFeed(e),(null!=e&&null!=(r=e.item)?r.length:void 0)>0&&(i=function(e){return"flash"===o&&-1!==Dt.flashTypes.indexOf(e)||"html"===o&&-1===Dt.flashTypes.indexOf(e)?"maybe":""},a=Dt.selectSource(e.item[0].source,i)),"function"==typeof t&&t(a)},Dt.getJson(e,n,i)},Dt.trackMouse=function(){try{null!=document.addEventListener?document.addEventListener("mousemove",this.mouseTracker):null!=document.attachEvent&&document.attachEvent("mousemove",this.mouseTracker)}catch(e){}},Dt.clientX=0,Dt.clientY=0,Dt.pageX=0,Dt.pageY=0,Dt.mouseTracker=function(e){Dt.clientX=e.clientX,Dt.clientY=e.clientY,Dt.pageX=e.pageX,Dt.pageY=e.pageY},Dt.isMouseOverElement=function(e){var t;if(t=!1,null==e)return t;try{t=e.contains(document.elementFromPoint(Dt.clientX,Dt.clientY))}catch(i){t=!1}return t},Dt.trackMouse(),Dt.getActualSize=function(e,t){var i,n,o;return null==t&&(t=!0),o=e.offsetWidth,i=e.offsetHeight,t===!0&&(n=getComputedStyle(e),o+=parseInt(n.marginLeft)+parseInt(n.marginRight),i+=parseInt(n.marginTop)+parseInt(n.marginBottom)),{width:o,height:i}},Dt.isVolumeSettable=function(){var e,t;return t=navigator.userAgent.toLowerCase(),e=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(t),null!=e?"android"===e[0]&&/Firefox/.test(t)?!0:!1:!0},i(xt,l),xt.UNINITIALIZED=0,xt.LOADING=1,xt.LOADED=2,xt.parseModule=function(e){var t,i,n,o,a,r,s,l,d;for(s={},o=0,i=e.childNodes,n=i.length,a=0,r=null,t=null,l=0,d=i.length;d>l;l++)r=i[l],1===(null!=r?r.nodeType:void 0)&&(s[r.nodeName]=this.parseItem(r));return s},xt.parseItem=function(e){var t,i,n,o,a,r;if(n=(""+e.getAttribute("type")).toLowerCase(),o=e.textContent||e.text||e.innerText,"object"!==n&&"array"!==n&&/#\{.*\}/.test(o))return o;switch(n){case"object":o=this.parseModule(e);break;case"array":for(o=[],i=e.childNodes,a=0,r=i.length;r>a;a++)t=i[a],1===t.nodeType&&o.push(this.parseItem(t));break;case"boolean":o="true"===o.toLowerCase();break;case"number":o=parseFloat(o)}return o},xt.prototype.url=null,xt.prototype.data=null,xt.prototype.xml=null,xt.prototype.readyState=xt.UNINITIALIZED,xt.prototype.loaded=!1,xt.prototype.flash={PlaybackMetricsPlugin:{src:"#{paths.resources}plugins/PlaybackMetricsPlugin.swf",blocking:!1,host:"akamai",main:"PlaybackMetricsPlugin"},SubclipMonitorPlugin:{src:"#{paths.resources}plugins/SubclipMonitorPlugin.swf",blocking:!1,host:"akamai",main:"SubclipMonitorPlugin"},NetSessionClientPlugin:{src:"#{paths.resources}plugins/NetSessionClientPlugin.swf",blocking:!1,host:"akamai",main:"NetSessionClientPlugin"}},xt.prototype.loadURL=function(e,t){var i,n=this;null==t&&(t=!1),this.url=e,this.setReadyState(xt.LOADING),i=Dt.get(e,{withCredentials:t,onload:function(e){var t,i,o;o=e.detail,"document"===o.responseType?(n.xml=o.responseXML,i=7!==n.xml.firstChild.nodeType?n.xml.firstChild:n.xml.childNodes[1],t=xt.parseModule(i)):(t=o.response,"string"==typeof t&&(t=JSON.parse(t))),n.loadData(t)},onerror:function(e){n.dispatchEvent(new Tt("error",e)),Pt.error(e)}})},xt.prototype.loadData=function(e){ht.defaults=e,this.setReadyState(xt.LOADED)},xt.prototype.load=function(e,t){switch(null==t&&(t=!1),typeof e){case"object":this.loadData(e);break;case"string":this.loadURL(e,t);break;default:throw new Error("[AMP ERROR] Invalid default configuration resource")}},xt.prototype.setReadyState=function(e){this.readyState=e,this.dispatchEvent(new Tt("readystatechange",e)),e!==xt.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new Tt("load",this.data)))},i(kt,q),kt.prototype.componentType="button",kt.prototype.icon=null,kt.prototype.label=null,kt.prototype.onclick=null,kt.prototype.labelText=null,kt.prototype.onRegister=function(){kt.__super__.onRegister.call(this),this.icon=this.create("icon"),this.createLabel(this.labelText)},kt.prototype.createLabel=function(e){null!=e&&(this.label=this.createText("label",e))},kt.prototype.setLabel=function(e){return null==this.label?this.createLabel(e):this.label.textContent=e,e},kt.prototype.getLabel=function(){var e;return null!=(e=this.label)?e.textContent:void 0},i(Lt,l),Lt.prototype.events=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"],Lt.prototype.resetHandler=null,Lt.prototype.element=null,Lt.prototype.timeout=null,Lt.prototype.active=!0,Lt.prototype.timeoutId=null,Lt.prototype.applyListeners=function(e){var t,i,n,o;for(null==e&&(e="add"),o=this.events,i=0,n=o.length;n>i;i++)t=o[i],this.element[""+e+"EventListener"](t,this.resetHandler)},Lt.prototype.start=function(e){null!=e&&(this.timeout=e),this.stop(),this.applyListeners("add"),this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)},Lt.prototype.stop=function(){this.applyListeners("remove"),clearTimeout(this.timeoutId)},Lt.prototype.reset=function(){this.setActive(!0),this.start()},Lt.prototype.setActive=function(e){return e!==this.active?(this.active=e,this.dispatchEvent(new Tt("activechange",{active:this.active})),e):void 0},Lt.prototype.getActive=function(){return this.active},i(Rt,q),Rt.prototype.componentName="logo",Rt.prototype.url=null,Rt.prototype.onRegister=function(){Rt.__super__.onRegister.call(this),this.sendNotification(xo.ADD_CONTROL_STATE,this.componentName+"-enabled")},Rt.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(xo.DISPATCH_EVENT,new Tt("controlsLogoClicked")),!1},i(Ot,puremvc.Mediator),Ot.NAME="PluginWrapper",Ot.prototype.player=null,Ot.prototype.config=null,Ot.prototype.dispatcher=null,Ot.prototype.flashPlugins=null,Ot.prototype.createFlashVars=null,Ot.prototype.createXML=null,Ot.prototype.createDefaults=function(){this.player.createDefaults.call(this)},Ot.prototype.addEventListener=function(e,t){this.dispatcher.addEventListener(e,t)},Ot.prototype.logEvent=function(e){},Ot.prototype.dispatchEvent=function(e){"timeupdate"!==e.type&&"timeremaining"!==e.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT] "+e.type,e),e.player=this.player,this.dispatcher.dispatchEvent(e)},Ot.prototype.removeEventListener=function(e,t){this.dispatcher.removeEventListener(e,t)},Ot.prototype.createElement=function(e,t,i){var n;return n=e.createElement("element"),n.setAttribute("id",t),null==i&&(i=this.getControls(e).controls),null!=i&&i.appendChild(n),n},Ot.prototype.createProperty=function(e,t,i,n){var o,a,r;if(o=e.createElement("property"),o.setAttribute("key",t),null!=n&&n.appendChild(o),null!=i)if("object"!=typeof i||i instanceof Array)a=re.createTextContent(e,i.toString()),o.appendChild(a);else for(t in i)r=i[t],this.createProperty(e,t,r,o);return o},Ot.prototype.listNotificationInterests=function(){return[Po.CREATE_FLASH_VARS,Po.CREATE_XML]},Ot.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Po.CREATE_FLASH_VARS:"function"==typeof this.createFlashVars&&this.createFlashVars(t.flashvars);break;case Po.CREATE_XML:"function"==typeof this.createXML&&this.createXML(t.xml)}},Ot.prototype.destroy=function(){},i(Vt,puremvc.SimpleCommand),Vt.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Wt.NAME),t.start()},i(Gt,puremvc.SimpleCommand),Gt.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Wt.NAME),t.stop()},i(Ut,puremvc.SimpleCommand),Ut.prototype.execute=function(e){var t,i,n;n=this.facade.retrieveProxy(Wt.NAME),t=this.facade.player.retrieveProxy(mt.NAME),i=e.getBody(),i.value===Bo.ACTIVE&&t.getPlayState()!==Vo.READY&&"desktop"!==Dt.getDevice()&&n.start()},i(Bt,Ce),Bt.prototype.execute=function(e){this.plugin.config["native"]===!0?this.player.getMediaElement().controls=!1:this.proxy.adBreakStart()},i(Ht,Ce),Ht.prototype.execute=function(e){this.plugin.config["native"]===!0?this.player.getMediaElement().controls=!0:this.proxy.adBreakEnd()},i(Ft,puremvc.SimpleCommand),Ft.prototype.execute=function(e){var t,i,n;i=e.getBody(),n=i.poster,t=this.facade.player.getMediaElement(),null!=n&&""!==n&&(t.poster=n),t.src=i.src,this.facade.player.getAutoplay()!==!0&&this.facade.applyClickHandler()},i(jt,puremvc.SimpleCommand),jt.prototype.execute=function(e){this.facade.applyClickHandler(!1)},i(zt,puremvc.SimpleCommand),zt.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Wt.NAME),t.start()},i(Yt,Ot),Yt.NAME="ControlsWrapper",Yt.prototype.mode="auto",Yt.prototype.autoHide=5,Yt.prototype.flashView={elements:{controls:{attributes:{height:"28",itemMargin:"5",scrubPosition:"inline"},elements:{replayBtn:{},playPauseBtn:{},streamTimeIndicator:{attributes:{exclude:"live"},elements:{streamTime:{},streamDuration:{}}},rewindBtn:{},scrubBar:{attributes:{style:"height: 18px;"}},progressBar:{attributes:{style:"background: linear-gradient(90deg, #FF0000, #1B1B1B);"}},loadedBar:{attributes:{style:"background: linear-gradient(90deg, #00FF00, #1B1B1B);"}},liveIndicator:{},timeLocationIndicator:{},goLiveBtn:{},statsBtn:{},volumeBar:{attributes:{color:"#CA2127"}},volumeBtn:{},fullscreenBtn:{}}}}},Yt.prototype.listNotificationInterests=function(){return Yt.__super__.listNotificationInterests.apply(this,arguments).concat([xo.MEDIUM_CHANGE])},Yt.prototype.handleNotification=function(e){var t,i,n;switch(Yt.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),n){case xo.MEDIUM_CHANGE:i=/audio/.test(t)?"persistent":this.mode,this.setMode(i)}},Yt.prototype.createFlashVars=function(e){return null!=this.config.mode&&(this.mode=e.controls_mode=this.config.mode),null!=this.config.admode&&this.config.admode!==this.config.mode&&(e.ads_auto_fit=!0),e},Yt.prototype.createXML=function(e){var t,i,n;return t=null!=(i=this.player.flashView)&&null!=(n=i.elements)?n.controls:void 0,null!=t?(null!=t.attributes.autoHideDelay?this.autoHide=t.attributes.autoHideDelay:null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,t.attributes.autoHideDelay=this.config.autoHide),e):void 0},Yt.prototype.getMode=function(){return this.mode},Yt.prototype.setMode=function(e){if(e!==this.mode){try{this.mode=e,this.player.mediaElement.setPlayerProperty("controlsMode",e);
}catch(t){this.facade.logger.error("[AMP CONTROLS ERROR]",t)}return e}},Yt.prototype.getAutoHide=function(){return this.autoHide},i(Wt,r),Wt.NAME=r.NAME,Wt.prototype.defaults={mode:"auto",autoHide:3,admode:null},Wt.prototype.timeout=null,Wt.prototype.appState=null,Wt.prototype.controls=null,Wt.prototype.interactiveElement=null,Wt.prototype.idleUtil=null,Wt.prototype.initializeNotifier=function(e){Wt.__super__.initializeNotifier.call(this,e),this.appState=this.facade.player.retrieveProxy(mt.NAME),this.controls=this.facade.retrieveMediator(mt.NAME)},Wt.prototype.onRegister=function(){var e=this;Wt.__super__.onRegister.call(this),null!=this.config.mode&&this.changeMode(this.config.mode),this.interactiveElement=this.facade.player.getContainer(),"desktop"===Dt.getDevice()?(_t.create(this.interactiveElement,"mouseenter",function(){e.stop(),e.appState.activeState!==Bo.ACTIVE&&e.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.ACTIVE)}),_t.create(this.interactiveElement,"mouseleave",function(){e.start()}),this.idleUtil=new Lt(this.facade.player.getViewComponent(),1e3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(t){var i;i=t.detail.active!==!0?Bo.INACTIVE:Bo.ACTIVE,e.sendNotification(xo.CHANGE_ACTIVE_STATE,i)}),this.idleUtil.start(),_t.create(this.facade.player.getMediaElement(),"click",function(){e.sendNotification(ko.TOGGLE_PLAY_PAUSE)})):_t.create(this.interactiveElement,_t.CLICK,function(){e.sendNotification(xo.TOGGLE_ACTIVE)})},Wt.prototype.setMode=function(e){return this.data.mode===e?e:(this.changeMode(e),e)},Wt.prototype.changeMode=function(e){"auto"===this.data.mode&&this.stop(),this.facade.sendNotification(xo.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode),this.data.mode=e,this.facade.sendNotification(xo.ADD_APPLICATION_STATE,"controls-"+this.data.mode)},Wt.prototype.getMode=function(){return this.data.mode},Wt.prototype.setAutoHide=function(e){return this.data.autoHide=e,e},Wt.prototype.getAutoHide=function(){return this.data.autoHide},Wt.prototype.adBreakStart=function(){null!=this.data.admode&&this.setMode(this.data.admode)},Wt.prototype.adBreakEnd=function(){null!=this.data.admode&&this.setMode(this.config.mode)},Wt.prototype.start=function(){this.stop(),"auto"===this.data.mode&&(this.timeout=setTimeout(this.hide.bind(this),1e3*this.data.autoHide))},Wt.prototype.stop=function(){clearTimeout(this.timeout),this.timeout=null},Wt.prototype.hide=function(){return"auto"===this.data.mode?this.appState.getIsUserActive()!==!0&&!Dt.isMouseOverElement(this.facade.viewComponent)||this.appState.getDisplayState()===Go.FULL_SCREEN?void this.facade.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.INACTIVE):void this.start():void 0},i(qt,kt),qt.prototype.componentName="full-screen",qt.prototype.onRegister=function(){qt.__super__.onRegister.call(this),this.sendNotification(xo.ADD_CONTROL_STATE,this.componentName+"-enabled")},qt.prototype.onclick=function(e){return e.stopImmediatePropagation(),this.sendNotification(xo.TOGGLE_FULL_SCREEN),!1},qt.prototype.listNotificationInterests=function(){return[xo.DISABLE_FULL_SCREEN,xo.ENABLE_FULL_SCREEN]},qt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case xo.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case xo.ENABLE_FULL_SCREEN:this.setDisabled(!1)}},i(Xt,q),Xt.prototype.componentType="slider",Xt.prototype.trackView=null,Xt.prototype.handleView=null,Xt.prototype.valueView=null,Xt.prototype.startCapView=null,Xt.prototype.endCapView=null,Xt.prototype.clickView=null,Xt.prototype.min=0,Xt.prototype.max=1,Xt.prototype.value=0,Xt.prototype.draggable=!1,Xt.prototype.dragging=!1,Xt.prototype.draggingInterval=null,Xt.prototype.draggingDelay=250,Xt.prototype.direction="vertical",Xt.prototype.pressHandler=null,Xt.prototype.releaseHandler=null,Xt.prototype.moveHandler=null,Xt.prototype.clickHandler=null,Xt.prototype.onRegister=function(){Xt.__super__.onRegister.call(this),this.startCapView=this.create("start-cap"),this.endCapView=this.create("end-cap"),this.trackView=this.create("track"),this.valueView=this.create("value",this.trackView),this.clickView=this.create("click",this.trackView),this.handleView=this.create("handle",this.trackView),this.pressHandler=_t.create(this.handleView,_t.PRESS,this.handlePressHandler.bind(this)),this.releaseHandler=_t.create(window,_t.RELEASE,this.handleReleaseHandler.bind(this)),this.releaseHandler.unbind(),this.moveHandler=_t.create(window,_t.MOVE,this.updateHandler.bind(this,this.draggable)),this.moveHandler.unbind(),this.clickHandler=_t.create(this.clickView,_t.CLICK,this.updateHandler.bind(this,!0))},Xt.prototype.setDirection=function(e){return this.direction=e,e},Xt.prototype.getDirection=function(){return this.direction},Xt.prototype.setValue=function(e){return this.updateValue(e),this.valueChanged(e),e},Xt.prototype.getValue=function(){return this.value},Xt.prototype.setDragging=function(e){return e!==this.dragging?(this.dragging=e,this.sendNotification(xo.IS_USER_ACTIVE,this.dragging),this.dragging===!0?this.draggingInterval=setInterval(this.dragUpdateHandler.bind(this),this.draggingDelay):(clearInterval(this.draggingInterval),this.dragUpdateHandler()),this.dragging):void 0},Xt.prototype.getDragging=function(){return this.dragging},Xt.prototype.setDraggable=function(e){return e!==this.draggable?(this.draggable=e,e):void 0},Xt.prototype.getDraggable=function(){return this.draggable},Xt.prototype.updateValue=function(e){var t;this.value=Dt.clamp(e,this.min,this.max),"vertical"===this.direction?(e="height",t="bottom"):(e="width",t="left"),this.valueView.style[e]=this.handleView.style[t]=""+100*this.value+"%"},Xt.prototype.calculateValue=function(e){var t,i;return t=Dt.getElementOffset(this.viewComponent),i="vertical"===this.getDirection()?1-(e.y-t.top)/t.height:(e.x-t.left)/t.width,Dt.clamp(i,0,1)},Xt.prototype.handlePressHandler=function(e){return this.moveHandler.bind(),this.releaseHandler.bind(),this.clickHandler.unbind(),this.setDragging(!0),e.stopImmediatePropagation(),!1},Xt.prototype.handleReleaseHandler=function(e){return this.moveHandler.unbind(),this.releaseHandler.unbind(),this.clickHandler.bind(),this.setDragging(!1),e.stopImmediatePropagation(),!1},Xt.prototype.updateHandler=function(e,t){var i,n;return t.stopImmediatePropagation(),i={x:t.clientX||t.targetTouches[0].clientX,y:t.clientY||t.targetTouches[0].clientY},n=this.calculateValue(i),e===!0?this.setValue(n):this.updateValue(n),!1},Xt.prototype.dragUpdateHandler=function(){this.setValue(this.value)},Xt.prototype.valueChanged=function(){};var Fo={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"};i(Zt,q),Zt.prototype.componentName="time-display",Zt.prototype.duration=null,Zt.prototype.currentTimeDisplay=null,Zt.prototype.separatorDisplay=null,Zt.prototype.durationDisplay=null,Zt.prototype.liveDisplay=null,Zt.prototype.onRegister=function(){Zt.__super__.onRegister.call(this),this.liveDisplay=this.createText("live-display",this.localizationManager.getString($.MSG_LIVE)),this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span"),this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString($.MSG_TIME_SEPARATOR),this,"span"),this.durationDisplay=this.createText("duration-display","00:00",this,"span")},Zt.prototype.listNotificationInterests=function(){return[xo.PLAY,xo.DURATION_CHANGE,xo.ENDED,xo.DISPLAY_TIME]},Zt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case xo.PLAY:this.updateDuration();break;case xo.DURATION_CHANGE:this.duration=t,this.updateCurrentTime(),this.updateDuration();break;case xo.ENDED:this.updateCurrentTime(this.duration),this.updateDuration();break;case xo.DISPLAY_TIME:this.updateCurrentTime(t.currentTime,t.duration),this.updateDuration(t.duration)}},Zt.prototype.updateCurrentTime=function(e,t){null==e&&(e=this.currentTime),null==t&&(t=this.duration),this.currentTimeDisplay.textContent=Dt.formatTimecode(e,t)},Zt.prototype.updateDuration=function(e){null==e&&(e=this.duration),this.durationDisplay.textContent=Dt.formatTimecode(e)},i(Jt,kt),Jt.prototype.componentName="go-live",Jt.prototype.onRegister=function(){Jt.__super__.onRegister.call(this),this.createLabel(this.localizationManager.getString("MSG_LIVE"))},Jt.prototype.listNotificationInterests=function(){return[xo.IS_LIVE]},Jt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case xo.IS_LIVE:this.setLabel(t===!0?this.localizationManager.getString("MSG_LIVE"):this.localizationManager.getString("MSG_GO_LIVE"))}},Jt.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),!1},i(Kt,q),Kt.prototype.componentName="panels",Kt.prototype.activePanel=null,Kt.prototype.panels=null,Kt.prototype.closeHandler=null,Kt.prototype.listNotificationInterests=function(){var e,t;return function(){var i;i=[];for(e in Fo)t=Fo[e],i.push(t);return i}().concat([])},Kt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Fo.ADD_PANEL:this.addPanel(t);break;case Fo.REMOVE_PANEL:this.removePanel(t);break;case Fo.OPEN_PANEL:this.openPanel(t);break;case Fo.CLOSE_PANEL:this.closePanel(t);break;case Fo.CLOSE_ALL_PANELS:this.closeAllPanels(t);break;case Fo.TOGGLE_PANEL:this.togglePanel(t)}},Kt.prototype.addPanel=function(e){this.panels.push(e),this.viewComponent.appendChild(e.getViewComponent())},Kt.prototype.removePanel=function(e){this.panels.splice(this.panels.indexOf(e),1),this.viewComponent.removeChild(e.getViewComponent())},Kt.prototype.openPanel=function(e){e!==this.activePanel&&null!=e&&(this.closeAllPanels(),this.activePanel=e,this.activePanel.classList.add("active"),"desktop"!==Dt.getDevice()&&this.sendNotification(xo.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))},Kt.prototype.closePanel=function(e){e.classList.remove("active"),null!=this.activePanel&&(this.activePanel=null,"desktop"!==Dt.getDevice()&&this.sendNotification(xo.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))},Kt.prototype.togglePanel=function(e){e===this.activePanel?this.closePanel(e):this.openPanel(e)},Kt.prototype.closeAllPanels=function(){var e,t,i,n;for(n=this.panels,t=0,i=n.length;i>t;t++)e=n[t],this.closePanel(e)},Kt.prototype.mouseupHandler=function(e){var t,i,n;i=document.elementFromPoint(e.clientX,e.clientY),n=this.activePanel.getViewComponent(),t=this.activePanel.control.getViewComponent(),i!==n&&n.contains(i)===!1&&i!==t&&t.contains(i)===!1&&this.closeAllPanels()},i(Qt,Xt),Qt.prototype.componentName="progress",Qt.prototype.bufferValue=null,Qt.prototype.scrubTime=null,Qt.prototype.scrubTimeSeparator=null,Qt.prototype.cuePoints=null,Qt.prototype.cues=null,Qt.prototype.duration=0,Qt.prototype.isLive=!1,Qt.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null},Qt.prototype.onRegister=function(){Qt.__super__.onRegister.call(this),this.bufferValue=this.create("buffer-value",!1),this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild),this.cuePoints=this.create("cue-points",this.trackView),this.scrubTimeSeparator=this.create("scrub-time-separator",this.trackView),this.scrubTime=this.create("scrub-time",this.trackView),this.thumbPreview=this.create("thumb-preview")},Qt.prototype.listNotificationInterests=function(){return[xo.ENDED,xo.MEDIA_CHANGE,xo.DURATION_CHANGE,xo.PROGRESS,xo.ADD_CUE_POINTS,xo.REMOVE_CUE_POINTS,xo.DISPLAY_TIME]},Qt.prototype.handleNotification=function(e){var t,i,n;switch(i=e.getName(),t=e.getBody(),i){case xo.MEDIA_CHANGE:this.isLive="live"===t.temporalType,this.updateValue(0),this.bufferValue.style.width="0%",this.updatePreview(t.metadata);break;case xo.PROGRESS:n=Dt.clamp(t/this.duration*100,0,100),this.bufferValue.style.width=n+"%";break;case xo.DURATION_CHANGE:this.duration=t,this.updateCuePoints();break;case xo.ENDED:this.updateValue(1);break;case xo.ADD_CUE_POINTS:this.cues=t,this.updateCuePoints();break;case xo.REMOVE_CUE_POINTS:this.removeCuePoints();break;case xo.DISPLAY_TIME:this.dragging===!1&&this.updateValue(t.currentTime/t.duration,t.duration)}},Qt.prototype.updateCuePoints=function(){var e,t,i,n,o,a,r;if(null!=this.cues&&0!==this.cues.length&&(null==(null!=(o=this.facade.player.config)&&null!=(a=o.controls)?a.displaySceneMarkers:void 0)||this.facade.player.config.controls.displaySceneMarkers!==!1))for(this.removeCuePoints(),r=this.cues,i=0,n=r.length;n>i;i++)e=r[i],0!==e&&-1!==e&&(t=this.create("cue-point",this.cuePoints),t.style.left=e/this.duration*100+"%")},Qt.prototype.updatePreview=function(e){var t,i=this;this.previewData.src=e.previewThumbnailSrc,this.previewData.previewHeight=e.previewThumbnailHeight,this.previewData.previewWidth=e.previewThumbnailWidth,this.previewData.count=e.previewThumbnailCount,t=new Image,this.previewData.src&&(t.src=this.previewData.src),_t.create(t,"load",function(e){return e.stopImmediatePropagation(),i.previewData.imgWidth=e.target.width,i.previewData.imgHeight=e.target.height,!1}),this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+this.previewData.src+")"),this.thumbPreview.style.width=this.previewData.previewWidth+"px",this.thumbPreview.style.height=this.previewData.previewHeight+"px"},Qt.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="")},Qt.prototype.valueChanged=function(){this.sendNotification(ko.SEEK,this.value*this.facade.player.retrieveProxy(bt.NAME).getDuration())},Qt.prototype.updateValue=function(e,t){null==t&&(t=this.duration),this.isLive===!0&&(e=1),isNaN(e)===!0&&(e=0),Qt.__super__.updateValue.call(this,e),this.getDragging()===!0&&(this.scrubTime.textContent=Dt.formatTimecode(this.value*t)),this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*this.value).toFixed(2)+"%",this.previewInterval=this.duration/this.previewData.count,this.previewImgIndex=Math.floor(this.value*t/this.previewInterval),this.previewRow=Math.floor(this.previewImgIndex*this.previewData.previewWidth/this.previewData.imgWidth),this.xpos="-"+this.previewData.previewWidth*this.previewImgIndex+"px ",this.ypos="-"+this.previewData.previewHeight*this.previewRow.toFixed(0)+"px ",this.thumbPreview.style.backgroundPosition=this.xpos+this.ypos,this.thumbPreview.style.left=""+(100*this.value-18).toFixed(2)+"%"},Qt.prototype.handlePressHandler=function(e){Qt.__super__.handlePressHandler.call(this,e),this.classList.add("scrubbing")},Qt.prototype.handleReleaseHandler=function(e){Qt.__super__.handleReleaseHandler.call(this,e),this.classList.remove("scrubbing")},i($t,kt),$t.prototype.componentName="play-pause",$t.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(ko.TOGGLE_PLAY_PAUSE),!1};var jo={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",LOG:"adslog",REQUEST:"adsrequest",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"};i(ei,ye),ei.prototype.componentName="controls",ei.prototype.activeControlPanel=null,ei.prototype.controlBar=null,ei.prototype.panels=null,ei.prototype.onRegister=function(){var e;ei.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent,this.controlBar=this.create("control-bar"),this.facade.registerMediator(new Kt(this.viewComponent)),this.facade.registerMediator(new $t(this.controlBar)),this.facade.registerMediator(new Zt(this.controlBar)),this.facade.registerMediator(new Qt(this.controlBar)),null!=this.facade.config.logo&&this.facade.registerMediator(new Rt(this.controlBar)),this.facade.registerMediator(new Jt(this.controlBar)),e=this.create("separator",this.controlBar)},ei.prototype.listNotificationInterests=function(){return[xo.READY,xo.ADD_CONTROL,xo.REMOVE_CONTROL,xo.ADD_CONTROL_STATE,xo.REMOVE_CONTROL_STATE]},ei.prototype.handleNotification=function(e){var t,i,n;switch(i=e.getName(),t=e.getBody(),i){case xo.READY:(null!=(n=t.fullscreen)?n.enabled:void 0)!==!1&&this.facade.registerMediator(new qt(this.controlBar));break;case xo.ADD_CONTROL_STATE:this.classList.add(t);break;case xo.REMOVE_CONTROL_STATE:this.classList.remove(t);break;case xo.ADD_CONTROL:this.controlBar.appendChild(t);break;case xo.REMOVE_CONTROL:this.controlBar.contains(t)&&this.controlBar.removeChild(t)}},ti.create=function(e,t,i){var n,o;if("string"==typeof e&&(e=document.getElementById(e)),null==e)throw new Error("[AMP ERROR] Invalid container. Could not find DOM element with id: "+e);return t=t instanceof ht?t:ht.create(t),Pt.enable(t.debug),o=this.getVersion(),null==e.dataset&&(e.dataset={}),e.dataset["amp.version"]=o,Pt.log("[AMP] "+o),n=this.createPlayer(t,e),n.onready=i,n.initialize(t),e.amp=n,n},ti.createPlayer=function(e,t){var i;return i=this.players[e.mode],null!=i&&(i=new i(t)),i},ti.getVersion=function(){return this.VERSION},ti.VERSION="AMP Premier - NDN v1.53.x.0004",ti.defaults=new xt,ti.plugins=[],ti.players={},ti.loadDefaults=function(e,t,i,n){null==n&&(n=!1),null!=t&&this.defaults.addEventListener("load",t),null!=i&&this.defaults.addEventListener("error",i),this.defaults.load(e,n)},ti.getPlaybackMode=function(){return Dt.getPlaybackMode()},ti.registerPlayer=function(e,t){this.players[e]=t},ti.registerPlugin=function(e,t,i){var n;null==(n=this.plugins)[e]&&(n[e]={}),this.plugins[e][t]=i},ti.resourceManager=null,ti.getResourceManager=function(){return null==this.resourceManager&&(this.resourceManager=new p),this.resourceManager},ti.addResource=function(e,t,i){return this.getResourceManager().add(e,t,i)},ti.addResources=function(e,t,i){return this.getResourceManager().addResources(e,t,i)},ti.getResource=function(e){return this.getResourceManager().item(e)},ti.removeResource=function(e){return this.getResourceManager().remove(e)},ti.registerPlayer("html",de),ti.registerPlayer("flash",Le),ti.registerPlayer("none",c),ti.registerPlayer("external",Nt),i(ii,Ot),ii.NAME="PlayOverlayWrapper",ii.prototype.createFlashVars=function(e){return e.show_play_button_overlay=null!=this.config.enabled?this.config.enabled:!0,e},ti.registerPlugin("playoverlay","flash",ii),i(ni,X),ni.prototype.componentName="play",ni.prototype.onclick=function(e){return e.stopImmediatePropagation(),e.preventDefault(),this.sendNotification(ko.TOGGLE_PLAY_PAUSE),!1},i(oi,it),oi.prototype.moduleName="controls",oi.prototype.createFramework=function(){return this.config["native"]===!0?(this.player.getMediaElement().controls=!0,this.player.sendNotification(xo.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(xo.MEDIA_VALIDATED,Ft),this.registerCommand(jo.BREAK_START,Bt),this.registerCommand(jo.BREAK_END,Ht),this.registerCommand(xo.PLAY_REQUEST,jt),void(this.createView=function(){})):void oi.__super__.createFramework.call(this)},oi.prototype.applyClickHandler=function(e){null==e&&(e=!0),this.player.getMediaElement().onclick=e?this.clickHandler.bind(this):null,this.player.getMediaElement().onplay=e?this.clickHandler.bind(this):null},oi.prototype.clickHandler=function(e){this.sendNotification(ko.TOGGLE_PLAY_PAUSE,!0)},oi.prototype.createController=function(){oi.__super__.createController.call(this),this.registerCommand(xo.START,zt),this.registerCommand(xo.PLAY,Vt),this.registerCommand(xo.PAUSE,Gt),this.registerCommand(xo.ACTIVE_STATE_CHANGE,Ut),this.registerCommand(jo.BREAK_START,Bt),this.registerCommand(jo.BREAK_END,Ht)},oi.prototype.createModel=function(){this.proxy=new Wt(this.config),this.registerProxy(this.proxy)},oi.prototype.createView=function(){this.registerMediator(new ei)},oi.prototype.listNotificationInterests=function(){var e,t;return function(){var i;i=[];for(e in Fo)t=Fo[e],i.push(t);return i}().concat([xo.MEDIA_CHANGE,xo.TIME_UPDATE,xo.DURATION_CHANGE,xo.PROGRESS,xo.ENDED,xo.ADD_CUE_POINTS,xo.REMOVE_CUE_POINTS,xo.DISABLE_FULL_SCREEN,xo.ENABLE_FULL_SCREEN,xo.READY,xo.ADD_CONTROL,xo.REMOVE_CONTROL,xo.ADD_CONTROL_STATE,xo.REMOVE_CONTROL_STATE,xo.ACTIVE_STATE_CHANGE,xo.START,xo.PLAY,xo.PAUSE,jo.BREAK_START,jo.BREAK_END,xo.CHANGE_MEDIA,xo.DISPLAY_TIME,xo.MEDIA_VALIDATED,xo.STARTED,xo.PLAY_REQUEST,xo.IS_LIVE])},oi.prototype.listNotificationPublications=function(){return oi.__super__.listNotificationPublications.call(this).concat([xo.CHANGE_ACTIVE_STATE,xo.TOGGLE_FULL_SCREEN,ko.SEEK,xo.TOGGLE_ACTIVE,ko.TOGGLE_PLAY_PAUSE])},oi.prototype.setMode=function(e){return this.proxy.setMode(e),e},oi.prototype.getMode=function(){return this.proxy.getMode()},oi.prototype.setAutoHide=function(e){return this.proxy.setAutoHide(e),e},oi.prototype.getAutoHide=function(){return this.proxy.getAutoHide()},ti.registerPlugin("controls","html",oi),ti.registerPlugin("controls","flash",Yt),ti.registerPlugin("controls","external",oi),i(ai,Ce),ai.prototype.execute=function(e){this.proxy.contentStarted()},i(ri,Ce),ri.prototype.execute=function(e){this.proxy.contentEnded()},i(si,Ce),si.prototype.dispatchEvent=function(e,t){var i,n,o;"string"!=typeof e&&(t=e.getBody(),null==t&&(t={}),e=e.getName()),n="function"==typeof(o=this.plugin).getFeatureName?o.getFeatureName():void 0,null!=n&&(e=e.replace(new RegExp("^("+n+")"),"")),n=this.plugin.getModuleName(),e=e.replace(new RegExp("^("+n+")"),""),i=new Tt(e,t),this.sendNotification(xo.DISPATCH_EVENT,i)},si.prototype.dispatchEventAfterCommand=function(e,t){setTimeout(this.dispatchEvent.bind(this,e,t),0)},si.prototype.execute=function(e){this.dispatchEvent(e)},i(li,Ce),li.prototype.execute=function(e){this.proxy.setMedia(e.getBody())},i(di,puremvc.SimpleCommand),di.prototype.execute=function(e){this.facade.player.getMediaElement().dataset.isad=!0},i(ci,puremvc.SimpleCommand),ci.prototype.execute=function(e){this.facade.player.getMediaElement().dataset.isad=!1},i(ui,puremvc.SimpleCommand),ui.prototype.execute=function(e){var t,i;try{i=e.getBody(),t={adDuration:i.duration,adPartnerId:i.partner,adTitle:i.title,adId:i.id},"function"==typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(t)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",n)}},i(pi,Ce),pi.prototype.execute=function(e){try{"function"==typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}},i(hi,Ce),hi.prototype.execute=function(e){var t,i;t=e.getBody(),i=Math.round(t.currentTime/t.duration*100);try{i>=25&&this.proxy.percent<25?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"==typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):i>=50&&this.proxy.percent<50?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"==typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):i>=75&&this.proxy.percent<75&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"==typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",n)}this.proxy.percent=i},i(gi,puremvc.SimpleCommand),gi.prototype.execute=function(e){try{"function"==typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(t){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",t)}this.facade.player.getMediaElement().dataset.isad=!0},i(fi,Ce),fi.prototype.execute=function(e){var t;t=e.getBody(),this.proxy.setDimensions(t)},i(mi,Ce),mi.prototype.execute=function(e){this.proxy.updatedMedia(e.getBody())},i(yi,Ce),yi.prototype.execute=function(e){return this.sendNotification(xo.PLAY_REQUEST),this.proxy.getStarted()===!1?void this.sendNotification(xo.START,!0):(this.proxy.play(),void this.facade.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PLAYING))},i(vi,Ce),vi.prototype.execute=function(e){this.proxy.pause(),this.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PAUSED)},i(_i,si),_i.prototype.execute=function(e){var t;t=this.proxy.getPaused()||this.proxy.getStarted()===!1?xo.PLAY:xo.PAUSE,this.sendNotification(t,!0)},i(Ei,si),Ei.prototype.execute=function(e){this.proxy.setVolume(e.getBody()),Ei.__super__.execute.call(this,e)},i(Ai,si),Ai.prototype.execute=function(e){this.sendNotification(xo.PLAY_REQUEST),this.playback.initialized===!1&&this.player.sendNotification(xo.INITIALIZED),this.proxy.start(),this.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PLAYING),Ai.__super__.execute.call(this,e)},i(bi,Ot),bi.NAME="MediaAnalyticsWrapper",bi.prototype.flashPlugins=[{id:"OSMFCSMALoader",host:"osmf",main:"com.akamai.playeranalytics.osmf.OSMFCSMALoaderInfo",type:"application/x-shockwave-flash"}],bi.prototype.listNotificationInterests=function(){return bi.__super__.listNotificationInterests.call(this).concat([xo.MEDIA_CHANGE,Mo.SET_DIMENSIONS])},bi.prototype.createFlashVars=function(e){var t,i,n,o,a;if(t=null!=(o=this.player.config)&&null!=(a=o.media)?a.mediaanalytics:void 0,null!=t)for(i in t)n=t[i],e["report_"+i]=n;return e},bi.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c;if(t=e.firstChild,a=e.getElementsByTagName("metrics")[0],null==a&&(a=e.createElement("metrics"),t.appendChild(a)),l=e.createElement("vendor"),l.setAttribute("id","akamai"),a.appendChild(l),null!=this.config.config&&(n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_BEACON"),n.appendChild(re.createTextContent(e,this.config.config)),l.appendChild(n),r=(null!=(d=this.config.plugin)?d.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),n.appendChild(re.createTextContent(e,r)),l.appendChild(n)),null!=this.config.dimensions){i=e.createElement("property"),i.setAttribute("key","dimensions"),l.appendChild(i),c=this.config.dimensions;for(o in c)s=c[o],n=e.createElement("property"),n.setAttribute("key",o),n.appendChild(re.createTextContent(e,s)),i.appendChild(n)}return e},bi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s;switch(bi.__super__.handleNotification.call(this,e),o=e.getName(),t=e.getBody(),o){case xo.MEDIA_CHANGE:if(n=t,null!=(null!=(r=n.mediaanalytics)?r.dimensions:void 0)){n.dimensions=[],s=n.mediaanalytics.dimensions;for(i in s)a=s[i],n.dimensions.push({key:i,value:a})}break;case Mo.SET_DIMENSIONS:this.setDimensions(t)}},bi.prototype.setDimensions=function(e){return this.player.mediaElement.setPlayerProperty("maDimensions",e),e};var zo={INITIALIZED:"ima/initialize",ADD_OVERLAY:"ima/addOverlay",REMOVE_OVERLAY:"ima/removeOverlay"};Ci.prototype.id=null,Ci.prototype.title=null,Ci.prototype.duration=NaN,Ci.prototype.position=NaN,Ci.prototype.totalAds=NaN,Ci.prototype.type=null,Ci.prototype.partner=null,Ci.prototype.advertiser=null,Ci.prototype.companions=null,Ci.prototype.metadata=null,Ci.prototype.request=null,Ci.prototype.error=null,Ci.prototype.currentTime=null,i(Ni,ue),Ni.prototype.configurationName="imaoverlay",Ni.NAME="IMAOveralyProxy",Ni.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30},Ni.prototype.durationTimer=null,Ni.prototype.intervalTimer=null,Ni.prototype.delayTimer=null,Ni.prototype.stop=function(){clearTimeout(this.durationTimer),clearTimeout(this.delayTimer),clearTimeout(this.intervalTimer)},Ni.prototype.play=function(){var e=this;this.stop(),this.delayTimer=setTimeout(function(){return e.requestAd()},1e3*this.value.delay)},Ni.prototype.requestAd=function(){var e,t;e=this.getValue("adTagUrl"),null!=e&&(e=e.replace("[timestamp]",(new Date).getTime()),e=e.replace("__random-number__",(new Date).getTime())),t=Dt.get(e,{withCredentials:!0,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)},Ni.prototype.vastLoadHandler=function(e){var t,i,n,o,a,r;if(r=e.target.responseXML,null!=r)try{t=r.querySelector("NonLinear"),null!=t?(a=null!=r.querySelector("Impression")?r.querySelector("Impression").textContent:"",n=null!=r.querySelector("Tracking[event=creativeView]")?r.querySelector("Tracking[event=creativeView]").textContent:"",i=null!=t.querySelector("NonLinearClickThrough")?t.querySelector("NonLinearClickThrough").textContent:"",o={src:t.querySelector("StaticResource").textContent,width:t.getAttribute("width"),height:t.getAttribute("height"),tracking:[a,n],href:i},this.displayAd(o)):this.error("No overlay was returned")}catch(s){this.error(s)}},Ni.prototype.error=function(e){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",e),this.stop()},Ni.prototype.displayAd=function(e){var t=this;this.sendNotification(zo.ADD_OVERLAY,e),this.durationTimer=setTimeout(function(){return t.sendNotification(zo.REMOVE_OVERLAY),t.intervalTimer=setTimeout(function(){return t.requestAd()},1e3*t.value.interval)},1e3*this.value.duration)},i(Ii,we),Ii.NAME=we.NAME,Ii.prototype.inprogress=!1,Ii.prototype.paused=!1,Ii.prototype.started=!1,Ii.prototype.adVO=null,Ii.prototype.contextName="ad",Ii.prototype.container=null,Ii.prototype.getContextData=function(){return this.adVO||{}},Ii.prototype.setCompanions=function(e){return this.adVO.companions=e,this.sendNotification(jo.AD_COMPANION,this.adVO),e},Ii.prototype.getCompanions=function(){var e;return null!=(e=this.adVO)?e.companions:void 0},Ii.prototype.getInProgress=function(){return this.inprogress},Ii.prototype.setInProgress=function(e){return this.inprogress=e,e},Ii.prototype.getStarted=function(){return this.started},Ii.prototype.setStarted=function(e){return this.started=e,e},Ii.prototype.getPaused=function(){return this.paused},Ii.prototype.setPaused=function(e){return this.paused=e,e},Ii.prototype.play=function(){this.setPaused(!1),this.sendNotification(jo.AD_PLAY,this.adVO)},Ii.prototype.pause=function(){this.setPaused(!0),this.sendNotification(jo.AD_PAUSE,this.adVO)},Ii.prototype.breakStart=function(){this.setInProgress(!0)},Ii.prototype.breakEnd=function(){this.setInProgress(!1),this.reset()},Ii.prototype.error=function(e,t){var i;null==t&&(t=!0),i=("function"==typeof e.getMessage?e.getMessage():void 0)||e.message,this.facade.logger.error("[AMP AD ERROR]",""+i+" Skipping ad content.",e),null==this.adVO&&(this.adVO={}),this.adVO.error=e,this.sendNotification(jo.AD_ERROR,this.adVO),t===!0&&this.endBreak()},Ii.prototype.engage=function(e){this.getEnabled()!==!1&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(xo.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())},Ii.prototype.engageAds=function(){this.facade.player.removeCommand(xo.START),this.facade.player.removeCommand(xo.PLAY),this.facade.player.removeCommand(xo.PAUSE),this.facade.player.removeCommand(xo.ENDED),this.facade.player.removeCommand(ko.PLAY),this.facade.player.removeCommand(ko.PAUSE),this.facade.player.removeCommand(ko.TOGGLE_PLAY_PAUSE),this.facade.isFullscreenDevice()&&this.facade.player.removeCommand(xo.CHANGE_DURATION),this.facade.removeCommand(xo.STARTED),this.facade.removeCommand(xo.ENDED),this.facade.registerCommand(xo.START,Ai),this.facade.registerCommand(xo.PLAY,yi),this.facade.registerCommand(xo.PAUSE,vi),this.facade.registerCommand(ko.PLAY,yi),this.facade.registerCommand(ko.PAUSE,vi),this.facade.registerCommand(ko.TOGGLE_PLAY_PAUSE,_i),this.facade.registerCommand(xo.VOLUME_CHANGE,Ei)},Ii.prototype.reset=function(){this.facade.removeCommand(xo.START),this.facade.removeCommand(xo.PLAY),this.facade.removeCommand(xo.PAUSE),this.facade.removeCommand(ko.PLAY),this.facade.removeCommand(ko.PAUSE),this.facade.removeCommand(ko.TOGGLE_PLAY_PAUSE),this.facade.removeCommand(xo.VOLUME_CHANGE),this.facade.player.registerCommand(xo.START,M),this.facade.player.registerCommand(xo.PLAY,ne),this.facade.player.registerCommand(xo.PAUSE,_),this.facade.player.registerCommand(xo.ENDED,P),this.facade.player.registerCommand(ko.PLAY,ne),this.facade.player.registerCommand(ko.PAUSE,_),this.facade.player.registerCommand(ko.TOGGLE_PLAY_PAUSE,f),
this.facade.isFullscreenDevice()&&this.facade.player.registerCommand(xo.CHANGE_DURATION,Ye),this.facade.registerCommand(xo.STARTED,ai),this.facade.registerCommand(xo.ENDED,ri)},Ii.prototype.requestAd=function(){},Ii.prototype.startBreak=function(){return this.setStarted(!0),this.sendNotification(jo.BREAK_START,this.adVO),this.getEnabled()===!1?(this.endBreak(),!1):!0},Ii.prototype.endBreak=function(){this.sendNotification(jo.BREAK_END,this.adVO)},Ii.prototype.start=function(){this.startBreak()},Ii.prototype.contentPlay=function(){this.facade.player.sendNotification(xo.PLAY,!0)},Ii.prototype.contentPause=function(){this.facade.player.mediaElement.pause()},Ii.prototype.contentStarted=function(){},Ii.prototype.contentSeek=function(e){},Ii.prototype.contentEnded=function(){},Ii.prototype.setVolume=function(e){},Ii.prototype.getVolume=function(){},Ii.prototype.terminateAd=function(){},Ii.prototype.terminateAllAds=function(){},i(Si,Ii),Si.NAME=Ii.NAME,Si.prototype.defaults={adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,companions:null,logEventsEnabled:!1},Si.prototype.key="ima",Si.prototype.intervals=null,Si.prototype.adDisplayContainer=null,Si.prototype.adDisplayContainerInitialized=!1,Si.prototype.adsLoader=null,Si.prototype.adsRenderingSettings=null,Si.prototype.adsManagerLoaded=!1,Si.prototype.adsManager=null,Si.prototype.cuepoints=null,Si.prototype.adLoaded=!1,Si.prototype.playWhenLoaded=!1,Si.prototype.contentHasEnded=!1,Si.prototype.adTagUrl=null,Si.prototype.viewMode=null,Si.prototype.playbackCore=null,Si.prototype.loadedmetadata=null,Si.prototype.setEnabled=function(e){var t;return Si.__super__.setEnabled.call(this,e),e===!1&&(null!=(t=this.adsManager)&&"function"==typeof t.destroy&&t.destroy(),this.getInProgress()&&this.contentPlay()),e},Si.prototype.onLoadedMetadata=function(e){e.target.removeEventListener("loadedmetadata",this.loadedmetadata),this.canPlay()&&this.playWhenLoaded===!0&&this.startAd()},Si.prototype.initialize=function(){},Si.prototype.ready=function(){var e;this.viewMode=google.ima.ViewMode.NORMAL,window.addEventListener("resize",this.resize.bind(this)),null!=this.config.vpaidAllowed&&google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed),null!=this.config.vpaidMode&&null!=(e=google.ima.ImaSdkSettings.VpaidMode[this.config.vpaidMode.toUpperCase()])&&google.ima.settings.setVpaidMode(e),this.adDisplayContainer=this.createPlugin(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)},Si.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,null,this.facade.getViewComponent().adClickHandlerContainer)},Si.prototype.engage=function(e){var t;null==e&&(e=!0),this.getEnabled()!==!1&&(Si.__super__.engage.call(this),this.adsManagerLoaded===!0&&this.contentHasEnded===!1&&null!=(t=this.adsManager)&&"function"==typeof t.destroy&&t.destroy(),this.adsManagerLoaded=!1,this.contentHasEnded=!1,this.adsManagerLoaded=!1,this.playWhenLoaded=!1)},Si.prototype.setVolume=function(e){var t;return null!=(t=this.adsManager)&&t.setVolume(e),e},Si.prototype.getVolume=function(){var e;return null!=(e=this.adsManager)?e.getVolume():void 0},Si.prototype.requestAd=function(){var e,t,i,n,o,a,r;return this.sendNotification(jo.REQUEST,this.adVO),o=this.facade.player.getViewComponent().clientWidth,i=this.facade.player.getViewComponent().clientHeight,e=new google.ima.AdsRequest,this.adTagUrl=this.getValue("adTagUrl"),t=this.getValue("adsResponse"),null!=t&&""!==t?e.adsResponse=Dt.read(t,null,Dt.mimeTypes.txt):e.adTagUrl=this.adTagUrl,null==e.adsResponse&&null==e.adTagUrl?void this.onAdError("No valid adTagUrl or adsResponse provided."):(e.linearAdSlotWidth=o,e.linearAdSlotHeight=i,e.nonLinearAdSlotWidth=(null!=(a=this.value.overlay)?a.width:void 0)||o,e.nonLinearAdSlotHeight=(null!=(r=this.value.overlay)?r.height:void 0)||i,n=this.adsLoader.getSettings(),null!=this.config.ppid&&n.setPpid(this.getValue("ppid")),void this.adsLoader.requestAds(e))},Si.prototype.requestOverlay=function(){var e,t;t=this.value.overlay,null!=t&&(e=new google.ima.AdsRequest,e.adTagUrl=t.adTagUrl,e.nonLinearAdSlotWidth=t.width||300,e.nonLinearAdSlotHeight=t.height||50,this.adsLoader.requestAds(e))},Si.prototype.start=function(e){var t;return null==e&&(e=!0),e===!0?(this.playbackCore=this.facade.player.retrieveProxy(At.NAME).getActivePlaybackCore(),t=this.facade.player.getMediaElement(),this.playbackCore.setEnabled(!1),t.src=this.playbackCore.getSrc(),t.addEventListener("loadedmetadata",this.loadedmetadata),t.load()):this.engage(),Si.__super__.start.call(this)===!1?!1:(this.isLiveMidroll=e===!1&&"live"===this.facade.player.retrieveProxy(bt.NAME).getTemporalType(),this.adDisplayContainerInitialized!==!0&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0),void(this.canPlay()===!0&&e===!0?this.startAd():(this.playWhenLoaded=!0,this.requestAd())))},Si.prototype.canPlay=function(){return this.adsManagerLoaded===!0},Si.prototype.startAd=function(){var e;this.playWhenLoaded=!1;try{e=this.facade.player.retrieveProxy(Me.NAME).getVolume(),this.setVolume(e),null==this.viewMode&&(this.viewMode=google.ima.ViewMode.NORMAL),this.adsManager.init(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode),this.adsManager.start()}catch(t){this.error(t)}},Si.prototype.resize=function(e){var t;null!=e&&(this.viewMode=e===Go.FULL_SCREEN?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),null!=(t=this.adsManager)&&t.resize(this.container.container.clientWidth,this.container.container.clientHeight,this.viewMode)},Si.prototype.onAdsManagerLoaded=function(e){var t,i;this.adsRenderingSettings.bitrate=this.getValue("maxBitrate"),this.adsRenderingSettings.autoAlign=!0,this.adsRenderingSettings.useStyledNonLinearAds=!0,null!=(i=this.adsManager)&&"function"==typeof i.destroy&&i.destroy(),this.adsManager=e.getAdsManager(this.facade.player.mediaElement,this.adsRenderingSettings),this.facade.player.sendNotification(jo.AD_MANAGER_LOADED,{adManager:this.adsManager,viewMode:google.ima.ViewMode.NORMAL,adContainer:this.facade.getViewComponent()}),this.adsManagerLoaded=!0,this.cuePoints=this.adsManager.getCuePoints(),this.facade.player.sendNotification(xo.ADD_CUE_POINTS,this.cuePoints),t=this.onAdEvent.bind(this),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUME,this.onAdResumed.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,t),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,t),this.getValue("logEventsEnabled")===!0&&this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,t),this.canPlay()&&this.playWhenLoaded===!0&&this.startAd()},Si.prototype.onAdClick=function(e){return(null!=e?e.getAd().isLinear():void 0)===!1?void this.facade.player.sendNotification(xo.PAUSE):(this.getPaused()||this.pause(),void this.sendNotification(jo.AD_CLICKED,this.adVO))},Si.prototype.onAdPaused=function(e){this.setPaused(!0),this.facade.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PAUSED),this.facade.player.sendNotification(xo.CHANGE_ACTIVE_STATE,Bo.ACTIVE),this.facade.player.sendNotification(jo.AD_PAUSED,this.adVO)},Si.prototype.onAdResumed=function(e){this.setPaused(!1),this.facade.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PLAYING)},Si.prototype.onAdEvent=function(e){var t,i,n,o,a,r,s,l,d;switch(t=e.getAd(),null!=this.adVO&&(null!=t&&(t.wrapperAdIds="function"==typeof t.getWrapperAdIds?t.getWrapperAdIds():void 0,t.wrapperAdSystems="function"==typeof t.getWrapperAdSystems?t.getWrapperAdSystems():void 0),this.adVO.metadata=t),e.type){case google.ima.AdEvent.Type.IMPRESSION:this.sendNotification(jo.IMPRESSION,this.adVO);break;case google.ima.AdEvent.Type.LOADED:t.isLinear()?(a=t.getAdPodInfo().getPodIndex(),r=0===a?"preroll":-1===a?"postroll":"midroll",this.adVO=new Ci(t.getAdId(),t.getAdId(),t.getDuration(),a,r,"ima",null,null,this.adTagUrl,t,t.getAdPodInfo().getTotalAds()),(!this.getInProgress()&&"midroll"===r||"postroll"===r)&&(this.startBreak(),this.engageAds()),this.resize(),this.sendNotification(jo.AD_LOADED,this.adVO),this.sendNotification(jo.AD_DURATION_CHANGE,this.adVO)):(this.facade.player.sendNotification(xo.ADD_APPLICATION_STATE,"ad-overlaymode"),this.contentPlay());break;case google.ima.AdEvent.Type.STARTED:t.isLinear()&&(this.adVO.position=t.getAdPodInfo().getAdPosition(),this.sendNotification(jo.AD_STARTED,this.adVO),this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),300)),this.facade.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PLAYING),this.sendNotification(jo.AD_PLAY,this.adVO));try{for(n=[],o=("function"==typeof this.getConfigurationData&&null!=(d=this.getConfigurationData())?d.companions:void 0)||[],s=0,l=o.length;l>s;s++)i=o[s],n=n.concat(t.getCompanionAds(i.width,i.height));(null!=n?n.length:void 0)>0&&this.setCompanions(n)}catch(c){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",c)}break;case google.ima.AdEvent.Type.COMPLETE:t.isLinear()&&this.sendNotification(jo.AD_ENDED,this.adVO);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification(jo.FIRST_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification(jo.MIDPOINT,this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification(jo.THIRD_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.LOG:this.sendNotification(jo.LOG,this.adVO);break;case google.ima.AdEvent.Type.SKIPPED:this.sendNotification(jo.SKIPPED,this.adVO);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.getInProgress()===!0&&this.endBreak()}},Si.prototype.onAdTimeUpdate=function(e){var t;t=this.adsManager.getRemainingTime(),this.sendNotification(jo.AD_TIME_UPDATE,this.adVO.duration-t),this.sendNotification(jo.AD_TIME_REMAINING,t)},Si.prototype.onAdError=function(e){var t;t=(null!=e&&"function"==typeof e.getError?e.getError():void 0)||e,this.error(t),this.contentPlay()},Si.prototype.play=function(){var e;Si.__super__.play.call(this);try{null!=(e=this.adsManager)&&e.resume(),this.sendNotification(jo.AD_RESUME)}catch(t){this.facade.logger.error("[AMP IMA ERROR]","resume",t)}},Si.prototype.pause=function(){Si.__super__.pause.call(this);try{this.adsManager.pause()}catch(e){this.facade.logger.error("[AMP IMA ERROR]","pause",e)}},Si.prototype.breakEnd=function(){var e,t,i,n,o;for(o=this.intervals,i=0,n=o.length;n>i;i++)e=o[i],clearInterval(this.intervals.pop());Si.__super__.breakEnd.call(this),t=this.facade.retrieveProxy(Ni.NAME),null!=t&&t.play()},Si.prototype.setCompanions=function(e){var t,i,n,o,a;for(i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push({data:t.getContent(),type:null!=(a=t.getContentType())?a.toLowerCase():void 0,width:t.getWidth(),height:t.getHeight(),metadata:t});return Si.__super__.setCompanions.call(this,i),e},Si.prototype.contentPause=function(){return this.sendNotification(xo.DISABLE_VIDEO_EVENTS,["pause","ended","durationchange","error"]),this.isLiveMidroll===!0?void(this.facade.player.getMediaElement().volume=0):void Si.__super__.contentPause.call(this)},Si.prototype.contentPlay=function(){var e,t;if(this.getInProgress()===!0&&this.endBreak(),this.sendNotification(xo.ENABLE_VIDEO_EVENTS,["pause","ended","durationchange","error"]),"postroll"===(null!=(e=this.adVO)?e.type:void 0))return this.facade.player.sendNotification(xo.ENDED),void this.facade.player.sendNotification(xo.MEDIA_SEQUENCE_ENDED,{isAd:!0});if(this.isLiveMidroll===!0){if(this.facade.player.getMediaElement().volume=this.facade.player.retrieveProxy(mt.NAME).getVolume(),"ipad"!==Dt.getDevice())return;this.facade.player.getMediaElement().load()}Si.__super__.contentPlay.call(this),"midroll"===(null!=(t=this.adVO)?t.type:void 0)&&"desktop"===Dt.getDevice()&&this.facade.player.setCurrentTime(Math.floor(this.facade.player.getCurrentTime()))},Si.prototype.contentEnded=function(){var e;this.contentHasEnded=!0;try{null!=(e=this.adsLoader)&&"function"==typeof e.contentComplete&&e.contentComplete()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",t)}},Si.prototype.terminateAd=function(){var e;try{null!=(e=this.adsManager)&&e.stop()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",t)}this.endBreak(),this.contentPlay()},Si.prototype.terminateAllAds=function(){var e;try{null!=(e=this.adsManager)&&e.destroy()}catch(t){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",t)}this.endBreak(),this.contentPlay()},Si.prototype.destory=function(){var e;null!=(e=this.adsManager)&&"function"==typeof e.destroy&&e.destroy()},i(Ti,we),Ti.NAME=r.NAME,Ti.prototype.defaults={config:null,dimensions:null},Ti.prototype.ready=function(){try{window.akamaiSetVideoObject(this.facade.player.getMediaElement())}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",e)}},Ti.prototype.setDimensions=function(e){var t,i,n;t=this.configurationData.source.dimensions;for(i in e)n=e[i],null!=n&&(t[i]=n);return this.configurationData.parse(this.configurationData.source),this.applyDimensions(t),e},Ti.prototype.applyDimensions=function(e){var t,i;if(null!=window.setAkamaiMediaAnalyticsData)try{for(t in e)i=e[t],setAkamaiMediaAnalyticsData(t,i)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",n)}},Ti.prototype.setMedia=function(e){var t,i,n;return i=this.value.viewerId||this.value.viewerID||this.value["std:viewerId"],null!=i&&akamaiSetViewerId(i),t=null!=(null!=(n=e.mediaanalytics)?n.dimensions:void 0)?Dt.override(this.value.dimensions,e.mediaanalytics.dimensions):this.value.dimensions,akamaiHandleStreamSwitch(),this.applyDimensions(t),e},Ti.prototype.udpateMedia=function(e){return"function"==typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(e),e},i(wi,puremvc.SimpleCommand),wi.prototype.execute=function(e){this.facade.retrieveProxy(Ti.NAME).ready()};var Yo={LOAD_FEED:"loadfeed",FEED_CHANGED:"feedchanged",FEED_LOADED:"feedloaded",FEED_ERROR:"feederror"};i(Pi,it),Pi.prototype.moduleName="playoverlay",Pi.prototype.createModel=function(){},Pi.prototype.createView=function(){this.registerMediator(new ni)},Pi.prototype.listNotificationPublications=function(){return Pi.__super__.listNotificationPublications.call(this).concat([ko.TOGGLE_PLAY_PAUSE])},ti.registerPlugin("playoverlay","html",Pi),ti.registerPlugin("playoverlay","external",Pi),i(Mi,r),Mi.NAME=r.NAME,Mi.prototype.defaults={url:null,data:null},Mi.prototype.feed=null,Mi.prototype.helper=null,Mi.prototype.setURL=function(e){var t=this;return this.data.url=this.facade.evaluatePaths(e),this.sendNotification(xo.DISPATCH_EVENT,new Tt("request",this.data.url)),this.helper.getFeed(this.data.url,function(e){t.sendNotification(Yo.FEED_LOADED,e),t.sendNotification(Yo.CHANGE_FEED,e)},function(i){t.sendNotification(Yo.FEED_ERROR,{error:i,url:e}),Pt.error("[AMP Feed Load Error]",t.data.url,i)}),e},Mi.prototype.getURL=function(){return this.data.url},Mi.prototype.setFeedData=function(e){return this.data.data=e,this.feed=this.helper.createFeed(e),this.sendNotification(Yo.FEED_CHANGED,this.feed),e},Mi.prototype.getFeedData=function(){return this.data.data},Mi.prototype.invoke=function(){null!=this.data.url&&""!==this.data.url?this.sendNotification(Yo.LOAD_FEED,this.data.url):null!=this.data.data&&setTimeout(this.sendNotification.bind(this,Yo.CHANGE_FEED,this.data.data),1)},i(Di,puremvc.SimpleCommand),Di.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Mi.NAME),t.setURL(e.getBody())},i(xi,puremvc.SimpleCommand),xi.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Mi.NAME),t.setFeedData(e.getBody())},i(ki,si),ki.prototype.execute=function(e){var t,i;ki.__super__.execute.call(this,e),this.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.READY),t=e.getBody(),i=t.item[0],this.player.sendNotification(xo.SET_MEDIA,i)},i(Li,puremvc.SimpleCommand),Li.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Mi.NAME),t.invoke()},i(Ri,Ot),Ri.NAME="FeedWrapper",Ri.prototype.url=null,Ri.prototype.data=null,Ri.prototype.updateData=!0,Ri.prototype.createFlashVars=function(e){null!=this.url&&""!==this.url&&(e.data_feed_url=escape(this.facade.evaluatePaths(this.url)))},Ri.prototype.listNotificationInterests=function(){return Ri.__super__.listNotificationInterests.apply(this,arguments).concat([Po.READY,Po.FEED_LOADED,Po.LOAD_FEED])},Ri.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l=this;switch(Ri.__super__.handleNotification.call(this,e),o=e.getName(),t=e.getBody(),o){case Po.FEED_LOADED:this.updateData===!1?this.updateData=!0:this.data=JSON.parse(t),a="loaded",t=this.data,i=new wt,n=null!=(r=i.createFeed(this.data))&&null!=(s=r.item)?s[0]:void 0,null!=n&&this.player.media.setData(n),this.sendNotification(Yo.FEED_CHANGED,this.data);break;case Po.LOAD_FEED:a="request";break;case Po.READY:null!=this.data?setTimeout(function(){l.setData(l.data)},25):null!=this.url&&""!==this.url&&this.sendNotification(Yo.LOAD_FEED,this.url)}null!=a&&this.dispatchEvent(new Tt(a,t))},Ri.prototype.setURL=function(e){return null!=e&&""!==e&&(this.url=e,this.player.mediaElement.playFile(this.url,this.player.getAutoplay()),this.sendNotification(Yo.LOAD_FEED,this.url)),e},Ri.prototype.getURL=function(){return this.url},Ri.prototype.setData=function(e){return this.data=e,this.updateData=!1,this.player.mediaElement.playFile(this.data,this.player.getAutoplay()),e},Ri.prototype.getData=function(){return this.data},i(Oi,it),Oi.prototype.moduleName="mediaanalytics",Oi.prototype.initialize=function(e,t){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=e.config,Oi.__super__.initialize.call(this,e,t)},Oi.prototype.createModel=function(){this.proxy=new Ti(this.config),this.registerProxy(this.proxy)},Oi.prototype.createController=function(){Oi.__super__.createController.call(this),this.registerCommand(xo.READY,wi),this.registerCommand(xo.MEDIA_CHANGE,li),this.registerCommand(jo.BREAK_START,di),this.registerCommand(jo.BREAK_END,ci),this.registerCommand(jo.AD_LOADED,ui),this.registerCommand(jo.AD_STARTED,pi),this.registerCommand(jo.AD_TIME_UPDATE,hi),this.registerCommand(jo.AD_ENDED,gi),this.registerCommand(Mo.SET_DIMENSIONS,fi),this.registerCommand(xo.CONTENT_CHANGED,mi)},Oi.prototype.listNotificationInterests=function(){return[xo.READY,xo.MEDIA_CHANGE,jo.BREAK_START,jo.BREAK_END,jo.AD_LOADED,jo.AD_STARTED,jo.AD_TIME_UPDATE,jo.AD_ENDED,Mo.SET_DIMENSIONS,xo.CONTENT_CHANGED]},Oi.prototype.setDimensions=function(e){return this.retrieveProxy(Ti.NAME).setDimensions(e),e},ti.registerPlugin("mediaanalytics","html",Oi),ti.registerPlugin("mediaanalytics","flash",bi),i(Vi,Ot),Vi.NAME="InfoWrapper",Vi.prototype.listNotificationInterests=function(){return[Po.CREATE_FLASH_VARS,Po.CREATE_XML,Po.SHARE,Po.SHARE_REQUEST]},Vi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m;switch(l=e.getName(),i=e.getBody(),l){case Po.CREATE_FLASH_VARS:r=i.flashvars;break;case Po.CREATE_XML:for(g=i.xml,t=g.firstChild,h=g.getElementsByTagName("view")[0],a=g.getElementsByTagName("element"),f=0,m=a.length;m>f;f++)if(o=a[f],"infoOverlayAdvanced"===o.getAttribute("id")){s=o;break}if(null==h)return;null==s&&(s=g.createElement("element"),s.setAttribute("id","infoOverlayAdvanced"),s.setAttribute("displayStates","preplay,paused,ns,fs,mouseover"),h.insertBefore(s,h.childNodes[0])),n=g.createElement("data"),s.appendChild(n),null!=this.config.title&&(d=g.createElement("property"),d.setAttribute("key","title"),u=re.createTextContent(g,this.config.title),d.appendChild(u),n.appendChild(d)),null!=this.config.description&&(d=g.createElement("property"),d.setAttribute("key","description"),u=re.createTextContent(g,this.config.description),d.appendChild(u),n.appendChild(d)),null!=this.config.more&&(d=g.createElement("property"),d.setAttribute("key","more"),u=re.createTextContent(g,this.config.more),d.appendChild(u),n.appendChild(d)),null!=this.config.less&&(d=g.createElement("property"),d.setAttribute("key","less"),u=re.createTextContent(g,this.config.less),d.appendChild(u),n.appendChild(d)),null!=this.config.provider&&(c=g.createElement("property"),c.setAttribute("key","provider"),n.appendChild(c),null!=this.config.provider.name&&(d=g.createElement("property"),d.setAttribute("key","name"),u=re.createTextContent(g,this.config.provider.name),d.appendChild(u),c.appendChild(d)),null!=this.config.provider.image&&(d=g.createElement("property"),d.setAttribute("key","image"),u=re.createTextContent(g,this.config.provider.image),d.appendChild(u),c.appendChild(d)));break;case Po.SHARE:case Po.SHARE_REQUEST:p="share"}return null!=p?this.dispatchEvent(new Tt(p,i)):void 0},ti.registerPlugin("info","flash",Vi),i(Gi,X),Gi.prototype.initializeNotifier=function(e){Gi.__super__.initializeNotifier.call(this,e),this.plugin=this.facade.retrieveProxy(r.NAME),this.media=this.facade.player.retrieveProxy(bt.NAME)},Gi.prototype.onRegister=function(){Gi.__super__.onRegister.call(this),this.facade.viewComponent=this.viewComponent},i(Ui,ue),Ui.prototype.configurationName="info",Ui.NAME=r.NAME,Ui.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},more:"read more",less:"less"},i(Bi,Gi),Bi.prototype.componentName="info",Bi.prototype.title=null,Bi.prototype.shortDescription=null,Bi.prototype.icon=null,Bi.prototype.provider=null,Bi.prototype.onRegister=function(){Bi.__super__.onRegister.call(this),this.title=this.create("info-title"),this.provider=this.create("info-provider"),this.shortDescription=this.create("info-short-description"),this.icon=this.create("info-icon",this,"img"),this.dataChangedHandler()},Bi.prototype.listNotificationInterests=function(){return[xo.MEDIA_CHANGE]},Bi.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case xo.MEDIA_CHANGE:this.dataChangedHandler()}},Bi.prototype.moreClicked=function(e){return this.classList.add("open")},Bi.prototype.closeClicked=function(e){return this.classList.remove("open")},Bi.prototype.dataChangedHandler=function(){var e,t;return null!=this.plugin.value.title&&(this.title.textContent=this.plugin.value.title),null!=(null!=(t=this.plugin.value.provider)?t.image:void 0)&&(this.icon.src=this.plugin.value.provider.image),e=getComputedStyle(this.title),this.title.clientHeight>parseInt(e.lineHeight)?(this.classList.add("info-small"),void(this.shortDescription.innerHTML=this.provider.innerHTML="")):(this.classList.remove("info-small"),this.truncateDescription(this.plugin.value.description,this.plugin.value.more),void(this.provider.textContent=null!=this.plugin.value.provider.name?""+this.plugin.value.provider.name:""))},Bi.prototype.truncateDescription=function(e){var t,i,n,o,a,r,s;if(i="...",o="",a=this.shortDescription,a.textContent="",null!=e)for(n=r=0,s=e.length;s>r;n=++r){if(t=e[n],a.textContent=o+t+i,a.scrollHeight>a.clientHeight){a.textContent=o+i;break}o+=t}},i(Hi,it),Hi.prototype.moduleName="feed",Hi.prototype.createModel=function(){this.proxy=new Mi(this.config),this.registerProxy(this.proxy)},Hi.prototype.createController=function(){Hi.__super__.createController.call(this),this.registerCommand(xo.READY,Li),this.registerCommand(Yo.LOAD_FEED,Di),this.registerCommand(Yo.CHANGE_FEED,xi),this.registerCommand(Yo.FEED_CHANGED,ki),this.registerCommand(Yo.FEED_LOADED,si),this.registerCommand(Yo.FEED_ERROR,si)},Hi.prototype.listNotificationInterests=function(){return Hi.__super__.listNotificationInterests.call(this).concat([xo.READY])},Hi.prototype.listNotificationPublications=function(){var e,t;return Hi.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in Yo)t=Yo[e],i.push(t);return i}())},Hi.prototype.setURL=function(e){return this.sendNotification(Yo.LOAD_FEED,e),e},Hi.prototype.getURL=function(){return this.proxy.getURL()},Hi.prototype.setData=function(e){return this.sendNotification(Yo.CHANGE_FEED,e),e},Hi.prototype.getData=function(){return this.proxy.getFeedData()},ti.registerPlugin("feed","html",Hi),ti.registerPlugin("feed","flash",Ri);var Wo={REGISTER_FEATURE:"registerfeature"};Fi.prototype.id=null,Fi.prototype.startTime=null,Fi.prototype.endTime=null,Fi.prototype.text=null,Fi.prototype.html=null,Fi.prototype.align=null,i(ji,it),ji.prototype.moduleName="info",ji.prototype.createModel=function(){this.registerProxy(new Ui(this.config))},ji.prototype.createView=function(){this.registerMediator(new Bi)},ji.prototype.listNotificationInterests=function(){return[xo.MEDIA_CHANGE]},ti.registerPlugin("info","html",ji),ti.registerPlugin("info","external",ji),zi.prototype.parse=function(e,t){var i,n,o,a,r,s,l,d,c,u,p;for(t=t.replace(/\r/g,""),n=t.split("\n\n"),u=0,p=n.length;p>u;u++){i=n[u],s=i.split("\n");try{r=s[0],c=s[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1),l=Dt.flattenTimecode(c[0]),a=Dt.flattenTimecode(c[1]),d=s.slice(2)}catch(h){Pt.warn("SRT Parsing Warning")}o=new Fi(l,a,"cue_"+r),o.html="<p>"+d.join("<br />")+"</p>",o.text=d.join("\n"),e.cues.push(o)}return e},Yi.prototype.parse=function(e,t){var i,n,o,a,r,s,l,d,c,u,p,h;for(t=t.replace(/\r/g,""),n=t.split("\n\n"),/^WEBVTT/.test(n[0])&&n.shift(),p=0,h=n.length;h>p;p++){i=n[p],s=i.split("\n");try{r=s[0],u=s[1].match(/([0-9:\.]+)\s*-->\s*([0-9:\.]+)([^\n]*)/).slice(1),l=u[2],d=Dt.flattenTimecode(u[0]),a=Dt.flattenTimecode(u[1]),c=s.slice(2)}catch(g){Pt.warn("SRT Parsing Warning")}o=new Fi(d,a,"cue_"+r),o.html="<p>"+c.join("<br />")+"</p>",o.text=c.join("\n"),null!=l&&l.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-\%]+)/g,function(e,t,i){return o[t]=i,""}),e.cues.push(o)}return e},Wi.prototype.parse=function(e,t){var i,n,o,a,r;return"string"==typeof t&&(t=re.parse(t)),a=Array.prototype.slice.call(t.querySelectorAll("styling style")),a.forEach(function(t,i,n){var o,a,r;r="",a=t.getAttribute("id")||t.getAttribute("xml:id"),o=Array.prototype.slice.call(t.attributes),o.forEach(function(e,t,i){return"tts"===e.prefix?r+=Dt.formatStyleName(e.localName)+":"+e.nodeValue+";":void 0}),e.styles[a]=r}),o=Array.prototype.slice.call(t.querySelectorAll("body [style]")),o.forEach(function(t,i,n){var o;o=t.getAttribute("style"),t.setAttribute("style",e.styles[o])}),r=t.querySelector("tt"),n=r.getAttribute("lang")||r.getAttribute("xml:lang"),(void 0===e.language||null===e.language)&&(e.language=n),i=Array.prototype.slice.call(t.querySelectorAll("body p[begin]")),i.forEach(function(t,n,o){var a,r,s,l,d;l=t.getAttribute("begin"),t.removeAttribute("begin"),null!=t.getAttribute("end")?(s=t.getAttribute("end"),t.removeAttribute("end")):null!=i[n+1]&&(s=i[n+1].getAttribute("begin")),r=new Fi(Dt.flattenTimecode(l),Dt.flattenTimecode(s),"cue_"+n),a=t.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"),null!=a&&(r.align="center"===a?"middle":a,t.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")),d=re.serialize(t),d=d.replace(/\s*xmlns="[^"]*"/,""),r.html=d,d=d.replace(/^<p[^>]*>/,""),d=d.replace(/<\/p>$/,""),d=d.replace(/<br\/>/,"\n"),d=d.replace(/<span style="([^"]*)"/,"<c.$1"),d=d.replace(/<\/span>/,"</c>"),r.text=d,e.cues.push(r)}),e},i(qi,puremvc.Proxy),qi.NAME="LiveCaptionProxy",qi.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1e3},qi.prototype.caption=null,qi.prototype.head=null,qi.prototype.script=null,qi.prototype.timeout=null,qi.prototype.getURL=function(){return this.data.url},qi.prototype.setURL=function(e){return this.data.url=e,e},qi.prototype.start=function(){this.send()},qi.prototype.poll=function(){var e,t=this;e=setTimeout(function(){t.send()},this.data.interval||1e3)},qi.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script),this.script=Dt.loadScript(this.data.base+this.data.url+".js?nocache="+Date.now())},qi.prototype.stop=function(){clearTimeout(timeout)},qi.prototype.parse=function(e){var t,i,n,o,a;if(e.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=e.Ticks)){for(this.caption=new Fi(Dt.flattenTimecode(e.From),Dt.flattenTimecode(e.To),e.Ticks),this.caption.text=e.Text,t="",a=e.Text.split("\n"),n=0,o=a.length;o>n;n++)i=a[n],""!==t&&(t+="<br />"),t+="<span>"+i+"</span>";return this.caption.html="<p>"+t+"</p>",this.sendNotification(qo.CUE_CHANGE,[this.caption]),this.caption}};var qo={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"};i(Xi,Ce),Xi.prototype.execute=function(e){var t,i,o,a,r,s,l,d,c;if(s=e.getBody(),l=this.proxy.getTrack(),null!=l){for(t=l.activeCues,a=l.cues,i=!1,d=0,c=a.length;c>d;d++)o=a[d],s>=o.startTime&&s<o.endTime?n.call(t,o)>=0||(t.push(o),i=!0):(r=t.indexOf(o),-1!==r&&(t.splice(r,1),i=!0));i===!0&&this.sendNotification(qo.CUE_CHANGE,t)}},i(Zi,Ce),Zi.prototype.execute=function(e){var t,i;return t=e.getBody(),i=e.getBody().track,this.proxy.setTracks(i),null==i?void this.sendNotification(qo.ENABLED,!1):(this.proxy.selectRenderer(t),void this.sendNotification(qo.ENABLED,!0))},i(Ji,si),Ji.prototype.execute=function(e){this.proxy.setHidden(!e.getBody()),Ji.__super__.execute.call(this,e)};var Xo={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"};i(Ki,puremvc.SimpleCommand),Ki.prototype.execute=function(e){var t,i,n;t=this.facade.retrieveProxy(tn.NAME),i=t.getTrack(),null==i&&(null!=(n=t.getTracks())?n.length:void 0)>0&&(i=t.autoSelectTrack()),(null!=i?i.isLive:void 0)===!0&&(this.facade.removeCommand(xo.TIME_UPDATE),t=this.facade.retrieveProxy(qi.NAME),null==t&&(t=new qi,this.facade.registerProxy(t)),t.setURL(i.src),t.start())},CaptionParsers={"application/ttml+xml":new Wi,"application/x-subrip":new zi,"text/vtt":new Yi,undefined:new Wi},i(Qi,Ot),Qi.NAME="CaptioningWrapper",Qi.prototype.flashPlugins=[{id:"AdobeCaptionPlugin",src:"#{paths.resources}plugins/AdobeCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AdobeCaptionPlugin",type:"application/x-shockwave-flash"},{id:"AMPCaptionPlugin",src:"#{paths.resources}plugins/AMPCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AMPCaptionPlugin",type:"application/x-shockwave-flash"},{id:"CaptionSettingsPlugin",src:"#{paths.resources}plugins/CaptionSettingsPlugin.swf",blocking:!1,host:"akamai",main:"CaptionSettingsPlugin",type:"application/x-shockwave-flash"}],Qi.prototype.flashView={elements:{captionDisplay:{attributes:{defaultMessage:"Sorry! No captions available for this stream",initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 0px; windowColor :0x000000; windowOpacity: 0; font: Monospaced Serif; fontColor: 0xffffff; fontOpacity: 1; fontBGColor: 0x000000; fontBGOpacity: 0; edgeType: none; edgeColor: 0x000000; edgeOpacity: 1; scroll: Pop-Out; fontSize: 12;"
}},controls:{elements:{captionBtn:{}}}}},Qi.prototype.hidden=!0,Qi.prototype.createXML=function(e){var t,i,n,o;if(n=null!=(o=this.config.flash)?o.subply:void 0,null!=n)try{null!=n.timeMethod&&(i=e.getElementsByTagName("player")[0],i.setAttribute("subply_time_method",n.timeMethod)),null!=n.plugin&&(t=e.firstChild,n=e.getElementsByTagName("subply")[0],null==n&&(n=e.createElement("subply"),t.appendChild(n)),this.createProperty(e,"SUBPLY_URL",this.config.flash.subply.plugin,n))}catch(a){this.facade.logger.error("[AMP CAPTIONING ERROR]",a)}},Qi.prototype.createFlashVars=function(e){var t,i,n,o,a,r,s,l;if(n=this.player.config,null!=(null!=(s=n.media)?s.track:void 0)){if(o=Dt.selectTrack(n.media.track,"captions"),null!=o.src&&""!==o.src&&(e.caption_url=o.src),n.media.track.length>1){for(i=[],t=[],l=n.media.track,a=0,r=l.length;r>a;a++)o=l[a],i.push(o.src),t.push(o.srclang);e.caption_url=i.join(","),e.caption_language=t.join(",")}e.caption_type=null!=o.type?encodeURIComponent(o.type):"application/ttml+xml"}null==e.caption_language&&(e.caption_language="en-us")},Qi.prototype.listNotificationInterests=function(){return Qi.__super__.listNotificationInterests.apply(this,arguments).concat([xo.MEDIA_CHANGE,Po.CAPTIONING_REQUEST,Po.CAPTION_LANG_CHANGE,Po.INITIALIZED])},Qi.prototype.handleNotification=function(e){var t,i,n,o,a;switch(Qi.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),n){case Po.CAPTION_LANG_CHANGE:a="";break;case Po.CAPTIONING_REQUEST:a="visibilitychange",t=t.enabled,this.hidden=!t;break;case xo.MEDIA_CHANGE:i=t,null!=i.track&&(o=Dt.selectTrack(i.track,"captions"),null!=(null!=o?o.src:void 0)&&""!==o.src&&(i.captioningUrl=o.src),i.captioningType=o.type||"application/ttml+xml");break;case Po.INITIALIZED:this.hidden=!this.player.getMediaElement().getPlayerProperty("isCaptionVisible")}null!=a&&""!==a&&this.dispatchEvent(new Tt(a,t))},Qi.prototype.getHidden=function(){return this.hidden},Qi.prototype.setHidden=function(e){return this.hidden=e,this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!e}),e},Qi.prototype.selectTrackByIndex=function(e){},Qi.prototype.selectTrackByLanguage=function(e){this.facade.getMediaElement().setTrackByLanguage(e)},Qi.prototype.changeSettings=function(e){return null!=(null!=e?e.fontFamily:void 0)&&"object"==typeof e.fontFamily?this.facade.getMediaElement().setPlayerProperty("captionSettingsUI",e):(this.hidden=!e.visible,void this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:e.visible,style:this.parseObject(e)}))},Qi.prototype.parseObject=function(e){var t,i,n,o;t={};try{for(n in e)switch(n){case"fontFamily":t.font=e[n];break;case"fontColor":case"backgroundColor":case"edgeColor":case"windowColor":i="fontColor"===n?"font":"backgroundColor"===n?"fontBG":"edgeColor"===n?"edge":"window",-1!==(null!=(o=e[n])?o.indexOf("rgba"):void 0)&&(t[i+"Color"]=this.parseRGBA(e[n]),t[i+"Opacity"]=e[n].replace(/^.*,(.+)\)/,"$1"));break;default:t[n]=e[n]}delete t.visible}catch(a){this.facade.logger.error("Captioning Settings Parse Error",a)}return t},Qi.prototype.parseRGBA=function(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"0x"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},ti.registerPlugin("captioning","flash",Qi),$i.prototype.kind=null,$i.prototype.src=null,$i.prototype.language=null,$i.prototype.cues=null,$i.prototype.label=null,$i.prototype.activeCues=null,$i.prototype.type=null,$i.prototype.styles=null,$i.prototype.isLive=!1,i(en,q),en.prototype.initializeNotifier=function(e){en.__super__.initializeNotifier.call(this,e),this.plugin=this.facade.retrieveProxy(r.NAME),this.media=this.facade.player.retrieveProxy(bt.NAME)},i(tn,we),tn.NAME=r.NAME,tn.TEXT_TRACK_RENDERER="caption-text",tn.prototype.defaults={useNative:!1},tn.prototype.hidden=!0,tn.prototype.tracks=null,tn.prototype.track=null,tn.prototype.activeCaptions=null,tn.prototype.captions=null,tn.prototype.loaded=!0,tn.prototype.rendererMap=null,tn.prototype.settings=null,tn.prototype.getSettings=function(){return this.settings},tn.prototype.setSettings=function(e){this.settings=e},tn.prototype.getUseNative=function(){return this.getValue("useNative")},tn.prototype.getTracks=function(){return this.tracks},tn.prototype.setTracks=function(e){var t,i,n,o,a,r,s,l=this;if(this.tracks=[],this.track=null,null!=e){for(t=e.length,n=0,a=function(){n++,n===t&&(l.sendNotification(qo.TRACKS_LOADED,l.tracks),l.autoSelectTrack())},r=0,s=e.length;s>r;r++)i=e[r],o=new $i(i,a),this.tracks.push(o);return e}},tn.prototype.registerRenderer=function(e){null!=e&&(e.proxy=this,this.rendererMap.push(e))},tn.prototype.retrieveRenderer=function(e){var t,i,n,o;for(o=this.rendererMap,i=0,n=o.length;n>i;i++)if(t=o[i],t.getRendererName()===e)return t},tn.prototype.removeRenderer=function(e){var t,i;return i=this.retrieveRenderer(e),i.proxy=null,null==i?null:(t=this.rendererMap.indexOf(i),this.rendererMap.splice(t,1),i)},tn.prototype.getRenderer=function(){return this.renderer},tn.prototype.setRenderer=function(e){return e===this.renderer?e:(null!=this.renderer&&this.facade.removeMediator(tn.TEXT_TRACK_RENDERER),this.renderer=e,null!=this.renderer&&this.facade.registerMediator(this.renderer),e)},tn.prototype.selectRenderer=function(e){var t,i,n,o,a,r,s,l,d;if(i=null,o=e.track,null!=o){for(a=0,s=o.length;s>a;a++){for(n=o[a],d=this.rendererMap,r=0,l=d.length;l>r;r++)if(t=d[r],t.canUseResource(n)===!0){i=t;break}if(null!=i)break}return this.setRenderer(i),i}},tn.prototype.getTrack=function(){return this.track},tn.prototype.setTrack=function(e){return this.track=e,this.captions=this.track.cues,this.activeCaptions=[],this.sendNotification(qo.TRACK_SELECTED,this.track),e},tn.prototype.selectTrackByIndex=function(e){var t;return e>=0&&e<this.tracks.length&&(t=this.tracks[e],this.setTrack(t)),t},tn.prototype.selectTrackByLanguage=function(e){var t,i,n,o,a;for(a=this.tracks,n=0,o=a.length;o>n;n++)if(t=a[n],t.language===e){i=t;break}return null!=i&&this.setTrack(i),i},tn.prototype.getHidden=function(){return this.hidden},tn.prototype.setHidden=function(e){this.hidden=e;try{localStorage.setItem(Lo.PREFIX+"caption-enabled",!this.hidden)}catch(t){this.facade.logger.error("LocalStorage Not Supported on this Browser",t)}return e},tn.prototype.autoSelectTrack=function(){var e,t,i;return e=null!=(i=this.facade.player.retrieveProxy(at.NAME))?i.getLanguage():void 0,null!=e&&(e=e.split("-").shift(),t=this.selectTrackByLanguage(e)),null==t&&(t=this.tracks[0],this.setTrack(t)),t},i(nn,en),nn.prototype.componentName=tn.TEXT_TRACK_RENDERER,nn.prototype.captionText=null,nn.prototype.getRendererName=function(){return"html"},nn.prototype.canUseResource=function(e){var t;return null==e?!1:(t=[Dt.mimeTypes.srt,Dt.mimeTypes.ttml,Dt.mimeTypes.vtt],-1!==t.indexOf(e.type))},nn.prototype.getCaptionDisplayHeight=function(){var e,t,i;for(e=0,t=i=this.viewComponent.childNodes.length;t&&(--t,3!==i||0!==t);)e+=Dt.getActualSize(this.viewComponent.childNodes[t]).height;return e+"px"},nn.prototype.scrollCaptions=function(e,t,i){var n,o,a=this;null==e&&(e=this.viewComponent.scrollHeight),null==t&&(t=this.viewComponent.scrollTop),null==i&&(i=20),o=(e-t)/i,(n=function(){var i;if(e>t)return a.viewComponent.scrollTop=t+=o,setTimeout(n,20);for(i=[];a.viewComponent.childNodes.length>2;)i.push(a.viewComponent.removeChild(a.viewComponent.firstChild));return i})()},nn.prototype.listNotificationInterests=function(){return[qo.CUE_CHANGE,xo.CHANGE_MEDIA]},nn.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p;switch(r=e.getName(),t=e.getBody(),r){case xo.CHANGE_MEDIA:this.viewComponent.innerHTML="";break;case qo.CUE_CHANGE:for(i="",l=0,c=t.length;c>l;l++)o=t[l],i+=o.html;switch(this.plugin.getSettings().scroll){case"popout":this.viewComponent.innerHTML=i;break;case"rollon":case"painton":for(s=document.createElement("div"),s.innerHTML=i,p=s.childNodes,a=d=0,u=p.length;u>d;a=++d)n=p[a],this.viewComponent.appendChild(n);this.viewComponent.style.maxHeight=this.getCaptionDisplayHeight(),this.scrollCaptions()}}},i(on,W),on.prototype.video=null,on.prototype.index=-1,on.prototype.plugin=null,on.NAME=tn.TEXT_TRACK_RENDERER,on.prototype.getRendererName=function(){return"native"},on.prototype.canUseResource=function(e){var t,i,n,o;return null==e?!1:(t=null!=document.createElement("video").textTracks)?(n=[Dt.mimeTypes.vtt,Dt.mimeTypes.cea608,Dt.mimeTypes.cea708],i=e.type,i===n[1]||i===n[2]?!0:(o=/iphone|ipad/.test(Dt.getDevice())||this.proxy.getUseNative(),o?-1!==n.indexOf(e.type):!1)):!1},on.prototype.onRegister=function(){this.plugin=this.facade.retrieveProxy(tn.NAME),this.facade.player.getMediaElement().textTracks.addEventListener("addtrack",this.updateTrack.bind(this))},on.prototype.listNotificationInterests=function(){return[qo.VISIBILITY_CHANGE,qo.TRACK_SELECTED,qo.TRACKS_LOADED,xo.LOADED_METADATA,xo.CAN_PLAY_THROUGH]},on.prototype.handleNotification=function(e){var t,i,n,o,a,r,s;switch(t=e.getBody(),e.getName()){case qo.TRACKS_LOADED:this.tracks=t;break;case qo.TRACK_SELECTED:this.facade.player.getMediaElement().textTracks.length&&(n=this.facade.player.getMediaElement().textTracks[this.index]),null!=n&&(n.mode="hidden"),this.index=this.plugin.getTracks().indexOf(t),this.updateTrack();break;case qo.VISIBILITY_CHANGE:case xo.CAN_PLAY_THROUGH:this.updateTrack();break;case xo.LOADED_METADATA:if(null==this.tracks)return;for(o=this.facade.player.getMediaElement(),s=this.tracks,a=0,r=s.length;r>a;a++)n=s[a],n.type===Dt.mimeTypes.vtt&&(i=document.createElement("track"),i.src=n.src,null!=n.kind&&(i.kind=n.kind),null!=n.srclang&&(i.srclang=n.srclang),null!=n.label&&(i.label=n.label),i["default"]="default"in n,o.appendChild(i));this.tracks=null}},on.prototype.updateTrack=function(){var e,t,i,n,o;for(o=this.facade.player.getMediaElement().textTracks,e=i=0,n=o.length;n>i;e=++i)if(t=o[e],/subtitles|captions/.test(t.kind)){if(null==t)return;this.index=e,t.mode=this.plugin.getHidden()?"hidden":"showing"}},i(an,en),an.prototype.componentName="captioning-settings",an.prototype.captioningObject={"default":{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"1.3em",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null},an.prototype.settingsUiVisible=!1,an.prototype.captionningStyle=null,an.prototype.swatchColorCurr=null,an.prototype.swatchOpacityCurr=null,an.prototype.colorPicker=null,an.prototype.colorPickerOpacity=null,an.prototype.advancedSettingContainer=null,an.prototype.list={font:null,language:null,edge:null,size:null,scroll:null},an.prototype.picker={color:null,background:null,edge:null,window:null},an.prototype.toggle={ON:null,OFF:null,disabled:!1},an.prototype.scroll={type:"popout",typeSpeed:5,lines:2,scrollTimer:[],speed:10,popout:null,rollup:null,painton:null},an.prototype.onRegister=function(){var e,t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_,E,A=this;for(an.__super__.onRegister.call(this),m=this.create("captioning-titlebar"),y=this.create("captioning-title",m,"span",this.localizationManager.getString($.MSG_CC_TITLE)),this.toggle.OFF=this.create("captioning-toggle-btn",m,"div","OFF"),this.toggle.ON=this.create("captioning-toggle-btn",m,"div","ON"),_t.create(this.toggle.ON,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.toggle.disabled||A.toggleButtonHandler(!0),!1}),this.toggle.disabled||ot.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),_t.create(this.toggle.OFF,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.toggle.disabled||A.toggleButtonHandler(!1),!1}),i=this.create("captioning-row"),n=this.create("captioning-label",i,"span",this.localizationManager.getString($.MSG_CC_LANGUAGE)),this.list.language=this.create("captioning-dropdown",i,"select"),this.languageListPopulate(),_t.create(this.list.language,"change",function(e){var t;return e.stopImmediatePropagation(),t="None"!==e.target.selectedValue,A.sendNotification(qo.VISIBILITY_CHANGE,t),t&&A.facade.setTrack(A.facade.selectTrackByIndex(e.target.selectedIndex)),!1}),n=this.create("captioning-label",i,"span",this.localizationManager.getString($.MSG_CC_PRESETS)),l=this.create(["captioning-preset","captioning-preset1"],i,null,"Aa"),d=this.create(["captioning-preset","captioning-preset2"],i,null,"Aa"),c=this.create(["captioning-preset","captioning-preset3"],i,null,"Aa"),u=this.create(["captioning-preset","captioning-preset4"],i,null,"Aa"),_t.create(l,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset1),A.applyCaptioningStyle(),!1}),_t.create(d,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset2),A.applyCaptioningStyle(),!1}),_t.create(c,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset3),A.applyCaptioningStyle(),!1}),_t.create(u,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.captioningObject.selected=A.cloneObject(A.captioningObject.preset4),A.applyCaptioningStyle(),!1}),this.advancedSettingContainer=this.create("captioning-advanced-container"),i=this.create("captioning-row",this.advancedSettingContainer),n=this.create("captioning-label",i,"span",this.localizationManager.getString($.MSG_CC_FONT)),this.list.font=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.font,"option","Monospaced Serif").value="'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",this.create(null,this.list.font,"option","Proportional Serif").value="'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif",this.create(null,this.list.font,"option","Monospaced Sans-Serif").value="'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace",this.create(null,this.list.font,"option","Proportional Sans-Serif").value="Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif",this.create(null,this.list.font,"option","Casual").value="'Comic Sans MS', Impact, Handlee, fantasy",this.create(null,this.list.font,"option","Cursive").value="'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive",this.create(null,this.list.font,"option","Small Capitals").value="'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps",_t.create(this.list.font,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.selected.fontFamily=e.target.value,A.applyCaptioningStyle(!1),!1}),i.appendChild(this.list.font),n=this.create("captioning-label",i,"span",this.localizationManager.getString($.MSG_CC_EDGE)),this.list.edge=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.edge,"option","None").value="text-shadow: 0px 0px 0px",this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px",this.create(null,this.list.edge,"option","Left Drop Shadow").value="text-shadow: -3px 3px 2px",this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px",this.create(null,this.list.edge,"option","Right Drop Shadow").value="text-shadow: 3px 3px 2px",this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px",_t.create(this.list.edge,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.selected.edgeType=e.target.value,A.applyCaptioningStyle(!1),!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label",i,"span",this.localizationManager.getString($.MSG_CC_SIZE)),this.list.size=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.size,"option","Small").value=".8em",this.create(null,this.list.size,"option","Medium").value="1.3em",this.create(null,this.list.size,"option","Large").value="2.3em",this.list.size.selectedIndex=1,_t.create(this.list.size,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.selected.size=e.target.value,A.applyCaptioningStyle(!1),!1}),this.create("captioning-label",i,"span",this.localizationManager.getString($.MSG_CC_SCROLL)),this.list.scroll=this.create("captioning-dropdown",i,"select"),this.create(null,this.list.scroll,"option","Pop-Out").value="popout",this.create(null,this.list.scroll,"option","Roll-On").value="rollon",this.create(null,this.list.scroll,"option","Paint-On").value="painton",_t.create(this.list.scroll,"change",function(e){e.stopImmediatePropagation(),A.captioningObject.selected.scroll=e.target.value,A.scroll.type=e.target.value,A.plugin.setSettings({scroll:A.scroll.type});try{"painton"===e.target.value?ot.add("akamai-captioning-typed",A.facade.proxy.renderer.viewComponent):ot.remove("akamai-captioning-typed",A.facade.proxy.renderer.viewComponent)}catch(t){A.facade.logger.error("AMP Captioning Error",t)}return!1}),i=this.create("captioning-row",this.advancedSettingContainer),this.create("captioning-label-small",i,"span",this.localizationManager.getString($.MSG_CC_COLOR)),this.picker.color=this.create("captioning-color-picker",i),this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,_t.create(this.picker.color,_t.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPickerHandler(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="152px",A.colorPicker.name="fontColor",A.captioningObject.instance=A.picker.color,-1!==A.picker.color.style.backgroundColor.indexOf("rgba")&&(t=A.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString($.MSG_CC_BACKGROUND)),this.picker.background=this.create("captioning-color-picker",i),this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,_t.create(this.picker.background,_t.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPickerHandler(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="264px",A.colorPicker.name="backgroundColor",A.captioningObject.instance=A.picker.background,-1!==A.picker.background.style.backgroundColor.indexOf("rgba")&&(t=A.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString($.MSG_CC_EDGE)),this.picker.edge=this.create("captioning-color-picker",i),this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,_t.create(this.picker.edge,_t.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPickerHandler(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="212px",A.colorPicker.name="edgeColor",A.captioningObject.instance=A.picker.edge,-1!==A.picker.edge.style.backgroundColor.indexOf("rgba")&&(t=A.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),this.create("captioning-label-small",i,"span",this.localizationManager.getString($.MSG_CC_WINDOW)),this.picker.window=this.create("captioning-color-picker",i),this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor,_t.create(this.picker.window,_t.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),A.colorPickerHandler(),A.colorPicker.style.display="block"===A.colorPicker.style.display?"none":"block","block"===A.colorPicker.style.display&&(null!=(i=A.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),A.colorPicker.style.left="300px",A.colorPicker.name="windowColor",A.captioningObject.instance=A.picker.window,-1!==A.picker.window.style.backgroundColor.indexOf("rgba")&&(t=A.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),A.colorPickerOpacity.value=null!=t?t:1),!1}),p=this.create(["caption-text","caption-text-preview"]),h=this.create(null,p,"p",this.localizationManager.getString($.MSG_CC_PREVIEW_TEXT)),i=this.create("captioning-footer-container"),e=this.create("captioning-footer-button",i,"div",this.localizationManager.getString($.MSG_CC_APPLY)),t=this.create("captioning-footer-button",i,"div",this.localizationManager.getString($.MSG_CC_CANCEL)),g=this.create("captioning-footer-button",i,"div",this.localizationManager.getString($.MSG_CC_RESET)),this.facade.getViewComponent().clientWidth>=0&&(v=this.create("captioning-advanced-button",i,"div",this.localizationManager.getString($.MSG_CC_SHOW_ADVANCED)),_t.create(v,_t.CLICK,function(e){return e.stopImmediatePropagation(),"block"===A.advancedSettingContainer.style.display?(e.target.innerHTML=A.localizationManager.getString($.MSG_CC_SHOW_ADVANCED),A.advancedSettingContainer.style.display="none",A.colorPicker.style.display="none"):(e.target.innerHTML=A.localizationManager.getString($.MSG_CC_HIDE_ADVANCED),A.advancedSettingContainer.style.display="block"),!1})),_t.create(e,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.sendNotification(qo.SETTINGS_VISIBILITY_CHANGE,A.settingsUiVisible),A.applyCaptioningStyle(!1,!0),A.sendNotification(qo.SETTINGS_CHANGE,A.captioningObject.selected),!1}),_t.create(t,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.sendNotification(qo.SETTINGS_VISIBILITY_CHANGE,A.settingsUiVisible),!1}),_t.create(g,_t.CLICK,function(e){return e.stopImmediatePropagation(),A.colorPicker.style.display="none",A.applyCaptioningStyle(!0),!1}),this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style"),this.captionningStyle.type="text/css",r=["#000000","#660000","#990000","#ff0000","#000066","#660066","#990066","#ff0066","#006600","#666600","#996600","#ff6600","#006666","#666666","#996666","#ff6666","#009900","#669966","#999900","#ff9900","#009966","#669966","#999966","#ff9966","#00ff00","#66ff00","#99ff00","#ffff00","#00ff66","#66ff66","#99ff66","#ffff66","#000099","#660099","#990099","#ff0099","#0000ff","#6600ff","#9900ff","#ff00ff","#006699","#666699","#996699","#ff6699","#0066ff","#6666ff","#9966ff","#ff66ff","#009999","#669999","#999999","#ff9999","#0099ff","#6699ff","#9999ff","#ff99ff","#0099ff","#66ff99","#99ff99","#ffff99","#00ffff","#66ffff","#99ffff","#ffffff"],this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement),f=this.create("colorpicker-swatch",!1,null,"&nbsp;"),_=0,E=r.length;E>_;_++)a=r[_],f.style.backgroundColor=a,o=f.cloneNode(),_t.create(o,_t.CLICK,function(e){return e.stopImmediatePropagation(),null!==A.swatchColorCurr&&(A.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)"),A.swatchColorCurr=e.target,A.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)",A.captioningObject.instance.style.backgroundColor=A.captioningObject.selected[A.colorPicker.name]=A.toRGBA(e.target.style.backgroundColor),A.applyCaptioningStyle(!1),!1}),this.colorPicker.appendChild(o);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString($.MSG_CC_OPACITY)),this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input"),this.colorPickerOpacity.type="range",this.colorPickerOpacity.min=0,this.colorPickerOpacity.max=1,this.colorPickerOpacity.step=.1,this.colorPickerOpacity.value=1,_t.create(this.colorPickerOpacity,"change",function(e){return e.stopImmediatePropagation(),A.captioningObject.instance.style.backgroundColor=A.captioningObject.selected[A.colorPicker.name]=A.toRGBA(A.captioningObject.instance.style.backgroundColor),A.applyCaptioningStyle(!1),!1}),this.swatchOpacityCurr=this.colorPickerOpacity,null!=localStorage.getItem(Lo.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(Lo.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1,!this.facade.getHidden())):(s=!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),s||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(s)),this.plugin.setSettings(Object.keys(this.captioningObject.selected).length>0?this.captioningObject.selected:this.captioningObject["default"]),this.toggleButtonHandler(!this.facade.getHidden(),!1)},an.prototype.toRGBA=function(e){var t,i;return i=e.replace(/^rgba?\(|\s+|\)$/g,"").split(","),t="rgba("+i[0]+","+i[1]+","+i[2]+","+this.swatchOpacityCurr.value+")"},an.prototype.languageListPopulate=function(){var e,t,i,n,o,a;if(i=this.facade.getTracks(),null!=i){for(this.list.language.innerHTML="",n=0,o=i.length;o>n;n++)t=i[n],e=t.language,e=this.facade.player.retrieveProxy(at.NAME).getLanguageString(e),null!=e&&""!==e&&(this.create(null,this.list.language,"option",e).value=t.language);this.toggle.disabled=0===this.list.language.childElementCount,this.toggle.disabled&&this.create(null,this.list.language,"option","None"),this.list.language.value=null!=(a=this.facade.getTrack())?a.language:void 0}},an.prototype.colorPickerHandler=function(e){var t=this;return null==e&&(e=!1),e?_t.unbind(document,_t.CLICK):void _t.create(document,_t.CLICK,function(e){return e.stopImmediatePropagation(),t.colorPickerHandler(!0),"akamai-colorpicker-palette"!==e.target.className&&"akamai-opacity-label"!==e.target.className&&"akamai-colorpicker-slider"!==e.target.className&&"none"!==t.colorPicker.style.display&&(t.colorPicker.style.display="none"),!1})},an.prototype.cloneObject=function(e){var t,i;t={};for(i in e)t[i]=e[i];return t},an.prototype.applyCaptioningStyle=function(e,t,i){var n,o,a,r,s,l;if(null==e&&(e=!1),null==t&&(t=!1),null==i&&(i=!1),e?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"text-shadow: 0px 0px 0px",this.list.size.value=this.captioningObject["default"].size,this.list.scroll.value=this.captioningObject["default"].scroll,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null==this.captioningObject.selected.fontFamily||i||(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"text-shadow: 0px 0px 0px",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),null!=this.captioningObject.selected.scroll?this.list.scroll.value=this.captioningObject.selected.scroll:this.captioningObject.selected.scroll=this.list.scroll.value,this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor)),r="font-family: "+(e?this.captioningObject["default"].fontFamily:i?this.captioningObject.selected.fontFamily:this.list.font.value)+" !important;",a=(e?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;",s="font-size: "+(e?this.captioningObject["default"].size:this.list.size.value)+" !important;",o="color: "+(e?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" !important;",n="background-color: "+(e?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" !important;",l="background-color: "+(e?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" !important;",t){this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText=".akamai-caption-text { "+r+s+a+l+" }.akamai-caption-text p { "+o+n+" } video::-webkit-media-text-track-display-backdrop { "+l+" } video::-webkit-media-text-track-display-backdrop span { "+r+s+a+n+" } video::-webkit-media-text-track-display-backdrop { "+l+" } video::cue { "+o+r+s+a+n+" }";try{e!==!1||i||localStorage.setItem(Lo.PREFIX+"captioningDefault",JSON.stringify(this.captioningObject.selected))}catch(d){this.facade.logger.error("LocalStorage Not Supported on this Browser",d)}}else this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+r+s+a+l+" }.akamai-caption-text-preview p { "+o+n+" }"},an.prototype.toggleButtonHandler=function(e,t){null==e&&(e=!1),null==t&&(t=!0),e?(ot.add("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix),ot.remove("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix)):(ot.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),ot.remove("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix)),t&&this.sendNotification(qo.VISIBILITY_CHANGE,e),this.sendNotification(Xo.UPDATE_SETTINGS,{captioning:{hidden:!e}})},an.prototype.listNotificationInterests=function(){return[qo.SETTINGS_VISIBILITY_CHANGE,qo.TOGGLE_SETTINGS_VISIBILITY,qo.SETTINGS_CHANGE,qo.TRACK_SELECTED,qo.VISIBILITY_CHANGE]},an.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f;switch(l=e.getName(),t=e.getBody(),l){case qo.SETTINGS_VISIBILITY_CHANGE:case qo.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none"),this.settingsUiVisible=!this.settingsUiVisible,this.settingsUiVisible&&1===this.list.language.length&&this.languageListPopulate(),d=this.settingsUiVisible?xo.ADD_APPLICATION_STATE:xo.REMOVE_APPLICATION_STATE,u="cc-setting-active",this.sendNotification(d,u);break;case qo.SETTINGS_CHANGE:a=!1;for(r in t)switch(p=t[r],r){case"fontFamily":case"fontSize":case"scroll":case"edgeType":for(s="fontFamily"===r?"font":"fontSize"===r?"size":"edgeType"===r?"edge":"scroll",
f=this.list[s].options,o=h=0,g=f.length;g>h;o=++h)if(c=f[o],"fontFamily"===r&&"object"==typeof p)for(i in p)n=p[i],"default"===i&&(this.captioningObject.selected.fontFamily=n,a=!0),new RegExp(i,"i").test(c.label)&&(new RegExp("^"+n).test(c.value)||(c.value=n+","+c.value),c.selected&&(this.captioningObject.selected.fontFamily=c.value));else if(new RegExp(p,"i").test(c.label)&&(this.list[s].selectedIndex=o,"fontSize"===r&&(r="size"),this.captioningObject.selected[r]=c.value,"scroll"===r)){this.scroll.type=this.captioningObject.selected.scroll=c.value,this.plugin.setSettings({scroll:this.scroll.type});try{"painton"===c.value?ot.add("akamai-captioning-typed",this.facade.proxy.renderer.viewComponent):ot.remove("akamai-captioning-typed",this.facade.proxy.renderer.viewComponent)}catch(m){this.facade.logger.error("AMP Captioning Error",m)}}break;case"backgroundColor":case"edgeColor":case"fontColor":case"windowColor":this.captioningObject.selected[r]=p}this.applyCaptioningStyle(!1,!0,a),null!=t.visible&&t.visible!==!this.facade.getHidden()&&this.facade.setHidden(!t.visible);break;case qo.TRACK_SELECTED:this.list.language.value=e.body.language;break;case qo.VISIBILITY_CHANGE:this.toggleButtonHandler(t,!1)}},i(rn,Gi),rn.prototype.componentName="captioning",rn.prototype.captionButton=null,rn.prototype.onRegister=function(){var e;e=new kt(this.localizationManager.getString($.MSG_CC),this.viewComponent,null,"caption",this.onclick.bind(this)),this.facade.registerMediator(e),this.captionButton=e.getViewComponent(),this.sendNotification(xo.ADD_CONTROL,this.captionButton),rn.__super__.onRegister.call(this),"true"===("undefined"!=typeof localStorage&&null!==localStorage?localStorage.getItem(Lo.PREFIX+"caption-enabled"):void 0)&&this.facade.setHidden(!1)},rn.prototype.onclick=function(e){var t;return e.stopImmediatePropagation(),"embedded"===(null!=(t=this.plugin.getTrack())?t.type:void 0)?this.sendNotification(qo.VISIBILITY_CHANGE,this.plugin.getHidden()):e.currentTarget===this.captionButton&&this.sendNotification(qo.SETTINGS_VISIBILITY_CHANGE,this.plugin.getHidden()),!1},rn.prototype.listNotificationInterests=function(){return[qo.VISIBILITY_CHANGE,qo.ENABLED,qo.TRACK_SELECTED]},rn.prototype.handleNotification=function(e){var t,i,n;switch(t=e.getBody(),i=t?xo.ADD_APPLICATION_STATE:xo.REMOVE_APPLICATION_STATE,e.getName()){case qo.TRACK_SELECTED:n="cc-embedded",i="embedded"===t.type?xo.ADD_APPLICATION_STATE:xo.REMOVE_APPLICATION_STATE;break;case qo.VISIBILITY_CHANGE:n="cc-active";break;case qo.ENABLED:i=t?xo.ADD_CONTROL_STATE:xo.REMOVE_CONTROL_STATE,n="cc-enabled",t||this.sendNotification(xo.REMOVE_APPLICATION_STATE,"cc-active")}this.sendNotification(i,n)},i(sn,it),sn.NAME="Feature",sn.prototype.featureName=null,sn.prototype.getFeatureName=function(){return this.featureName},sn.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification(Wo.REGISTER_FEATURE,this)},sn.prototype.onRegister=function(){this.registerFeature(),sn.__super__.onRegister.call(this)},sn.prototype.listNotificationPublications=function(){return sn.__super__.listNotificationPublications.call(this).concat([Wo.REGISTER_FEATURE])},i(ln,Ot),ln.NAME="ShareWrapper",ln.prototype.controls=["share","facebook","twitter"],ln.prototype.flashView={elements:{controls:{elements:{shareBtn:{}}}}},ln.prototype.getFeatureName=function(){return"share"},ln.prototype.createFlashVars=function(e){return null==e.share_mode&&(e.share_mode=2),e},ln.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d;if(t=null!=(a=this.player.config)&&null!=(r=a.flash)&&null!=(s=r.view)&&null!=(l=s.elements)?l.controls:void 0,null!=t){for(null==t.elements&&(t.elements={}),d=this.controls,n=0,o=d.length;o>n;n++)i=d[n],this.config[i]===!0&&null==t.elements[i+"Btn"]&&(t.elements[i+"Btn"]={});return e}},ln.prototype.listNotificationInterests=function(){return ln.__super__.listNotificationInterests.call(this).concat([Po.SHARE,Po.SHARE_REQUEST])},ln.prototype.handleNotification=function(e){var t,i,n;switch(ln.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),i){case Po.SHARE:case Po.SHARE_REQUEST:n="share"}null!=n&&this.dispatchEvent(new Tt(n,t))},ti.registerPlugin("share","flash",ln),i(dn,Gi),dn.prototype.componentName="share",dn.prototype.shareControl=null,dn.prototype.shareSeparator=null,dn.prototype.embed=null,dn.prototype.onRegister=function(){this.sendNotification(xo.ADD_CONTROL_STATE,"share-enabled"),this.shareControl=this.create(["share","control"],!1),this.shareSeparator=this.create(["share","separator"],this.shareControl),this.createButton("share"),this.plugin.getFacebook()===!0&&this.createButton("facebook"),this.plugin.getTwitter()===!0&&this.createButton("twitter"),this.sendNotification(xo.ADD_CONTROL,this.shareControl),dn.__super__.onRegister.call(this)},dn.prototype.createButton=function(e){var t;t=new kt(null,this.shareControl,null,e,this.clickHandler.bind(this,e)),this.facade.registerMediator(t)},dn.prototype.clickHandler=function(e,t){return t.stopImmediatePropagation(),this.sendNotification(xo.DISPATCH_EVENT,new Tt("share",{provider:e,link:this.plugin.getLink(),embed:this.plugin.getEmbed()})),!1},dn.prototype.listNotificationInterests=function(){return[xo.MEDIA_CHANGE]},dn.prototype.handleNotification=function(e){var t,i,n;switch(n=e.getName(),t=e.getBody(),n){case xo.MEDIA_CHANGE:i=t,null!=i.embed?this.sendNotification(xo.ADD_CONTROL_STATE,"share-enabled"):this.sendNotification(xo.REMOVE_CONTROL_STATE,"share-enabled")}},i(cn,we),cn.NAME=r.NAME,cn.prototype.defaults={facebook:!1,twitter:!1},cn.prototype.loaded=!0,cn.prototype.link=null,cn.prototype.embed=null,cn.prototype.getEmbed=function(){return this.embed},cn.prototype.setEmbed=function(e){return this.embed=e},cn.prototype.getLink=function(){return this.link},cn.prototype.setLink=function(e){return this.link=e},cn.prototype.getFacebook=function(){return this.getConfigurationData().facebook},cn.prototype.setFacebook=function(e){return this.data.facebook=e},cn.prototype.getTwitter=function(){return this.getConfigurationData().twitter},cn.prototype.setTwitter=function(e){return this.data.twitter=e},i(un,puremvc.SimpleCommand),un.prototype.execute=function(e){var t,i;t=e.getBody(),i=this.facade.retrieveProxy(cn.NAME),i.setEmbed(t.embed),i.setLink(t.link)},i(pn,sn),pn.prototype.featureName="captioning",pn.prototype.moduleName="captioning",pn.prototype.createController=function(){pn.__super__.createController.call(this),this.registerCommand(xo.CHANGE_MEDIA,Zi),this.registerCommand(xo.STARTED,Ki),this.registerCommand(xo.TIME_UPDATE,Xi),this.registerCommand(qo.VISIBILITY_CHANGE,Ji),this.registerCommand(qo.ENABLED,si),this.registerCommand(qo.TRACK_SELECTED,si),this.registerCommand(qo.TRACKS_LOADED,si),this.registerCommand(qo.CUE_CHANGE,si)},pn.prototype.createModel=function(){this.proxy=new tn(this.config),this.registerProxy(this.proxy)},pn.prototype.createView=function(){var e,t;e=new rn,this.registerMediator(e),t=e.viewComponent,this.registerMediator(new an(t)),this.proxy.registerRenderer(new on(t)),this.proxy.registerRenderer(new nn(t))},pn.prototype.listNotificationInterests=function(){return[xo.LOADED_METADATA,xo.CAN_PLAY_THROUGH,xo.CHANGE_MEDIA,xo.STARTED,xo.TIME_UPDATE,qo.TOGGLE_SETTINGS_VISIBILITY]},pn.prototype.listNotificationPublications=function(){var e,t;return pn.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in qo)t=qo[e],t!==qo.TOGGLE_SETTINGS_VISIBILITY&&i.push(t);return i}()).concat([xo.ADD_CONTROL,xo.REMOVE_CONTROL,Xo.UPDATE_SETTINGS,xo.ADD_CONTROL_STATE,xo.REMOVE_CONTROL_STATE])},pn.prototype.getHidden=function(){return this.proxy.getHidden()},pn.prototype.setHidden=function(e){return this.sendNotification(qo.VISIBILITY_CHANGE,!e),e},pn.prototype.getTracks=function(){return this.proxy.getTracks()},pn.prototype.getTrack=function(){return this.proxy.getTrack()},pn.prototype.setTrack=function(e){return this.proxy.setTrack(e),e},pn.prototype.selectTrackByIndex=function(e){return this.proxy.selectTrackByIndex(e)},pn.prototype.selectTrackByLanguage=function(e){return this.proxy.selectTrackByLanguage(e)},pn.prototype.changeSettings=function(e){return this.sendNotification(qo.SETTINGS_CHANGE,e),e},ti.registerPlugin("captioning","html",pn),i(hn,ue),hn.prototype.configurationName="comscore",hn.NAME=r.NAME,hn.prototype.defaults={url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}},hn.prototype.adStart=function(){var e;e=this.constructURL("ads","started"),Dt.beacon(e)},hn.prototype.videoStart=function(){var e;e=this.constructURL("video","started"),Dt.beacon(e)},hn.prototype.constructURL=function(e,t){var i,n,o,a,r,s,l,d,c,u,p,h,g;if(i={},o=null!=(p=this.value.events)?p[e]:void 0,null!=o)for(c=0,u=o.length;u>c;c++)a=o[c],a.type===t&&(n=a);h=this.value.data;for(r in h)d=h[r],i[r]=(null!=n&&null!=(g=n.data)?g[r]:void 0)||d;null==i.c7&&(i.c7=document.location.href.substr(0,512)),null==i.c8&&(i.c8=document.referrer.substr(0,512)),null==i.c9&&(i.c9=document.title),null==i.cv&&(i.cv="2.0"),i.rn=Date.now(),l=this.value.url,s=[];for(r in i)d=i[r],null!=d&&""!==d&&s.push(r+"="+escape(d));return s.length>0&&(l+="?"+s.join("&")),l.substr(0,2080)},i(gn,Ot),gn.NAME="ComscoreWrapper",gn.prototype.flashPlugins=[{id:"ComscorePlugin",src:"#{paths.resources}plugins/ComscorePlugin.swf",blocking:!1,host:"akamai",main:"ComscorePlugin",type:"application/x-shockwave-flash"}],gn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_;t=e.firstChild,r=e.getElementsByTagName("metrics")[0],null==r&&(r=e.createElement("metrics"),t.appendChild(r)),p=e.createElement("vendor"),p.setAttribute("id","comscore"),r.appendChild(p),a={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}},d=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}],y=this.config.events;for(u in y)if(o=y[u],null!=o&&o.length>0)for(h=0,f=o.length;f>h;h++)for(n=o[h],s=e.createElement("property"),s.setAttribute("key",a[u][n.type]),p.appendChild(s),i=e.createElement("property"),i.setAttribute("key","COMSCORE_CSURL"),c=re.createTextContent(e,this.config.url),i.appendChild(c),s.appendChild(i),g=0,m=d.length;m>g;g++)l=d[g],c=(null!=(v=n.data)?v[l.value]:void 0)||(null!=(_=this.config.data)?_[l.value]:void 0),null!=c&&""!==c&&(i=e.createElement("property"),i.setAttribute("key",l.key),c=re.createTextContent(e,c),i.appendChild(c),s.appendChild(i));return e},i(fn,puremvc.SimpleCommand),fn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(hn.NAME),t.adStart()},i(mn,puremvc.SimpleCommand),mn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(hn.NAME),t.videoStart()},i(yn,sn),yn.prototype.moduleName="share",yn.prototype.featureName="share",yn.prototype.createModel=function(){this.registerProxy(new cn(this.config))},yn.prototype.createController=function(){yn.__super__.createController.call(this),this.registerCommand(xo.MEDIA_CHANGE,un)},yn.prototype.createView=function(){this.registerMediator(new dn)},yn.prototype.listNotificationInterests=function(){return[xo.MEDIA_CHANGE]},yn.prototype.listNotificationPublications=function(){return yn.__super__.listNotificationPublications.apply(this,arguments).concat([xo.ADD_CONTROL,xo.REMOVE_CONTROL,xo.ADD_CONTROL_STATE,xo.REMOVE_CONTROL_STATE])},ti.registerPlugin("share","html",yn),ti.registerPlugin("share","external",yn),i(vn,Ot),vn.NAME="ComscoreStreamsenseWrapper",vn.prototype.flashPlugins=[{id:"ComscoreStreamSensePlugin",src:"#{paths.resources}plugins/ComscoreStreamSensePlugin.swf",blocking:!1,host:"akamai",main:"ComscoreStreamSensePlugin"}],vn.prototype.createXML=function(e){var t,i,n,o,a,r,s;for(t=e.firstChild,i=e.getElementsByTagName("metrics")[0],null==i&&(i=e.createElement("metrics"),t.appendChild(i)),a=e.createElement("vendor"),a.setAttribute("id","comscoreStreamSense"),i.appendChild(a),o=[{value:this.config.data.clientId,key:"C2"},{value:this.config.data.publisherSecret,key:"PUBLISHER_SECRET"},{value:this.config.data.appVersion,key:"APP_VERSION"},{value:this.config.data.metadata,key:"metadata"}],r=0,s=o.length;s>r;r++)n=o[r],null!=n.value&&this.createProperty(e,n.key,n.value,a);return e},i(_n,we),_n.NAME=r.NAME,_n.prototype.defaults={plugin:{js:null},data:{clientId:null,publisherSecret:null,appVersion:null,metadata:null}},_n.prototype.myStreamingTag=null,_n.prototype.sdk=null,_n.prototype.getScript=function(){return this.config.plugin.js},_n.prototype.initialize=function(){_n.__super__.initialize.call(this),this.sdk=akamai.amp.ns_,null!=this.sdk&&null===this.myStreamingTag&&(this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId}))},_n.prototype.mediaChange=function(){null!=this.myStreamingTag&&this.myStreamingTag.stop(),this.myStreamingTag=null,this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId}),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Media Change, StreamTag ReInitialize")},_n.prototype.adStart=function(e){null==e&&(e=null),this.myStreamingTag.playVideoAdvertisement(this.getMetaData(!0)),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Ad Start")},_n.prototype.start=function(e){var t;null==e&&(e=null),(null!=(t=this.facade.player.ads)?t.getInProgress():0)||(this.myStreamingTag.playVideoContentPart(this.getMetaData()),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Content Play"))},_n.prototype.stop=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : Stop")},_n.prototype.ended=function(){this.myStreamingTag.stop(),this.facade.logger.log("[AMP ComscoreStreamsense Event] : End"),this.myStreamingTag=null,this.myStreamingTag=new this.sdk.StreamingTag({customerC2:this.value.data.clientId})},_n.prototype.getMetaData=function(e){var t,i,n,o;null==e&&(e=!1),i={},n=e?this.value.data.metadata.ads:this.value.data.metadata.video;for(t in n)o=n[t],"null"!==o&&(i[t]=o);return i},i(En,puremvc.SimpleCommand),En.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(_n.NAME),t.start(e.body)},i(An,puremvc.SimpleCommand),An.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(_n.NAME),t.adStart(e.body)},i(bn,puremvc.SimpleCommand),bn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(_n.NAME),t.stop(e.body)},i(Cn,puremvc.SimpleCommand),Cn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(_n.NAME),t.adStart(e.body),t.stop(e.body)},i(Nn,puremvc.SimpleCommand),Nn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(_n.NAME),t.mediaChange()},i(In,puremvc.SimpleCommand),In.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(_n.NAME),t.ended()},i(Sn,it),Sn.prototype.moduleName="comscore",Sn.prototype.createController=function(){Sn.__super__.createController.call(this),this.registerCommand(xo.STARTED,mn),this.registerCommand(xo.CONTENT_CHANGED,mn),this.registerCommand(jo.AD_STARTED,fn)},Sn.prototype.createModel=function(){this.registerProxy(new hn(this.config))},Sn.prototype.listNotificationInterests=function(){return[xo.STARTED,jo.AD_STARTED,xo.CONTENT_CHANGED]},ti.registerPlugin("comscore","html",Sn),ti.registerPlugin("comscore","flash",gn),i(Tn,X),Tn.prototype.duration=null,Tn.prototype.currentTime=null,Tn.prototype.container=null,Tn.prototype.banner=null,Tn.prototype.text=null,Tn.prototype.adText=null,Tn.prototype.bg=null,Tn.prototype.totalAds=null,Tn.prototype.adPosition=null,Tn.prototype.adClickHandlerContainer=null,Tn.prototype.adContainerRequired=!0,Tn.prototype.componentName="ads",Tn.prototype.onRegister=function(){Tn.__super__.onRegister.call(this),this.adContainerRequired&&(this.container=this.create("ad-container")),this.banner=this.create("ad-banner"),Dt.isHTML5()&&(this.viewComponent.adClickHandlerContainer=this.adClickHandlerContainer=this.create("ads-click-handler")),this.bg=this.create("ad-text-bg",this.banner),this.adText=this.create("ad-text-title",this.banner),this.text=this.create("ad-text",this.banner),this.adContainerRequired&&(this.viewComponent.container=this.container),this.sendNotification(jo.AD_CONTAINER_CREATED,this.viewComponent),this.facade.setViewComponent(this.viewComponent)},Tn.prototype.listNotificationInterests=function(){return[jo.BREAK_START,jo.BREAK_END,jo.AD_TIME_REMAINING,jo.AD_STARTED]},Tn.prototype.handleNotification=function(e){var t,i,n,o;switch(e.getName()){case jo.BREAK_END:this.text.textContent="",this.adText.textContent="";break;case jo.AD_TIME_REMAINING:o=Math.round(e.getBody()),n=null!=this.totalAds&&this.totalAds>0&&null!=this.adPosition&&this.adPosition!==this.totalAds?o>0?""+this.localizationManager.getString($.MSG_NEXT_AD)+o+" "+this.localizationManager.getString($.MSG_SECONDS):"":o>0?""+this.localizationManager.getString($.MSG_NEXT_VIDEO)+o+" "+this.localizationManager.getString($.MSG_SECONDS):"",this.text.textContent=n,i=this.facade.retrieveProxy(r.NAME).adVO.duration,o=i-o;break;case jo.AD_STARTED:t=e.getBody(),this.totalAds=t.totalAds,this.adPosition=t.position,n="Ad "+t.position+" of "+t.totalAds,null!=t.position&&null!=t.totalAds&&t.totalAds>=1&&(this.adText.textContent=n)}},i(wn,Ce),wn.prototype.execute=function(e){this.proxy.getEnabled()!==!1&&this.proxy.engage(e.getBody())},i(Pn,si),Pn.prototype.execute=function(e){this.sendNotification(xo.UPDATE_DATA_BINDINGS,{contexts:[this.proxy.getContextName()]}),Pn.__super__.execute.call(this,e)},i(Mn,si),Mn.prototype.execute=function(e){this.player.sendNotification(xo.ADD_APPLICATION_STATE,"ad-mode"),Mn.__super__.execute.call(this,e),this.proxy.breakStart()},i(Dn,si),Dn.prototype.execute=function(e){Dn.__super__.execute.call(this,e),this.proxy.breakEnd(),this.player.sendNotification(xo.REMOVE_APPLICATION_STATE,"ad-mode")},i(xn,Ce),xn.prototype.execute=function(e){this.proxy.contentSeek(e.getBody())},i(kn,si),kn.prototype.execute=function(e){this.proxy.container=e.getBody(),kn.__super__.execute.call(this,e)};var Zo={BREAK_START:"adComponentBreakInitiated",BREAK_END:"adComponentBreakComplete",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked",AD_FIRST_QUARTILE:"adComponentFirstQuartile",AD_MIDPOINT:"adComponentMidpoint",AD_THIRD_QUARTILE:"adComponentThirdQuartile",AD_REQUEST:"adComponentAdsRequest",AD_SKIPPED:"adComponentAdSkipped",AD_IMPRESSION:"adComponentImpression"};i(Ln,it),Ln.prototype.moduleName="comscorestreamsense",Ln.prototype.createModel=function(){this.registerProxy(new _n(this.config))},Ln.prototype.createController=function(){Ln.__super__.createController.call(this),this.registerCommand(xo.MEDIA_CHANGE,Nn),this.registerCommand(jo.AD_STARTED,An),this.registerCommand(jo.AD_ENDED,bn),this.registerCommand(jo.SKIPPED,bn),this.registerCommand(jo.AD_ERROR,Cn),this.registerCommand(xo.PLAYING,En),this.registerCommand(xo.PAUSED,bn),this.registerCommand(xo.ENDED,In)},Ln.prototype.listNotificationInterests=function(){return[xo.MEDIA_CHANGE,jo.AD_STARTED,jo.AD_ENDED,jo.AD_ERROR,jo.SKIPPED,xo.ENDED,xo.PAUSED,xo.PLAYING]},ti.registerPlugin("comscorestreamsense","html",Ln),ti.registerPlugin("comscorestreamsense","flash",vn),i(Rn,Ii),Rn.NAME=Ii.NAME,Rn.prototype.defaults={videoId:null,defaultId:null,domain:null,zoneId:null,companion:null,userData:null,params:null},Rn.prototype.key="auditude",Rn.prototype.session=null,Rn.prototype.options=null,Rn.prototype.initialize=function(){var e=this;this.options={controls:!1,auditudeHandlesChapterBreaks:!1,style:{backgroundColor:"#000",width:this.facade.player.mediaElement.clientWidth,height:this.facade.player.mediaElement.clientHeight},handlers:{play:function(){e.facade.logger.debug("ad play")},timeupdate:function(t,i,n){e.facade.sendNotification(jo.AD_TIME_REMAINING,n.duration-n.currentTime)},error:function(t){e.facade.logger.debug("ad error:",t),e.error()},pause:function(){e.facade.logger.debug("ad pause")},loadedmetadata:function(t,i,n){e.facade.logger.debug("ad loadedmetadata")},end:function(){e.facade.logger.debug("ad end")}}};try{this.plugin=this.createPlugin(),this.plugin.subscribe(aud.events.init_complete,function(t,i){e.facade.logger.debug("init_complete:",t,i);try{e.plugin.publish(aud.notifications.break_begin)}catch(n){e.error(n)}}),this.plugin.subscribe(aud.events.init_failed,function(t,i){e.error(t)}),this.plugin.subscribe(aud.events.break_begin,function(t,i){e.facade.logger.debug("break_begin:",t,i)}),this.plugin.subscribe(aud.events.pause_playback,function(t,i){e.facade.logger.debug("pause_playback: "+t+", "+i),e.contentPause(t,i)}),this.plugin.subscribe(aud.events.resume_playback,function(t,i){e.facade.logger.debug("resume_playback: ",t,i),e.contentPlay(t,i)}),this.plugin.subscribe(aud.events.linear_ad_begin,function(t,i,n){var o,a,r;e.facade.logger.debug("linear ad begin:",t,i,n),r=i._xmlDoc.querySelector("ad[id]"),null!=r&&(o=r.getAttribute("id")),r=i._xmlDoc.querySelector("inLine[adTitle]"),null!=r&&(a=r.getAttribute("adTitle")),e.adVO=new Ci(o,a,n.asset.duration,1,"preroll","auditude",null,n.banners,null,n),e.sendNotification(jo.AD_LOADED,e.adVO),e.sendNotification(jo.AD_DURATION_CHANGE,e.adVO),e.facade.player.sendNotification(xo.CHANGE_PLAY_STATE,Vo.PLAYING),e.sendNotification(jo.AD_PLAY),e.setInProgress(!0),e.setCompanions(n.banners),e.session=n.session,e.sendNotification(jo.AD_STARTED)}),this.plugin.subscribe(aud.events.linear_ad_end,function(t,i,n){e.facade.logger.debug("linear ad end:",t,i,n),e.sendNotification(jo.AD_ENDED)}),this.plugin.subscribe(aud.events.break_end,function(t,i){e.facade.logger.debug("break_end:",t,i),e.end()}),this.plugin.subscribe(aud.events.non_linear_ad_begin,function(t,i,n){e.facade.logger.debug("non linear ad begin"),e.setCompanions(n.banners)}),this.plugin.subscribe(aud.events.non_linear_ad_end,function(t,i,n){e.facade.logger.debug("non linear ad end")})}catch(t){this.error(t)}},Rn.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.container.container,null,this.value.domain,this.value.zoneId,this.options)},Rn.prototype.start=function(){var e,t,i,n,o,a,r;if(Rn.__super__.start.call(this)===!1)return!1;try{if(n=this.value.params||{},o="",null!=this.value.userData){r=this.value.userData;for(i in r)a=r[i],o+=""+i+"="+a+";"}null!=n.userData&&(o+=n.userData),""!==o&&(n.userData=o),t=this.value.videoId+"",null!=this.value.defaultId&&(e=this.value.defaultId+"",t=null!=t?[t,e]:e),this.facade.logger.log("Auditude init: ",t,n),this.plugin.init(t,n)}catch(s){this.error(s)}},Rn.prototype.play=function(){Rn.__super__.play.call(this),this.session.notifyResume()},Rn.prototype.pause=function(){Rn.__super__.pause.call(this),this.session.notifyPause()},Rn.prototype.breakStart=function(){},Rn.prototype.setCompanions=function(e){var t,i,n,o,a,r,s,l;if(!(null==e||e.length<1)){for(n=[],a=0,s=e.length;s>a;a++)t=e[a],n.push({data:t.data,type:t.resourceType,width:parseInt(t.width),height:parseInt(t.height),metadata:t});if(Rn.__super__.setCompanions.call(this,n),null!=this.value.companion&&(i=this.value.companion,o=document.getElementById(i.id),null!=o))for(r=0,l=e.length;l>r;r++)if(t=e[r],i.width===parseInt(t.width)&&i.height===parseInt(t.height)){o.innerHTML=t.data;break}}},Rn.prototype.contentStarted=function(){this.plugin.publish(aud.notifications.video_playback_started)},Rn.prototype.contentEnded=function(){this.plugin.publish(aud.notifications.video_playback_complete)},i(On,Rn),On.NAME=Rn.NAME,On.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.player.mediaElement,null,this.value.domain,this.value.zoneId,this.options)},On.prototype.engage=function(e){On.__super__.engage.call(this,e),this.sendNotification(xo.DISABLE_VIDEO_EVENTS,["ended"])},On.prototype.reset=function(e){On.__super__.reset.call(this,e),this.sendNotification(xo.ENABLE_VIDEO_EVENTS,["ended"])},On.prototype.play=function(){On.__super__.play.call(this),this.facade.player.mediaElement.play()},On.prototype.pause=function(){On.__super__.pause.call(this),this.facade.player.mediaElement.pause()},On.prototype.contentPause=function(){this.facade.player.mediaElement.pause()},i(Vn,Ot),Vn.NAME="AdWrapper",Vn.prototype.enabled=!0,Vn.prototype.paused=!1,Vn.prototype.started=!1,Vn.prototype.adVO=null,Vn.prototype.getFeatureName=function(){return"ads"},Vn.prototype.getInProgress=function(){return this.player.mediaElement.getPlayerProperty("adInProgress")},Vn.prototype.getStarted=function(){return this.started},Vn.prototype.getPaused=function(){return this.paused},Vn.prototype.getCompanions=function(){var e;return null!=(e=this.adVO)?e.companions:void 0},Vn.prototype.setEnabled=function(e){return this.enabled=e,this.player.mediaElement.setPlayerProperty("adsEnabled",e),e},Vn.prototype.getEnabled=function(){return this.enabled},Vn.prototype.enable=function(){this.setEnabled(!0)},Vn.prototype.disable=function(){this.setEnabled(!1)},Vn.prototype.createFlashVars=function(e){return e.core_ads_enabled=!0,e},Vn.prototype.listNotificationInterests=function(){var e,t;return Vn.__super__.listNotificationInterests.call(this).concat(function(){var i;i=[];for(e in Zo)t=Zo[e],i.push(t);return i}())},Vn.prototype.handleNotification=function(e){var t,i,n,o,a;switch(Vn.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),this.adVO=this.createAdVO(t),o=this,n){case Zo.BREAK_START:a=jo.BREAK_START;break;case Zo.BREAK_END:a=jo.BREAK_END;break;case Zo.AD_MEDIA_LOADED:a=jo.AD_LOADED,this.start=!1;break;case Zo.AD_STARTED:a=jo.AD_STARTED,this.started=!0,this.sendNotification(xo.ADD_APPLICATION_STATE,"ad-mode");break;case Zo.AD_TIME_UPDATE:a=jo.AD_TIME_UPDATE;break;case Zo.AD_TIME_REMAINING:a=jo.AD_TIME_REMAINING;break;case Zo.AD_ERROR:case Zo.AD_PLAYBACK_FAILED:a=jo.AD_ERROR,this.start=!1,this.sendNotification(xo.REMOVE_APPLICATION_STATE,"ad-mode");break;case Zo.AD_ENDED:case Zo.AD_PLAYBACK_TERMINATED:a=jo.AD_ENDED,this.sendNotification(xo.REMOVE_APPLICATION_STATE,"ad-mode");break;case Zo.AD_CLICKED:a=jo.AD_CLICKED;break;case Zo.AD_COMPANION:a=jo.AD_COMPANION,null!=this.adVO&&null!=t&&(this.adVO.companions=t);break;case Zo.AD_PAUSE:a=jo.AD_PAUSE,o=this.player,this.paused=!0,this.player.setPlayState("paused");break;case Zo.AD_PLAY:a=jo.AD_PLAY,this.paused=!1,this.player.setPlayState("playing");break;case Zo.AD_LOG:a=jo.AD_LOG;break;case Zo.AD_FIRST_QUARTILE:a=jo.FIRST_QUARTILE;break;case Zo.AD_MIDPOINT:a=jo.MIDPOINT;break;case Zo.AD_THIRD_QUARTILE:a=jo.THIRD_QUARTILE;break;case Zo.AD_REQUEST:a=jo.REQUEST;break;case Zo.AD_SKIPPED:a=jo.SKIPPED;break;case Zo.AD_IMPRESSION:a=jo.IMPRESSION}null!=a&&(this.sendNotification(a,this.adVO),i=a===jo.AD_TIME_REMAINING?new Tt(a.replace(/^ads/,""),t.timeElapsed):new Tt(a.replace(/^ads/,""),this.adVO),i.player=this.player,o.dispatchEvent(i))},Vn.prototype.createAdVO=function(e){return null==e?null:new Ci(e.id,e.title,e.duration,e.adIndex,e.podPosition,e.adPlatform,null,null,e.requestURL,e.metadata,e.totalAds,e.currentTime)},Vn.prototype.terminateAd=function(){this.player.mediaElement.terminateAd()},Vn.prototype.terminateAllAds=function(){this.player.mediaElement.terminateAllAds()},Vn.prototype.requestAd=function(){this.player.mediaElement.triggerAd()},i(Gn,Vn),Gn.NAME="AuditudeWrapper",Gn.prototype.flashPlugins=[{id:"AuditudePlugin",src:"#{paths.resources}plugins/AuditudeStandardPlugin.swf",host:"akamai",main:"#{paths.resources}plugins/AuditudeStandardPlugin.swf",type:"application/x-shockwave-flash"}],Gn.prototype.createFlashVars=function(e){return null!=this.config.companion&&(e.ad_partner_companion_size=""+this.config.companion.width+"x"+this.config.companion.height),e},Gn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h;for(i=e.firstChild,t=e.getElementsByTagName("admedia")[0],null==t&&(t=e.createElement("admedia"),i.appendChild(t)),l=e.createElement("vendor"),l.setAttribute("id","auditude"),t.appendChild(l),s=[{value:this.config.domain,key:"AUDITUDE_DOMAIN"},{value:this.config.videoId,key:"AUDITUDE_MEDIA_ID"},{value:this.config.defaultId,key:"AUDITUDE_DEFAULT_MEDIA_ID"},{value:this.config.zoneId,key:"AUDITUDE_ZONE_ID"},{value:this.config.prerollId,key:"AUDITUDE_PREROLL_MEDIA_ID"},{value:this.config.midrollId,key:"AUDITUDE_MIDROLL_MEDIA_ID"},{value:this.config.audienceManagerURL,key:"AUDITUDE_AUDIENCE_MGR_URL"},{value:this.config.version,key:"AUDITUDE_VERSION"}],d=0,u=s.length;u>d;d++)r=s[d],null!=r.value&&this.createProperty(e,r.key,r.value,l);if(null!=this.config.position&&l.setAttribute("position",this.config.position),null!=this.config.companions){for(o=[],a=[],h=this.config.companions,c=0,p=h.length;p>c;c++)n=h[c],o.push(n.width+"x"+n.height),a.push(n.id);this.createProperty(e,"AUDITUDE_COMPANION_SIZE",o.join(","),l),this.createProperty(e,"AUDITUDE_COMPANION_ID",o.join(","),l)}return null!=this.config.params&&this.createProperty(e,"AUDITUDE_PARAMS",this.config.params,l),null!=this.config.userData&&this.createProperty(e,"AUDITUDE_USER_DATA",this.config.userData,l),e},i(Un,sn),Un.NAME="AdPlugin",Un.prototype.container=null,Un.prototype.featureName="ads",Un.prototype.createModel=function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy(),this.registerProxy(this.proxy)},Un.prototype.createController=function(){Un.__super__.createController.call(this),this.registerCommand(xo.MEDIA_CHANGE,wn),this.registerCommand(jo.BREAK_START,Mn),this.registerCommand(jo.AD_LOADED,Pn),this.registerCommand(jo.BREAK_END,Dn),this.registerCommand(xo.SEEK,xn),this.registerCommand(ko.SEEK,xn),this.registerCommand(jo.AD_CONTAINER_CREATED,kn),this.registerCommand(jo.AD_STARTED,si),this.registerCommand(jo.SKIPPED,si),this.registerCommand(jo.AD_MANAGER_LOADED,si),this.registerCommand(jo.AD_TIME_UPDATE,si),this.registerCommand(jo.AD_TIME_REMAINING,si),this.registerCommand(jo.AD_DURATION_CHANGE,si),this.registerCommand(jo.AD_ENDED,si),this.registerCommand(jo.AD_ERROR,si),this.registerCommand(jo.AD_COMPANION,si),this.registerCommand(jo.FIRST_QUARTILE,si),this.registerCommand(jo.MIDPOINT,si),this.registerCommand(jo.THIRD_QUARTILE,si),this.registerCommand(jo.LOG,si),this.registerCommand(jo.REQUEST,si),this.registerCommand(jo.AD_RESUME,si),this.registerCommand(jo.AD_PLAY,si),this.registerCommand(jo.AD_PAUSE,si),this.registerCommand(jo.AD_PAUSED,si),this.registerCommand(jo.IMPRESSION,si),this.registerCommand(jo.AD_CLICKED,si)},Un.prototype.createView=function(){return this.registerMediator(new Tn)},Un.prototype.isFullscreenDevice=function(){return Dt.isFullscreenDevice()},Un.prototype.createProxy=function(){},Un.prototype.createFullscreenProxy=function(){},Un.prototype.listNotificationInterests=function(){return[xo.MEDIA_CHANGE,xo.PLAY,xo.PAUSE,xo.START,xo.STARTED,xo.ENDED,xo.READY,xo.SEEK,xo.VOLUME_CHANGE,xo.FULL_SCREEN_CHANGE,xo.CHANGE_ACTIVE_STATE,ko.PLAY,ko.PAUSE,ko.SEEK,ko.TOGGLE_PLAY_PAUSE]},Un.prototype.listNotificationPublications=function(){var e,t;return Un.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in jo)t=jo[e],i.push(t);return i}()).concat([xo.PLAY_REQUEST,xo.UPDATE_DATA_BINDINGS,xo.DISPLAY_TIME,xo.ADD_CUE_POINTS,xo.DISABLE_FULL_SCREEN,xo.ENABLE_VIDEO_EVENTS,xo.DISABLE_VIDEO_EVENTS])},Un.prototype.setEnabled=function(e){this.proxy.setEnabled(e)},Un.prototype.getEnabled=function(){return this.proxy.getEnabled();
},Un.prototype.getInProgress=function(){return this.proxy.getInProgress()},Un.prototype.getStarted=function(){return this.proxy.getStarted()},Un.prototype.getPaused=function(){return this.proxy.getPaused()},Un.prototype.getCompanions=function(){return this.proxy.getCompanions()},Un.prototype.terminateAd=function(){this.proxy.terminateAd()},Un.prototype.terminateAllAds=function(){this.proxy.terminateAllAds()},Un.prototype.requestAd=function(){this.proxy.start(!1)},i(Bn,Vn),Bn.NAME="IMAWrapper",Bn.prototype.flashPlugins=[{id:"GoogleIMAPlugin",src:"#{paths.resources}plugins/GoogleIMAPlugin.swf",blocking:!1,host:"akamai",main:"GoogleIMAPlugin",type:"application/x-shockwave-flash"},{id:"IMAOverlayAdPlugin",src:"#{paths.resources}plugins/IMAOverlayAdPlugin.swf",blocking:!1,host:"akamai",main:"IMAOverlayAdPlugin",type:"application/x-shockwave-flash"},{id:"AdOptionsPlugin",src:"#{paths.resources}plugins/AdOptionsPlugin.swf",blocking:!1,host:"akamai",main:"AdOptionsPlugin",type:"application/x-shockwave-flash"}],Bn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m;for(i=e.firstChild,t=e.getElementsByTagName("admedia")[0],null==t&&(t=e.createElement("admedia"),i.appendChild(t)),d=e.createElement("vendor"),d.setAttribute("id","dfp"),t.appendChild(d),l=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"},{value:this.config.sceneMarkers,key:"displaySceneMarkers"},{value:this.config.ppid,key:"DFP_PPID"}],c=0,h=l.length;h>c;c++)s=l[c],null!=s.value&&this.createProperty(e,s.key,s.value,d);if(null!=this.config.position&&d.setAttribute("position",this.config.position),null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(e,"DFP_AD_TAG_PARAMS",this.config.params.adTag,d),null!=this.config.params.manual&&this.createProperty(e,"DFP_MANUAL_PARAMS",this.config.params.manual,d)),null!=this.config.companions){for(o=[],a=[],m=this.config.companions,u=0,g=m.length;g>u;u++)n=m[u],o.push(n.width+"x"+n.height),a.push(n.id);this.createProperty(e,"DFP_SIZE",o.join(","),d),this.createProperty(e,"COMPANION_ID",a.join(","),d)}if(null!=this.config.disableCompanionAds&&this.createProperty(e,"disableCompanionAds",this.config.disableCompanionAds,d),null!=this.config.overlay)for(this.config.overlay.enabled===!0&&(r=e.createElement("overlay"),t.appendChild(r)),l=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}],p=0,f=l.length;f>p;p++)s=l[p],null!=s.value&&this.createProperty(e,s.key,s.value,r);return e},i(Hn,Si),Hn.NAME=Si.NAME,Hn.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,this.facade.player.getMediaElement(),this.facade.getViewComponent().container)},Hn.prototype.engage=function(e){Hn.__super__.engage.call(this,e),this.sendNotification(xo.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},Hn.prototype.reset=function(e){Hn.__super__.reset.call(this,e),this.sendNotification(xo.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])},Hn.prototype.breakStart=function(){this.playbackCore=this.facade.player.retrieveProxy(At.NAME).getActivePlaybackCore(),this.playbackCore.setEnabled(!1),this.setInProgress(!0)},Hn.prototype.breakEnd=function(){Hn.__super__.breakEnd.call(this),this.playbackCore.setEnabled(!0)},i(Fn,puremvc.SimpleCommand),Fn.prototype.execute=function(e){this.facade.sendNotification(xo.ADD_APPLICATION_STATE,"ad-overlay-mode")},i(jn,puremvc.SimpleCommand),jn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Ni.NAME),t.stop(),this.facade.player.sendNotification(xo.REMOVE_APPLICATION_STATE,"ad-overlay-mode")},i(zn,X),zn.prototype.componentName="ad-overlay",zn.prototype.anchor=null,zn.prototype.image=null,zn.prototype.tracker=null,zn.prototype.tracker2=null,zn.prototype.closeButton=null,zn.prototype.closeText=null,zn.prototype.onRegister=function(){var e=this;this.anchor=this.create("ad-overlay-anchor"),this.anchor.target="_blank",this.image=this.create("ad-overlay-img",this.anchor,"img"),this.tracker=this.create(),this.tracker.width=0,this.tracker.height=0,this.tracker2=this.create(null,this,"img"),this.tracker2.width=0,this.tracker2.height=0,this.closeButton=this.create("ad-close-button",this.anchor),this.closeButton.onclick=function(t){return t.stopImmediatePropagation(),e.sendNotification(zo.REMOVE_OVERLAY),!1},this.closeText=this.createText("ad-close-text","x",this.closeButton),zn.__super__.onRegister.call(this)},zn.prototype.listNotificationInterests=function(){return[zo.ADD_OVERLAY,zo.REMOVE_OVERLAY]},zn.prototype.handleNotification=function(e){var t;switch(e.getName()){case zo.ADD_OVERLAY:t=e.getBody(),this.image.src=t.src,this.anchor.href=t.href,this.tracker.src=t.tracking[0],this.tracker2.src=t.tracking[1]}},i(Yn,puremvc.SimpleCommand),Yn.prototype.execute=function(e){this.facade.retrieveProxy(Si.NAME).ready()},i(Wn,puremvc.SimpleCommand),Wn.prototype.execute=function(e){this.facade.retrieveProxy(Si.NAME).resize(e.getBody())},i(qn,puremvc.SimpleCommand),qn.prototype.execute=function(e){this.facade.retrieveProxy(Si.NAME).resize(e.getBody())},i(Xn,Un),Xn.NAME="AuditudePlugin",Xn.prototype.moduleName="auditude",Xn.prototype.featureName="ads",Xn.prototype.createFullscreenProxy=function(){return new On(this.config)},Xn.prototype.createProxy=function(){return new Rn(this.config)},Xn.prototype.isFullscreenDevice=function(){return!0},ti.registerPlugin("auditude","html",Xn),ti.registerPlugin("auditude","flash",Gn),i(Zn,Ot),Zn.NAME="AdChoicesWrapper",Zn.prototype.flashView={elements:{adOptions:{elements:{adChoices:{attributes:{target:"http://www.akamai.com/"}}}}}},i(Jn,q),Jn.prototype.componentName="ad-choices",Jn.prototype.icon=null,Jn.prototype.text=null,Jn.prototype.container=null,Jn.prototype.onRegister=function(){var e;Jn.__super__.onRegister.call(this),e=this.facade.retrieveProxy(r.NAME),this.container=this.create("ad-choices-link",this,"a"),this.container.target="_blank",this.container.href=e.getTarget(),this.text=this.createText("ad-choices-text","AdChoices",this.container),this.icon=this.create("ad-choices-icon",this.container)},Jn.prototype.listNotificationInterests=function(){return[jo.AD_CONTAINER_CREATED]},Jn.prototype.handleNotification=function(e){var t;switch(e.getName()){case jo.AD_CONTAINER_CREATED:t=e.getBody(),null!=t&&t.appendChild(this.viewComponent)}},i(Kn,r),Kn.NAME=r.NAME,Kn.prototype.defaults={target:null},Kn.prototype.getTarget=function(){return this.data.target},Kn.prototype.setTarget=function(e){return this.data.target=e},i(Qn,Un),Qn.prototype.moduleName="ima",Qn.prototype.createFullscreenProxy=function(){return new Hn(this.config)},Qn.prototype.createProxy=function(){return new Si(this.config)},Qn.prototype.isFullscreenDevice=function(){var e;return e=navigator.userAgent,Dt.isFullscreenDevice()||/Android 4\.[0-1]/.test(e)||/CrKey/.test(e)},Qn.prototype.createModel=function(){Qn.__super__.createModel.call(this),null!=this.config.overlay&&this.registerProxy(new Ni(this.config.overlay))},Qn.prototype.createController=function(){Qn.__super__.createController.call(this),null!=this.config.overlay&&(this.registerCommand(zo.ADD_OVERLAY,Fn),this.registerCommand(zo.REMOVE_OVERLAY,jn)),this.registerCommand(xo.READY,Yn),this.registerCommand(xo.FULL_SCREEN_CHANGE,Wn),this.registerCommand(xo.CHANGE_ACTIVE_STATE,qn)},Qn.prototype.createView=function(){Qn.__super__.createView.call(this),null!=this.config.overlay&&this.registerMediator(new zn)},ti.registerPlugin("ima","html",Qn),ti.registerPlugin("ima","flash",Bn),i($n,it),$n.prototype.moduleName="adchoices",$n.prototype.createModel=function(){this.registerProxy(new Kn(this.config))},$n.prototype.createView=function(){this.registerMediator(new Jn)},$n.prototype.listNotificationInterests=function(){return[jo.AD_CONTAINER_CREATED]},ti.registerPlugin("adchoices","html",$n),ti.registerPlugin("adchoices","flash",Zn),i(eo,it),eo.prototype.listNotificationPublications=function(){return eo.__super__.listNotificationPublications.apply(this,arguments).concat([xo.ADD_CONTROL,xo.REMOVE_CONTROL,xo.ADD_CONTROL_STATE,xo.REMOVE_CONTROL_STATE])},i(to,kt),to.prototype.panel=null,to.prototype.timeout=null,to.prototype.closePanelDelayed=null,to.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this),"desktop"===Dt.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel,to.__super__.onRegister.call(this),this.sendNotification(xo.ADD_CONTROL_STATE,""+this.componentName+"-enabled"),this.sendNotification(xo.ADD_CONTROL,this.viewComponent)},to.prototype.openPanel=function(){clearTimeout(this.timeout),this.sendNotification(Fo.OPEN_PANEL,this.panel),this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)},to.prototype.closePanel=function(){Dt.isMouseOverElement(this.panel.viewComponent)||Dt.isMouseOverElement(this.viewComponent)||this.facade.player.retrieveProxy(mt.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(Fo.CLOSE_PANEL,this.panel))},to.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)},to.prototype.togglePanel=function(){this.sendNotification(Fo.TOGGLE_PANEL,this.panel)},to.prototype.clickPanel=function(){},i(io,q),io.prototype.componentType="panel",io.prototype.control=null,io.prototype.onRegister=function(){io.__super__.onRegister.call(this),this.sendNotification(Fo.ADD_PANEL,this)},i(no,we),no.NAME=r.NAME,no.prototype.loaded=!0,no.prototype.controlName=null,no.prototype.getControlName=function(){return this.controlName},no.prototype.setControlName=function(e){return this.controlName=e},i(oo,no),oo.NAME=r.NAME,oo.prototype.hidden=!0,oo.prototype.getHidden=function(){return this.hidden},oo.prototype.setHidden=function(e){return this.hidden=e,e},i(ao,oo),ao.NAME=r.NAME,ao.prototype.controlName="volume",ao.prototype.defaults={direction:"vertical"},ao.prototype.getDirection=function(){return this.data.direction},i(ro,Ot),ro.NAME="VolumePanelWrapper",ti.registerPlugin("volumepanel","flash",ro),i(so,to),so.prototype.clickHandler=function(){this.sendNotification(xo.TOGGLE_MUTED)},i(lo,Xt),lo.prototype.componentName="volume",lo.prototype.draggable=!0,lo.prototype.valueChanged=function(){this.sendNotification(xo.CHANGE_VOLUME,this.value),this.sendNotification(Xo.UPDATE_SETTINGS,{volume:this.value})},lo.prototype.listNotificationInterests=function(){return[xo.VOLUME_CHANGE,xo.READY]},lo.prototype.handleNotification=function(e){switch(e.getName()){case xo.READY:this.updateValue(this.facade.player.retrieveProxy(Me.NAME).getVolume());break;case xo.VOLUME_CHANGE:this.updateValue(e.getBody())}},i(co,Gi),co.prototype.panel=null,co.prototype.control=null,co.prototype.separator=null,co.prototype.controls=null,co.prototype.labels=null,co.prototype.closed=!0,co.prototype.panelClass=io,co.prototype.controlClass=to,co.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName),this.control=this.createControl(this.componentName),this.separator=this.createSeparator(this.componentName),this.panel.control=this.control,this.control.panel=this.panel,null==this.labels&&(this.labels={}),this.createPanelControls(name)},co.prototype.createControl=function(e){var t;return t=new this.controlClass(e),this.facade.registerMediator(t),t},co.prototype.createPanel=function(e){var t;return t=new this.panelClass(e),this.facade.registerMediator(t),t},co.prototype.createSeparator=function(e){return this.create(["separator","icon"],this.panel)},co.prototype.createPanelControls=function(e){var t,i,n,o;t=this.plugin.getConfigurationData();for(i in t)n=t[i],n===!0&&(this.controls[i]=this.addPanelControl(new kt(this.localizationManager.getString(this.labels[i]),null,null,i,null!=(o=this.panelButtonClickHandler)&&"function"==typeof o.bind?o.bind(this,i):void 0)))},co.prototype.addPanelControl=function(e){return this.facade.registerMediator(e),this.panel.getViewComponent().appendChild(e.getViewComponent()),e},co.prototype.panelButtonClickHandler=function(){this.sendNotification(Fo.CLOSE_PANEL,this.panel)},i(uo,co),uo.prototype.componentName="volume",uo.prototype.slider=null,uo.prototype.level=null,uo.prototype.controlClass=so,uo.prototype.onRegister=function(){uo.__super__.onRegister.call(this),this.slider=new lo(this.panel,this.plugin.getDirection()),this.facade.registerMediator(this.slider)},uo.prototype.updateVolumeButton=function(e){var t;t=Math.ceil(10*e),t!==this.level&&(null!=this.level&&this.sendNotification(xo.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=t,this.sendNotification(xo.ADD_CONTROL_STATE,"volume-"+this.level))},uo.prototype.listNotificationInterests=function(){return uo.__super__.listNotificationInterests.apply(this,arguments).concat([xo.VOLUME_CHANGE])},uo.prototype.handleNotification=function(e){switch(uo.__super__.handleNotification.call(this,e),e.getName()){case xo.VOLUME_CHANGE:this.updateVolumeButton(e.body)}},i(po,eo),po.prototype.listNotificationPublications=function(){var e,t;return po.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in Fo)t=Fo[e],i.push(t);return i}())},i(ho,xe),ho.prototype.playbackCoreName="rapt",ho.prototype.mediaElement=null,ho.prototype.mediator=null,ho.prototype.getMediaElement=function(){return this.mediaElement},ho.prototype.onRegister=function(){var e;null==this.mediator&&(this.mediator=new me("rapt","iframe"),this.mediator.onRegister(),e=this.mediator.getViewComponent(),e.player=this.facade,e.name=this.name,e.setAttribute("allowfullscreen","true"),e.setAttribute("webkitallowfullscreen","true"),e.setAttribute("mozallowfullscreen","true"),e.setAttribute("scrolling","no"),e.setAttribute("frameborder","0"),e.setAttribute("marginwidth","0"),e.setAttribute("marginheight","0"),this.sendNotification(xo.PLAYBACK_CORE_CHANGE,this.mediator),this.mediaElement=new go(this.name),this.mediaElement.addEventListener("interactivebreakstart",this.oninteractivebreakstart.bind(this)),this.mediaElement.addEventListener("interactivebreakend",this.oninteractivebreakend.bind(this)),this.initialized=!0)},ho.prototype.replay=function(){this.mediaElement.replay()},ho.prototype.oninteractivebreakstart=function(){this.sendNotification(xo.ADD_APPLICATION_STATE,"interactive")},ho.prototype.oninteractivebreakend=function(){this.sendNotification(xo.REMOVE_APPLICATION_STATE,"interactive")},go.prototype.updateData=function(e){var t;null==e&&(e=raptor.api.state(this.name)),null!=e&&(t=parseFloat(e.duration),t!==this.data.duration&&(this.data.duration=t,this.dispatchEvent("durationchange")),t=parseFloat(e.time||e.progressTime),t!==this.data.currentTime&&(this.data.currentTime=t,this.dispatchEvent("timeupdate")))},go.prototype.load=function(){this.iframe.src=this.src},go.prototype.play=function(){raptor.api.play(this.name)},go.prototype.pause=function(){raptor.api.pause(this.name),this.updateData()},go.prototype.replay=function(){raptor.api.setNode(this.startNode,this.name)},go.prototype.canPlayType=function(e){return"application/rapt"===e?"maybe":""},go.prototype.addEventListener=function(e,t,i){this.iframe.addEventListener(e,t,i)},go.prototype.dispatchEvent=function(e){return"string"==typeof e&&(e=new CustomEvent(e)),this.iframe.dispatchEvent(e)},go.prototype.removeEventListener=function(e,t,i){this.iframe.removeEventListener(e,t,i)},null!=Object.defineProperties&&Object.defineProperties(go.prototype,{src:{set:function(e){this.data.src=e},get:function(){return this.data.src}},currentTime:{set:function(e){raptor.api.setTime(e,this.name)},get:function(){return this.data.currentTime}},duration:{get:function(){return this.data.duration}},paused:{get:function(){return this.data.paused}},ended:{get:function(){return this.data.ended}},error:{get:function(){return this.data.error}},readyState:{get:function(){return 1}}}),i(fo,we),fo.NAME=r.NAME,fo.prototype.defaults={types:["application/rapt"]},fo.prototype.player=null,fo.prototype.initialize=function(){var e;this.sendNotification(xo.INITIALIZED),this.player=new ho(this.getConfigurationData()),e=this.facade.player.retrieveProxy(At.NAME),e.registerPlaybackCore(this.player)},i(mo,po),mo.prototype.moduleName="volumepanel",mo.prototype.createFramework=function(){Dt.isVolumeSettable()&&mo.__super__.createFramework.call(this)},mo.prototype.createModel=function(){this.registerProxy(new ao(this.config))},mo.prototype.createView=function(){Dt.isVolumeSettable()&&this.registerMediator(new uo)},mo.prototype.listNotificationPublications=function(){return mo.__super__.listNotificationPublications.apply(this,arguments).concat([xo.CHANGE_VOLUME,xo.TOGGLE_MUTED,Xo.UPDATE_SETTINGS])},mo.prototype.listNotificationInterests=function(){return mo.__super__.listNotificationInterests.apply(this,arguments).concat([xo.VOLUME_CHANGE,xo.READY])},ti.registerPlugin("volumepanel","html",mo),i(yo,Ot),yo.NAME="HLSWrapper",yo.prototype.flashPlugins=[{id:"flashlsOSMF",src:"#{paths.resources}plugins/flashlsOSMF.swf",host:"osmf",type:"application/x-shockwave-flash"}],ti.registerPlugin("hls","flash",yo),i(vo,xe),vo.prototype.playbackCoreName="hls",vo.prototype.player=null,vo.prototype.hlsConfig=null,vo.prototype.fragErrorTime=0,vo.prototype.timedMedatadata=null,vo.prototype.currentMedatadata=null,vo.prototype.load=function(){var e,t,i,n;null!=this.player&&(this.player.destroy(),this.sendNotification(xo.PLAYBACK_CORE_CHANGE,new me("html5","video"))),e=new Hls(this.hlsConfig),e.attachMedia(this.getMediaElement()),e.on(Hls.Events.MANIFEST_PARSED,this.onManifestParsed.bind(this)),e.on(Hls.Events.ERROR,this.onError.bind(this)),e.on(Hls.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata.bind(this)),e.on(Hls.Events.LEVEL_LOADED,this.onLevelLoaded.bind(this));try{n=this.config.quality;for(t in n)i=n[t],e[t]=i}catch(o){}this.player=e,vo.__super__.load.call(this)},vo.prototype.applySrc=function(){this.timedMedatadata=[],this.currentMedatadata=null,this.player.loadSource(this.getSrc())},vo.prototype.onManifestParsed=function(e,t){this.sendNotification(Jo.MANIFEST_PARSED,t),this.player.loadLevel=-1,this.getMediaElement().play()},vo.prototype.onLevelLoaded=function(e,t){var i;this.sendNotification(Jo.LEVEL_LOADED,t),i=t.details.live,i===!0&&this.mediaProxy.setTemporalType("live")},vo.prototype.onFragParsingMetadata=function(e,t){var i,n,o;t=t.samples[0],o=Math.round(t.dts),n=String.fromCharCode.apply(null,t.data.slice(0,-1)),i={startTime:o,endTime:o,key:n.replace(/(\S*)\{.*/,"$1").split(" ")[1],info:n.replace(/[^\{]+\{/,""),data:t},this.timedMedatadata.push(i)},vo.prototype.ontimeupdate=function(e){var t,i,n,o,a,r;if(vo.__super__.ontimeupdate.call(this,e),0!==this.timedMedatadata.length)for(n=Math.round(e.target.currentTime),t=this.currentMetadata,r=this.timedMedatadata,o=0,a=r.length;a>o;o++)if(i=r[o],i.startTime===n&&t!==i)return this.currentMetadata=i,void this.sendNotification(xo.TIMED_METADATA,i)},vo.prototype.seek=function(e){this.getMediaElement().currentTime=e+this.getStartTime()},vo.prototype.getCurrentTime=function(){return this.getMediaElement().currentTime-this.getStartTime()},vo.prototype.getDuration=function(){var e,t,i;return(null!=(e=this.player)&&null!=(t=e.levels[this.player.currentLevel])&&null!=(i=t.details)?i.totalduration:void 0)||this.getMediaElement().duration},vo.prototype.getStartTime=function(){return this.getMediaElement().duration-this.getDuration()},vo.prototype.onError=function(e,t){var i,n;if(t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:if(403===(null!=(i=t.loader)&&null!=(n=i.loader)?n.status:void 0))return this.facade.sendNotification(xo.ERROR,{code:403,error:t.response.response});this.player.startLoad(),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;case Hls.ErrorTypes.MEDIA_ERROR:this.player.recoverMediaError(),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;default:this.facade.logger.error("[AMP HLS] Playback Error:",e),this.sendNotification(xo.ERROR,t)}t.fatal||t.details!==Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR||(this.fragErrorTime===this.getMediaElement().currentTime?(this.getMediaElement().currentTime++,this.facade.logger.error("[AMP HLS] Frag Loop Load Error, Seeking to :",this.getMediaElement().currentTime)):this.fragErrorTime=this.getMediaElement().currentTime),t.fatal||t.type!==Hls.ErrorTypes.NETWORK_ERROR||(t.code=MediaError.MEDIA_ERR_NETWORK,this.sendNotification(xo.ERROR,t))},vo.prototype.setQuality=function(e){var t;return null!=(t=this.player)?t.currentLevel=e:void 0},vo.prototype.getQuality=function(){var e;return null!=(e=this.player)?e.currentLevel:void 0},vo.prototype.getQualityLevels=function(){var e;return(null!=(e=this.player)?e.levels:void 0)||vo.__super__.getQualityLevels.call(this)},vo.prototype.destroy=function(){var e;null!=(e=this.player)&&e.destroy()};var Jo={MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADED:"hlsLevelLoaded"};i(_o,puremvc.SimpleCommand),_o.prototype.execute=function(e){var t,i,n,o,a,r,s=this;a=e.getBody(),n=this.facade.retrieveProxy(Me.NAME),t=this.facade.getMediaElement(),null!=t&&t.webkitSupportsFullscreen&&(o=this.facade.retrieveProxy(mt.NAME),o.setDisplayState(a),i={},r=this.facade.viewComponent,null!=r.requestFullscreen?(i.enter=function(){return r.requestFullscreen()},i.exit=function(){return document.cancelFullscreen()},i.event="onfullscreenchange",i.element="fullscreenElement"):null!=r.webkitRequestFullScreen?(i.enter=function(){return r.webkitRequestFullScreen()},i.exit=function(){return document.webkitCancelFullScreen()},i.event="onwebkitfullscreenchange",i.element="webkitFullscreenElement"):null!=r.mozRequestFullScreen?(i.enter=function(){return r.mozRequestFullscreen()},i.exit=function(){return document.mozCancelFullScreen()},i.event="onmozfullscreenchange",i.element="mozFullscreenElement"):null!=r.msRequestFullScreen&&(i.enter=function(){return r.msRequestFullscreen()},i.exit=function(){return document.msCancelFullScreen()},i.event="onmozfullscreenchange",i.element="mozFullscreenElement"),a===Go.FULL_SCREEN?(i.enter(),null!=i.event&&(t[i.event]=function(e){return null==document[i.element]?s.sendNotification(xo.CHANGE_DISPLAY_STATE,Go.NORMAL):void 0})):a===Go.NORMAL&&(i.exit(),t[i.event]=null),this.facade.dispatchEvent(new Tt("fullscreenchange",a===Go.FULL_SCREEN)))},i(Eo,we),Eo.NAME=r.NAME,Eo.prototype.playbackProxy=null,Eo.prototype.createPlaybackProxy=function(){},Eo.prototype.initialize=function(){var e;this.playbackProxy=this.createPlaybackProxy(),null!=this.playbackProxy&&(this.sendNotification(xo.INITIALIZED),e=this.facade.player.retrieveProxy(At.NAME),e.registerPlaybackCore(this.playbackProxy))},Eo.prototype.destroy=function(){var e;null!=(e=this.playbackProxy)&&e.destroy()},i(Ao,Eo),Ao.NAME=r.NAME,Ao.prototype.defaults={types:["application/x-mpegURL"],data:{enableWorker:!0,enableSoftwareAES:!0,enableCEA708Captions:!0},buffer:null,quality:null,withCredentials:null},Ao.prototype.createPlaybackProxy=function(){var e;return e=window.MediaSource||window.WebKitMediaSource,null!=e?new vo(this.getConfigurationData()):void 0},i(bo,it),bo.prototype.moduleName="rapt",bo.prototype.createModel=function(){this.registerProxy(new fo(this.config))},ti.registerPlugin("rapt","html",bo),i(Co,it),Co.prototype.moduleName="hls",Co.prototype.createModel=function(){this.proxy=new Ao(this.config),this.registerProxy(this.proxy)},Co.prototype.registered=function(){this.player.registerCommand(xo.CHANGE_DISPLAY_STATE,_o),Co.__super__.registered.call(this)},Co.prototype.getPlaybackProxy=function(){return this.proxy.playbackProxy},Co.prototype.listNotificationPublications=function(){return Co.__super__.listNotificationPublications.call(this).concat([xo.TIMED_METADATA,Jo.MANIFEST_PARSED])},ti.registerPlugin("hls","html",Co),No.akamai={amp:{AMP:ti,utils:{Utils:Dt,QueryString:a,Logger:Pt},Config:ht,chromecast:{ChromeCastShim:"undefined"!=typeof ChromeCastShim?ChromeCastShim.getInstance():null}}},window.AKAMAI_MEDIA_PLAYER.saveSDK(Io,No)}window.AKAMAI_MEDIA_PLAYER.setVersion(Io)}(),Ndn_Require.define("amp_lib",function(){});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Amp",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget","models/Ndn/Analytics","models/Ndn/Utils/UserAgent","models/Ndn/Viewer/ViewerModule","models/Ndn/Viewer/ViewerModule/Amp/Config","models/Ndn/PlayerServices/Cache","models/Ndn/Debug","models/Ndn/AdBlockDetector","amp_lib"],function(e,t,i,n,o,a,r,s,l,d,c,u){function p(e,t,i){var n=e,o=i,a=t;switch(o.length){case 0:return n[a]();case 1:return n[a](o[0]);case 2:return n[a](o[0],o[1]);case 3:return n[a](o[0],o[1],o[2]);case 4:return n[a](o[0],o[1],o[2],o[3]);case 5:return n[a](o[0],o[1],o[2],o[3],o[4]);case 6:return n[a](o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6]);case 8:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);case 9:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8]);case 10:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]);case 11:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10]);case 12:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11]);case 13:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12]);case 14:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13]);case 15:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14]);case 16:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]);case 17:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16]);case 18:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17]);case 19:return n[a](o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18])}}swfobject.callDomLoadFunctions(),_nw2e.videoPlayer=AKAMAI_MEDIA_PLAYER.noConflict();var h,g=!1,f=function(e,t){var i=e.get("playerInstance"),n=Array.prototype.slice.call(arguments,2);c.log("delegateMethods","---> Ndn_Viewer_ViewerModule_Amp, _delegateMethod(",t,", ",n,");");var o,a=i;try{for(var r=t.split("."),s=0;s<r.length-1;s++){var l=r[s];if(null===a||"object"!=typeof a||"undefined"==typeof a[l])throw"Method parent could not be found.";a=a[l]}if(null===a||"object"!=typeof a)throw"Method parent could not be found.";o=r[r.length-1]}catch(d){c.log("delegateMethods","ERROR TRYING TO FIND DELEGATE METHOD: ",d)}return a&&"function"==typeof a[o]?p(a,o,n):void 0},m=s.extend({defaults:{moduleId:"amp",playerInstance:null,isReady:!1,isMuted:!1,playOnLoad:!1,params:null,ampVideoData:null,isBumperVideo:null,isSynchronized:!1,isFullscreen:!1,ampConfig:null,debugInfo:null},initialize:function(e){var t=this;s.prototype.initialize.call(this,e),this.set({isReady:!1}),this.set("debugInfo",{ampVersion:m.getVersion(),playerConfigDefaults:m.getDebugConfig(),playerConfig:null,videosLoaded:[]}),this.on({fullscreenStart:function(){t.set("isFullscreen",!0)},fullscreenEnd:function(){t.set("isFullscreen",!1)}}),this.on("share",function(){t.isFullscreen()&&t.get("playerInstance").exitFullScreen()}),this.handleClosedCaptioning()},isSynchronized:function(){return this.get("isSynchronized")},toggleSynchronized:function(e){this.set("isSynchronized",e)},initializePlayerConfig:function(e){var t=this.get("ampConfig");t||this.set("ampConfig",{comscoreEnabled:e.comscoreEnabled,playbackMode:e.playbackMode})},startSession:function(e){s.prototype.startSession.apply(this,arguments),this.applySessionDefaults(e,{isMuted:!1,playOnLoad:!0,isBumperVideo:!1,playbackMode:m.getDefaultPlaybackMode(),showControls:!0,showShareIcons:!0}),this.toggleAdPlayer(!!e.dfp),this.toggleContentPlayer(!!e.videoData),this.toggleSynchronized(!1),this.initializePlayerConfig({comscoreEnabled:!!e.comscore,playbackMode:e.playbackMode});var t=this;this.set({isMuted:e.isMuted,params:{dfp:e.dfp||{},comscore:e.comscore||{}},ampVideoData:function(){var i=e.videoData||d.getLastCachedVideoData();return t.getAmpVideoData(i,e.isBumperVideo)}()}),this.get("debugInfo").videosLoaded.push([["setAutoplay",e.playOnLoad],["ads.setEnabled",this.isAdPlayerEnabled()],["setParams",this.get("params")],["feed.setData",this.get("ampVideoData")]]),(e.playOnLoad||"flash"!=e.playbackMode||e.forceInstantiation)&&this.syncThirdPartyPlayer()},isMuted:function(){return this.get("isMuted")},maintainVisibility:function(){},isFullscreen:function(){return this.get("isFullscreen")},getCurrentTime:function(){return this.isShowingAdPlayer()?this.getAdPlayerMetadata().currentTime:f(this,"getCurrentTime")},getDuration:function(){return this.isShowingAdPlayer()?this.getAdPlayerMetadata().duration:this.getSessionParams().isBumperVideo?6:f(this,"getDuration")},getAdPlayerMetadata:function(){var e=this.getPlayerInstance();return e.ads&&e.ads.adVO&&e.ads.adVO.metadata||{}},getPlayerInstance:function(){return this.get("playerInstance")},handleClosedCaptioning:function(){if(r.isOnIos()){var t=this;t.onceReady(function(){var i=t.getPlayerInstance().getMediaElement();i&&(i.setAttribute("crossorigin","anonymous"),t.on("loadedmetadata",function(){if(t.isShowingVideo()){var e=t.getSessionParams().videoData,n=function(){for(var t=0;t<e.subtitles.length;t++){var i=e.subtitles[t];if("text/vtt"==i.type)return i}}();if(n){var o=document.createElement("track");o.kind="captions",o.label="English",o.srclang="en",o.src=n.url,o.type="text/vtt",o.addEventListener("load",function(){this.mode="disabled",i.textTracks[0].mode="disabled"}),i.appendChild(o)}}}),t.on("viewerModuleEnd",function(){e(i).find("track").remove()}))})}},getDuration:function(){return this.getSessionParams().isBumperVideo?6:f(this,"getDuration")},play:function(){var e=this;this.syncThirdPartyPlayer().done(function(){e.isPlaying()||f(e,"play")})},getAmpVideoData:function(e,t){var i=this.getSessionParams(),n=this.getContainerElement(),o=n.width(),a=n.height(),r=5,s=6,l="Wed, 03 Aug 2011 10:00:21 -0400",d={"@attributes":{version:"2.0"},channel:{category:"",pubDate:l,language:"en",ttl:"10",item:{title:"NDN - AMP Premier",link:"http://akamai.com/player.html",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc augue sapien, dapibus vitae imperdiet vitae, ullamcorper eget tortor. In lorem eros, porttitor quis commodo et, egestas a odio. Nunc eu augue sit amet dolor malesuada condimentum in eu velit. Donec commodo bibendum egestas. In viverra condimentum dapibus. Praesent molestie, dolor a laoreet cursus, massa sem varius tellus, at consectetur mauris ligula at dolor. Etiam semper augue et risus mattis iaculis tincidunt odio sodales. Vivamus eget elit quis metus pulvinar condimentum. Donec et vestibulum dui. Proin ultricies ligula sed felis pretium at adipiscing tortor bibendum. Morbi et ligula non massa facilisis lacinia. Duis at ligula mauris. Nullam ipsum tortor, lobortis eget adipiscing eu, sagittis eu sapien. Nunc dictum porttitor lobortis. Suspendisse cursus mollis lorem sed ultrices",category:"",pubDate:l,"ndn-provider":{id:e.provider.trackingGroup,name:e.provider.name,image:e.provider.logoUrl},"media-group":{"media-content":function(e){for(var i=[],n=0;n<e.length;n++){var o=e[n],a={"@attributes":{url:function(){var e=o.url.replace(" ",""),t=/^(rtmp:.*)\.flv$/gi.exec(e);return t&&(e=t[1]),/\.f4m\?/.exec(e)&&(e+="&hdcore=1"),e}(),medium:o.medium,type:o.type,duration:t?s:o.duration,width:640,height:360}},r={"video/mp4":"PDL","video/flv":"RMTP","video/x-flv":"RMTP","application/x-mpeg":"HLS","application/x-mpegURL":"HLS",
"video/f4m":"HDS"};"undefined"!=typeof r[o.type]&&(a["media-category"]={"@attributes":{schema:"http://mrss.akamai.com/user_agent_hint",label:r[o.type]}}),0==n&&(a["@attributes"].isDefault="true"),i.push(a)}return i}(e.mediaContent),"media-title":e.videoTitle,"media-subTitle":function(){for(var t=[],i=0;i<e.subtitles.length;i++){var n=e.subtitles[i];t.push({"@attributes":{type:n.type,lang:n.language,href:n.url}})}return t.length?t:null}(),"media-description":e.description,"media-thumbnail":{"@attributes":{url:e[o>400?"stillImageXLUrl":"stillImageUrl"],width:(o||"604")+"",height:(a||"341")+""}}}}}};return i.showShareIcons&&(d.channel.item["media-group"]["media-embed"]={"@attributes":{url:"http://player.js",width:(o||"604")+"",height:(a||"341")+""},"media-param":{"@attributes":{name:"type"},"#text":"text/javascript"}}),t&&(d.channel.item["media-group"]["akamai-subclip"]={"akamai-start":r+"","akamai-end":r+s+""}),c.log("ampVideoData",d),d},end:function(){this.isPlaying()&&f(this,"end")},toggleControls:function(e){f(this,"controls.setMode",e?"auto":"none")},pause:function(){this.isPlaying()&&f(this,"pause")},onBadEvent:function(e){s.prototype.onBadEvent.apply(this,arguments),"videoTimeUpdate"!=e||this.isActive()||f(this,"pause")},initializeThirdPartyPlayer:function(){var t=this;return e.Deferred(function(e){if(t.get("playerInstance"))e.resolve();else{m.loadConfig({adServer:"dfp",adOverlayText:t.getContainerElement().width()>350?"Your content starts in ":"Starts in ",adBlockDetectionId:t.getSessionParams().adBlockDetectionId});var i=l.generatePlayerConfig(t.get("ampConfig")||{});t.debug({playerConfig:i},!0),t.set("playerInstance",m.getAmpPremier().create(t.getContainerElement().get(0),i)),t.initializeAmpEventProcessing(),t.onceReady(function(){t.trigger("playerLoad"),e.resolve()})}}).promise()},initializeAmpEventProcessing:function(){function i(e,t){n.trigger(e,t)}var n=this,o=this.get("playerInstance"),a="flash"==this.getSessionParams().playbackMode;o.addEventListener("ready",e.proxy(function(r){o.addEventListener("started",function(e){i("videoStart",e)}),o.getMediaElement().addEventListener("loadedmetadata",function(){i("loadedmetadata")}),o.addEventListener("playstatechange",e.proxy(function(e){if(e&&e.data){var t=e.data.value;"playing"==t?n.isShowingAd()?i("adResume",e):n.isShowingVideo()&&i("videoResume",e):"ended"==t&&n.isShowingAd()&&i("adEnd")}},this)),o.addEventListener("fullscreenchange",function(e){i(e.data?"fullscreenStart":"fullscreenEnd")}),o.addEventListener("volumechange",e.proxy(function(e){c.log("volumechange","event ==",e),n.isPlayingAd()&&(t.isNumber(e.data.currentVolume)?0==e.data.currentVolume&&this.previous("volume")>0?i("adMute"):e.data.currentVolume>0&&0==this.previous("volume")&&i("adUnmute"):t.isNumber(e.data)&&i(0==e.data?"adMute":"adUnmute")),n.isPlaying()&&i("volumeUpdate")},this)),o.addEventListener("timeupdate",function(e){n.isPlayingVideo()&&(n.getCurrentTime()>n.getDuration()?(n.end(),i("videoEnd")):i("videoTimeUpdate",e))}),o.addEventListener("ended",function(e){n.isShowingVideo()&&i("videoEnd")}),o.addEventListener("error",function(e){i("error",{source:o.getSrc()})}),a?o.addEventListener("adComponentAdsRequest",function(e){var t=e.data;n.isAdPlayerEnabled()&&i("adRequest",{adTag:t.requestURL,receivedData:t})}):o.ads.addEventListener("request",function(e){n.isAdPlayerEnabled()&&i("adRequest",{receivedData:{}})}),function(){var e=function(e){try{var t=e.data;if(t){var n=t.metadata&&t.metadata.wrapperAdIds&&t.metadata.wrapperAdIds[0]||t.id;i("adLoad",{adId:n,adPlatform:t.adPlatform,adSystem:t.adSystem,adTitle:t.title,duration:t.duration,linear:t.linear?1:0,podPosition:t.podPosition,totalAds:t.totalAds,workflow:t.workflow,url:t.requestURL})}}catch(o){}};a?o.addEventListener("adComponentMediaLoaded",e):o.ads.addEventListener("loaded",e)}(),o.addEventListener("playstatechange",function(e){e&&e.data&&"paused"==e.data.value&&(n.isPlayingAd()?i("adPause",{currentTime:n.getCurrentTime()}):n.isPlayingVideo()&&i("videoPause",{currentTime:n.getCurrentTime()}))}),o.addEventListener("mediaPlayerElementEvent",function(e){"videoWindow"==e.data.element&&"click"==e.data.type&&i("click",e)}),o.ads.addEventListener("started",function(e){i("adStart")}),o.ads.addEventListener("ended",function(e){i("adEnd")}),o.ads.addEventListener("timeupdate",function(e){i("adTimeUpdate")}),o.ads.addEventListener("companion",function(e){if(e&&e.data){var t=e.data[0]||e.data.metadata&&e.data.metadata[0];t||(t=e.data&&e.data.companions&&e.data.companions[0]),t&&i("adCompanion",{content:t.data||t.content})}}),null!=o.share&&o.share.addEventListener("share",function(e){n.pause(),i("share",{medium:e.data.provider})}),o.ads.addEventListener("error",function(e){try{var t=e.data.metadata.error;t&&i("adError",{message:t.reason,receivedData:t})}catch(n){}}),o.ads.addEventListener("log",function(e){try{var t=e.data.metadata.metadata.error;t&&i("adError",{message:t.message,receivedData:t})}catch(n){}}),n.toggleReady(!0)},this))},syncThirdPartyPlayer:function(){return e.Deferred(e.proxy(function(t){this.initializeThirdPartyPlayer().done(e.proxy(function(){this.isSynchronized()?t.resolve():this.updateThirdPartyPlayer().done(function(){t.resolve()})},this))},this))},setMuted:function(e){e?(f(this,"setVolume",.01),f(this,"setMuted",!0)):(f(this,"setMuted",!1),f(this,"setVolume",.75))},updateThirdPartyPlayer:function(){var t=this;return e.Deferred(function(e){t.onceReady(function(){var i=t.getSessionParams();t.isSynchronized()||(t.setMuted(t.get("isMuted")),f(t,"controls.setMode",i.showControls?"auto":"none"),f(t,"setAutoplay",i.playOnLoad),f(t,"ads.setEnabled",t.isAdPlayerEnabled()),f(t,"setParams",t.get("params")),f(t,"feed.setData",t.get("ampVideoData")),t.toggleSynchronized(!0)),e.resolve()})}).promise()},getDebugInfo:function(){return t.extend({},this.get("debugInfo"),{playerConfigDefaults:m.getDebugConfig()})}},{generateConfig:function(e){return l.generateDefaultConfig(t.extend(e,{imaEnabled:!0,comscoreEnabled:!0}))},getVersion:function(){var e,t=_nw2e.videoPlayer.version||m.getAmpPremier().VERSION;return(e=t.match(/v([0-9.]+)$/))&&e[1]?e[1]:null},getAmpPremier:function(){return _nw2e.videoPlayer.akamai.amp.AMP},loadConfig:function(e){g||(h=this.getTestConfig(e),m.getAmpPremier().loadDefaults(this.generateConfig(e)),g=!0)},getDefaultPlaybackMode:function(){return m.getAmpPremier().getPlaybackMode()},getConfig:function(e){return this.generateConfig(t.extend({},e))},getDebugConfigParams:function(){return{akamaiJsLibFolderUrl:"../amp.premier",akamaiResourcesFolderUrl:"../resources"}},getTestConfig:function(e){return this.generateConfig(t.extend({},e,this.getDebugConfigParams()))},getDebugConfig:function(){return h}});return m}),Ndn_Require.define("text!templates/ndn/viewer/viewer-module/easi.html",[],function(){return'<html>\n<head>\n    <script type="text/javascript">\n        // IE workaround (unverified if this is actually helping) \n        if (typeof(Object) === "undefined") window.location.reload();\n    </script>\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <script type="text/javascript" src="{{appUrl}}/resources/js/streamsense.4.1504.21.min.js"></script>\n    <script type="text/javascript" src="//cdn.spotxcdn.com/website/integrations/easi/inform/inform-solution.v2.js"></script>\n    <script type="text/javascript">\n        var oAdUnit;\n        \n        var informStreamingTagMetadata,\n            informStreamingTag;\n        \n        var previousAdCountdownText = \'\';\n        \n        /**\n         * @param {Object} data Structured data concerning the comScore Video Metrix Stream Sense configuration. Format:\n         * <pre>{\n         *   \'enabled\': Boolean, // Whether comScore Video Metrix is enabled\n         *   \'metadata\': Object, // Structured data concerning the metadata used for ad playback\n         * }</pre>\n         */\n        function initializeComscore(data) {\n            if (data.enabled) {\n                informStreamingTag = new ns_.StreamingTag({\n                    customerC2: \'11112732\'\n                });\n                informStreamingTagMetadata = data.metadata; //.comscoreMetadata;\n            }\n            else {\n                // Make a dummy placeholder object \n                informStreamingTag = {\n                    playVideoAdvertisement: function() {},\n                    stop: function() {}\n                };\n            }\n        }\n        \n        function startAd(params) {\n            window.parent.{{closures.onAdRequest}}();\n            \n            initializeComscore(params.comscore);\n            \n            try {\n                oAdUnit = placeAdUnit("inform_container", {\n                    "spotx_ad_unit": params.adUnitType,\n                    "spotx_channel_id": params.channelId,\n                    "spotx_vpix": params.excludedCreatives,\n                    "spotx_ad_format": params.adFormat,\n                    "spotx_content_page_url": params.embedOriginUrl,\n                    "spotx_content_width": params.width,\n                    "spotx_content_height": params.height, \n                    "spotx_ad_done_function": "onAdDone",\n                    "custom": params.customData,\n                    "events": {\n                        \'AdPaused\': onAdPaused,\n                        \'AdPlaying\': onAdPlaying,\n                        \'AdLoaded\': window.parent.{{closures.onAdLoad}},\n                        \'AdImpression\': onAdImpression,\n                        \'AdStarted\': onAdStarted,\n                        \'AdVideoStart\': onAdVideoStart,\n                        \'AdRemainingTimeChange\': onAdTimeUpdate\n                    }\n                });\n            }\n            catch (e) {\n                window.parent.{{closures.onAdError}}(e.getMessage());\n            }\n        }\n        \n        function onAdStarted() {\n            document.getElementById(\'adchoices-container\').style.display = \'block\';\n        }\n        \n        function onAdPaused() {\n            window.parent.{{closures.onAdPause}}();\n            informStreamingTag.stop();\n        }\n        \n        function onAdPlaying() {\n            informStreamingTag.playVideoAdvertisement(informStreamingTagMetadata);\n            \n            if (informStreamingTagMetadata) {\n                window.parent.{{closures.onComscoreCall}}();\n            }\n        }\n        \n        function onAdTimeUpdate() {\n            var timeRemaining = parseInt(oAdUnit.getAdOS().getAdRemainingTime(), 10),\n                text = \'Time Remaining: \';\n            \n            if (!isNaN(timeRemaining)) {\n                text += timeRemaining + \' second\';\n                if (timeRemaining != 1) {\n                    text += \'s\';\n                }\n            }\n            else {\n                text = \'\';\n            }\n            \n            // If time remaining is less than 0, hide time remaining\n            if (timeRemaining < 0) text = \'\';\n            \n            if (text != previousAdCountdownText) {\n                document.getElementById(\'inform-time-remaining\').innerHTML = text;\n                previousAdCountdownText = text;\n            }\n        }\n        \n        function onAdImpression() {\n        	window.parent.{{closures.onAdStart}}(\'AdImpression\');\n        }\n        \n        function onAdVideoStart() {\n        	window.parent.{{closures.onAdStart}}(\'AdVideoStart\');\n        	onAdPlaying();\n        }\n        \n        function stopAd() {\n            oAdUnit && oAdUnit.close();\n        }\n        \n        function onAdDone(displayedAd) {\n            informStreamingTag.stop();\n            window.parent.{{closures.onAdDone}}(displayedAd);\n        }\n    </script>\n    <style>\n        .ndn-viewer-viewerModule-easi {\n          width: 100%;\n          height: 100%;\n          position: relative;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices {\n          color: #6a6f72;\n          width: 100%;\n          height: 24px;\n          line-height: 24px;\n          font-family: Helvetica, Arial, Tahoma;\n          font-size: 12px;\n          text-align: right;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices-logo {\n          display: block;\n          width: 78px;\n          height: 16px;\n          margin: 4px;\n          float: left;\n          background: url(\'{{appUrl}}/img/ad-choices.png\');\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices-logo:hover,\n        .ndn-viewer-viewerModule-easi-adchoices-logo:active {\n          background-position: 78px 0;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices,\n        .ndn-viewer-viewerModule-easi-adchoices-text,\n        .ndn-viewer-viewerModule-easi-player {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices-background {\n          background: black;\n          height: 24px;\n          opacity: 0.7;\n          z-index: 9001;\n        }\n        \n        .ndn-viewer-viewerModule-easi-adchoices,\n        .ndn-viewer-viewerModule-easi-adchoices-text {\n            z-index: 9002;\n        }\n    </style>\n</head>\n<body style="margin:0;">\n    <div class="ndn-viewer-viewerModule-easi" style="width:{{width}}px;height:{{height}}px;">\n        <div id="adchoices-container" class="ndn-viewer-viewerModule-easi-adchoices" style="display:none;">\n            <div class="ndn-viewer-viewerModule-easi-adchoices-background"></div>\n            <div class="ndn-viewer-viewerModule-easi-adchoices-text">\n                <a class="ndn-viewer-viewerModule-easi-adchoices-logo" href="http://assets.newsinc.com/info/adchoices.html" target="_blank"></a> <span id="inform-time-remaining"></span>&nbsp;\n            </div>\n        </div>\n        <div class="ndn-viewer-viewerModule-easi-player" id="inform_container"></div>\n    </div>\n</body>\n</html>'}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Easi",["jquery","underscore","backbone","mustache","models/Ndn/App","models/Ndn/Viewer/ViewerModule","models/Ndn/Utils/DomElement","models/Ndn/Utils/UserAgent","models/Ndn/Debugger","text!templates/ndn/viewer/viewer-module/easi.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,a,r,s,l,d){var c=o.getSetting("easiTimeout")?parseInt(o.getSetting("easiTimeout")):15,u=l.inMode("easi");return a.extend({defaults:{playerInstanceId:4},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.toggleAdPlayer(!0),this.toggleContentPlayer(!1);var t=this;this.on({"adEnd adTimeout adError adUnavailable":function(){t.endSession()}})},prepareSession:function(){this.toggleReady(!1);var t=this;return e.Deferred(function(e){t.onceReady(e.resolve),t.initializeDom(),t.initializeIframeContent()}).promise()},initializeDom:function(){var t=this.get("containerElement"),i=t.width(),n=t.height(),o=function(){var o=document.createElement("iframe");return o.scrolling="no",o.style.overflow="hidden",o.style.width=i+"px",o.style.height=n+"px",o.style.border="0",o.style.background="transparent none",e(o).attr("allowTransparency","true"),e(o).addClass("ndn_easiPlayer"),t.html("").append(o),o}(),a=this;o.onload=function(){a.toggleReady(!0),o.onload=null},this.set("iframeElement",o),this.debug({iframeElementHtml:r.getFullHtml(o)})},initializeIframeContent:function(){var e=this.get("iframeElement"),t=this.getIframeContent(),i=e.contentDocument;i.open(),i.write(t),i.close(),this.set("iframeElement",e),this.debug({iframeContent:t})},getIframeContent:function(){var t=this.getContainerElement(),i=this.getIframeClosures(),a=n.to_html(d.replace(/\{\{appUrl\}\}/g,o.getAppUrl()),{width:t.width(),height:t.height(),closures:i});return this.debug({iframeContent:a,instructions:function(){var t=["var _nw2e = _nw2e || [];","_nw2e.closures = _nw2e.closures || {};"];return e.each(i,function(e,i){t.push(i+' = function() { console.log("'+e+'", arguments); };')}),t}()}),a},getIframeClosures:function(){function e(e){return o.makeClosureGlobal(t.makeSessionClosure(e))}var t=this;return{onComscoreCall:e(function(){u&&console.log("[Ndn_Ads_EasiInformPlayer] onComscoreCall"),t.updateScheduleLog({hasMadeEasiComscoreCall:!0})}),onAdRequest:e(function(){u&&console.log("[Ndn_Ads_EasiInformPlayer] onAdRequest"),t.trigger("adRequest",{receivedData:{},playerInstanceType:4})}),onAdLoad:e(function(){u&&console.log("[Ndn_Ads_EasiInformPlayer] onAdLoad"),t.trigger("adLoad",{})}),onAdStart:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] "+e),t.isShowingAd()||t.trigger("adStart",{})}),onAdDone:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] AdDone "+e),t.trigger(e?"adEnd":"adUnavailable")}),onAdError:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] AdError ",e),t.trigger("adError",{message:e})}),onAdPause:e(function(e){u&&console.log("[Ndn_Ads_EasiInformPlayer] AdPause ",e),t.trigger("adPause")})}},startSession:function(t){a.prototype.startSession.apply(this,arguments);var i=this,n=this.getViewer(),r="undefined"!=typeof t.timeout?t.timeout:c,s=!!t.comscore,l=t.comscore||{},d="undefined"!=typeof t.allowFlash?t.allowFlash:!0;n.getSessionIndex();setTimeout(this.makeSessionClosure(function(){i.isShowingAd()||(u&&console.log("[Ndn_Ads_EasiInformPlayer] adTimeout"),i.trigger("adTimeout"))}),1e3*r),this.prepareSession().done(function(){var n=i.get("containerElement"),a=n.width(),r=n.height(),c=t.customData||{},u={channelId:t.channelId,adFormat:d?"":"html5",excludedCreatives:d?"[]":'["FLV","VPAID"]',adUnitType:t.adUnitType||"incontent",embedOriginUrl:o.getEmbedOriginUrl(),width:a,height:r,comscore:{enabled:s,metadata:{ns_st_ci:l.videoAssetId,c3:l.distributorName,c4:l.providerName,c6:l.siteSection}},customData:e.toJSON({vs:c.videoSizeId,sitesection:c.siteSection,wgt:c.wgtValue,plt:c.pltValue,aoi:c.adOpportunityIndex,asi:c.spotxCallIndex,fp:c.foldPositionId,ab:c.adBlockDetectionId,dpid:c.adCampaignId,eidx:c.embedIndex,ceidx:c.widgetId,pw:a,ph:r})};i.debug({instructions:function(){var t=i.get("debugInfo").instructions;return t.push("iframeElement.onload = function() { iframeElement.contentWindow.startAd("+e.toJSON(u)+"); iframeElement.onload = null; };"),t}()},!0),i.get("iframeElement").contentWindow.startAd(u)})},halt:function(){var e=this.get("iframeElement");e&&e.contentWindow&&e.contentWindow.stopAd&&e.contentWindow.stopAd(),a.prototype.halt.apply(this,arguments)}})}),Ndn_Require.define("text!templates/ndn/viewer/viewer-module/display-ad.html",[],function(){return"<!doctype html>\n<html>\n<head></head>\n<body style=\"margin:0;\">\n<script type=\"text/javascript\">\n    rp_account   = '13402';\n    rp_site      = '{{site}}';\n    rp_zonesize  = '{{zonesize}}';\n    rp_adtype    = 'js';\n    rp_smartfile = '[SMART FILE URL]';\n    rp_page = '{{embedOriginUrl}}';\n    rp_kw = '{{kw}}';\n</script>\n<script type=\"text/javascript\" src=\"http://ads.rubiconproject.com/ad/13402.js\"></script>\n</body>\n</html>"}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/DisplayAd",["jquery","mustache","models/Ndn/App","models/Ndn/Viewer/ViewerModule","models/Ndn/Debugger","models/Ndn/Utils/DomElement","text!templates/ndn/viewer/viewer-module/display-ad.html","lib/jquery_plugins/jquery.json"],function(e,t,i,n,o,a,r){var s=(o.inMode("displayAd"),n.extend({defaults:{duration:null},initialize:function(e){n.prototype.initialize.apply(this,arguments),o.inMode("adPlayer")&&this.on("all",function(e){console.log("Ndn_Ads_DisplayAd event: "+e)}),this.createIframe(),this.toggleAdPlayer(!0)},createIframe:function(){var t=300,i=250,n=document.createElement("iframe");n.scrolling="no",n.style.overflow="hidden",n.style.width=t+"px",n.style.height=i+"px",n.style.border="0",n.style.background="transparent none",e(n).attr("allowTransparency","true"),e(n).addClass("ndn_easiPlayer"),n.onload=function(){n.onload=null},this.getContainerElement().get(0).appendChild(n),this.set("iframeElement",n),this.debug({iframeElementHtml:a.getFullHtml(n)})},getDuration:function(){return this.get("duration")},getCurrentTime:function(){return 0},startSession:function(e){n.prototype.startSession.apply(this,arguments);var t=e.duration,i=s.generateCode(e),o=this.get("iframeElement").contentDocument;if(o.open(),o.write(i),o.close(),this.debug({iframeContent:i},!0),this.trigger("adRequest",{receivedData:{},playerInstanceType:6}),this.trigger("adStart",{}),this.set("duration",t),t>0){var a=this;setTimeout(this.makeSessionClosure(function(){a.trigger("adEnd"),a.endSession()}),1e3*t)}}},{generateCode:function(e){var i="undefined"!=typeof e.isHtml5?e.isHtml5:!e.isDesktop,n=function(){return e.isBlacksheep?i?"585612-15":"585610-15":e.isPremium?i?"521826-15":"522378-15":i?"391318-15":"429502-15"}(),o=i?83422:91234;return o=e.site||o,n=e.zonesize||n,t.to_html(r.replace(/\{\{embedOriginUrl\}\}/g,e.embedOriginUrl),{site:o,zonesize:n,kw:e.pltValue+"-"+e.adCampaignId})}}));return s}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/SoundManager",["jquery","backbone"],function(e,t){return t.Model.extend({defaults:{player:null,active:!1},initialize:function(e){var t=this;this.set("player",e),e.getContainerElement().on("mouseenter",function(){t.isActive()&&e.setMuted(!1)}).on("mouseleave",function(){t.isActive()&&e.setMuted(!0)}),e.on("volumeUpdate",function(){})},isActive:function(){return this.get("active")},setActive:function(e){this.set("active",e)}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel",["jquery","backbone"],function(e,t){return t.Model.extend({defaults:{informPlayer:null},initialize:function(e){t.Model.prototype.initialize.apply(this,arguments),this.set({informPlayer:e});var i=this;this.getPlayer().on("viewerModuleEnd",function(){i.hide()})},getPlayer:function(){return this.get("informPlayer")},hide:function(){this.get("view").$el.hide()},show:function(){this.get("view").$el.prependTo(this.getPlayer().getContainerElement()).show()},isShowing:function(){return this.get("view").$el.is(":visible")}})}),Ndn_Require.define("text!templates/ndn/video-player/endslate-overlay.html",[],function(){return'<div class="ndn_endslateContainer">\n	{{^mediaIsBlocked}}\n	    <div class="ndn_endslateClickSurface"></div>\n	    {{#showUnavailableAlert}}\n	    <div class="ndn_endslateAlertUnavailable">The requested video is no longer available</div>\n	    {{/showUnavailableAlert}}\n	    <div class="ndn_upNextContainer">\n			<span class="ndn_upNextLabel">Up Next: </span> \n			<div class="ndn_upNextThumbnailContainer">\n                <div class="ndn_thumbnailPlayIcon"></div>\n		    	<img class="ndn_upNextThumbnail" src="{{upNextThumbnail}}" />\n			</div>\n			<span class="ndn_upNextTitle">{{upNextTitle}}</span>			\n	    </div> \n	    {{#showCountdown}}\n	    <div class="ndn_startsInContainer">\n	        <div class="ndn_startsInLabel">Starts In:</div>\n	        <div class="ndn_startsInCountdownContainer">\n		        <span class="ndn_startsInCountdown">{{countdownValue}}</span>\n	        </div>\n	    </div>\n	    {{/showCountdown}}	    \n	{{/mediaIsBlocked}}\n    {{#mediaIsBlocked}}\n    	<div class="ndn_endslateMediaBlocked">We\'re sorry but this video cannot be played from your location.</div>\n    {{/mediaIsBlocked}}\n</div>'}),Ndn_Require.define("jquery_autoellipsis",["jquery","underscore"],function(e,t){!function(e,t){function i(t){void 0===window.ndn_ellipsis_handler&&(window.ndn_ellipsis_handler=new EllipsisResizeHandler,e(window).on("resize",function(){clearTimeout(window.ndnResizeTimeout),window.ndnResizeTimeout=setTimeout(function(){window.ndn_ellipsis_handler.onResize.call(window.ndn_ellipsis_handler)},100)})),t.each(function(){window.ndn_ellipsis_handler.$elements=window.ndn_ellipsis_handler.$elements.add(this)})}function n(i,n){var s=i.data("jqae");s||(s={});var l=s.wrapperElement;l||(l=i.wrapInner("<div/>").find(">div"),l.css({margin:"0 0 0 0",padding:0,border:0}));var d=l.data("jqae");d||(d={});var c=d.originalContent;c?l=d.originalContent.clone(!0).data("jqae",{originalContent:c}).replaceAll(l):l.data("jqae",{originalContent:l.clone(!0)}),i.data("jqae",{wrapperElement:l,containerWidth:i.width(),containerHeight:i.height()});var u=i.height(),p=(parseInt(i.css("padding-top"),10)||0)+(parseInt(i.css("border-top-width"),10)||0)-(l.offset().top-i.offset().top),h=!1,g=l;n.selector&&(g=e(l.find(n.selector).get().reverse())),g.each(function(){var i=e(this),s=i.text(),d=!1;if(l.innerHeight()-i.innerHeight()>u+p)i.remove();else if(r(i),i.contents().length){if(h&&(a(i).get(0).nodeValue+=n.ellipsis,h=!1),1==i.contents().length){if(void 0===i.data("jaelh")){var c=l.attr("style"),g=l.html();l.attr("style","height: auto; padding: 0;").html("&nbsp;"),l.data("jaelh",l.innerHeight()),l.html(g),void 0!==c?l.attr("style",c):l.removeAttr("style")}var f=u+p+i.data("jaelh"),m=l.innerHeight(),y=f/m;if(1>y){var v=a(i),_=v.get(0).nodeValue.split(" ");v.get(0).nodeValue=t.first(_,Math.ceil(_.length*y)).join(" ")}}for(;l.innerHeight()>u+p;){if(d=o(i),!d){h=!0,i.remove();break}if(r(i),!i.contents().length){h=!0,i.remove();break}a(i).get(0).nodeValue+=n.ellipsis}"onEllipsis"==n.setTitle&&d||"always"==n.setTitle?i.attr("title",s):"never"!=n.setTitle&&i.removeAttr("title")}})}function o(t){var i=a(t);if(i.length){var n=i.get(0).nodeValue,o=n.lastIndexOf(" ");return o>-1?(n=e.trim(n.substring(0,o)),i.get(0).nodeValue=n):i.get(0).nodeValue="",!0}return!1}function a(e){if(e.contents().length){var t=e.contents(),i=t.eq(t.length-1);return i.filter(s).length?i:a(i)}e.append("");var t=e.contents();return t.eq(t.length-1)}function r(t){if(t.contents().length){var i=t.contents(),n=i.eq(i.length-1);if(n.filter(s).length){var o=n.get(0).nodeValue;return o=e.trim(o),""==o?(n.remove(),!0):!1}for(;r(n););return n.contents().length?!1:(n.remove(),!0)}return!1}function s(){return 3===this.nodeType}function l(e,t){p[e]=t,u||(u=window.setInterval(function(){c()},200))}function d(e){p[e]&&(delete p[e],p.length||u&&(window.clearInterval(u),u=void 0))}function c(){if(!h){h=!0;for(var t in p)e(t).each(function(){var i,o;i=e(this),o=i.data("jqae"),(o.containerWidth!=i.width()||o.containerHeight!=i.height())&&n(i,p[t])});h=!1}}EllipsisResizeHandler=function(){this.$elements=e(),this.onResize=function(){this.$elements.ellipsis()}};var u,p={},h=!1,g={ellipsis:"...",setTitle:"never",live:!1};e.fn.ellipsis=function(t,o){var a,r;return a=e(this),"string"!=typeof t&&(o=t,t=void 0),r=e.extend({},g,o),r.selector=t,a.each(function(){var t=e(this);n(t,r)}),r.live?l(a.selector,r):d(a.selector),r.updateOnWindowResize&&i(a),this}}(e,t)}),Ndn_Require.define("lib/jquery_plugins/jquery.backstretch.min",["jquery"],function(e){!function(e,t,i){e.fn.backstretch=function(n,o){return(n===i||0===n.length)&&e.error("No images were supplied for Backstretch"),0===e(t).scrollTop()&&t.scrollTo(0,0),this.each(function(){var t=e(this),i=t.data("backstretch");if(i){if("string"==typeof n&&"function"==typeof i[n])return void i[n](o);o=e.extend(i.options,o),i.destroy(!0)}i=new a(this,n,o),t.data("backstretch",i)})},e.backstretch=function(t,i){return e("body").backstretch(t,i).data("backstretch")},e.expr[":"].backstretch=function(t){return e(t).data("backstretch")!==i},e.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var n={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},o={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},a=function(i,o,a){this.options=e.extend({},e.fn.backstretch.defaults,a||{}),this.images=e.isArray(o)?o:[o],e.each(this.images,function(){e("<img />")[0].src=this}),this.isBody=i===document.body,this.$container=e(i),this.$root=this.isBody?e(r?t:document):this.$container,i=this.$container.children(".backstretch").first(),this.$wrap=i.length?i:e('<div class="backstretch"></div>').css(n).appendTo(this.$container),this.isBody||(i=this.$container.css("position"),o=this.$container.css("zIndex"),this.$container.css({position:"static"===i?"relative":i,zIndex:"auto"===o?0:o,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&r?"fixed":"absolute"}),this.index=0,this.show(this.index),e(t).on("resize.backstretch",e.proxy(this.resize,this)).on("orientationchange.backstretch",e.proxy(function(){this.isBody&&0===t.pageYOffset&&(t.scrollTo(0,1),this.resize())},this))};a.prototype={resize:function(){try{var e,i={left:0,top:0},n=this.isBody?this.$root.width():this.$root.innerWidth(),o=n,a=this.isBody?t.innerHeight?t.innerHeight:this.$root.height():this.$root.innerHeight(),r=o/this.$img.data("ratio");r>=a?(e=(r-a)/2,this.options.centeredY&&(i.top="-"+e+"px")):(r=a,o=r*this.$img.data("ratio"),e=(o-n)/2,this.options.centeredX&&(i.left="-"+e+"px")),this.$wrap.css({width:n,height:a}).find("img:not(.deleteable)").css({width:o,height:r}).css(i)}catch(s){}return this},show:function(t){if(!(Math.abs(t)>this.images.length-1)){var i=this,n=i.$wrap.find("img").addClass("deleteable"),a={relatedTarget:i.$container[0]};return i.$container.trigger(e.Event("backstretch.before",a),[i,t]),this.index=t,clearInterval(i.interval),i.$img=e("<img />").css(o).bind("load",function(o){var r=this.width||e(o.target).width();o=this.height||e(o.target).height(),e(this).data("ratio",r/o),e(this).fadeIn(i.options.speed||i.options.fade,function(){n.remove(),i.paused||i.cycle(),e(["after","show"]).each(function(){i.$container.trigger(e.Event("backstretch."+this,a),[i,t])})}),i.resize()}).appendTo(i.$wrap),i.$img.attr("src",i.images[t]),i}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(e.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(i){e(t).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),i||this.$wrap.remove(),this.$container.removeData("backstretch")}};var r,s=navigator.userAgent,l=navigator.platform,d=s.match(/AppleWebKit\/([0-9]+)/),d=!!d&&d[1],c=s.match(/Fennec\/([0-9]+)/),c=!!c&&c[1],u=s.match(/Opera Mobi\/([0-9]+)/),p=!!u&&u[1],h=s.match(/MSIE ([0-9]+)/),h=!!h&&h[1];r=!((-1<l.indexOf("iPhone")||-1<l.indexOf("iPad")||-1<l.indexOf("iPod"))&&d&&534>d||t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini)||u&&7458>p||-1<s.indexOf("Android")&&d&&533>d||c&&6>c||"palmGetResource"in t&&d&&534>d||-1<s.indexOf("MeeGo")&&-1<s.indexOf("NokiaBrowser/8.5.0")||h&&6>=h)}(e,window)}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateView",["jquery","backbone","mustache","text!templates/ndn/video-player/endslate-overlay.html","jquery_autoellipsis","lib/jquery_plugins/jquery.backstretch.min"],function(e,t,i,n){return t.View.extend({events:{"click .ndn_endslateClickSurface":"onSurfaceClick"},initialize:function(){this.setElement(e(document.createElement("div")).addClass("ndn_endslateOverlay ndn_playerOverlay").prependTo(this.model.getPlayer().getContainerElement()).hide().get(0)),this.model.on("change:countdownValue",function(){this.$el.find(".ndn_startsInCountdown").html(this.model.get("countdownValue"))}.bind(this))},hide:function(){this.$el.hide()},show:function(e){this.model.set("type",e);var t=this.model.getTemplateData();this.$el.html(i.to_html(n,t)),this.$el.appendTo(this.model.getPlayer().getContainerElement()).show(),t.backgroundImage&&(this.$el.backstretch(t.backgroundImage).css("z-index",""),this.$el.find(".backstretch").css("z-index",110)),this.$el.height()<300&&this.$el.find(".ndn_upNextTitle").ellipsis(),this.$el.height()<250&&this.$el.find(".ndn_justWatchedContainer").hide(),
this.model.displaysCountdown()&&this.model.countdownToPlay(),this.$el.prependTo(this.model.getPlayer().getContainerElement()).show()},onSurfaceClick:function(){this.model.getPlayer().requestVideoStart({source:"endslateNextVideoClick"}),this.hide()}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateModel",["jquery","underscore","mustache","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateView","models/Ndn/Debug"],function(e,t,i,n,o,a){var r=5;return n.extend({defaults:{viewerModule:null,type:null,countdownInterval:null,countdownValue:r,view:null},initialize:function(e){n.prototype.initialize.apply(this,arguments),this.set("view",new o({model:this}))},show:function(e){n.prototype.show.apply(this,arguments),this.get("view").show(e)},getTemplateData:function(){var e=this.getPlayer().getSessionParams().videoData||{},t={upNextTitle:e.videoTitle,upNextThumbnail:e.stillImageUrl,showUnavailableAlert:"videoNotAvailable"==this.get("type"),showCountdown:this.displaysCountdown(),mediaIsBlocked:"mediaBlocked"==this.get("type"),countdownValue:this.get("countdownValue"),backgroundImage:e.stillImageUrl};return t},displaysCountdown:function(){return"videoNotAvailable"==this.get("type")&&this.getPlayer().getSessionParams().playOnLoad},countdownToPlay:function(){var e=this.getPlayer(),t=this;this.set("countdownInterval",setInterval(function(){this.get("countdownValue")<=0&&(t.cancelCountdown(),t.hide(),e.play()),a.inMode("endslateTimer")||this.set("countdownValue",Math.max(0,this.get("countdownValue")-1))}.bind(this),1e3))},cancelCountdown:function(){null!==this.get("countdownInterval")&&(clearInterval(this.get("countdownInterval")),this.set({countdownInterval:null,countdownValue:r}))}})}),Ndn_Require.define("models/Ndn/Utils/FastClick",[],function(){var e="ontouchstart"in window;return function(t){function i(e){return l=!0,s.x=e.targetTouches[0].clientX,s.y=e.targetTouches[0].clientY,s.scroll=window.pageYOffset,!0}function n(e){return l&&(Math.abs(e.targetTouches[0].clientX-s.x)>10||Math.abs(e.targetTouches[0].clientY-s.y)>10)&&(l=!1),!0}function o(e){var t,i;return!l||Math.abs(window.pageYOffset-s.scroll)>5?!0:(t=document.elementFromPoint(s.x,s.y),t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),(-1===t.className.indexOf("ndn_fastClick_clickevent")||-1!==t.className.indexOf("ndn_fastClick_touchandclickevent"))&&(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,0,0,s.x,s.y,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)),t instanceof HTMLSelectElement||-1!==t.className.indexOf("ndn_fastClick_clickevent")?!1:void e.preventDefault())}function a(e){l=!1}function r(t){if(!window.event)return!0;var i,n=!0,o=window.event.forwardedTouchEvent;return e&&(i=t.currentTarget,(!i||!o&&-1==i.className.indexOf("ndn_fastClick_clickevent"))&&(n=!1)),n?!0:(t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),!1)}if("undefined"==typeof HTMLElement)return!1;if(!(t instanceof HTMLElement))throw new TypeError("Layer must be instance of HTMLElement");e&&(t.addEventListener("touchstart",i,!0),t.addEventListener("touchmove",n,!0),t.addEventListener("touchend",o,!0),t.addEventListener("touchcancel",a,!0)),t.addEventListener("click",r,!0),t.onclick instanceof Function&&(t.addEventListener("click",t.onclick,!1),t.onclick="");var s={x:0,y:0,scroll:0},l=!1}}),Ndn_Require.define("text!templates/ndn/video-player/info-overlay.html",[],function(){return'<div class="ndn_videoInfo">\n	<img class="ndn_videoProviderLogo" src="{{videoProviderLogo}}" />\n	<div class="ndn_videoTitle">{{videoTitle}}</div>\n	<div class="ndn_videoInfoDescription">{{videoDescription}}</div>\n	<div class="ndn_videoProviderName">{{videoProviderName}}</div>\n	<div class="ndn_toggleInfoDescription ndn_icon_info-circled" title="More Info"></div>\n	<div class="ndn_toggleShare ndn_icon_share" title="Share"></div>\n	<div class="ndn_infoPanelOverlay"></div>\n</div>'}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoView",["jquery","mustache","backbone","models/Ndn/Utils/FastClick","text!templates/ndn/video-player/info-overlay.html","jquery_autoellipsis"],function(e,t,i,n,o){return i.View.extend({events:{"click .ndn_toggleInfoDescription":"toggleDescription","click .ndn_toggleShare":"openShareOverlay"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.setElement(e('<div class="ndn_infoOverlayContainer ndn_playerOverlay">').get(0))},toggleDescription:function(){var e=this.$el.find(".ndn_toggleInfoDescription"),t=this.$el.find(".ndn_videoInfoDescription");e.hasClass("ndn_icon_info-circled")?(e.removeClass("ndn_icon_info-circled").addClass("ndn_icon_cancel-circled"),t.slideToggle("500","swing")):(e.removeClass("ndn_icon_cancel-circled").addClass("ndn_icon_info-circled"),t.slideToggle("500","swing"))},openShareOverlay:function(e){var t=this.model.getPlayer(),i=t.getOverlays(),n=i.getOverlay("share"),o=i.getOverlay("start"),a=this.model;return o.isShowing()?(o.togglePlayButton(!1),a.hide()):(t.pause(),i.hideAll()),n.show(),!1},updateHtml:function(e){this.$el.html(t.to_html(o,{videoTitle:e.videoTitle,videoDescription:e.description,videoProviderLogo:e.provider.logoUrl,videoProviderName:e.provider.name})),this.$el.find(".ndn_icon_share").toggle(!!this.model.getPlayer().getSessionParams().share)}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoModel",["jquery","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoView"],function(e,t,i){return t.extend({defaults:{view:null,toggleableDisplay:!0},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.set("view",new i({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var n=this,o=this.get("view");e.on({videoLoad:function(e){o.updateHtml(e.videoData)},"adStart videoStart adResume videoResume":function(){n.setToggleableDisplay(!0).setVisibility(!1)},"adPause videoPause":function(){n.setToggleableDisplay(!1).setVisibility(!0,!0)}}),e.getContainerElement().on({"mouseenter touchstart":function(){n.get("toggleableDisplay")&&n.setVisibility(!0)},"mouseleave touchend":function(){n.get("toggleableDisplay")&&n.setVisibility(!1)}})},setVisibility:function(e,t){"undefined"==typeof t&&(t=!1);var i=this.get("view").$el,n="flash"!=this.getPlayer().getSessionParams().playbackMode;return n?e?(i.stop(!0,!0).css("display","block").css("visibility","visible"),i.delay(0).fadeIn(900)):i.stop(!0,!0).delay(4700).fadeOut(900):e?i.stop(!0,!0).fadeIn():i.stop(!0,!0).delay(1e3).fadeOut(800),t&&i.stop(!0,!0),this},setToggleableDisplay:function(e){return this.set("toggleableDisplay",e),this}})}),Ndn_Require.define("jquery_bxslider",["jquery"],function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,slideHeight:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};e.fn.bxSlider=function(o){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(o)}),this;var a={},r=this;t.el=this;var s=e(window).width(),l=e(window).height(),d=function(){a.settings=e.extend({},n,o),a.settings.slideWidth=parseInt(a.settings.slideWidth),a.settings.slideHeight=parseInt(a.settings.slideHeight),a.children=r.children(a.settings.slideSelector),a.children.length<a.settings.minSlides&&(a.settings.minSlides=a.children.length),a.children.length<a.settings.maxSlides&&(a.settings.maxSlides=a.children.length),a.settings.randomStart&&(a.settings.startSlide=Math.floor(Math.random()*a.children.length)),a.active={index:a.settings.startSlide},a.carousel=a.settings.minSlides>1||a.settings.maxSlides>1,a.carousel&&(a.settings.preloadImages="all"),a.minThreshold=a.settings.minSlides*a.settings.slideWidth+(a.settings.minSlides-1)*a.settings.slideMargin,a.maxThreshold=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin,a.working=!1,a.controls={},a.interval=null,a.animProp="vertical"==a.settings.mode?"top":"left",a.usingCSS=a.settings.useCSS&&"fade"!=a.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return a.cssPrefix=t[i].replace("Perspective","").toLowerCase(),a.animProp="-"+a.cssPrefix+"-transform",!0;return!1}(),"vertical"==a.settings.mode&&(a.settings.maxSlides=a.settings.minSlides),c()},c=function(){r.wrap('<div class="ndn_carousel-wrapper"><div class="ndn_carousel-viewport"></div></div>'),a.viewport=r.parent(),a.loader=e('<div class="ndn_carousel-loading" />'),a.viewport.prepend(a.loader),r.css({width:"horizontal"==a.settings.mode?215*a.children.length+"%":"auto",position:"relative"}),a.usingCSS&&a.settings.easing?r.css("-"+a.cssPrefix+"-transition-timing-function",a.settings.easing):a.settings.easing||(a.settings.easing="swing");f();if(a.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),a.viewport.parent().css({maxWidth:h()}),a.children.css({"float":"horizontal"==a.settings.mode?"left":"none",listStyle:"none",position:"relative"}),a.children.width(g()),"horizontal"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginRight",a.settings.slideMargin),"vertical"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginBottom",a.settings.slideMargin),"fade"==a.settings.mode&&(a.children.css({position:"absolute",zIndex:0,display:"none"}),a.children.eq(a.settings.startSlide).css({zIndex:50,display:"block"})),a.controls.el=e('<div class="ndn_carousel-controls" />'),a.settings.captions&&N(),a.settings.infiniteLoop&&"fade"!=a.settings.mode&&!a.settings.ticker){var t="vertical"==a.settings.mode?a.settings.minSlides:a.settings.maxSlides,i=a.children.slice(0,t).clone().addClass("ndn_carousel-clone"),n=a.children.slice(-t).clone().addClass("ndn_carousel-clone");r.append(i).prepend(n)}a.active.last=a.settings.startSlide==m()-1,a.settings.video&&r.fitVids();var o=a.children.eq(a.settings.startSlide);"all"==a.settings.preloadImages&&(o=r.children()),a.settings.ticker?a.settings.pager=!1:(a.settings.pager&&A(),a.settings.controls&&b(),a.settings.auto&&a.settings.autoControls&&C(),(a.settings.controls||a.settings.autoControls||a.settings.pager)&&a.viewport.after(a.controls.el)),o.imagesLoaded(u)},u=function(){a.loader.remove(),v(),"vertical"==a.settings.mode&&(a.settings.adaptiveHeight=!0),a.viewport.height(p()),r.redrawSlider(),a.settings.onSliderLoad(a.active.index),a.initialized=!0,e(window).bind("resize",H),a.settings.auto&&a.settings.autoStart&&L(),a.settings.ticker&&R(),a.settings.pager&&M(a.settings.startSlide),a.settings.controls&&k(),a.settings.touchEnabled&&!a.settings.ticker&&V()},p=function(){if(a.settings.slideHeight)return a.settings.slideHeight;var t=0,n=e();if("vertical"==a.settings.mode||a.settings.adaptiveHeight)if(a.carousel){var o=1==a.settings.moveSlides?a.active.index:a.active.index*y();for(n=a.children.eq(o),i=1;i<=a.settings.maxSlides-1;i++)n=o+i>=a.children.length?n.add(a.children.eq(i-1)):n.add(a.children.eq(o+i))}else n=a.children.eq(a.active.index);else n=a.children;return"vertical"==a.settings.mode?(n.each(function(i){t+=e(this).outerHeight()}),a.settings.slideMargin>0&&(t+=a.settings.slideMargin*(a.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),t},h=function(){var e="100%";return a.settings.slideWidth>0&&(e="horizontal"==a.settings.mode?a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin:a.settings.slideWidth),e},g=function(){var e=a.settings.slideWidth,t=a.viewport.width();return 0==a.settings.slideWidth||a.settings.slideWidth>t&&!a.carousel||"vertical"==a.settings.mode?e=t:a.settings.maxSlides>1&&"horizontal"==a.settings.mode&&(t>a.maxThreshold||t<a.minThreshold&&(e=(t-a.settings.slideMargin*(a.settings.minSlides-1))/a.settings.minSlides)),e},f=function(){var e=1;if("horizontal"==a.settings.mode&&a.settings.slideWidth>0)if(a.viewport.width()<a.minThreshold)e=a.settings.minSlides;else if(a.viewport.width()>a.maxThreshold)e=a.settings.maxSlides;else{var t=a.children.first().width();e=Math.floor(a.viewport.width()/t)}else"vertical"==a.settings.mode&&(e=a.settings.minSlides);return e},m=function(){var e=0;if(a.settings.moveSlides>0)if(a.settings.infiniteLoop)e=a.children.length/y();else for(var t=0,i=0;t<a.children.length;)++e,t=i+f(),i+=a.settings.moveSlides<=f()?a.settings.moveSlides:f();else e=Math.ceil(a.children.length/f());return e},y=function(){return a.settings.moveSlides>0&&a.settings.moveSlides<=f()?a.settings.moveSlides:f()},v=function(){if(a.children.length>a.settings.maxSlides&&a.active.last&&!a.settings.infiniteLoop){if("horizontal"==a.settings.mode){var e=a.children.last(),t=e.position();_(-(t.left-(a.viewport.width()-e.width())),"reset",0)}else if("vertical"==a.settings.mode){var i=a.children.length-a.settings.minSlides,t=a.children.eq(i).position();_(-t.top,"reset",0)}}else{var t=a.children.eq(a.active.index*y()).position();a.active.index==m()-1&&(a.active.last=!0),void 0!=t&&("horizontal"==a.settings.mode?_(-t.left,"reset",0):"vertical"==a.settings.mode&&_(-t.top,"reset",0))}},_=function(e,t,i,n){if(a.usingCSS){var o="vertical"==a.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";r.css("-"+a.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(r.css(a.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==t?r.css(a.animProp,o):"ticker"==t&&(r.css("-"+a.cssPrefix+"-transition-timing-function","linear"),r.css(a.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),_(n.resetValue,"reset",0),O()}))}else{var s={};s[a.animProp]=e,"slide"==t?r.animate(s,i,a.settings.easing,function(){D()}):"reset"==t?r.css(a.animProp,e):"ticker"==t&&r.animate(s,speed,"linear",function(){_(n.resetValue,"reset",0),O()})}},E=function(){for(var t="",i=m(),n=0;i>n;n++){var o="";a.settings.buildPager&&e.isFunction(a.settings.buildPager)?(o=a.settings.buildPager(n),a.pagerEl.addClass("ndn_carousel-custom-pager")):(o=n+1,a.pagerEl.addClass("ndn_carousel-default-pager")),t+='<div class="ndn_carousel-pager-item"><a href="" data-slide-index="'+n+'" class="ndn_carousel-pager-link">'+o+"</a></div>"}a.pagerEl.html(t)},A=function(){a.settings.pagerCustom?a.pagerEl=e(a.settings.pagerCustom):(a.pagerEl=e('<div class="ndn_carousel-pager" />'),a.settings.pagerSelector?e(a.settings.pagerSelector).html(a.pagerEl):a.controls.el.addClass("ndn_carousel-has-pager").append(a.pagerEl),E()),a.pagerEl.delegate("a","click",P)},b=function(){a.controls.next=e('<a class="ndn_carousel-next" href="">'+a.settings.nextText+"</a>"),a.controls.prev=e('<a class="ndn_carousel-prev" href="">'+a.settings.prevText+"</a>"),a.controls.next.bind("click",I),a.controls.prev.bind("click",S),a.settings.nextSelector&&e(a.settings.nextSelector).append(a.controls.next),a.settings.prevSelector&&e(a.settings.prevSelector).append(a.controls.prev),a.settings.nextSelector||a.settings.prevSelector||(a.controls.directionEl=e('<div class="ndn_carousel-controls-direction" />'),a.controls.directionEl.append(a.controls.prev).append(a.controls.next),a.controls.el.addClass("ndn_carousel-has-controls-direction").append(a.controls.directionEl))},C=function(){a.controls.start=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-start" href="">'+a.settings.startText+"</a></div>"),a.controls.stop=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-stop" href="">'+a.settings.stopText+"</a></div>"),a.controls.autoEl=e('<div class="ndn_carousel-controls-auto" />'),a.controls.autoEl.delegate(".ndn_carousel-start","click",T),a.controls.autoEl.delegate(".ndn_carousel-stop","click",w),a.settings.autoControlsCombine?a.controls.autoEl.append(a.controls.start):a.controls.autoEl.append(a.controls.start).append(a.controls.stop),a.settings.autoControlsSelector?e(a.settings.autoControlsSelector).html(a.controls.autoEl):a.controls.el.addClass("ndn_carousel-has-controls-auto").append(a.controls.autoEl),x(a.settings.autoStart?"stop":"start")},N=function(){a.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!=i&&e(this).append('<div class="ndn_carousel-caption"><span>'+i+"</span></div>")})},I=function(e){a.settings.auto&&r.stopAuto(),r.goToNextSlide(),e.preventDefault()},S=function(e){a.settings.auto&&r.stopAuto(),r.goToPrevSlide(),e.preventDefault()},T=function(e){r.startAuto(),e.preventDefault()},w=function(e){r.stopAuto(),e.preventDefault()},P=function(t){a.settings.auto&&r.stopAuto();var i=e(t.currentTarget),n=parseInt(i.attr("data-slide-index"));n!=a.active.index&&r.goToSlide(n),t.preventDefault()},M=function(t){return"short"==a.settings.pagerType?void a.pagerEl.html(t+1+a.settings.pagerShortSeparator+a.children.length):(a.pagerEl.find("a").removeClass("active"),void a.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},D=function(){if(a.settings.infiniteLoop){var e="";0==a.active.index?e=a.children.eq(0).position():a.active.index==m()-1&&a.carousel?e=a.children.eq((m()-1)*y()).position():a.active.index==a.children.length-1&&(e=a.children.eq(a.children.length-1).position()),"horizontal"==a.settings.mode?_(-e.left,"reset",0):"vertical"==a.settings.mode&&_(-e.top,"reset",0)}a.working=!1,a.settings.onSlideAfter(a.children.eq(a.active.index),a.oldIndex,a.active.index)},x=function(e){a.settings.autoControlsCombine?a.controls.autoEl.html(a.controls[e]):(a.controls.autoEl.find("a").removeClass("active"),a.controls.autoEl.find("a:not(.ndn_carousel-"+e+")").addClass("active"))},k=function(){1==m()?(a.controls.prev.addClass("disabled"),a.controls.next.addClass("disabled")):!a.settings.infiniteLoop&&a.settings.hideControlOnEnd&&(0==a.active.index?(a.controls.prev.addClass("disabled"),a.controls.next.removeClass("disabled")):a.active.index==m()-1?(a.controls.next.addClass("disabled"),a.controls.prev.removeClass("disabled")):(a.controls.prev.removeClass("disabled"),a.controls.next.removeClass("disabled")))},L=function(){if(a.settings.autoDelay>0){setTimeout(r.startAuto,a.settings.autoDelay)}else r.startAuto();a.settings.autoHover&&r.hover(function(){a.interval&&(r.stopAuto(!0),a.autoPaused=!0)},function(){a.autoPaused&&(r.startAuto(!0),a.autoPaused=null)})},R=function(){var t=0;if("next"==a.settings.autoDirection)r.append(a.children.clone().addClass("ndn_carousel-clone"));else{r.prepend(a.children.clone().addClass("ndn_carousel-clone"));var i=a.children.first().position();t="horizontal"==a.settings.mode?-i.left:-i.top}_(t,"reset",0),a.settings.pager=!1,a.settings.controls=!1,a.settings.autoControls=!1,a.settings.tickerHover&&!a.usingCSS&&a.viewport.hover(function(){r.stop()},function(){var t=0;a.children.each(function(i){t+="horizontal"==a.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=a.settings.speed/t,n="horizontal"==a.settings.mode?"left":"top",o=i*(t-Math.abs(parseInt(r.css(n))));O(o)}),O()},O=function(e){speed=e?e:a.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==a.settings.autoDirection?t=r.find(".ndn_carousel-clone").first().position():i=a.children.first().position();var n="horizontal"==a.settings.mode?-t.left:-t.top,o="horizontal"==a.settings.mode?-i.left:-i.top,s={resetValue:o};_(n,"ticker",speed,s)},V=function(){a.touch={start:{x:0,y:0},end:{x:0,y:0}},a.viewport.bind("touchstart",G)},G=function(e){if(a.working)e.preventDefault();else{a.touch.originalPos=r.position();var t=e.originalEvent;a.touch.start.x=t.changedTouches[0].pageX,a.touch.start.y=t.changedTouches[0].pageY,a.viewport.bind("touchmove",U),a.viewport.bind("touchend",B)}},U=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-a.touch.start.x),n=Math.abs(t.changedTouches[0].pageY-a.touch.start.y);if(3*i>n&&a.settings.preventDefaultSwipeX?e.preventDefault():3*n>i&&a.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=a.settings.mode&&a.settings.oneToOneTouch){var o=0;if("horizontal"==a.settings.mode){var r=t.changedTouches[0].pageX-a.touch.start.x;o=a.touch.originalPos.left+r}else{var r=t.changedTouches[0].pageY-a.touch.start.y;o=a.touch.originalPos.top+r}_(o,"reset",0)}},B=function(e){a.viewport.unbind("touchmove",U);var t=e.originalEvent,i=0;if(a.touch.end.x=t.changedTouches[0].pageX,a.touch.end.y=t.changedTouches[0].pageY,"fade"==a.settings.mode){var n=Math.abs(a.touch.start.x-a.touch.end.x);n>=a.settings.swipeThreshold&&(a.touch.start.x>a.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var n=0;"horizontal"==a.settings.mode?(n=a.touch.end.x-a.touch.start.x,i=a.touch.originalPos.left):(n=a.touch.end.y-a.touch.start.y,i=a.touch.originalPos.top),!a.settings.infiniteLoop&&(0==a.active.index&&n>0||a.active.last&&0>n)?_(i,"reset",200):Math.abs(n)>=a.settings.swipeThreshold?(0>n?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):_(i,"reset",200)}a.viewport.unbind("touchend",B)},H=function(t){var i=e(window).width(),n=e(window).height();(s!=i||l!=n)&&(s=i,l=n,r.redrawSlider())};return r.goToSlide=function(t,i){if(!a.working&&a.active.index!=t)if(a.working=!0,a.oldIndex=a.active.index,0>t?a.active.index=m()-1:t>=m()?a.active.index=0:a.active.index=t,a.settings.onSlideBefore(a.children.eq(a.active.index),a.oldIndex,a.active.index),"next"==i?a.settings.onSlideNext(a.children.eq(a.active.index),a.oldIndex,a.active.index):"prev"==i&&a.settings.onSlidePrev(a.children.eq(a.active.index),a.oldIndex,a.active.index),a.active.last=a.active.index>=m()-1,a.settings.pager&&M(a.active.index),a.settings.controls&&k(),"fade"==a.settings.mode)a.settings.adaptiveHeight&&a.viewport.height()!=p()&&a.viewport.animate({height:p()},a.settings.adaptiveHeightSpeed),a.children.filter(":visible").fadeOut(a.settings.speed).css({zIndex:0}),a.children.eq(a.active.index).css("zIndex",51).fadeIn(a.settings.speed,function(){e(this).css("zIndex",50),D()});else{a.settings.adaptiveHeight&&a.viewport.height()!=p()&&a.viewport.animate({height:p()},a.settings.adaptiveHeightSpeed);var n=0,o={left:0,top:0};if(!a.settings.infiniteLoop&&a.carousel&&a.active.last)if("horizontal"==a.settings.mode){var s=a.children.eq(a.children.length-1);o=s.position(),n=a.viewport.width()-s.width()}else{var l=a.children.length-a.settings.minSlides;o=a.children.eq(l).position()}else if(a.carousel&&a.active.last&&"prev"==i){var d=1==a.settings.moveSlides?a.settings.maxSlides-y():(m()-1)*y()-(a.children.length-a.settings.maxSlides),s=r.children(".ndn_carousel-clone").eq(d);o=s.position()}else if("next"==i&&0==a.active.index)o=r.find("> .ndn_carousel-clone").eq(a.settings.maxSlides).position(),a.active.last=!1;else if(t>=0){var c=t*y();o=a.children.eq(c).position()}if("undefined"!=typeof o){var u="horizontal"==a.settings.mode?-(o.left-n):-o.top;_(u,"slide",a.settings.speed)}}},r.goToNextSlide=function(){if(a.settings.infiniteLoop||!a.active.last){var e=parseInt(a.active.index)+1;r.goToSlide(e,"next")}},r.goToPrevSlide=function(){if(a.settings.infiniteLoop||0!=a.active.index){var e=parseInt(a.active.index)-1;r.goToSlide(e,"prev")}},r.startAuto=function(e){a.interval||(a.interval=setInterval(function(){"next"==a.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},a.settings.pause),a.settings.autoControls&&1!=e&&x("stop"))},r.stopAuto=function(e){a.interval&&(clearInterval(a.interval),a.interval=null,a.settings.autoControls&&1!=e&&x("start"))},r.getCurrentSlide=function(){return a.active.index},r.getSlideCount=function(){return a.children.length},r.redrawSlider=function(){a.children.add(r.find(".ndn_carousel-clone")).width(g()),a.viewport.css("height",p()),a.settings.ticker||v(),a.active.last&&(a.active.index=m()-1),a.active.index>=m()&&(a.active.last=!0),a.settings.pager&&!a.settings.pagerCustom&&(E(),M(a.active.index))},r.destroySlider=function(){a.initialized&&(a.initialized=!1,e(".ndn_carousel-clone",this).remove(),a.children.removeAttr("style"),this.removeAttr("style").unwrap().unwrap(),a.controls.el&&a.controls.el.remove(),a.controls.next&&a.controls.next.remove(),a.controls.prev&&a.controls.prev.remove(),a.pagerEl&&a.pagerEl.remove(),e(".ndn_carousel-caption",this).remove(),a.controls.autoEl&&a.controls.autoEl.remove(),clearInterval(a.interval),e(window).unbind("resize",H))},r.reloadSlider=function(e){void 0!=e&&(o=e),r.destroySlider(),d()},d(),this}}),Ndn_Require.define("models/Ndn/Carousel",["underscore","jquery","backbone","jquery_bxslider"],function(e,t,i){var n=i.Model.extend({defaults:{containerElement:null,itemsPerSlide:null,slideWidth:null,slideMargin:null,parameters:null,currentSlideIndex:null,carousel:null},initialize:function(e){var t=e.containerElement,i=this.getItemsPerSlideFromParameters(e);this.set({containerElement:t,itemsPerSlide:i,parameters:e});var n=this;this.on({carouselLoad:function(){n.set("currentSlideIndex",0),n.loadPlaceholderImages(0)},slideLoad:function(e){n.set("currentSlideIndex",e.slideIndex),n.loadPlaceholderImages(e.slideIndex)}})},getCurrentSlideIndex:function(){return this.get("currentSlideIndex")},load:function(){return this.set("carousel",this.getContainerElement().bxSlider(this.getConfig(this.get("parameters")))),this},reload:function(e){"undefined"==typeof e&&(e=!0);var t=this.get("carousel"),i=t.getCurrentSlide();t.reloadSlider(),e&&t.goToSlide(i)},getItemsPerSlideFromParameters:function(e){return e.itemsPerSlide||e.maxItemsPerSlide||1},getConfig:function(t){var i=this,n=this.getItemsPerSlideFromParameters(t),o=t.containerElement,a={pager:!1,controls:!1,slideWidth:t.slideWidth||o.width(),slideHeight:t.slideHeight||o.height(),slideMargin:t.slideMargin,minSlides:t.minItemsPerSlide||n,maxSlides:t.maxItemsPerSlide||n,onSliderLoad:function(){i.trigger("carouselLoad")},onSlideBefore:function(e,t,n){i.loadPlaceholderImages(n),i.trigger("slideLoad",{slideElement:e,previousSlideIndex:t,slideIndex:n})}};return t.isSimple&&(delete a.slideWidth,delete a.slideHeight,delete a.minSlides,delete a.maxSlides),t.auto&&(a=e.extend(a,{pause:7e3,auto:!0,autoHover:!0})),a},goToSlide:function(e){this.get("carousel").goToSlide(e)},getItemsPerSlide:function(){return this.get("itemsPerSlide")},visitPreviousSlide:function(){var e=this.get("parameters").auto,t=this.get("carousel");e&&t.stopAuto(),t.goToPrevSlide(),e&&t.startAuto()},visitNextSlide:function(){var e=this.get("parameters").auto,t=this.get("carousel");e&&t.stopAuto(),t.goToNextSlide(),e&&t.startAuto()},getContainerElement:function(){return this.get("containerElement")},loadPlaceholderImages:function(e){n.loadSlidePlaceholderImages(this.getContainerElement(),e,this.get("itemsPerSlide")),this.centerImages()},processSlide:function(e,t){this.getContainerElement().find('> li:not(".ndn_carousel-clone"):eq('+e+"), > li.ndn_carousel-clone").each(t)},processCurrentSlide:function(e){this.processSlide(this.getCurrentSlideIndex(),e)},centerImages:function(){this.getContainerElement().find(".ndn_centerImage").each(function(){var e=t(this),i=(e.width()-e.closest("li").width(),(0-Math.max(i,0))/2);e.css("margin-left",i+"px")})}},{loadSlidePlaceholderImages:function(e,i,n){function o(e){e.each(function(){var e=["src","alt","title","class"];t(this).find(".ndn_imagePlaceholder").each(function(){var i=t(this),n="<img ";t.each(e,function(){var e=this+"";i.attr("data-"+e)&&(n+=e+'="'+i.attr("data-"+e)+'" ')}),n+="/>",t(this).replaceWith(n)})})}var a=i*n,r=a+n-1,s='> li:not(".ndn_carousel-clone")',l=e.find(s).filter(":eq("+a+"), :gt("+a+"):lt("+r+")");o(l),o(e.find("> li.ndn_carousel-clone"))}});return n}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/overlay.html",[],function(){return'<div class="ndn_pauseOverlay ndn_overlayContainer"> \n    <div class="ndn_pauseOverlay_centerContainer">\n        <div class="ndn_startPlay ndn_fastClick_clickevent"></div>\n    </div>\n    <div class="ndn_pauseCarousel"></div>\n</div>'}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/carousel.html",[],function(){return'<div class="ndn_sliderContainer">\n	<div class="ndn_sliderPrev ndn_sliderNavButton ndn_icon_left-circled"></div>\n	<div class="ndn_sliderWrapper">\n	<ul class="ndn_sliderItems ndn_pauseOverlay_selectableVideos ndn_selectableVideos">\n        {{#videos}}\n            <li class="ndn_pauseOverlay_selectableVideo ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-video-id="{{videoId}}" title="{{videoTitle}}"> \n            	<div class="ndn_thumbnailContainer">\n                    <div class="ndn_imagePlaceholder" data-src="{{thumbnailUrl}}" data-alt="{{videoTitle}}" data-title="{{videoTitle}}"></div>\n            	</div>   	\n    			<div class="ndn_sliderThumbnailTitle">{{videoTitle}}</div>\n            </li>\n        {{/videos}}\n    </ul>\n	</div>\n	<div class="ndn_sliderNext ndn_sliderNavButton ndn_icon_right-circled"></div>\n</div>\n'}),Ndn_Require.define("jquery_imagesloaded",["jquery"],function(e,t){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(n){function o(){var t=e(p),i=e(h);l&&(h.length?l.reject(c,t,i):l.resolve(c)),e.isFunction(n)&&n.call(s,c,t,i)}function a(e){r(e.target,"error"===e.type)}function r(t,n){t.src===i||-1!==e.inArray(t,u)||(u.push(t),n?h.push(t):p.push(t),e.data(t,"imagesLoaded",{isBroken:n,src:t.src}),d&&l.notifyWith(e(t),[n,c,e(p),e(h)]),c.length===u.length&&(setTimeout(o),c.unbind(".imagesLoaded",a)))}var s=this,l=e.isFunction(e.Deferred)?e.Deferred():0,d=e.isFunction(l.notify),c=s.find("img").add(s.filter("img")),u=[],p=[],h=[];return e.isPlainObject(n)&&e.each(n,function(e,t){"callback"===e?n=t:l&&l[e](t)}),c.length?c.bind("load.imagesLoaded error.imagesLoaded",a).each(function(n,o){var a=o.src,s=e.data(o,"imagesLoaded");s&&s.src===a?r(o,s.isBroken):o.complete&&o.naturalWidth!==t?r(o,0===o.naturalWidth||0===o.naturalHeight):(o.readyState||o.complete)&&(o.src=i,o.src=a)}):o(),l?l.promise(s):s}}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseView",["jquery","underscore","backbone","mustache","models/Ndn/Utils/FastClick","models/Ndn/Utils/UserAgent","models/Ndn/Carousel","text!templates/ndn/video-player/pause-overlay/overlay.html","text!templates/ndn/video-player/pause-overlay/carousel.html","jquery_imagesloaded","jquery_autoellipsis","jquery_bxslider"],function(e,t,i,n,o,a,r,s,l){return i.View.extend({events:{"click .ndn_pauseOverlay_selectableVideo":"onVideoSelect","click .ndn_pauseOverlay":"resumePlay","click .ndn_startPlay":"resumePlay","click .ndn_sliderNext":"visitNextSlide","click .ndn_sliderPrev":"visitPreviousSlide"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_pauseOverlayContainer ndn_playerOverlay").html(s),this.$el.appendTo(this.model.getPlayer().getContainerElement()).hide(),new o(this.$el.find(".ndn_fastClick_clickevent").get(0));var t=this;this.model.getPlayer().on("videoLoad",function(){t.updateCarousel()})},resumePlay:function(e){return this.$el.hide(),this.model.getPlayer().play(),
!1},onVideoSelect:function(t){var i=e(t.currentTarget);return this.model.getPlayer().requestVideoStart({source:"pauseOverlayCarouselThumbnail",playlistIndex:i.data("playlistIndex"),videoIndex:i.data("videoIndex")}),!1},updateCarousel:function(){var e=this.model.getCarouselData();if(e){var t=this.$el.is(":visible");t||this.model.show(),this.$el.find(".ndn_pauseCarousel").show().html(n.to_html(l,{videos:e}));var i=this.model.getPlayer().getContainerElement(),o=i.width(),a=function(){return o>=1022?5:o>=750?4:3}(),s=5==a?200:140,d=new r({containerElement:this.$el.find(".ndn_selectableVideos"),minItemsPerSlide:3,maxItemsPerSlide:a,slideMargin:5,slideWidth:s}).load();this.$el.find(".ndn_sliderThumbnailTitle").ellipsis(),this.model.set("carousel",d),t||this.model.hide()}else this.$el.find(".ndn_pauseCarousel").hide()},visitNextSlide:function(e){return this.model.get("carousel").visitNextSlide(),!1},visitPreviousSlide:function(e){return this.model.get("carousel").visitPreviousSlide(),!1}})}),Ndn_Require.define("jquery_resize",["jquery"],function(e){!function(e,t,i){"$:nomunge";function n(){o=t[s](function(){a.each(function(){var t=e(this),i=t.width(),n=t.height(),o=e.data(this,d);(i!==o.w||n!==o.h)&&t.trigger(l,[o.w=i,o.h=n])}),n()},r[c])}var o,a=e([]),r=e.resize=e.extend(e.resize,{}),s="setTimeout",l="resize",d=l+"-special-event",c="delay",u="throttleWindow";r[c]=250,r[u]=!0,e.event.special[l]={setup:function(){if(!r[u]&&this[s])return!1;var t=e(this);a=a.add(t),e.data(this,d,{w:t.width(),h:t.height()}),1===a.length&&n()},teardown:function(){if(!r[u]&&this[s])return!1;var t=e(this);a=a.not(t),t.removeData(d),a.length||clearTimeout(o)},add:function(t){function n(t,n,a){var r=e(this),s=e.data(this,d);s.w=n!==i?n:r.width(),s.h=a!==i?a:r.height(),o.apply(this,arguments)}if(!r[u]&&this[s])return!1;var o;return e.isFunction(t)?(o=t,n):(o=t.handler,void(t.handler=n))}}}(e,this)}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseModel",["jquery","underscore","backbone","models/Ndn/Widget","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseView","jquery_resize"],function(e,t,i,n,o,a){return o.extend({defaults:{view:null,carousel:null},initialize:function(e){o.prototype.initialize.apply(this,arguments),this.set("view",new a({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var t=this;e.on({"adPause videoPause":function(){t.show()},"adStart adResume videoStart videoResume":function(){t.hide()}})},getCarouselData:function(){return this.getPlayer().getSessionParams().pauseCarousel}})}),Ndn_Require.define("text!templates/ndn/video-player/share-overlay.html",[],function(){return'<div class="ndn_shareContainer">\n    <div class="ndn_closeShare ndn_icon_cancel"></div>\n    <div class="ndn_shareBox">\n        <!--\n        <div class="ndn_shareButtons">\n            <div class="ndn_shareButtonList">\n                <ul class="ndn_shareButtonsList">\n                    <li class="ndn_mainShareButtons ndn_shareFacebook"><a class="ndn_a_shareFacebook ndn_icon_facebook" target="_blank" href="#"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareTwitter"><a class="ndn_a_shareTwitter ndn_icon_twitter" target="_blank" href="#"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmail"><a class="ndn_icon_mail-alt" href="#"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmbed"><span class="ndn_icon_code"></span></li>\n                </ul>\n            </div>\n        </div>\n        -->\n        <div class="ndn_shareIcons">\n            <a class="ndn_shareIcon ndn_shareFacebook ndn_icon_facebook"></a>&nbsp;\n            <a class="ndn_shareIcon ndn_shareTwitter ndn_icon_twitter"></a>&nbsp;\n            <a class="ndn_shareIcon ndn_shareEmail ndn_icon_mail-alt"></a>&nbsp;\n            <a class="ndn_shareIcon ndn_shareEmbed ndn_icon_code"></a>\n        </div>\n        <textarea readonly="" class="ndn_shareCopyVideoLinkText ndn_textarea">{{directLink}}</textarea>\n    </div>\n    <div class="ndn_embedBox">\n        <div class="ndn_backToShare ndn_icon_left-big">BACK</div>\n        <div class="ndn_embedLink">\n            <span class="ndn_shareCopyEmbedCode ndn_linkEmbed">\n                <label for="ndn_shareCopyEmbedCodeText">Embed</label>\n            </span>\n            <textarea readonly="" class="ndn_shareCopyEmbedCodeText ndn_textarea">{{embedCode}}</textarea>\n        </div>\n    </div>\n    <div class="ndn_sharePrivacyPolicy">\n        <a href="http://inform.com/privacy" target="_blank">Privacy Policy</a> &nbsp; | &nbsp; <a href="http://inform.com/player-terms" target="_blank">Terms of Use</a>\n    </div>\n</div>'}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareView",["jquery","backbone","mustache","text!templates/ndn/video-player/share-overlay.html"],function(e,t,i,n){return t.View.extend({events:{"click .ndn_closeShare":"resumePlayback","click .ndn_shareEmbed":"showEmbedLink","click .ndn_backToShare":"showEmbedLink","click .ndn_shareEmail":"shareViaEmail","click .ndn_shareFacebook":"shareViaFacebook","click .ndn_shareTwitter":"shareViaTwitter","mouseenter .ndn_shareCopyVideoLinkText":"selectDirectLink","mouseenter .ndn_shareCopyEmbedCodeText":"selectEmbedCode"},initialize:function(){t.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_shareOverlay ndn_playerOverlay")},resumePlayback:function(){return this.model.getPlayer().play(),!1},updateHtml:function(){var e=this.$el;e.html(i.to_html(n,{embedCode:this.model.getEmbedCode(),directLink:this.model.getDirectLink()})),e.find(".ndn_icon_mail-alt").toggle(this.model.allowsEmailSharing()),e.find(".ndn_icon_code").toggle(this.model.allowsEmbedSharing()),e.find(".ndn_shareEmbed,.ndn_shareFacebook,.ndn_shareEmail,.ndn_shareTwitter").toggle(this.model.allowsSocialSharing())},selectDirectLink:function(){return this.$el.find(".ndn_shareCopyVideoLinkText").select(),!1},selectEmbedCode:function(){return this.$el.find(".ndn_shareCopyEmbedCodeText").select(),!1},showEmbedLink:function(){return this.$el.find(".ndn_shareBox,.ndn_embedBox").fadeToggle("fast","linear"),!1},shareViaEmail:function(){return this.model.share("email"),!1},shareViaFacebook:function(){return this.model.share("facebook"),!1},shareViaTwitter:function(){return this.model.share("twitter"),!1}})}),Ndn_Require.define("models/Ndn/Widget/PlayerOptions",["jquery","backbone","models/Ndn/Utils/BrowserStorage","models/Ndn/Utils/UserAgent"],function(e,t,i,n){var o=[],a=t.Model.extend({defaults:{product:null,container:null},initialize:function(t){this.set({product:t}),this.initializeDom(),this.synchronizeInterface(),this.initializeEventListeners(),a.registerComponent(this),t.on("widgetEmbedEnd",e.proxy(function(){this.get("container").insertAfter(t.getContainerElement())},this))},initializeDom:function(){var t=this.get("product").getContainerElement(),i=e('<div class="ndn_playerOptions"><b>Autoplay:</b> <a href="#" data-autoplay="on">On</a> | <a href="#" data-autoplay="off">Off</a></div>').css("width",t.width());this.set("container",i)},initializeEventListeners:function(){this.get("container").on("click","a",function(t){return e(this).hasClass("ndn_selected")||a.setProductBehaviorToggleValue("on"==e(this).data("autoplay")),a.synchronizeAllInterfaces(),t.preventDefault(),!1})},hide:function(){this.get("container").attr("style","display:none !important")},synchronizeInterface:function(){var t=this.get("container"),i=a.getProductBehaviorToggleValue();t.find("a").each(function(){e(this).toggleClass("ndn_selected","on"==e(this).data("autoplay")&&i||"on"!=e(this).data("autoplay")&&!i)})}},{registerComponent:function(e){o.push(e)},synchronizeAllInterfaces:function(){e.each(o,function(){this.synchronizeInterface()})},getProductBehaviorToggleValue:function(){return"false"!=i.get("playOnInViewForSinglePlayers")},setProductBehaviorToggleValue:function(e){i.set("playOnInViewForSinglePlayers",e?"true":"false")}});return a}),Ndn_Require.define("models/Ndn/Legacy/Config/Ap",["jquery"],function(e){var t={1153168:"90703",1296344:"90416",10003188:"90693",TXABI:"90459",PAALM:"90364",GASTA:"90683",TXAMA:"90582",ARLID:"90554",GAATH:"90604",GAAUG:"90612",TXAUS:"90105",MTBOZ:"90721",PABUT:"90433",FLCAP:"90364",TXCOR:"90550",VACUL:"90527",IAWEB:"90364",MIESC:"90364",VADAR:"90528",ALDOT:"90510",PAERI:"90464",IAEST:"90364",FLJAJ:"90049",NCHIC:"90518",TXHOU:"90000",NCCON:"90517",JRC:"90734",WIKEN:"90233",WABRE:"90552",MOCAG:"90589",NDMIN:"90364",FLNAP:"90542",INBNB:"90605",ALOPE:"90514",MNROC:"90379",VARIT:"90535",FLSAR:"90492",INSBT:"90575",MNPAU:"90156",TXSAN:"90551",CAPAS:"90494",TNMEM:"90547",MSCCD:"90135",OHFIN:"90421",OHCAM:"90249",MIHOU:"90364",MIIRO:"90364",VACHA:"90526",NCFAY:"90364",wvwhe:"90364",TNKNN:"90542",OHMAR:"90364",HIMAN:"90364",NCMAR:"90519",MIMAR:"90364",VALYD:"90532",VAWAY:"90538",SCCHA:"90349",NYJAP:"90364",OHEAS:"90249",OHSAL:"90364",ILSPR:"90108",GAGAI:"90079",WVWEI:"90364",PAWIL:"90087",NYALT:"90001",WAKR:"90412",TXWIC:"90553",NCWIN:"90522",WRKO:"90629",WSPATV:"90507",WTKKFM:"90456",PAYOK:"90732",FLMIH:"90045",WABEL:"90472",SCCOL:"90474",CAFRE:"90476",CAMOD:"90479",CASAB:"90482",WATAC:"90483",FLBRA:"90484",ILROR:"90108",MAQUI:"90108",CTNOR:"90108",MABRO:"90108",WSAW:"90447",FLTAM:"90426",NVLAS:"90277",INSID:"90531",WNCNTV:"90777",WCMHTV:"90061",OREUG:"90878",SCFLO:"90784",WJARTV:"90053",WIMIL:"90078",RIJRJ:"90446",WRGBTV:"90028",WWMTTV:"90029",ILALT:"90033",WPECTV:"90039",KTVLTV:"90042",OHLIM:"90043",AAAA:"0000",WASECA:"90667",PAYOR:"90681",GACOV:"90691",GAHIN:"90686",CASCN:"90152",CAMAN:"90690",WIEAU:"90694",MSMCC:"90695",FLNAV:"90696",LAMOR:"90697",LAFRA:"90698",SCAIK:"90699",ARFOR:"90700",MIGHT:"90702"};return{getTrackingGroupFromApPartnerId:function(e){return t[e]||"90121"},translate:function(t,i){return e.Deferred(e.proxy(function(n){var o=i;return t.f&&(o.trackingGroup=this.getTrackingGroupFromApPartnerId((t.f+"").toUpperCase()),"0"==o.widgetId&&(o.widgetId="3989")),!o.videoId&&t.g?e.ajax({type:"GET",url:window.location.protocol+"//dmeserve.newsinc.com/apids/lookup.jsonp?apvid="+t.g,dataType:"jsonp"}).then(function(e){o.videoId=e,n.resolve(o)}):void n.resolve(o)},this)).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config/TritonLoyaltyProgram",["jquery"],function(e){return{translate:function(t,i){return e.Deferred(function(e){t.memberid=t.memberid||t.membedid||"",""!=t.memberid&&"none"!=t.memberid&&(i.loyaltyProgramId="ndntritonservice",i.loyaltyProgramData={memberId:t.memberid,siteId:t.siteid}),e.resolve(i)}).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config",["underscore","jquery","models/Ndn/Utils/UrlParser","models/Ndn/Legacy/Config/Ap","models/Ndn/Legacy/Config/TritonLoyaltyProgram"],function(e,t,i,n,o){return{translate:function(a,r){return t.Deferred(function(s){var l=i.parseHref(a),d=l.queryParams;for(var c in d)d.hasOwnProperty(c)&&c!=c.toLowerCase()&&(d[c.toLowerCase()]=d[c],delete d.paramKey);var u=l.url.match(/^http:[\/]{2}embed\.newsinc\.com/)?l.path.toLowerCase():"",p={widgetId:d.wid,siteSection:d.sitesection||"",videoId:d.vid||d.vcid||d.spid||"",trackingGroup:d.freewheel||"",playlistId:d.cid||"",hideWhenUnavailable:"true"==d.pp_hideExpired};t.each(p,function(e){""==this&&delete p[e]});var h={"/single/embed.js":"VideoPlayer/Single","/inform/article/matching/video/embed.js":"VideoPlayer/Single","/horizontaltitle550/embed.js":"VideoLauncher/Horizontal","/inline/embed.js":"VideoLauncher/Slider","/inlinesound/embed.js":"VideoLauncher/Slider","/inline590/embed.js":"VideoPlayer/Inline590","/inlinesound590/embed.js":"VideoPlayer/Inline590","/toppicks/embed.js":"VideoLauncher/Slider"};if("undefined"!=typeof r)p.type=r;else if("undefined"!=typeof h[u])p.type=h[u];else{var g={slider:"VideoLauncher/Slider",plist:"VideoLauncher/Slider",vertical:"VideoLauncher/VerticalTower",horizontal:"VideoLauncher/Horizontal",horizontal400:"VideoLauncher/Horizontal",horizontal500:"VideoLauncher/Horizontal"},f=d.type||d.thumbid;"undefined"!=typeof g[f]?p.type=g[f]:e.contains(["/thumbnail/embed.js","/thumbnail/iframe.html"],u)&&(p.type="VideoLauncher/Slider")}e.contains(["/inlinesound/embed.js","/inlinesound590/embed.js","/thumbnailsound/embed.js"],u)&&(p.rmmSoundOn=!0),(d.width||d.w)&&(p.width=d.width||d.w),(d.height||d.h)&&(p.height=d.height||d.h);var m={"/horizontaltitle550/embed.js":550};"undefined"!=typeof m[u]?p.width=m[u]:"horizontal400"==d.type?p.width=425:e.contains(["horizontal","horizontal500"],d.type)&&(p.width=550);for(var y=["playlistId","widgetId","videoId","trackingGroup"],v=0;v<y.length;v++){var _=y[v];"0"==p[_]&&delete p[_]}("/single/iframe.html"!=u&&!p.type||"VideoPlayer/Single"==p.type)&&(p.width||(p.width=600),p.height||(p.height=360)),n.translate(d,p).then(function(e){return o.translate(d,e)}).fail(s.reject).done(s.resolve)}).promise()}}}),Ndn_Require.define("models/Ndn/Widget/Config",["jquery","underscore","models/Ndn/App","models/Ndn/Utils/UserAgent","models/Ndn/Utils/UrlParser","models/Ndn/Widget/PlayerOptions","models/Ndn/Legacy/Config","models/Ndn/Debug"],function(e,t,i,n,o,a,r,s){var l=s.inMode("config"),d=["configId","distributorId","widgetId","type","trackingGroup","playlistId","videoId","placementId","placementPageId","providerId","providerStoryId","siteSection","acceptsConfigFromUrl","acceptsConfigFromUrlPrefix","loyaltyProgramId","loyaltyProgramData","legacyEmbedUrl","autoPlay","playOnMouseover","playOnInView","hideWhenUnavailable","continuousPlay","rmmSoundOn","adsEnabled","float","width","height","aspectRatio","pb"],c="10",u="0",p="7",h={"VideoPlayer/Single":{typeId:5},"VideoPlayer/16x9":{typeId:2},"VideoPlayer/Inline590":{typeId:11,typeIdForAutoPlay:14},"VideoPlayer/Inline":{typeId:11,typeIdForAutoPlay:14},"VideoLauncher/Slider":{typeId:21},"VideoLauncher/Horizontal":{typeId:19},"VideoLauncher/VerticalTower":{typeId:20},InView:{typeId:25},"VideoPlayer/Studio":{typeId:33}},g={"videolauncher/slider300x250":"VideoLauncher/Slider","videoplayer/single":"VideoPlayer/Single","videoplayer/inline590":"VideoPlayer/Inline","videoplayer/default":"VideoPlayer/Single","videoplayer/inline300":"VideoLauncher/Slider"},f=function(){var e={};return t.each(h,function(t,i){e[i.toLowerCase()]=i}),e}(),m=function(e){return e.toLowerCase&&g[e.toLowerCase()]&&(e=g[e.toLowerCase()]),e};return{getProductTypeData:function(){return h},cleanConfig:function(i){var n=t.extend({},i);e.each(n,function(t,i){"string"==typeof n[t]&&(n[t]=e.trim(n[t]))});var o=["autoPlay","playOnMouseover","rmmSoundOn","adsEnabled","acceptsConfigFromUrl","playOnInView","hideWhenUnavailable"];e.each(o,function(e,i){if("string"==typeof n[i]){var o=n[i];o=""==o?!0:t.contains(["true","1"],o.toLowerCase())?!0:!1,n[i]=o}else"undefined"!=typeof n[i]&&(n[i]=!!n[i])});var a=["continuousPlay","pb"];e.each(a,function(e,t){"undefined"!=typeof n[t]&&(n[t]=parseInt(n[t]))}),e.each(n,function(e){t.contains(d,e)||delete n[e]}),n.type&&(n.type=m(n.type),n.type=f[(n.type||"").toLowerCase()],n.type&&"undefined"==typeof f[n.type.toLowerCase()]&&delete n.type);var r;return n.height&&(r=n.height.match(/^(\d*)\/(\d*)w$/))&&(n.aspectRatio=r[2]+":"+r[1]),n.placementId&&(n.distributorId=n.trackingGroup),"VideoPlayer/Single"==n.type||n.distributorId||delete n.pb,("InView"==n.type||"VideoPlayer/Studio"==n.type)&&(n.aspectRatio=n.aspectRatio||"16:9"),n["float"]&&(n["float"]=this.processFloatConfigSetting(n["float"]),n["float"]||delete n["float"]),n.configId&&(n.widgetId=n.configId),n.widgetId&&(n.configId=n.widgetId),n},processFloatConfigSetting:function(i){if(i=(i+"").toLowerCase(),t.contains(["default","off"],i))return i;var n=[],o=i.split(" "),a=["top","middle","bottom","left","center","right"];return e.each(o,function(e,i){t.contains(a,i)&&n.push(i)}),n.join(" ")},getSiteSectionSegments:function(e){var t=(e||"").split("_");return{site:t[1]||"",section:t[1]||"",subSection:t[2]||"",pageType:t[3]||""}},getPltValue:function(e,t){var i=h[e.type],n=t.settings.behavior,o=t.settings.deliverySettings;if(n["float"].enabled&&"VideoPlayer/Single"==e.type)return 24;if("InView"==e.type&&2==o.inview_version)return 26;var a=n.rmm;return a.enabled&&a.rotatingEnabled?22:e.autoPlay&&i.typeIdForAutoPlay?i.typeIdForAutoPlay:0!=e.rmmSoundOn&&i.typeIdForAutoPlay?i.typeIdForAutoPlay:i.typeId},applyConfigDefaults:function(e,i){var n=t.extend({},e);return delete n.adsEnabled,n=t.extend({},i,n),n.playOnMouseover&&"VideoPlayer/Single"!=n.type&&(n.playOnMouseover=!1),"InView"==n.type&&(n.widgetId="5"),n},getConfigFromElement:function(t,i){l&&console.log("getConfigFromElement(",t,");");var n={},o=new RegExp(this.hasUpdatedEmbedCode(t,i)?"^data-(.*)$":"^data-config-(.*)$");return e.each(t[0].attributes,function(e,t){var i;if(i=t.name.replace(/\s/g,"").toLowerCase().match(o)){var a=i[1].replace(/-(\w)/g,function(e,t){return t.toUpperCase()});n[a]=t.value}}),l&&console.log("result ==",n),n},getDefaultUrlVarPrefixForConfigSettings:function(){return"ndn."},isOnForcedMigrationRedirectedLandingPage:function(e){return!o.getUrlVar("legacyEmbedUrl")&&o.getUrlVar("freewheel")&&!o.getUrlVar(e+"trackingGroup")},getConfigFromLandingPageUrl:function(t){var n=i.getAppUrlInfo(t)?"":this.getDefaultUrlVarPrefixForConfigSettings(),a=o.parseHref(t).queryParams,r={};return e.each(a,function(e,t){e.substr(0,n.length)==n&&(r[e.substr(n.length)]=t)}),r},processConfigFromElement:function(i,n,a){l&&console.log("processConfigFromElement(",i,", ",n,", ",a,");");var s=e.extend({},this.getConfigFromElement(i,a),n||{});if("InView"==s.type&&(s.widgetId="5"),s=this.cleanConfig(s),s.acceptsConfigFromUrl){var d=s.hasOwnProperty("acceptsConfigFromUrlPrefix")?s.acceptsConfigFromUrlPrefix:this.getDefaultUrlVarPrefixForConfigSettings();this.isOnForcedMigrationRedirectedLandingPage(d)?s.legacyEmbedUrl||(s.legacyEmbedUrl=window.location.href+""):s=this.cleanConfig(t.extend({},o.getUrlVarsWithPrefix(d),s))}return e.Deferred(function(e){s.legacyEmbedUrl?r.translate(s.legacyEmbedUrl,s.type).done(function(i){s=t.extend(i,s),e.resolve(s)}):e.resolve(s)}).promise().always(function(e){"undefined"==typeof e.type&&(e.type=""),e.type=(e.type+"").replace(" ",""),""==e.type&&(e.type="VideoPlayer/Single")})},processAspectRatio:function(e,t,i){"VideoPlayer/Single"==t.type&&!t.aspectRatio&&this.hasUpdatedEmbedCode(e,i)&&(t.width&&t.height||(t.aspectRatio="16:9",t.width||(t.width="100%")))},getEmbedCode:function(t,i,n){"undefined"==typeof i&&(i=!1);var o='<div class="'+(i?"ndn_embed":"inform-embed")+'"',a=i?"data-":"data-config-";return n&&(o+=' id="'+n+'"'),e.each(t,function(e,t){var i=a+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});o+=" "+i+'="'+t+'"'}),o+="></div>"},process:function(e){return l&&console.log("process(",e,");"),e.config=t.extend({},e.providedConfig),this.applyPbDefault(e),this.processPlayerBehaviorSetting(e),e.config=this.applyConfigDefaults(e.config,e.defaultConfig),this.applyBrowserSettings(e),this.syncPbSetting(e),e},applyBrowserSettings:function(e){var t=e.config,i=e.settings.browser;i.isAbleToPlayVideoAutomatically||(t.autoPlay=!1,t.playOnInView=!1),i.hasCursor||(t.playOnMouseover=!1)},applyPbDefault:function(e){var t=e.config,i=e.providedConfig,n=e.settings.deliverySettings;"undefined"==typeof i.pb&&n.playOnInViewToggle&&(t.pb=p),t.pb==c&&(t.pb=n.pb_default)},syncPbSetting:function(e){var i=e.config;"undefined"!=typeof i.pb&&delete i.pb,t.contains(["VideoPlayer/Single","VideoPlayer/Studio","InView"],i.type)&&this.processPlayerBehaviorSetting(e)},applyToggleToPbConfigSetting:function(e){var t=e.config,i=e.settings.behavior.toggle;return t.pb&&i.enabled&&!i.toggleValue&&(t.pb=u,this.processPlayerBehaviorSetting(e)),e},syncFloatWithBehaviorSettings:function(e){var t=e.settings.behavior["float"];e.providedConfig["float"]&&(e.config["float"]=t.enabled?t.initialPosition:"off")},processPlayerBehaviorSetting:function(i){var n=i.config;if("InView"==n.type)return n.pb="7",n;var o={0:{autoPlay:!1,playOnMouseover:!1,playOnInView:!1},1:{autoPlay:!0,playOnMouseover:!1,playOnInView:!1},3:{autoPlay:!1,playOnMouseover:!0,playOnInView:!1},7:{autoPlay:!1,playOnMouseover:!1,playOnInView:!0}},a=n.pb;return a==c?n:("undefined"!=typeof o[a]?(t.extend(n,o[a]),n.pb=a):e.each(o,function(t,i){var o=!0;return e.each(i,function(e,t){n[e]!==t&&(o=!1)}),o?(n.pb=t,!1):void 0}),n)},hasUpdatedEmbedCode:function(i,n){if(n&&t.contains(n,"legacyjsapi"))return!1;var o=!0;return e.each(i[0].attributes,function(e,t){var i;if(i=t.name.replace(/\s/g,"").toLowerCase().match(/^data-config-(.*)$/)){var n=i[1].replace(/-(\w)/g,function(e,t){return t.toUpperCase()});"id"!=n&&(o=!1)}}),o},retrofitEmbedCode:function(t,i){e.each(t,function(e,t){var n="data-config-"+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});i.attr(n,t)})},getPlaylistItemsLimit:function(e){return t.contains(["VideoLauncher/Slider"],e)?3:t.contains(["VideoLauncher/Horizontal","VideoLauncher/VerticalTower"],e)?15:40}}}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareModel",["underscore","jquery","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareView","models/Ndn/App","models/Ndn/Widget/Config"],function(e,t,i,n,o,a){return i.extend({defaults:{view:null,videoData:null},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.set("view",new n({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var t=this;e.on({videoLoad:function(e){t.set("videoData",e.videoData),t.get("view").updateHtml()},"adStart adResume videoStart videoResume":function(){t.hide()}})},getVideoData:function(){return this.get("videoData")},getEmbedCode:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.embedCode},getDirectLink:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.directLink},allowsEmailSharing:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.mode.email},allowsSocialSharing:function(){var e=this.getPlayer().getSessionParams(),t=e.share;return t&&t.mode.social},allowsEmbedSharing:function(){var e=this.getPlayer().getSessionParams(),t=e.share,i=this.getPlayer().getSessionParams().videoData;return t&&i&&i.settings.share.embedCode.enabled},share:function(t){var i=this.getPlayer().getSessionParams(),n=i.videoData,o=i.share,a=encodeURIComponent(o["facebook"==t?"socialUrl":"secureSocialUrl"]);if(e.contains(["facebook","twitter"],t)){var r="http://api.addthis.com/oexchange/0.8/forward/"+t+"/offer?url="+a+"&pubid=ra-518bbde23f7ed2a9&ct=1";"facebook"==t&&(r+="&title="+n.videoTitle),window.open(r,"","")}else if("email"==t){var s=n.videoTitle;window.location.href="mailto:?subject="+s+"&body=Check out this video:%0A%0A"+s+"%0A"+a}return this}})}),Ndn_Require.define("text!templates/ndn/video-player/start-overlay.html",[],function(){return'<div class="ndn_startOverlayContainer ndn_playerOverlay">\n	<div class="ndn_startOverlay">\n		<div class="ndn_startPlay ndn_fastClick_clickevent"></div>\n	</div>\n</div>'}),Ndn_Require.define("views/Ndn/Viewer/ViewerModule/Inform/Overlay/StartView",["jquery","mustache","backbone","models/Ndn/Utils/FastClick","text!templates/ndn/video-player/start-overlay.html"],function(e,t,i,n,o){return i.View.extend({events:{mouseover:"onMouseover","click .ndn_startOverlay":"onOverlayClick"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.$el=e(t.to_html(o,{})),new n(this.$el.find(".ndn_fastClick_clickevent").get(0));var a=this;e(window).on("resize scroll",function(){a.syncScrollToPlay()})},syncScrollToPlay:function(){var e=this.model.getPlayer();e.isScrollToPlay()&&this.$el.is(":visible")&&this.isInViewVertically()&&e.requestVideoStart({source:"playOnInView"})},isInViewVertically:function(){var t=this.$el.offset().top,i=t+this.$el.height(),n=i-t,o=e(window).scrollTop(),a=o+e(window).height(),r=this.model.getPlayer(),s=r.getScrollToPlayPercent();if(s){var l=Math.floor(n*(s/100)),d=Math.max(t,o),c=Math.min(i,a),u=c-d;return u>=l}return o>t&&i>a||t>=o&&a>=t||i>=o&&a>=i},onOverlayClick:function(){var e=this.model.getPlayer();e.isPlaying()||e.requestVideoStart({source:"clickToPlay"})},show:function(){this.$el.appendTo(this.$el.parent()).show(),self.syncScrollToPlay()},hide:function(){this.$el.hide()},onMouseover:function(){var e=this.model.getPlayer();e.isMouseToPlay()&&!e.isPlaying()&&e.requestVideoStart({source:"mouseOverToPlay"})}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlay/StartModel",["jquery","underscore","models/Ndn/Viewer/ViewerModule/Inform/Overlay/AbstractModel","views/Ndn/Viewer/ViewerModule/Inform/Overlay/StartView","lib/jquery_plugins/jquery.backstretch.min","jquery_autoellipsis"],function(e,t,i,n){return i.extend({defaults:{view:null},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.set("view",new n({model:this})),e.getContainerElement().append(this.get("view").$el.hide());var t=this;e.on({"adStart videoStart adResume videoResume":function(){t.hide()},viewerSessionEnd:function(){t.show()}})},togglePlayButton:function(e){this.get("view").$el.find(".ndn_startPlay").toggle(e)},toggleInfoOverlay:function(e){this.get("view").$el.find(".ndn_startPlay").toggle(e)},show:function(e){this.update(),i.prototype.show.apply(this,arguments),this.getPlayer().getOverlays().getOverlay("info").show(),this.togglePlayButton(!0),this.get("view").syncScrollToPlay()},update:function(){var e=this.getPlayer(),t=e.getStillImageData(),i=e.getContainerElement().width()>400&&t.large,n=t[i?"large":"small"];n&&this.displayStillImage(n)},displayStillImage:function(e){this.get("view").$el.backstretch(e,{fade:300})}})}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform/Overlays",["jquery","backbone","models/Ndn/Viewer/ViewerModule/Inform/Overlay/EndslateModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/InfoModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/PauseModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/ShareModel","models/Ndn/Viewer/ViewerModule/Inform/Overlay/StartModel"],function(e,t,i,n,o,a,r){return t.Model.extend({defaults:{viewerModule:null,overlays:null},initialize:function(e){var t=e.informPlayer;this.set({overlays:{endslate:new i(t),info:new n(t),pause:new o(t),share:new a(t),start:new r(t)}})},hideAll:function(){e.each(this.get("overlays"),function(){this.hide()})},getOverlay:function(e){return this.get("overlays")[e]}})}),Ndn_Require.define("models/Ndn/Widget/Params",["underscore","jquery","models/Ndn/App","models/Ndn/Widget/Config"],function(e,t,i,n){return{getWgtValue:function(e,t){return"InView"==e.type?2:t?1:0},getPlayerBehaviorId:function(e,t){var i=e.config;return"undefined"!=typeof i.pb?i.pb:e.settings.behavior.rmm.rotatingEnabled?"5":t?"2":i.autoPlay?"1":i.playOnInView?"7":i.playOnMouseover?"3":"0"},getVideoSizeId:function(e){return 300>=e?1:315>e?2:350>e?3:400>e?4:5},getVideoAssetId:function(e,t){return t?e+"":"23408962"},getFoldPositionId:function(e){if(i.isEmbeddedByIframe())return"0";var n=t(window).height()+t(window).scrollTop(),o=n>=e.offset().top+Math.floor(e.height()/2);return o?"1":"2"},getViewerData:function(e){return{foldPositionId:this.getFoldPositionId(e),viewerWidth:e.width(),viewerHeight:e.height(),viewerSizeId:this.getVideoSizeId(e.width())}},getComscoreData:function(t){var i=t.videoData,n=t.isProviderAttributed,o={siteSection:t.siteSection,distributorName:t.distributorName,videoAssetId:this.getVideoAssetId(i?i.videoId:"",n),c5:n?"03":"02",ca2:"null",ca3:"null"};if(i){var a=i.provider;o=e.extend(o,{providerId:a.id,providerCategory:a.category,providerName:a.name}),"Bloomberg"==i.provider.name&&(o=e.extend(o,{ca2:"19630659",ca3:"NDN"}))}return o},getShareData:function(e){if(e.shareSettings.enabled&&e.videoData){var i=e.shareSettings,n=i.template,o=e.videoData,a=o.videoId,r={showShareIcons:o.settings.share.embedCode.enabled&&i.mode.social,mode:i.mode};return t.each(n,function(e,t){r[e]=t.replace(/\[VIDEO_ID\]/g,a)}),r}},getImaAdTagUrl:function(e){var i=e.videoData,o=e.viewerData,a=e.productSettings,r=a.config,s=a.settings.app,l=a.settings.dfp,d=a.settings.behavior,c=a.settings.browser,u=encodeURIComponent(c.embedOriginUrl),p=encodeURIComponent(u),h=e.isProviderAttributed,g=this.getVideoAssetId(i?i.videoId:"",h),f=function(){var h=[["wgt",e.wgtValue],["plt",e.pltValue],["pb",e.pbValue],["snd",e.isMuted?"0":"1"],["fp",o.foldPositionId],["cp",r.continuousPlay],["vs",o.viewerSizeId],["pt",n.getSiteSectionSegments(r.siteSection).pageType],["dpid",l.adCampaignId],["sitesection",r.siteSection],["vt","flash"==e.playbackMode?e.playbackMode:"html5"],["cpvnum",e.cpvNumber],["plid",r.playlistId||""],["assetid",g],["modal",d.isModal?"1":"0"],["pit",e.playerInstanceTypeId],["pvid",encodeURIComponent(i.providerVideoId||"")],["width",o.viewerWidth],["height",o.viewerHeight],["vli",e.videoLoadIndex],["dtype",c.deviceTypeId],["ab",c.adBlockDetectionId],["lat",c.lotameSegments.join(",")],["akw",i?i.antiKeywords:""]];l.adCampaignId!=l.defaultAdCampaignId&&h.push(["ordpid",l.defaultAdCampaignId]),h=h.concat([["wid",r.widgetId],["cpid",i?i.provider.id:""],["insid",s.pageViewSessionId],["embedIndex",a.embedIndex],["ver",s.buildNumber],["benv",s.buildEnvironment],["atei",e.analyticsTimelineEventIndex],["ua",c.browserId],["ext_url",u],["de_url",p],["adserver","dfp"]]);var f=[];return t.each(h,function(e,t){var i=t[0],n=(t[1]+"").substr(0,256);f.push([i,n])}),f}(),m=function(){var e=[];return t.each(f,function(t,i){var n=i[0],o=i[1];e.push(n+"="+o)}),encodeURIComponent(e.join("&"))}();return c.pageProtocol+"//pubads.g.doubleclick.net/gampad/ads?ad_rule=1&sz=750x425&iu="+l.adUnitCode+"&ciu_szs="+(l.companionAd||"")+"&vid="+g+"&cmsid=1169&vpos=preroll&scor="+e.now+"&vad_type=linear&description_url="+u+"&playlistId="+r.playlistId+"&widgetId="+(r.widgetId||"")+"&trackingGroup="+r.trackingGroup+"&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url="+u+"&correlator="+e.now+"&cust_params="+m}}}),Ndn_Require.define("jquery_responsive_containers",["jquery","jquery_resize"],function(e){!function(e){"use strict";var t={feature:"min-width",value:"800px",className:"",callback:null};e.fn.responsiveContainer=function(i){if("undefined"==typeof i.feature)throw new Error('Responsive container error: No "feature" supplied, such as min-width.');if("undefined"==typeof i.value)throw new Error('Responsive container error: No "value" supplied, such as 800px.');if("undefined"==typeof i.className&&"undefined"==typeof i.callback)throw new Error('Responsive container error: No "className" or "callback" supplied, one or the other is needed, else theres no use.');var n=e.extend({},t,i);return this.each(function(){var t=e(this),i=function(){var e=!1,i=t.width();switch(""!==n.className&&t.removeClass(n.className),n.feature){case"min-width":n.value.replace("px","")<i&&(e=!0);break;case"max-width":n.value.replace("px","")>i&&(e=!0)}e&&(""!==n.className&&t.addClass(n.className),null!==n.callback&&n.callback({width:i}))};e(this).resize(i),i()})}}(e)}),Ndn_Require.define("models/Ndn/Utils/Responsive",["jquery","jquery_responsive_containers"],function(e){return{addBreakpoints:function(t,i,n){"undefined"==typeof n&&(n="inform-"),e.each(i,function(i,o){e.each(o,function(){var e="undefined"!=typeof this[0],o=e?this[0]:this+0,a=e?n+this[1]:n+"breakpoint-"+i.split("-")[0]+o;t.responsiveContainer({feature:i,value:o+"px",className:a})})})}}}),Ndn_Require.define("models/Ndn/Viewer/ViewerModule/Inform",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget","models/Ndn/Viewer/ViewerModule","models/Ndn/Utils/UserAgent","models/Ndn/Viewer","models/Ndn/Viewer/ViewerModule/Amp","models/Ndn/Viewer/ViewerModule/Inform/SoundManager","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Viewer/ViewerModule/Inform/Overlays","models/Ndn/Analytics/Ndn","models/Ndn/Widget/Params","models/Ndn/Debug","models/Ndn/AdBlockDetector","models/Ndn/Utils/Responsive","lib/amp.premier/config/skin/templates","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v){
var _=a.extend({defaults:{moduleId:"inform",player:null,overlays:null,playOnMouseover:null,playOnInView:null,previousVideoStartRequest:null,stillImage:null,wgtValue:null,params:null,videoLoadIndex:-1,currentAteiValue:null},initialize:function(t){a.prototype.initialize.call(this,t);var i=t.containerElement,n="inform-player-container-"+_.getInformPlayerIndex();i.html('<div id="'+n+'" style="width:100%;height:100%;"></div>');var o=e("#"+n);this.initializeContainerElement(i);var r=l,s=new r({eventsReceiver:this,containerElement:o}),c=new p({informPlayer:this,viewerModule:s});this.set({containerElement:i,player:s,overlays:c});s.on("share",function(e){c.hideAll(),c.getOverlay("share").share(e.medium).show()}),this.set("soundManager",new d(this))},getOverlay:function(e){return this.getOverlays().getOverlay(e)},getOverlays:function(){return this.get("overlays")},manageEvents:function(){},getDebugInfo:function(){return this.get("player").getDebugInfo()},isMouseToPlay:function(){return this.get("playOnMouseover")},isScrollToPlay:function(){return!!this.get("playOnInView")},getScrollToPlayPercent:function(){return this.getSessionParams().playOnInViewPercent||1e-7},getStillImageData:function(){return this.get("stillImage")},getVideoLoadIndex:function(){return this.get("videoLoadIndex")},setMuted:function(e){this.getPlayerInstance().setMuted(e)},getPlayerInstance:function(){return this.get("player")},play:function(){this.getOverlays().hideAll(),this.getPlayerInstance().play()},pause:function(){this.get("player").pause()},startSession:function(e){a.prototype.startSession.apply(this,arguments),this.toggleAdPlayer(!!e.dfp),this.toggleContentPlayer(!!e.videoData);var t;t="undefined"!=typeof e.isBumperVideo?e.isBumperVideo:"undefined"!=typeof e.isRmm?e.isRmm:!1;var i=e.videoData,n=e.playOnLoad,o=e.share,r=e.isMuted,s=this.getViewer().getLoadingScreen();s.show(),this.set("stillImage",e.stillImage||{small:(i||{}).stillImageUrl,large:(i||{}).stillImageXLUrl}),this.get("soundManager").setActive(r&&e.unmuteOnMouseover),this.set({playOnMouseover:e.playOnMouseover||!1,playOnInView:e.playOnInView||!1}),i&&(this.set("videoLoadIndex",this.getVideoLoadIndex()+1),this.trigger("videoLoad",{playOnLoad:n,videoData:i,videoLoadIndex:this.getVideoLoadIndex()})),this.getPlayerInstance().startSession({dfp:e.dfp,comscore:e.comscore,videoData:i,isMuted:r,isBumperVideo:t,playOnLoad:n,playbackMode:e.playbackMode,showControls:e.showControls,showShareIcons:o&&o.showShareIcons,forceInstantiation:e.forceInstantiation}),e.endslate?(this.getOverlay("endslate").show(e.endslate),s.hide()):n||(s.hide(),this.getOverlay("start").show(i),this.getOverlay("info").setToggleableDisplay(!1).setVisibility(!1,!0))},getPlayerInstanceTypeId:function(){},requestVideoStart:function(e){this.getViewer().getLoadingScreen().show();var i="undefined"==typeof e.playlistIndex||"undefined"==typeof e.videoIndex?"play":"selectVideo",n={source:e.source||"",playlistIndex:e.playlistIndex,videoIndex:e.videoIndex,action:i,sessionIndex:this.getModuleSessionIndex()},o=!t.isEqual(this.get("previousVideoStartRequest"),n);o&&(this.set("previousVideoStartRequest",n),"play"==i&&this.play(),this.trigger("videoStartRequest",n))},initializeContainerElement:function(e){e.addClass("ndn_videoPlayer"),y.addBreakpoints(e,{"min-width":[[419,"largeView"]],"max-width":[[1198,"view1198"],[1022,"view1022"],[999,"view999"],[849,"view849"],[784,"view784"],[766,"view766"],[702,"view702"],[639,"view639"],[574,"view574"],[499,"view499"],[418,"smallView"]]},"ndn_videoPlayer_"),function(t){var i=e.get(0),n=function(){t.trigger("click")};i.addEventListener?i.addEventListener("click",n,!0):i.attachEvent&&i.attachEvent("onclick",n)}(this)},getDuration:function(){return this.get("player").getDuration()},getCurrentTime:function(){return this.get("player").getCurrentTime()},getCurrentPlaylistId:function(){return this.get("playlistId")},onceReady:function(e){return this.get("player").onceReady(e)},getDebugInfo:function(){return this.getPlayerInstance().getDebugInfo()}},{getInformPlayerIndex:function(){var e=1;return function(){return e++}}()});return _}),Ndn_Require.define("text!templates/ndn/viewer/loading-screen.html",[],function(){return'<div class="inform-viewer-loading-screen" style="position:absolute;z-index:1002;top:0;left:0;width:100%;height:100%;overflow:hidden;">\n    <div class="inform-loading-spinner-hidden"></div>\n    <div class="inform-viewer-loading-screen-bg" style="position:absolute;z-index:-999999;top:0;left:0;width:100%;height:100%;overflow:hidden;background:#ddd;"></div>\n</div>'}),Ndn_Require.define("models/Ndn/Viewer",["underscore","jquery","backbone","models/Ndn/Viewer/Step","models/Ndn/Utils/DomElement","models/Ndn/Viewer/ViewerModule/Amp","models/Ndn/Viewer/ViewerModule/Easi","models/Ndn/Viewer/ViewerModule/DisplayAd","models/Ndn/Viewer/ViewerModule/Inform","models/Ndn/Debug","text!templates/ndn/viewer/loading-screen.html","lib/jquery_plugins/jquery.backstretch.min"],function(e,t,i,n,o,a,r,s,l,d,c){var u={amp:a,easi:r,displayAd:s,inform:l};return i.Model.extend({defaults:{viewerModules:null,activeModule:null,containerElement:null,sessionIndex:null,sessionsLog:null,effectiveSessionsLog:null,debugInfo:null,steps:null,usesVideoJs:null},initialize:function(e){this.set({containerElement:t(e.containerElement).addClass("inform-viewer-container"),viewerModules:{},debugInfo:[],steps:new n({viewer:this,stepName:"top",parentStep:null}),sessionsLog:[],effectiveSessionsLog:[],sessionIndex:0,usesVideoJs:!!e.usesVideoJs}),this.handleLoadingScreen(),this.handleDebugMode()},usesVideoJs:function(){return this.get("usesVideoJs")},getViewerEventData:function(){var e=this.getActiveModule();return{sessionModuleId:this.getActiveModuleId(),sessionParams:this.getActiveSessionParams(),sessionIndex:this.getSessionIndex(),moduleSessionIndex:function(){return e?e.getModuleSessionIndex():void 0}()}},execute:function(e,i,n){var o=this;return n=n||{},t.Deferred(function(t){o.beginNextSession().done(function(){o.useModule(e,i,n).always(function(){o.set("sessionIndex",o.get("sessionIndex")+1)}).done(function(e){t.resolve(e)})})}).promise()},beginNextSession:function(){var e=this;return t.Deferred(function(t){e.isActive()?(e.once("viewerModuleEnd",t.resolve),e.getActiveModule().halt()):t.resolve()}).promise()},halt:function(){this.isActive()&&this.getActiveModule().halt(),this.getSteps().concludeAllSteps()},getViewerModule:function(e){return this.get("viewerModules")[e]},useModule:function(e,i,n){var a=this;return n=n||{},t.Deferred(t.proxy(function(r){t.Deferred(function(i){if("undefined"!=typeof a.get("viewerModules")[e])return i.resolve(a.get("viewerModules")[e]);if(!e||!u[e])return i.reject("Unrecognized module: "+e);var n="inform-viewer-module-"+e,r=t('<div class="'+n+' inform-viewer-module" style="width:100%;height:100%;overflow:hidden;"></div>');a.getContainerElement().append(r),o.onceHasWidthAndHeight(r).done(function(){var t=u[e],n=new t({viewer:a,containerElement:r});a.initializeViewerModule(e,n),i.resolve(n)})}).promise().always(function(t){var o="resolved"==this.state()?t:null;a.set({activeModule:o,activeModuleId:o?e:""}),o?(a.getContainerElement().find(".inform-viewer-module-active").removeClass("inform-viewer-module-active"),o.getContainerElement().addClass("inform-viewer-module-active"),o.once("viewerModuleEnd",function(e){e.halted?r.reject(n):r.resolve(n)}),o.startSession(i,n)):r.reject(n)})},this)).promise().always(function(){a.set({activeModule:null,activeModuleId:""})})},getContainerElement:function(){return this.get("containerElement")},initializeViewerModule:function(e,t){this.get("viewerModules")[e]=t},getModule:function(e){return this.get("viewerModules")[e]},getSessionIndex:function(){return this.get("sessionIndex")},getActiveModuleId:function(){return this.get("activeModuleId")},logSession:function(e){var i=[this.getActiveModuleId(),e];this.get("sessionsLog").push(i);var n=function(){var i=!1;return t.each(e,function(e,t){return t?(i=!0,!1):void 0}),i}();n&&this.get("effectiveSessionsLog").push(i)},getSessionsLog:function(){return this.get("sessionsLog")},getEffectiveSessionsLog:function(){return this.get("effectiveSessionsLog")},isActive:function(){return!!this.getActiveModule()},getActiveModule:function(){return this.get("activeModule")},getActiveSessionParams:function(){var e=this.getActiveModule();return e?e.getSessionParams():{}},getSteps:function(){return this.get("steps")},getDebugInfo:function(){return{sessions:this.get("debugInfo"),steps:this.getSteps().getData()}},step:function(e){return new n({viewer:this,stepName:e})},getLoadingScreen:function(){return this.getContainerElement().find(".inform-viewer-loading-screen")},setLoadingScreenImage:function(e){this.getLoadingScreen().backstretch(e,{fade:300})},disableLoadingScreen:function(){this.getLoadingScreen().addClass("inform-disabled")},handleLoadingScreen:function(){this.getContainerElement().prepend(t(c));var e=this.getLoadingScreen();this.on({"adRequest viewerModuleEnd":function(){e.show()},"adStart videoStart":function(){e.hide()}})},handleDebugMode:function(){var t=this;if(d.inMode("viewerEvents")||d.inMode("viewerEventsData")||d.inMode("allViewerEvents")){var i=this.trigger;this.trigger=function(n,o){if((d.inMode("allViewerEvents")||!e.contains(["adTimeUpdate","videoTimeUpdate","debugInfo"],n))&&0!==n.indexOf("change")){var a=["[Ndn_Viewer Event]"];if(d.inMode("viewerEventsData"))for(var r=0;r<arguments.length;r++)a.push(arguments[r]);else a.push(n),e.contains(["viewerModuleStart","viewerModuleEnd"],n)&&a.push(o.viewer.sessionModuleId);console.log.apply(console,a)}i.apply(t,arguments)}}if(d.isEnabled()){var n=this.get("debugInfo"),t=this;this.on({viewerModuleStart:function(i){var o=i.viewer;n.push(e.extend({log:t.getActiveModule().getScheduleLog()},o)),t.getSteps().getCurrentStep().recordSession(o.sessionIndex)},debugInfo:function(e){var t=e.viewer;n[t.sessionIndex].debugInfo=e},viewerModuleEnd:function(i){var o=i.viewer;n[o.sessionIndex].log=e.extend({},t.getActiveModule().getSessionLog())}})}}})});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Widget/Settings/App",["underscore","models/Ndn/App","models/Ndn/Analytics"],function(e,t,i){return{process:function(e){e.settings.deliverySettings,e.config;return e.settings.app={pageViewSessionId:t.getPageViewSessionId(),buildNumber:t.getBuild(),buildEnvironment:t.getEnv(),settings:t.getSettings(),buildDetails:_nw2e.buildDetails||{}},i.on("update",function(){e.settings.app.pageViewSessionId=i.getPageViewSessionId()}),e.settings.app}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Analytics",["underscore"],function(e){return{process:function(t){var i=t.settings.deliverySettings,n=t.config;return t.settings.analytics={chartbeat:{enabled:i.analytics_chartbeat&&e.contains(["VideoPlayer/Single","VideoPlayer/Studio","VideoPlayer/16x9"],n.type)}}}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Behavior",["underscore","models/Ndn/App","models/Ndn/Widget/Config","models/Ndn/Utils/UrlParser"],function(e,t,i,n){var o=n.parseParams(n.getUrlParam("ndn_behaviorSettings")||"");return{process:function(i,n){var o=i.settings.behavior,a=i.settings.deliverySettings,r=i.settings.browser,s=i.config,n=n||{},l="VideoLauncher/Slider"==s.type;return function(){var t=o.rmm={enabled:r.isAbleToPlayVideoAutomatically||l};if(e.contains(["VideoPlayer/Inline","VideoLauncher/Slider"],s.type)||(t.enabled=!1),t.enabled){var i=a.rmmEarlyContent&&r.ableToUseEarlyContentRmm;t.earlyContent=i}}(),o["float"]=function(){var t=a.float_player,i=!!t;s["float"]&&("off"==s["float"]?i=!1:"default"!=s["float"]&&(i=!0,t=s["float"]));var n={enabled:"VideoPlayer/Single"==s.type&&i&&!r.isEmbeddedByIframe&&r.isDesktop};return n.enabled&&(n=e.extend(n,{percent:a.floatPercent,initialPosition:t})),n}(),o.playbackMode=function(){if(t.getSetting("forceHtmlPlayer"))return"html";if(l){var i=a.forceHtmlForSections.split(",");if(e.contains(i,s.siteSection))return"html"}return"auto"}(),o.isModal=n.isModal||!1,o},processToggle:function(t){var i=t.settings.behavior,n=t.settings.browser,o=t.config;return i.toggle={enabled:n.isDesktop&&e.contains(["1","7"],o.pb)},i.toggle.enabled&&(i.toggle.toggleValue=n.productBehaviorToggleValue),t},processPlaylistItemsLimit:function(e){var t=e.settings.behavior,n=e.config;return t.playlistItemsLimit=i.getPlaylistItemsLimit(n.type),e},processVideoSchedule:function(t){var i,n=t.settings.behavior,o=n.playlistItemsLimit,a=t.config,r=[];if(e.contains(["VideoPlayer/Single","VideoPlayer/Studio","VideoPlayer/Inline","VideoPlayer/Inline590","VideoPlayer/16x9","VideoLauncher/Slider","InView"],a.type)){if(t.videosData&&(r.push(t.videosData),i={videoIndex:0,playlistIndex:0}),a.playlistId&&(r.push([a.playlistId,o]),"undefined"!=typeof t.videoIndex&&(i={videoIndex:t.videoIndex,playlistIndex:t.videosData?1:0})),r.push([507]),"VideoPlayer/16x9"==a.type){for(var s=t.associatedPlaylists,l=[],d=0;d<s.length;d++){var c=s[d];c.id==a.playlistId?l.push({schedule:r,firstVideo:i,firstActiveFeeder:!0}):l.push({schedule:[[c.id,o],[507]]})}n.videos=l}else n.videos={schedule:r,firstVideo:i};return t}},getOverrides:function(){return o}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Browser",["jquery","underscore","models/Ndn/App","models/Ndn/Widget/Config","models/Ndn/Utils/UserAgent","models/Ndn/Widget/PlayerOptions","models/Ndn/AdBlockDetector","models/Ndn/Utils/FlashDetect","models/Ndn/EventHub"],function(e,t,i,n,o,a,r,s,l){return{process:function(e){var t=e.settings.browser;l.once("adBlockDetectionComplete",function(e){t.adBlockDetectionId=e.adBlockDetectionId});var n=i.getAdsTargeting().getInstance("lotame");n.onceIsLoaded(function(){t.lotameSegments=n.getSegments()})},fetch:function(){return{userAgent:o.getUserAgent(),adBlockDetectionId:r.getCachedScenarioId(),isAbleToPlayVideoAutomatically:o.isAbleToPlayVideoAutomatically(),productBehaviorToggleValue:a.getProductBehaviorToggleValue(),hasCursor:o.hasCursor(),ableToUseEarlyContentRmm:o.isSafari()||o.isChrome(),ableToUseDisplayAdSpree:o.isSafari()||o.isChrome(),mayHaveDesktopFlashBlock:o.isDesktop()&&(o.isSafari()||o.isChrome()),isMobile:o.isMobile(),isDesktop:o.isDesktop(),deviceTypeId:o.getDeviceType(),browserId:o.getBrowser(),lotameSegments:i.getAdsTargeting().getInstance("lotame").getSegments(),isOnHomepage:t.contains(["/",""],window.location.pathname+""),pageProtocol:window.location.protocol,isEmbeddedByIframe:i.isEmbeddedByIframe(),embedOriginUrl:i.getEmbedOriginUrl(),flashVersion:s.getFlashVersion(),isFlashEnabled:s.hasFlashEnabled()}}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Dfp",["underscore","models/Ndn/Analytics","models/Ndn/Widget/Config"],function(e,t,i){return{process:function(n){var o=n.settings.dfp,a=n.settings.browser,r=n.config;if(o.accountNumber){var s=i.getSiteSectionSegments(r.siteSection);o.adUnitCode=o.accountNumber+"/"+o.adOwnershipGroupId+(a.isMobile?"_mob":"")+"/"+o.adTrackingGroupId+"/"+r.siteSection+"/"+(s.section||"oth")+"/"+(s.subSection||"non"),o.companionAd=e.contains(["VideoPlayer/16x9","VideoPlayer/Studio"],r.type)?"300x250":!1}return o.publisherProvidedId=t.getPpidValue(),o}}}),Ndn_Require.define("models/Ndn/Widget/Settings/Share",["underscore","models/Ndn/App","models/Ndn/Widget/Config"],function(e,t,i){return{process:function(e){var t=(e.settings.deliverySettings,e.config,e.settings.share);return e.settings.share={enabled:t.enabled,template:{directLink:this.getDirectLinkTemplate(e),socialUrl:"http://social.newsinc.com/media/json/69017/[VIDEO_ID]/singleVideoOG.html?type=VideoPlayer/16x9&trackingGroup=69017&videoId=[VIDEO_ID]",secureSocialUrl:"https://social.newsinc.com/media/json/69017/[VIDEO_ID]/singleVideoOG.html?type=VideoPlayer/Single&widgetId=2&trackingGroup=69017&videoId=[VIDEO_ID]",embedCode:this.getEmbedCode(e)},mode:t.mode},e.settings.share},getEmbedCode:function(e){var t=e.config;return'<iframe width="590" height="332" src="http://launch.newsinc.com/?type=VideoPlayer/Single&widgetId=1&trackingGroup=69016&playlistId=19132'+(t.siteSection?"&siteSection="+t.siteSection:"")+'&videoId=[VIDEO_ID]" frameborder="no" scrolling="no" noresize marginwidth="0" marginheight="0" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>'},getDirectLinkTemplate:function(e){var n=e.config,o=e.settings.share.directLinkLandingPageUrl,a=!!t.getAppUrlInfo(o),r=a?"":i.getDefaultUrlVarPrefixForConfigSettings();return-1===o.indexOf("?")&&(o+="?"),o+r+"trackingGroup="+n.trackingGroup+(n.siteSection?"&"+r+"siteSection="+n.siteSection:"")+"&"+r+"videoId=[VIDEO_ID]"}}}),Ndn_Require.define("models/Ndn/Widget/Settings",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget/Config","models/Ndn/Utils/UserAgent","models/Ndn/Widget/Settings/App","models/Ndn/Widget/Settings/Analytics","models/Ndn/Widget/Settings/Behavior","models/Ndn/Widget/Settings/Browser","models/Ndn/Widget/Settings/Dfp","models/Ndn/Widget/Settings/Share","models/Ndn/Widget/PlayerOptions"],function(e,t,i,n,o,a,r,s,l,d,c,u,p){var h=i.Model.extend({defaults:{data:null},initialize:function(e){this.set("data",e)},getData:function(){return this.get("data")},getConfig:function(){return this.getData().config},getBehaviorSettings:function(){return this.getData().settings.behavior},getBrowserSettings:function(){return this.getData().settings.browser},getDeliverySettings:function(){return this.getData().settings.deliverySettings}},{process:function(i,a,p){var g=i;return g.embedIndex=p.embedIndex,g.settings.browser=t.extend(d.fetch(),p.browserSettings||{}),g.providedConfig=a,g.settings.deliverySettings=t.extend(g.settings.deliverySettings,p.deliverySettings||{}),o.process(g),r.process(g),s.process(g),l.process(g,p.behaviorSettings),d.process(g),c.process(g),u.process(g),l.processToggle(g),l.processPlaylistItemsLimit(g),l.processVideoSchedule(g),o.applyToggleToPbConfigSetting(g),o.syncFloatWithBehaviorSettings(g),e.Deferred(function(e){n.getProductModel(g.config.type).done(function(i){var n=new h(g);i.initializeBehaviorSettings(n),t.extend(n.getBehaviorSettings(),l.getOverrides()),e.resolve(n.getData())})}).promise()}});return h}),Ndn_Require.define("models/Ndn/Utils/Time",[],function(){return{getTimestamp:function(){return Date.now?Date.now():(new Date).valueOf()}}}),Ndn_Require.define("models/Ndn/LoyaltyProgram",["backbone","jquery","mustache"],function(e,t,i){var n=function(e){return"ndntritonservice"==e?"http://loyalty.newsinc.com/ndntritonservice.svc/GetCredit/{{memberId}}/{{siteId}}":void 0},o=function(e,t){n(e);return i.to_html(n(e),t)};return e.Model.extend({defaults:{id:null,customData:null,ajaxUrl:""},initialize:function(){e.Model.prototype.initialize.apply(this,arguments),this.set({ajaxUrl:o(this.get("id"),this.get("customData"))})},execute:function(){t.getJSON(this.get("ajaxUrl"),function(e){})}})}),Ndn_Require.define("models/Ndn/Utils/AspectRatio",["jquery","backbone","jquery_resize"],function($,Backbone){return{maintain:function(element,aspectRatio,toggleClosure,inputDimension){if("undefined"==typeof toggleClosure&&(toggleClosure=function(){return!0}),"undefined"==typeof inputDimension&&(inputDimension="width"),"width"==inputDimension||"height"==inputDimension){var outputDimension="width"==inputDimension?"height":"width",inputDimensionVariable=inputDimension.substr(0,1);if(element=$(element),!(element.data(outputDimension)||"").match(/[w|h]/gi)&&aspectRatio.match(/:/g)){var ratioTokens=aspectRatio.split(":"),ratio={width:ratioTokens[0],height:ratioTokens[1]},outputDimensionAlgorithm=ratio[outputDimension]+"/"+ratio[inputDimension]+"*"+inputDimensionVariable,model=new Backbone.Model;model.on("elementResize",function(){if(toggleClosure(element)){var inputDimensionValue=element[inputDimension](),outputDimensionCalculation=outputDimensionAlgorithm.replace(new RegExp(inputDimensionVariable,"gi"),inputDimensionValue).replace(/[^-()\d\/*+.]/g,""),result=eval(outputDimensionCalculation);try{element.css(outputDimension,eval(outputDimensionCalculation)+"px")}catch(e){}}}),element.resize(function(){model.trigger("elementResize")});var timerIntervals=[.5,1,2,4,8,16];return $.each(timerIntervals,function(){setTimeout(function(){model.trigger("elementResize")},1e3*this)}),model.trigger("elementResize"),model}}}}}),Ndn_Require.define("models/Ndn/Enum/Wgt",[],function(){return{UI:0,RMM:1,INVIEW:2}}),Ndn_Require.define("lib/respond",[],function(){return window.matchMedia=window.matchMedia||function(e,t){"use strict";var i,n=e.documentElement,o=n.firstElementChild||n.firstChild,a=e.createElement("body"),r=e.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(r),function(e){return r.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(a,o),i=42===r.offsetWidth,n.removeChild(a),{matches:i,media:e}}}(document),function(e){"use strict";function t(){A(!0)}var i={};if(e.respond=i,i.update=function(){},i.mediaQueriesSupported=e.matchMedia&&e.matchMedia("only all").matches,!i.mediaQueriesSupported){var n,o,a,r=e.document,s=r.documentElement,l=[],d=[],c=[],u={},p=30,h=r.getElementsByTagName("head")[0]||s,g=r.getElementsByTagName("base")[0],f=h.getElementsByTagName("link"),m=[],y=function(){for(var t=0;t<f.length;t++){var i=f[t],n=i.className,o=i.href,a=i.media,r=i.rel&&"stylesheet"===i.rel.toLowerCase();"_nw2eStyles"==n&&o&&r&&!u[o]&&(console.log("respond.js: processing styles at "+i.href),i.styleSheet&&i.styleSheet.rawCssText?(_(i.styleSheet.rawCssText,o,a),u[o]=!0):(!/^([a-zA-Z:]*\/\/)/.test(o)&&!g||o.replace(RegExp.$1,"").split("/")[0]===e.location.host)&&m.push({href:o,media:a}))}v()},v=function(){if(m.length){var t=m.shift();b(t.href,function(i){_(i,t.href,t.media),u[t.href]=!0,e.setTimeout(function(){v()},0)})}},_=function(e,t,i){var n=e.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),o=n&&n.length||0;t=t.substring(0,t.lastIndexOf("/"));var a=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},r=!o&&i;t.length&&(t+="/"),r&&(o=1);for(var s=0;o>s;s++){var c,u,p,h;r?(c=i,d.push(a(e))):(c=n[s].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,d.push(RegExp.$2&&a(RegExp.$2))),p=c.split(","),h=p.length;for(var g=0;h>g;g++)u=p[g],l.push({media:u.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:d.length-1,hasquery:u.indexOf("(")>-1,minw:u.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:u.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}A()},E=function(){var e,t=r.createElement("div"),i=r.body,n=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",i||(i=n=r.createElement("body"),i.style.background="none"),i.appendChild(t),s.insertBefore(i,s.firstChild),e=t.offsetWidth,n?s.removeChild(i):i.removeChild(t),e=a=parseFloat(e)},A=function(t){var i="clientWidth",u=s[i],g="CSS1Compat"===r.compatMode&&u||r.body[i]||u,m={},y=f[f.length-1],v=(new Date).getTime();if(t&&n&&p>v-n)return e.clearTimeout(o),void(o=e.setTimeout(A,p));n=v;for(var _ in l)if(l.hasOwnProperty(_)){var b=l[_],C=b.minw,N=b.maxw,I=null===C,S=null===N,T="em";C&&(C=parseFloat(C)*(C.indexOf(T)>-1?a||E():1)),N&&(N=parseFloat(N)*(N.indexOf(T)>-1?a||E():1)),b.hasquery&&(I&&S||!(I||g>=C)||!(S||N>=g))||(m[b.media]||(m[b.media]=[]),m[b.media].push(d[b.rules]))}for(var w in c)c.hasOwnProperty(w)&&c[w]&&c[w].parentNode===h&&h.removeChild(c[w]);for(var P in m)if(m.hasOwnProperty(P)){var M=r.createElement("style"),D=m[P].join("\n");M.type="text/css",M.media=P,h.insertBefore(M,y.nextSibling),M.styleSheet?M.styleSheet.cssText=D:M.appendChild(r.createTextNode(D)),c.push(M)}},b=function(e,t){var i=C();i&&(i.open("GET",e,!0),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||t(i.responseText)},4!==i.readyState&&i.send(null))},C=function(){var t=!1;try{t=new e.XMLHttpRequest}catch(i){t=new e.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();y(),i.update=y,e.addEventListener?e.addEventListener("resize",t,!1):e.attachEvent&&e.attachEvent("onresize",t)}}(this),respond});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Widget",["jquery","underscore","require","backbone","models/Ndn/App","models/Ndn/Widget/CssInjector","models/Ndn/VideoFeeder","models/Ndn/Viewer","models/Ndn/PlayerServices","models/Ndn/Widget/Settings","models/Ndn/Utils/UrlParser","models/Ndn/Utils/Time","models/Ndn/Widget/Config","models/Ndn/Widget/Params","models/Ndn/LoyaltyProgram","models/Ndn/EventHub","models/Ndn/Utils/DomElement","models/Ndn/Utils/AspectRatio","models/Ndn/AdBlockDetector","models/Ndn/Analytics/ChartbeatStrategy","models/Ndn/Viewer/ViewerModule/Amp","models/Ndn/Enum/Wgt","models/Ndn/Debug","lib/jquery_plugins/jquery.json","lib/respond"],function(e,t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_,E,A,b){var C=0,N=n.Model.extend({defaults:{config:null,templates:null,initialConfig:null,placedBy:null,containerElement:null,viewer:null,videoFeeder:null,embedIndex:null,adOpportunityIndex:null,cpvNumber:null,widgetUid:null,configComplete:!1,settings:null,loyaltyProgram:null,settingsPending:!1,debugEvents:null,providedContainerElementHtml:null,isModal:!1,carousel:null,thumbnailCarousel:null,nextStepParams:null},initialize:function(e){this.set({initialConfig:t.extend({},e),config:e,adOpportunityIndex:0,stepParams:{},debugEvents:{},cpvNumber:0}),this.manageLoyaltyProgram(),this.manageEvents()},initializeVideoFeeder:function(){var e=this.getCachedSettings(),t=e.settings.behavior.videos;if(t){var i=new r({productSettings:e,playlists:t.schedule});i.setNextVideo(t.firstVideo),this.set("videoFeeder",i)}},initializeView:function(){var e=this.getContainerElement(),i=this.getConfig();e.addClass(N.getDomClassIdentifier(this.getConfig().type));var n=this.get("widgetView");this.set("view",new n({el:e.get(0),model:this})),i.width&&e.width(i.width),i.aspectRatio&&t.contains(["VideoPlayer/Single","VideoPlayer/Studio"],i.type)&&y.maintain(e,i.aspectRatio),!i.aspectRatio&&i.height&&e.height(i.height),this.get("view").updateSelectableVideos()},initializeViewer:function(){this.assignViewer(new s({containerElement:e("#"+this.getViewerContainerId()),usesVideoJs:this.getDeliverySettings().videojs}));var t=this.getViewer(),i=this.getVideoFeeder(),n=function(e){t.setLoadingScreenImage(e.videoData[t.getContainerElement().width()>400?"stillImageXLUrl":"stillImageUrl"])};i.on("videoFed",n),i.peekNextVideo().done(n)},getStep:function(e){var t=this["step"+e];return"function"==typeof t?t.bind(this):void 0},setStepParams:function(e,t){this.get("stepParams")[e]=t},getStepParams:function(e){var t=this.get("stepParams"),i=t[e]||{};return delete t[e],i},steps:function(t){var i=this;return e.Deferred(function(e){if(!t.length)return e.resolve();var n=i.getStep(t.shift());n().done(function(){i.steps(t).done(e.resolve)})}).promise()},manageLoyaltyProgram:function(){var t=this.getConfig();t.loyaltyProgramId&&this.set("loyaltyProgram",new g({id:t.loyaltyProgramId,customData:function(){try{return e.parseJSON(t.loyaltyProgramData)}catch(i){return{}}}()}))},manageEvents:function(){this.manageAnalytics(),this.manageHooks(),this.debugEvents();var e=this;this.on({viewerInitialized:function(){var t=e.getCachedSettings();t.settings.analytics.chartbeat.enabled&&_.enableForNdnProduct(e),this.getViewer().on("adEnd",function(){e.get("loyaltyProgram")&&e.get("loyaltyProgram").execute()})},configComplete:function(){a.injectCss(this.getConfig().type)}})},manageAnalytics:function(){function t(t,i){e.each(i,function(){var e=this+"";t.on(e,function(t){o.trigger("analytics:"+e,t||{})})})}var i=["videoLoad","videoStartRequest","videoQuartile","adRequest","adLoad","adError","adMute","adUnmute","adPause","adResume","adQuartile"],n=["widgetEmbedStart","configComplete","widgetEmbedEnd"],o=this;t(this,n),this.on("viewerInitialized",function(){t(this.getViewer(),i)})},manageHooks:function(){function t(t,n){e.each(n,function(e,n){t.on(e,function(t){i.trigger("hook:"+e,n(t)||{})})})}var i=this,n={widgetEmbedStart:function(){},configComplete:function(){},widgetEmbedEnd:function(){}},o={adStart:function(){},videoStart:function(){},videoPause:function(e){return{currentTime:e.currentTime}},videoLoad:function(e){return{playOnLoad:e.playOnLoad,videoData:e.videoData,params:{dfpIuValue:i.getProductSettings().settings.dfp.adUnitCode}}},videoEnd:function(){return{}},adCompanion:function(e){return{content:e.content}}},i=this;t(this,n),this.on("viewerInitialized",function(){t(this.getViewer(),o),this.getViewer().on({adPause:function(){i.trigger("hook:pause",{currentTime:0})},videoPause:function(e){i.trigger("hook:pause",{currentTime:e.currentTime})}})})},debugEvents:function(){function t(t,i){e.each(i,function(){var i=this+"";t.on(i,function(t){var n=o.get("debugEvents"),a=t&&t.viewer&&"undefined"!=typeof t.viewer.sessionIndex?t.viewer.sessionIndex:-1,r=n[a]||(n[a]=[]);r.push({name:i,data:function(){var i={};return t&&e.each(t,function(e,t){"object"!=typeof t&&"function"!=typeof t&&(i[e]=t)}),i}(),timestamp:u.getTimestamp()})})})}if(b.isEnabled()){var i=["viewerModuleStart","playerLoad","videoLoad","videoStartRequest","videoQuartile","adRequest","adLoad","adError","adMute","adUnmute","adPause","adResume","adQuartile","viewerModuleEnd"],n=["widgetEmbedStart","configComplete","widgetEmbedEnd"],o=this;this.get("debugEvents")[-1]=[{name:"jsLoad",data:{},timestamp:_nw2e.embedJsStart},{name:"pageLoad",data:{},timestamp:_nw2e.initialized}],t(this,n),this.on("viewerInitialized",function(){t(this.getViewer(),i)})}},triggerEvent:function(t,i,o){if(o){var o=o.split(",");e.each(o,e.proxy(function(e,o){o=o.replace(/\s/g,""),n.Model.prototype.trigger.call(this,o+":"+t,i)},this))}else n.Model.prototype.trigger.apply(this,arguments)},isNdnPlayerSuiteProduct:function(){return!0},hideContainer:function(){this.hide()},hide:function(){this.getContainerElement().attr("style","display:none !important")},setIsModal:function(e){this.set("isModal",e)},isModal:function(){return this.get("isModal")},getObservableData:function(){return{data:{containerElement:this.getContainerElement().get(0),embedIndex:this.get("embedIndex")},identifiers:[this.getContainerElement().attr("id"),"#"+this.get("embedIndex")]}},onceConfigIsComplete:function(e){this.get("configComplete")?e():this.once("configComplete",e)},getConfig:function(){return this.get("config")},getTemplate:function(e){var t=this.get("templates");return"undefined"!=typeof t[e]?t[e]:null},getPltValue:function(){return p.getPltValue(this.get("config"),this.getCachedSettings())},getEmbedIndex:function(){return this.get("embedIndex")},onceReadyToBegin:function(){var t=this;return e.Deferred(function(e){var i=t.getCachedSettings();o.getAnalyticsIds().done(function(){o.getAdsTargeting().onceIsDeliverable(function(){var t=i.settings.deliverySettings,n=t.secretMediaTimeoutUI;v.hasAdBlocker(n).done(function(){e.resolve()})})})}).promise()},selectVideo:function(e){var t=(this.getVideoFeeder(),this.getViewer()),i=this.getBrowserSettings().isAbleToPlayVideoAutomatically,n=this;e.source&&i&&this.trigger("analytics:videoStartRequest",{source:e.source,playlistIndex:e.playlistIndex,videoIndex:e.videoIndex,viewer:t.getViewerEventData()}),this.getViewer().halt(),this.getVideoFeeder().setNextVideo(e),this.set("cpvNumber",0),this.stepUI({playOnLoad:i}).done(function(){n.stepCP()})},begin:function(){return e.Deferred(function(){deferred.resolve()}).promise()},embed:function(){var t=this;return e.Deferred(function(e){t.initializeVideoFeeder(),t.initializeView(),t.initializeViewer(),e.resolve(t)}).promise().done(function(){t.trigger("widgetEmbedEnd"),t.onceReadyToBegin().done(function(){t.begin()})})},isInView:function(t){if("undefined"==typeof t&&(t=e(this.get("containerElement"))),N.isEmbeddedByIframe())return!1;var i=e(window).height()+e(window).scrollTop(),n=i>=t.offset().top+Math.floor(t.height()/2),o=e(document).scrollTop()>=t.offset().top+Math.floor(t.height()/2);return!n||o?!1:!0},getSettings:function(){return this.fetchSettings();
},getCachedSettings:function(){return this.get("settings")},fetchSettings:function(){var t=this;return e.Deferred(function(e){if(t.get("settings"))e.resolve(t.get("settings"));else if(t.get("settingsPending"))t.once("settingsReceived",function(t){e.resolve(t)});else{t.set("settingsPending",!0);var i=t.getConfig();l.fetch({embedIndex:t.get("embedIndex"),trackingGroup:i.trackingGroup,configId:i.widgetId,playlistId:i.playlistId,playlistItemsLimit:p.getPlaylistItemsLimit(i.type),videoId:i.videoId,providerId:i.providerId,providerStoryId:i.providerStoryId}).done(function(i){d.process(i,t.get("config"),t.get("overrides")).done(function(i){t.set("config",i.config),b.inMode("settings")&&console.log("Product Settings:",i),t.set("settings",i),t.set("configComplete",!0),t.trigger("configComplete",t.get("config")),e.resolve(t.get("settings")),t.trigger("settingsReceived",t.get("settings"))})}).fail(function(t){e.reject(t)})}}).promise()},getProductSettings:function(){return this.get("settings")},getDeliverySettings:function(){return this.getProductSettings().settings.deliverySettings},getBrowserSettings:function(){return this.getProductSettings().settings.browser},getBehaviorSettings:function(){return this.getProductSettings().settings.behavior},hasRmmEnabled:function(){return this.getCachedSettings().settings.behavior.rmm.enabled},isLaunchToStudioEnabled:function(){return!!this.get("settings").launchToStudio&&(this.get("settings").launchToStudio.enabled||!1)},getLandingPageUrl:function(i){var n=this.get("config"),o={type:"VideoPlayer/16x9",trackingGroup:n.trackingGroup,widgetId:n.widgetId,playlistId:n.playlistId,siteSection:n.siteSection,embedOriginUrl:encodeURIComponent(N.getEmbedOriginUrl())},i=t.extend(i,o),a="";if(i.videoId=""+i.videoId,this.isLaunchToStudioEnabled()){a=this.get("settings").launchToStudio.url;var r={videoId:i.videoId,playlistId:i.playlistId};a+="?"+e.param(r)}else a="http://"+N.getAppDomain()+"/",a+="?type="+i.type,a+="&"+e.param(t.omit(i,"type"));return a},getPlacedByAnalyticsString:function(){var t={jsapi:1,ppembed:2,wordpress:3,fromSlider:4,recommender:5,videowire:6,legacyjsapi:100},i=[];return e.each(this.get("placedBy"),function(){var e=this;"undefined"!=typeof t[e]&&i.push(t[e])}),"."+i.join(".")+(i.length?".":"")},getVideoDataForLaunchers:function(i){var n=[];return t.each(i,e.proxy(function(e){var t={videoId:e.videoId,videoTitle:e.videoTitle,landingPageUrl:this.getLandingPageUrl({videoId:e.videoId}),thumbnailUrl:e.thumbnailUrl,provider:{logoUrl:e.provider.logoUrl,name:e.provider.name},stillImageUrl:e.stillImageUrl};n.push(t)},this)),n},handleApiInstruction:function(t){if("destruct"==t)this.destruct();else if("videoPause"==t||"videoPlay"==t)this.onceConfigIsComplete(e.proxy(function(){if(this.getViewer()&&this.getViewer().isActive()){var e=this.getViewer().getActiveModule();"videoPause"==t&&e.pause(),"videoPlay"==t&&e.play()}},this));else if("report"==t){var i=this;!function(){var t="http://developers.inform.com/inform-player-suite/timeline/";e.ajax({url:t,type:"POST",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{sessions:e.toJSON(i.getDebugInfo())}}).done(function(e){console.log(e.reportUrl),window.open(e.reportUrl,"_blank")})}()}},assignViewer:function(e){this.set("viewer",e),this.trigger("viewerInitialized")},getView:function(){return this.get("view")},getViewer:function(){return this.get("viewer")},getViewerContainerId:function(){return"inform-viewer-container-"+this.getEmbedIndex()},getContainerElement:function(){return e(this.get("containerElement"))},getVideoFeeder:function(){return this.get("videoFeeder")},getAdOpportunityIndex:function(){return this.get("adOpportunityIndex")},getCpvNumber:function(){return this.get("cpvNumber")},getDefaultPlaybackMode:function(){return E.getDefaultPlaybackMode()},getDebugInfo:function(){var e=this.getViewer(),i=e?e.getDebugInfo():{};return t.extend({settings:this.getProductSettings(),events:this.get("debugEvents")},i)},destruct:function(){var e=this.getContainerElement().attr("id");o.unintegrateWidget(this),this.getContainerElement().remove();var t=this.getViewer();t&&t.destroy(),this.triggerEvent("destruct",{containerElementId:e},"hook,analytics")},resetUI:function(){var e=this;e.getVideoFeeder().reset(),e.set("cpvNumber",0),e.setStepParams("UI",{playOnLoad:!1}),e.stepCP()},iterateStep:function(t,i){function n(i){return e.Deferred(function(e){i>0?o.steps([t]).done(function(){n(--i).done(e.resolve)}):e.resolve()}).promise()}var o=this;return n(i)},stepA:function(i){i=i||{};var n=this.getProductSettings(),a=this.getConfig(),r=this.getViewer(),s=this.getBrowserSettings(),l=this.getDeliverySettings(),d=this.getBehaviorSettings(),c=n.settings.dfp,u=s.isDesktop,g=h.getViewerData(r.getContainerElement()),f="undefined"!=typeof i.comscore?i.comscore:!0,m=("undefined"!=typeof i.allowEasiPlayerFlash?i.allowEasiPlayerFlash:!0,i.stepLog||{}),y=r.step("A").start(),v=!1,_=this;return e.Deferred(function(e){var y=i.easiTimeout,E=h.getComscoreData({siteSection:a.siteSection,distributorName:n.distributor.name,isProviderAttributed:v}),A={videoSizeId:g.viewerSizeId,siteSection:a.siteSection,wgtValue:h.getWgtValue(a,!0),pltValue:p.getPltValue(a,n),foldPositionId:g.foldPositionId,adOpportunityIndex:_.getAdOpportunityIndex(),adBlockDetectionId:s.adBlockDetectionId,adCampaignId:c.adCampaignId,embedIndex:n.embedIndex,widgetId:a.widgetId};r.execute("easi",{adUnitType:"instream",timeout:y,channelId:o.getSetting("easiChannelId")||d.easiChannelId1||(u?75776:93697),allowFlash:i.allowEasiPlayerFlash,comscore:f&&E,customData:t.extend({spotxCallIndex:0},A)},m).done(function(){return m.adsPlayed?e.resolve():void(u&&2==l.rmm_easi_attempts?r.execute("easi",{adUnitType:"instream",timeout:y,channelId:o.getSetting("easiChannelId2")||d.easiChannelId2||109285,allowFlash:i.allowEasiPlayerFlash,comscore:f&&E,customData:t.extend({spotxCallIndex:1},A)},m).done(function(t){t.adsPlayed?e.resolve():_.steps(["D"]).done(e.resolve)}):_.steps(["D"]).done(e.resolve))})}).promise().done(function(){_.set("adOpportunityIndex",_.getAdOpportunityIndex()+1),y.end()})},stepAA:function(){var e=this.getViewer().step("AA").start(),t=this.getDeliverySettings();return this.iterateStep("A",t.rmm_cp).done(function(){e.end()})},stepDD:function(){var e=this.getViewer().step("DD").start();return this.iterateStep("D",this.getDeliverySettings().da_spree_d).done(function(){e.end()})},stepUI:function(t){var i=this.getCachedSettings(),n=i.config,o=this.get("viewer"),a=this.getVideoFeeder(),r=o.step("UI").start(),s=this;return t=t||this.getStepParams("UI"),e.Deferred(function(r){a.getNextVideo().done(function(a){var l=!1,d=!0,c=!1,u=s.getDefaultPlaybackMode(),p=s.getCpvNumber(),g=a.videoData,f="undefined"!=typeof t.playOnLoad?t.playOnLoad:!0,m=!0,y=o.getViewerModule("inform"),v=y?y.getVideoLoadIndex()+1:0,_=h.getPlayerBehaviorId(i,l),E=A.UI,b=s.getPltValue();o.execute("inform",{dfp:function(){return n.adsEnabled?{adTagUrl:h.getImaAdTagUrl({productSettings:i,videoData:g,viewerData:h.getViewerData(o.getContainerElement()),isMuted:c,isProviderAttributed:d,playbackMode:u,analyticsTimelineEventIndex:null,videoLoadIndex:v,cpvNumber:p,playerInstanceTypeId:s.getDeliverySettings().videojs?7:0,pbValue:_,wgtValue:E,pltValue:b,now:e.now()}),ppid:i.settings.dfp.publisherProvidedId,adBlockDetectionId:i.settings.browser.adBlockDetectionId}:void 0}(),comscore:h.getComscoreData({siteSection:n.siteSection,distributorName:i.distributor.name,isProviderAttributed:d,videoData:g}),share:h.getShareData({shareSettings:i.settings.share,videoData:g}),videoData:g,isMuted:c,isBumperVideo:l,playOnLoad:f,playOnMouseover:t.playOnMouseover||!1,playOnInView:t.playOnInView||!1,playbackMode:u,pauseCarousel:t.pauseCarousel,endslate:t.endslate,showControls:m,pbValue:_,wgtValue:E,videoIndex:a.videoIndex,videoLoadIndex:v,playlistId:a.playlistId,cpvNumber:s.getCpvNumber()}).done(r.resolve)})}).promise().done(function(){s.set("cpvNumber",s.getCpvNumber()+1),r.end()})},stepCP:function(){function t(){return e.Deferred(function(e){a.getCpvNumber()<=n.continuousPlay?a.stepUI().done(function(){t().done(e.resolve)}):e.resolve()}).promise()}var i=this.getCachedSettings(),n=i.config,o=this.getViewer().step("CP").start(),a=this;return t().done(function(){o.end(),0===n.continuousPlay&&a.getVideoFeeder().reset(),a.set("cpvNumber",0),a.stepUI({playOnLoad:!1,endslate:0===n.continuousPlay?"":"playlistPause"}).done(function(){a.stepCP()})})},stepR:function(){var t=this.getCachedSettings(),i=t.config,n=this.getBrowserSettings(),o=(this.getDeliverySettings(),this.getBehaviorSettings()),a=this.getViewer().step("R").start(),r=this;return e.Deferred(function(e){if(n.isDesktop){if(i.autoPlay)return e.resolve();o.rmm.earlyContent?r.steps(["B","A","A"]).done(e.resolve):r.steps(["A","A","B"]).done(e.resolve)}else r.steps(["A","A"]).done(e.resolve)}).promise().done(function(){r.getVideoFeeder().reset(),a.end()})},stepD:function(t){var i=this.getProductSettings(),n=this.getConfig(),o=this.getViewer(),a=this.getBrowserSettings(),r=this.getDeliverySettings(),s=t.displayAdDuration,l=this.getBehaviorSettings(),d=o.step("D").start();return e.Deferred(function(e){-1!=s?o.execute("displayAd",{duration:s,adCampaignId:i.settings.dfp.adCampaignId,pltValue:p.getPltValue(n,i),embedOriginUrl:a.embedOriginUrl,isBlacksheep:r.da_blacksheep,isPremium:r.da_premium,site:t.displayAdOverrideSite,zonesize:t.displayAdOverrideZonesize,isHtml5:"undefined"!=typeof l.displayAdHtml5?l.displayAdHtml5:!a.isDesktop}).done(e.resolve):e.resolve()}).promise().done(function(){d.end()})},stepB:function(t){var t="undefined"==typeof t?!0:t,i=this.getCachedSettings(),n=i.config,o=this.get("viewer"),a=o.step("B").start(),r=this.getVideoFeeder(),s=!0,l=this,d=h.getPlayerBehaviorId(i,s),c=h.getWgtValue(n,s),u=l.getPltValue();return e.Deferred(function(e){return t?void r.peekNextVideo().done(function(t){var a=t.videoData,r=o.getViewerModule("inform"),p=r?r.getVideoLoadIndex()+1:0,g=l.getDeliverySettings().videojs?"vjs":"amp";o.execute(g,{comscore:h.getComscoreData({siteSection:n.siteSection,distributorName:i.distributor.name,isRmm:s,videoData:a}),videoData:a,isMuted:!0,isBumperVideo:!0,playOnLoad:!0,playbackMode:"html",showControls:!1,pbValue:d,wgtValue:c,pltValue:u,videoIndex:t.videoIndex,videoLoadIndex:p,playlistId:t.playlistId,cpvNumber:l.getCpvNumber()}).done(e.resolve)}):e.resolve()}).promise().done(function(){a.end()})}},{addHook:function(e,t){return o.addHook(e,t)},getEmbedOriginUrl:function(){return o.getEmbedOriginUrl(arguments)},isBuilt:function(){return o.isBuilt(arguments)},isOnSsl:function(){return o.isOnSsl()},getAppUrl:function(){return o.getAppUrl(arguments)},getAppDomain:function(){return o.getAppDomain(arguments)},isEmbeddedByIframe:function(){return o.isEmbeddedByIframe(arguments)},isOnAppPage:function(){return o.isOnAppPage(arguments)},getNextEmbedIndex:function(){return C++},getDomClassIdentifier:function(e){return"ndn_widget_"+e.charAt(0).toUpperCase()+e.slice(1).replace("/","-")},embed:function(i,n,r,s){r=r||[],s=s||{};var l="undefined"!=typeof i.nodeType&&1==i.nodeType,d=l?null:i;return i=e(l?i:"#"+d),e.Deferred(function(e){if(!i.length){var u;if(u=l?"Invalid dom element provided for embed":'Unable to find dom element with id "'+d+'" for embed',_nw2e.errorReporting)throw u;return e.reject(u)}var h=m.getFullHtml(i.get(0));p.processConfigFromElement(i,n,r).done(function(n){if(i.hasClass("ndn_embedding")||i.hasClass("ndn_embedded"))return void e.reject("duplicateEmbedProcess");i.addClass("ndn_embedding").addClass("ndn_embed").addClass("ndn_embedContainer");var l="undefined"!=typeof s.embedIndex?s.embedIndex:N.getNextEmbedIndex(),d="ndn-widget-embed-"+(l+1);i.addClass(d).data("ndn-widget-uid",d),n.placementId&&i.attr("id",n.placementId);var u=function(){return"undefined"==typeof i.attr("id")&&i.attr("id",d),i.attr("id")}();return i.hasClass("ndn_embed_wordpress")&&r.push("wordpress"),f.on("hook:"+u+"/widgetEmbedStart",function(t){e.resolve(t.system.widget)}),n.distributorId&&!n.legacyEmbedUrl?(p.hasUpdatedEmbedCode(i)&&p.retrofitEmbedCode(n,i),void function(){var e=c.getUrlVar("ndn_ppEnv")?c.getUrlVar("ndn_ppEnv")+"-dme.newsinc.com":"dmeserve.newsinc.com",t={paths:{}};t.paths["perfectPixel"+n.distributorId]=window.location.protocol+"//"+e+"/dpid/"+n.distributorId+"/PPEmbed";var i=_nw2e.requireConfig(t);i(["perfectPixel"+n.distributorId],function(){})}()):(n.distributorId&&n.legacyEmbedUrl&&r.push("ppembed"),o.isInLaunchedBrowserWindow()&&r.push("fromSlider"),p.processAspectRatio(i,n,r),void o.getProductModel(n.type,s.productModel).done(function(c){s.embedIndex=l;var u=new c(n).set({initialContainerElementHtml:h,containerElement:i.get(0),embedIndex:l,widgetUid:d,placedBy:r,overrides:s});t.contains(r,"mock")||o.integrateWidget(u),u.trigger("widgetEmbedStart",{initialContainerElementHtml:h,initialConfig:u.get("initialConfig")}),a.injectCss(u.getConfig().type),u.getSettings().done(function(){u.embed().done(e.resolve)}).done(function(){i.addClass("ndn_embedded").removeClass("ndn_embedding")}).fail(function(t){u.hideContainer(),e.reject(t)})}))})}).promise()},initializeBehaviorSettings:function(e){}});return _nw2e.Ndn_Widget=N,N}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/AbstractModel",["jquery","models/Ndn/App","models/Ndn/Widget","models/Ndn/Widget/Params","models/Ndn/Viewer/ViewerModule/Amp"],function(e,t,i,n,o){return i.extend({beginUi:function(){var e=this.getConfig(),t=this.getVideoFeeder(),i=this;t.peekNextVideo().done(function(t){var n=e.videoId&&t.videoData.videoId!=e.videoId;return n&&e.hideWhenUnavailable?i.hide():void i.stepUI({playOnLoad:e.autoPlay,playOnMouseover:e.playOnMouseover,playOnInView:e.playOnInView,endslate:n?"videoNotAvailable":""}).done(function(){i.stepCP()})})}})}),Ndn_Require.define("text!templates/ndn/modal-embed/default.html",[],function(){return'<div class="ndn_modalEmbed">\n	<div id="ndn-modal-embed-{{modalEmbedIndex}}"></div>\n	<div class="ndn_closeModal"></div>\n</div>'}),Ndn_Require.define("text!templates/ndn/modal-embed/expandable.html",[],function(){return'<div class="ndn_modalEmbed ndn_modalEmbed_expandable">\n	<div class="ndn_videoTitle"></div>\n	<div class="ndn_modalEmbed_options">\n		<div class="ndn_modalEmbed_expand">(Expand)</div>\n		<div class="ndn_modalEmbed_close">(Close)</div>\n	</div>\n	<div id="ndn-modal-embed-{{modalEmbedIndex}}"></div>\n</div>'}),Ndn_Require.define("models/Ndn/ModalEmbed",["underscore","jquery","backbone","mustache","models/Ndn/App","models/Ndn/Widget","text!templates/ndn/modal-embed/default.html","text!templates/ndn/modal-embed/expandable.html"],function(e,t,i,n,o,a,r,s){var l=0;return i.Model.extend({defaults:{templates:{"default":r,expandable:s},sourceProduct:null,product:null,modalEmbedIndex:null,container:null},getNextModalEmbedIndex:function(){return l++},initialize:function(e,i){o.getSetting("launchModalEmbedsV2")&&(i=t.extend({},i,{type:"VideoPlayer/Inline590"})),this.set({sourceProduct:e,productConfig:i,modalEmbedIndex:this.getNextModalEmbedIndex()}),this.initializeDom()},getInnerContainer:function(){return t("#ndn-modal-embed-"+this.get("modalEmbedIndex"))},initializeDom:function(){var i=778,n=825,o=t('<div class="ndn_modalEmbedScreen"></div>').appendTo("body"),r=t('<div class="ndn_modalEmbed"><div id="ndn-modal-embed-'+this.get("modalEmbedIndex")+'" data-config-type="VideoPlayer/16x9" data-config-playlist-id="'+this.get("productConfig").playlistId+'"  data-config-tracking-group="'+this.get("productConfig").trackingGroup+'" data-config-video-id="'+this.get("productConfig").videoId+'" data-config-widget-id="'+this.get("productConfig").widgetId+'" data-config-site-section="'+this.get("productConfig").siteSection+'"></div><div class="ndn_closeModal"></div></div>');o.css("opacity","0.7");var s=Math.max(20,Math.floor((t(window).height()-n)/2));r.css({top:t(window).scrollTop()+s+"px",width:i+"px"});var l=t.proxy(function(){r.css("left",Math.floor(t(window).width()/2)-Math.floor(i/2)+"px")},this);l(),t("body").append(r),t(window).resize(e.debounce(l,500)),a.embed(this.getInnerContainer().get(0),this.get("productConfig"),["fromSlider"],{behaviorSettings:{isModal:!0}}).done(t.proxy(function(e){e.setIsModal(!0),this.set("product",e)},this));var d=t.proxy(function(){this.get("product")&&this.get("product").destruct(),o.hide(),r.hide()},this);o.on("click",d),r.on("click",".ndn_closeModal",d),this.set("container",r)}})});var _ndnq=_ndnq||[];Ndn_Require.define("views/Ndn/AbstractView",["jquery","underscore","backbone","mustache","models/Ndn/Widget/Config","models/Ndn/ModalEmbed","models/Ndn/Utils/UserAgent","models/Ndn/Carousel","jquery_autoellipsis","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s){return i.View.extend({initialize:function(){i.View.prototype.initialize.apply(this,arguments),this.initializeDom();var t=this.model,n=this;t.on("viewerInitialized",function(){var e=t.getViewer();e.on({videoLoad:function(){n.updateSelectedVideoUpNext(),n.updateCarouselSlide()},videoStart:function(){n.updateSelectedVideoNowPlaying()},videoStartRequest:function(e){"selectVideo"==e.action&&t.selectVideo({playlistIndex:e.playlistIndex,videoIndex:e.videoIndex})}})}),this.$el.on("mouseenter",".ndn_sliderNavButtonContents",function(){e(this).addClass("ndn_hover"),(r.isMobile()||r.isOnIos())&&setTimeout(function(){e(this).removeClass("ndn_hover")}.bind(this),700)}).on("mouseleave",".ndn_sliderNavButtonContents",function(){e(this).removeClass("ndn_hover")})},initializeDom:function(){this.$el.html(n.to_html(this.model.getTemplate("default"),{viewerContainerId:this.model.getViewerContainerId()}))},getViewerContainer:function(){return e("#"+this.model.getViewerContainerId())},loadImagesForSlide:function(e,t){s.loadSlidePlaceholderImages(this.$el,e,t||this.slides)},displayCompanionAd:function(t,i){if(-1!==i.indexOf("<html")){var n,o;t.html(n=e(document.createElement("iframe")).css({width:"300px",height:"250px",overflow:"hidden"}).attr("scrolling","no"));try{o=n.get(0).contentWindow.document,o.open(),o.write(i),o.close()}catch(a){this.trigger("analytics:error",{type:"AdCompanionError",error:a})}}else t.html(i)},openNdnWindow:function(e){var t=this.model.getCachedSettings().settings.launcher;if("studio"==t.behavior)window.open(e,"_blank");else{if("modal"==t.behavior&&!r.isMobile())return new a(this.model,o.getConfigFromLandingPageUrl(e)),!1;window.open(e,"ndnPlayer","scrollbars,resizable,width=768,height=825",!1)}},updateSelectableVideos:function(){},updateSelectedVideoNowPlaying:function(){},updateCarouselSlide:function(){},updateSelectedVideoUpNext:function(){}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/AbstractView",["jquery","underscore","mustache","views/Ndn/AbstractView"],function(e,t,i,n){return n.extend({events:{"click .ndn_selectableVideo":"onVideoSelect"},onVideoSelect:function(t){var i=e(t.currentTarget);return this.model.selectVideo({source:"selectableVideo",playlistIndex:i.data("playlistIndex"),videoIndex:i.data("videoIndex")}),!1},getSelectableVideoElements:function(){return this.$el.find(".ndn_selectableVideo")},getSelectedVideoElement:function(e){var t=this.model.getVideoFeeder(),i=(this.model.getViewer(),t.getCurrentVideo()),n=this.getSelectableVideoElements();return n.filter('[data-playlist-index="'+i.playlistIndex+'"][data-video-index="'+i.videoIndex+'"]')},updateSelectedVideoUpNext:function(){var e=this.getSelectableVideoElements(),t=this.getSelectedVideoElement();e.removeClass("ndn_activeVideo ndn_activeVideoNotPlaying"),t.addClass("ndn_activeVideoNotPlaying")},updateSelectedVideoNowPlaying:function(){var e=this.getSelectableVideoElements(),t=this.getSelectedVideoElement();e.removeClass("ndn_activeVideo ndn_activeVideoNotPlaying"),t.addClass("ndn_activeVideo")},updateSelectableVideos:function(){},updateCarouselSlide:function(){}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/SingleView",["jquery","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t){return t.extend({})}),Ndn_Require.define("lib/jquery_plugins/jquery.drags",["jquery"],function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move",placementHook:""},t);var i=e(this),n=t.handle?i.find(t.handle):i;n.css("cursor",t.cursor),n.on("mousedown",function(n){function o(e){var n=e.pageY,o=e.pageX,a={top:r-(l-n),left:s-(d-o)};t.placementHook&&(a=t.placementHook(a)),a&&i.offset(a)}function a(e){t.onMouseUpHook&&t.onMouseUpHook(),c.off("mousemove",o),c.off("mouseup",a)}var r=i.offset().top,s=i.offset().left,l=n.pageY,d=n.pageX,c=(i.css("z-index"),e(window));c.on("mousemove",o),c.on("mouseup",a)})}}),Ndn_Require.define("models/Ndn/FloatContainer",["jquery","underscore","backbone","mustache","models/Ndn/App","models/Ndn/Widget","models/Ndn/Utils/DomElement","models/Ndn/Debugger","jquery_autoellipsis","lib/jquery_plugins/jquery.drags"],function(e,t,i,n,o,a,r,s){var l={width:410,height:255},d=null,c=(s.inMode("float"),i.Model.extend({defaults:{product:null,container:null,isFloating:!1,enabled:!0},initialize:function(e,t){this.set({product:e}),this.initializeDom(t.initialPosition)},initializeDom:function(t){if(this.set("container",this.get("product").getContainerElement().find("> .ndn_floatContainer")),r.onceHasWidthAndHeight(this.getContainer()).done(e.proxy(function(){this.snap(t),this.initializeEventListeners()},this)),s.inMode("floatFillpage")){for(var i=e("<p></p>"),n=0;300>n;n++)i.append("Test<br/>");i.appendTo("body")}},initializeEventListeners:function(){var t=this.getContainer(),i=this.get("product"),n=i.getViewer();t.drags({handle:".ndn_floatContainer_header > .ndn_videoTitle",placementHook:e.proxy(function(i){if(this.isFloating()){var n=e(window).innerWidth(),o=e(window).innerHeight(),a=e(window).scrollTop(),r=e(window).scrollLeft(),s={top:i.top-a,left:i.left-r},l=t.outerWidth(),d=t.outerHeight(),c=25,u=s.top<=0+c,p=o<=s.top+d+c,h=s.left<=0+c,g=n<=s.left+l+c;return u?this.snap("top"):p?this.snap("bottom"):t.css({top:s.top,bottom:"auto"}),h?this.snap("left"):g?this.snap("right"):t.css({left:s.left,right:"auto"}),this.deselectText(),!1}},this)}),n.on("videoLoad",function(e){t.find("> .ndn_floatContainer_header .ndn_videoTitle").html(e.videoData.videoTitle)}),t.on("click",".ndn_floatContainer_close",e.proxy(function(){this.isFloating()&&(n.getActiveModule().pause(),this.unfloat())},this)),n.once("videoStart",function(){setTimeout(function(){t.find(".ndn_floatContainer_close").fadeIn("slow")},3e3)});var o=e.proxy(function(){this.isEnabled()&&(this.isFloating()&&this.isPlaceholderInViewVertically()?this.unfloat():this.isFloating()||this.isPlaceholderInViewVertically()||!i.getViewer().getActiveModule().isPlaying()||this["float"]())},this);e(window).on("resize scroll",o),n.on("videoStart videoResume adStart adResume",o)},isEnabled:function(){return this.get("enabled")},disable:function(e){var t=this.getProduct(),i=t.getViewer().getActiveModule().isPlaying();"undefined"==typeof e&&(e=i),this.set("enabled",!1),this.unfloat(),e&&this.get("product").resetUI()},isPlaceholderInViewVertically:function(){var t=this.getProduct(),i=t.getContainerElement(),n=i.offset().top,o=n+i.outerHeight(),a=o-n,r=e(window).scrollTop(),s=r+e(window).height(),l=t.getDeliverySettings().floatPercent,d=Math.floor(a*(1-l/100)),c=Math.max(n,r),u=Math.min(o,s),p=u-c;return p>=d},getContainer:function(){return this.get("container")},getProduct:function(){return this.get("product")},isFloating:function(){return this.get("isFloating")},"float":function(){!this.isFloating()&&this.isEnabled()&&(this.getContainer().removeClass("ndn_floatContainer_disabled").addClass("ndn_floatContainer_enabled"),c.registerFloat(this),this.set("isFloating",!0))},unfloat:function(){this.isFloating()&&(this.getContainer().addClass("ndn_floatContainer_disabled").removeClass("ndn_floatContainer_enabled"),c.unregisterFloat(this),this.set("isFloating",!1))},deselectText:function(){var e=window.getSelection?window.getSelection():document.selection;e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},snap:function(t){var i=this.getContainer(),n=e(window).width(),o=e(window).height(),a={top:{top:0,bottom:"auto"},right:{left:"auto",right:0},bottom:{top:"auto",bottom:0},middle:{top:o/2-l.height/2+"px",bottom:"auto"},center:{left:n/2-l.width/2+"px",right:"auto"},left:{left:0,right:"auto"}},r=t.split(" ");e.each(r,function(){var e=this;if("undefined"!=typeof a[e]){var t=a[e];i.css(t)}})}},{registerFloat:function(e){d&&d.disable(),d=e},unregisterFloat:function(e){d==e&&(d=null)}}));return c}),Ndn_Require.define("text!templates/ndn/widget/video-player/single/default.html",[],function(){return'<div class="ndn_floatContainer ndn_floatContainer_disabled">\n    <div class="ndn_floatContainer_header">\n    	<div class="ndn_floatContainer_close ndn_icon ndn_icon_cancel" style="display: none;"></div>\n        <div class="ndn_videoTitle"></div>\n    </div>\n    <div class="ndn_playerContainer ndn_floatContainer_contents" id="{{viewerContainerId}}"></div>\n</div>'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/SingleModel",["underscore","jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/SingleView","models/Ndn/FloatContainer","models/Ndn/Widget/PlayerOptions","text!templates/ndn/widget/video-player/single/default.html"],function(e,t,i,n,o,a,r,s){return n.extend({defaults:{widgetView:o,templates:{"default":s},floatContainer:null,playerToggle:null,pauseVideosCarousel:null},initializeView:function(){n.prototype.initializeView.apply(this,arguments);var e=this.getCachedSettings().settings.behavior;e.toggle.enabled&&this.set("playerToggle",new r(this))},initializeViewer:function(){n.prototype.initializeViewer.apply(this,arguments);var e=this.getCachedSettings().settings.behavior,t=e["float"];t.enabled&&this.set("floatContainer",new a(this,{initialPosition:t.initialPosition}))},hide:function(){n.prototype.hide.apply(this,arguments),this.get("playerToggle")&&this.get("playerToggle").hide()},destruct:function(){n.prototype.destruct.apply(this,arguments),this.get("playerToggle")&&this.get("playerToggle").hide()},stepUI:function(t){return n.prototype.stepUI.call(this,e.extend({},t||{},{pauseCarousel:this.get("pauseVideosCarousel")}))},handleApiInstruction:function(e){if(n.prototype.handleApiInstruction.apply(this,arguments),"unfloat"==e){var t=this.getViewer(),i=this.get("floatContainer");t&&t.pause(),i&&i.disable(!1)}},onceReadyToBegin:function(){var e=this;return t.Deferred(function(i){n.prototype.onceReadyToBegin.call(e).done(function(){e.getVideoFeeder().peekNextVideos(40).done(function(n){var o=[];t.each(n,function(){var e=this;o.push({playlistIndex:e.playlistIndex,videoIndex:e.videoIndex,videoId:e.videoData.videoId,playlistId:e.playlistId,videoTitle:e.videoData.videoTitle,thumbnailUrl:e.videoData.thumbnailUrl})}),e.set("pauseVideosCarousel",o),i.resolve()})})}).promise()},begin:function(){this.beginUi()}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/StudioView",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t,i){return i.extend({syncSidePanel:function(){var e=this.$el.find(".ndn_sidePanel").hasClass("ndn_hasCompanionAd");this.$el.find(".ndn_selectableVideos").css("height",this.getSelectableVideosContainerHeight(e)),this.$el.find(".ndn_sidePanel").toggleClass("ndn_hasCompanionAd",e)},getSelectableVideosContainerHeight:function(e){var t=this.$el.find(".ndn_playerEngagement").height();return t-=34,e&&(t-=260),t},showCompanionAd:function(e){this.model.set("isShowingCompanionAd",!0),this.syncSidePanel();var t=this.$el.find(".ndn_adCompanion");this.displayCompanionAd(t,e),t.addClass("ndn_active")},hideCompanionAd:function(){this.model.set("isShowingCompanionAd",!1),this.$el.find(".ndn_adCompanion").removeClass("ndn_active").html(""),this.syncSidePanel()}})}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/StudioModel",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/SingleModel","views/Ndn/Widget/VideoPlayer/StudioView","text!templates/ndn/widget/video-player/single/default.html"],function(e,t,i,n,o){return i.extend({defaults:{widgetView:n,templates:{"default":o},isShowingCompanionAd:!1}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/InlineView",["jquery","underscore","mustache","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/Responsive","jquery_autoellipsis","jquery_imagesloaded","jquery_bxslider"],function(e,t,i,n,o,a){return n.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_sliderNext":"visitNextCarouselSlide","click .ndn_sliderPrev":"visitPreviousCarouselSlide"},initializeDom:function(){n.prototype.initializeDom.apply(this,arguments),o.maintain(this.getViewerContainer(),"16:9"),o.maintain(this.getThumbnailContainer(),"16:3"),a.addBreakpoints(this.getThumbnailContainer(),{"min-width":[480,800,1200],"max-width":[481]}),this.model.setCarouselsData([[this.$el.find(".inform-selectable-videos-normal > .ndn_selectableVideos"),4,"carousel"],[this.$el.find(".inform-selectable-videos-small > .ndn_selectableVideos"),2,"smallCarousel"]])},getThumbnailContainer:function(){return this.$el.find(".ndn_selectableVideosContainer")},updateCarouselSlide:function(){var t=e(this.getSelectedVideoElement().get(0)).data("selectableVideoIndex"),i=this.model.getCarousel();i&&i.goToSlide(Math.floor(t/(this.isUsingSmallCarousel()?2:4)))},isUsingSmallCarousel:function(){return this.$el.find(".ndn_selectableVideosContainer").width()<=480},updateCarouselSlideContents:function(t){var i=this.model.getCarousel();if(i){i.processCurrentSlide(function(){e(this).find(".inform-video-title").each(function(){var t=e(this),i=t.clone().html(t.data("title"));t.replaceWith(i),i.ellipsis(),t=i;var n=t.parent().find("> .ndn_thumbnailContainer"),o=t.outerHeight(),a=t.parent().height();n.height(a-o)})})}},visitPreviousCarouselSlide:function(){this.model.getCarousel().visitPreviousSlide()},visitNextCarouselSlide:function(){this.model.getCarousel().visitNextSlide()},updateSelectableVideos:function(){var e=this.model.getVideoFeeder(),t=(this.$el.find(".ndn_selectableVideos"),this.model.getCarouselsData()),n=this;e.peekNextVideos(40).done(function(e){function o(t,o){for(var a=[],r=0;r<e.length;r+=o){for(var s=[],l=0;o>l;l++)s.push(e[r+l]);a.push(s)}t.html(i.to_html(n.model.getTemplate("selectableVideos"),{videoPages:a,selectableVideoIndex:function(){var e=0;return function(){return e++}}()})),t.find(".ndn_selectableVideo").last().data("isLast",!0)}for(var a=0;a<t.length;a++){var r=t[a],s=r[0],l=r[1];o(s,l)}n.model.initializeCarousels()})}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline/default.html",[],function(){return'<div id="{{viewerContainerId}}" class="inform-viewer" style="width:100%;position:relative;overflow:hidden;margin-bottom:10px;"></div>\n<div class="ndn_selectableVideosContainer">\n	<div class="ndn_sliderPrev ndn_sliderNavButton">\n        <div class="ndn_sliderNavButtonContents">\n            <i class="ndn_icon_left-open-big" aria-hidden="true"></i>\n        </div>\n    </div>\n    <div class="ndn_sliderWrapper inform-selectable-videos-normal">\n        <ul class="ndn_selectableVideos"></ul>\n    </div>\n    <div class="ndn_sliderWrapper inform-selectable-videos-small">\n        <ul class="ndn_selectableVideos"></ul>\n    </div>\n	<div class="ndn_sliderNext ndn_sliderNavButton">\n        <div class="ndn_sliderNavButtonContents">\n            <i class="ndn_icon_right-open-big" aria-hidden="true"></i>\n        </div>\n    </div>\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline/selectableVideos.html",[],function(){return'{{#videoPages}}\n    <li class="ndn_videoPageContainer">\n        <ul class="ndn_videoPage" style="width:100%;height:100%;">\n            {{#.}}\n                <li class="ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-playlist-id="{{playlistId}}" data-video-id="{{videoData.videoId}}" data-selectable-video-index="{{selectableVideoIndex}}" title="{{videoData.videoTitle}}">\n                    <div class="ndn_selectableVideoContainer">\n                    	<div class="ndn_thumbContainer ndn_thumbnailContainer">\n                        	<div class="inform-thumbnail-container" data-src="{{videoData.thumbnailUrl}}" style="background:url(\'{{videoData.thumbnailUrl}}\');background-size:cover;"></div>\n                        	<div class="ndn_nowPlaying">Now Playing</div>\n                        	<div class="ndn_upcomingVideo">Up Next</div>\n                            <div class="ndn_thumbnailBackground"></div>\n                        	<div class="inform-video-duration">\n                        		{{videoData.displayDuration}}\n                        	</div>\n                            <div class="inform-play-icon"><div class="inform-play-icon-inner"></div></div>\n                    	</div>\n                		<div class="inform-video-title" data-title="{{videoData.videoTitle}}"></div>\n                    </div>\n                </li>\n            {{/.}}\n        </ul>\n    </li>\n{{/videoPages}}\n';
}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/InlineModel",["underscore","jquery","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/InlineView","models/Ndn/Carousel","text!templates/ndn/widget/video-player/inline/default.html","text!templates/ndn/widget/video-player/inline/selectableVideos.html","lib/jquery_plugins/jquery.backstretch.min"],function(e,t,i,n,o,a,r){return i.extend({defaults:{widgetView:n,templates:{"default":a,selectableVideos:r},carouselsData:null,carousel:null,smallCarousel:null},setCarouselsData:function(e){this.set("carouselsData",e)},getCarouselsData:function(){return this.get("carouselsData")},getCarousel:function(){return this.get(this.getActiveCarouselName())},getActiveCarouselName:function(){return this.getView().isUsingSmallCarousel()?"smallCarousel":"carousel"},initializeCarousels:function(){for(var i=this,n=function(){i.getView().updateCarouselSlideContents()},a=e.debounce(function(){var e=i.getCarousel();e.once("carouselLoad",n),e.reload()},500),r=this.getCarouselsData(),s=0;s<r.length;s++){var l=r[s],d=l[0],c=(l[1],l[2]),u=new o({isSimple:!0,containerElement:d});u.once("carouselLoad",a),u.on("slideLoad",n),this.set(c,u.load())}t(window).resize(a)},stepA:function(){return i.prototype.stepA.call(this,{easiTimeout:this.getDeliverySettings()[this.getBrowserSettings().isDesktop?"easi_t_inline_d":"easi_t_inline_nd"]})},stepD:function(){return i.prototype.stepD.call(this,{displayAdDuration:this.getDeliverySettings()[this.getBrowserSettings().isDesktop?"da_inline_d":"da_inline_nd"]})},begin:function(){var e=this.getConfig(),i=this.getVideoFeeder(),n=this;return t.Deferred(function(t){i.peekNextVideo().done(function(i){var o=e.videoId&&i.videoData.videoId!=e.videoId;return o&&e.hideWhenUnavailable?n.hide():void n.stepR().done(function(){n.stepUI({playOnLoad:e.autoPlay,playOnMouseover:e.playOnMouseover,playOnInView:e.playOnInView,endslate:o?"videoNotAvailable":""}).done(function(){n.stepCP().done(t.resolve)})})})}).promise()}},{initializeBehaviorSettings:function(e){}})});var googletag=googletag||{};googletag.cmd=googletag.cmd||[],Ndn_Require.define("models/Ndn/Ads/AdStudies",["jquery","models/Ndn/Utils/UrlParser"],function(e,t){var i=function(){return"1"==t.getParam("ndn_debugAdStudies","query")?function(){console.log(arguments)}:function(){}}(),n="ndn-div-gpt-ad-123456789-",o=0,a=!1,r=function(){return n+o++},s={},l={};return{initialize:function(){a||(!function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}(),a=!0)},displayAdStudy:function(t,n,o){i("displayAdStudy(",arguments,");");try{o||(o=[300,250]),this.initialize();var a=e(t);return a.hide(),i("Just hid the slot's container element, slotContainer ==",a),e.Deferred(e.proxy(function(e){var t="undefined"!=typeof s[a.attr("id")],d=t?a.attr("id"):r();t||a.attr("id",d),l[d]=l[d]||e,a.css({width:o[0],height:o[1]}),googletag.cmd.push(function(){t?(i("Refreshing slot... slotId ==",d,"; _slots[slotId] ==",s[d]),googletag.pubads().refresh([s[d]]),i("googletag.pubads().refresh() was just called...")):(i("Slot does not exist yet, so it is being created..."),a.html(""),s[d]=googletag.defineSlot(n,o,d).addService(googletag.pubads()).setCollapseEmptyDiv(!0),googletag.pubads().addEventListener("slotRenderEnded",function(e){i("[slotRenderEnded], event ==",e);var t=l[d];e.isEmpty===!1?(a.show(),t&&t.resolve()):(a.hide(),t&&t.reject()),delete l[d]}),googletag.pubads().enableAsyncRendering(),googletag.pubads().enableSingleRequest(),googletag.enableServices(),i('document.getElementById("'+d+'") ==',document.getElementById(d)),googletag.display(d),i("googletag.display("+d+"); was just called..."))})},this)).promise()}catch(d){i("PROBLEM DETECTED, e ==",d)}}}}),Ndn_Require.define("lib/jquery_plugins/jquery.simplePagination",["jquery"],function(e){var t={init:function(i){var n=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:1,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",selectOnClick:!0,onPageClick:function(e,t){},onInit:function(){}},i||{}),o=this;return o.data("paginationOptions",i),n.pages=n.pages?n.pages:Math.ceil(n.items/n.itemsOnPage)?Math.ceil(n.items/n.itemsOnPage):1,n.currentPage=n.currentPage-1,n.halfDisplayed=n.displayedPages/2,this.each(function(){o.addClass(n.cssStyle+" simple-pagination").data("pagination",n),t._draw.call(o)}),n.onInit(),this},selectPage:function(e){return t._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.currentPage>0&&t._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},redraw:function(){return t._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),t._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),t._draw.call(this),this},_draw:function(){var i,n=this.data("pagination"),o=t._getInterval(n);t.destroy.call(this);var a="UL"===this.prop("tagName")?this:e("<ul></ul>").appendTo(this);if(n.prevText&&t._appendItem.call(this,n.currentPage-1,{text:n.prevText,classes:"prev"}),o.start>0&&n.edges>0){var r=Math.min(n.edges,o.start);for(i=0;r>i;i++)t._appendItem.call(this,i);n.edges<o.start&&o.start-n.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):o.start-n.edges==1&&t._appendItem.call(this,n.edges)}for(i=o.start;i<o.end;i++)t._appendItem.call(this,i);if(o.end<n.pages&&n.edges>0){n.pages-n.edges>o.end&&n.pages-n.edges-o.end!=1?a.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):n.pages-n.edges-o.end==1&&t._appendItem.call(this,o.end++);var s=Math.max(n.pages-n.edges,o.end);for(i=s;i<n.pages;i++)t._appendItem.call(this,i)}n.nextText&&t._appendItem.call(this,n.currentPage+1,{text:n.nextText,classes:"next"})},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(i,n){var o,a,r=this,s=r.data("pagination"),l=e("<li></li>"),d=r.find("ul");i=0>i?0:i<s.pages?i:s.pages-1,o=e.extend({text:i+1,classes:""},n||{}),i==s.currentPage||s.disabled?(s.disabled?l.addClass("disabled"):l.addClass("active"),a=e('<span class="current">'+o.text+"</span>")):(a=e('<a href="'+s.hrefTextPrefix+(i+1)+s.hrefTextSuffix+'" class="page-link">'+o.text+"</a>"),a.click(function(e){return t._selectPage.call(r,i,e)})),o.classes&&a.addClass(o.classes),l.append(a),d.length?d.append(l):r.append(l)},_selectPage:function(e,i){var n=this.data("pagination");return n.currentPage=e,n.selectOnClick&&t._draw.call(this),n.onPageClick(e+1,i)}};e.fn.pagination=function(i){return t[i]&&"_"!=i.charAt(0)?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.pagination"):t.init.apply(this,arguments)}}),Ndn_Require.define("lib/jquery_plugins/jquery.bootpag",["jquery"],function(e){!function(e,t){e.fn.bootpag=function(t){function i(t,i){var r,s=0==a.maxVisible?1:a.maxVisible,l=1==a.maxVisible?0:1,d=Math.floor((i-1)/s)*s,c=t.find("li");if(a.page=i=0>i?0:i>a.total?a.total:i,c.removeClass("disabled"),r=1>i-1?1:a.leaps&&i-1>=a.maxVisible?Math.floor((i-1)/s)*s:i-1,c.first().toggleClass("disabled",1===i).attr("data-lp",r).find("a").attr("href",n(r)),l=1==a.maxVisible?0:1,r=i+1>a.total?a.total:a.leaps&&i+1<a.total-a.maxVisible?d+a.maxVisible+l:i+1,c.last().toggleClass("disabled",i===a.total).attr("data-lp",r).find("a").attr("href",n(r)),s=c.filter("[data-lp="+i+"]"),!s.not(".next,.prev").length){var u=d>=i?-a.maxVisible:0;c.not(".next,.prev").each(function(t){r=t+1+d+u,e(this).attr("data-lp",r).toggle(r<=a.total).find("a").html(r).attr("href",n(r))}),s=c.filter("[data-lp="+i+"]")}s.addClass("disabled"),o.trigger("page",i),o.data("settings",a)}function n(e){return a.href.replace(a.hrefVariable,e)}var o=this,a=e.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;"},o.data("settings")||{},t||{});return 0>=a.total?this:(!e.isNumeric(a.maxVisible)&&!a.maxVisible&&(a.maxVisible=a.total),o.data("settings",a),this.each(function(){var t,o,r=e(this),s=['<ul class="bootpag">'];for(a.prev&&s.push('<li data-lp="1" class="prev"><a href="'+n(1)+'">'+a.prev+"</a></li>"),o=1;o<=Math.min(a.total,a.maxVisible);o++)s.push('<li data-lp="'+o+'"><a href="'+n(o)+'">'+o+"</a></li>");a.next&&(o=a.leaps&&a.total>a.maxVisible?Math.min(a.maxVisible+1,a.total):2,s.push('<li data-lp="'+o+'" class="next"><a href="'+n(o)+'">'+a.next+"</a></li>")),s.push("</ul>"),r.find("ul.bootpag").remove(),r.append(s.join("")).addClass("pagination"),t=r.find("ul.bootpag"),r.find("li").click(function(){var n=e(this);n.hasClass("disabled")||i(t,parseInt(n.attr("data-lp"),10))}),i(t,a.page)}))}}(e,window)}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/16x9View",["jquery","underscore","mustache","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Widget","models/Ndn/Ads/AdStudies","models/Ndn/Utils/UserAgent","jquery_autoellipsis","lib/jquery_plugins/jquery.simplePagination","lib/jquery_plugins/jquery.bootpag"],function(e,t,i,n,o,a,r,s,l){return n.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_playlistTabs li a":"onPlaylistSelect","click a.ndn_accordion-toggle":"onMobileAccordionClick"},initialize:function(){n.prototype.initialize.apply(this,arguments);var t=this;this.model.on({playlistSelect:function(){t.updateSelectableVideos()}}),this.model.on("viewerInitialized",e.proxy(function(){var e=this.model.getViewer();adsEnabled=t.model.getConfig().adsEnabled,adsEnabled&&(e.on({adCompanion:function(e){t.showCompanion(e.content)},adEnd:function(){t.hideCompanion()}}),e.on({videoStart:function(){t.showAdStudy()},videoEnd:function(){t.hideAdStudy()}}))},this))},updatePlaylistTabs:function(){this.$el.find(".ndn_playlistTabs").html(i.to_html(this.model.getTemplate("playlistTabs"),{playlists:this.model.get("playlists"),feederIndex:function(){var e=0;return function(){return e++}}()}));var e=this;this.model.getVideoFeeder().peekNextVideo(function(t){e.updatePlaylistSelectedTab(t.playlistId)})},onMobileAccordionClick:function(e){return this.$el.find(".ndn_accordion .ndn_collapse").slideToggle(),!1},onPlaylistSelect:function(t){var i=e(t.currentTarget).data("feederIndex");return this.model.selectPlaylistTab(i),!1},showCompanion:function(t){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingAdStudy"))e.resolve();else{var i=this.getDomElements(),n=i.companion,o=i.thumbnailPages;o.addClass("ndn_withCompanion"),this.displayCompanionAd(n,t),n.show(),this.model.set("isShowingCompanionAd",!0),this.updateSelectableVideos().done(function(){e.resolve()})}},this)).promise()},hideCompanion:function(){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingCompanionAd")){var t=this.getDomElements(),i=t.thumbnailPages,n=t.companion;i.removeClass("ndn_withCompanion"),n.html("").hide(),this.model.set("isShowingCompanionAd",!1),this.updateSelectableVideos().done(function(){e.resolve()})}else e.resolve()},this)).promise()},showAdStudy:function(){return e.Deferred(e.proxy(function(t){var i=this.getDomElements(),n=i.adStudy,o=i.thumbnailPages;this.hideAdStudy(),s.displayAdStudy(n.get(0),this.model.getProductSettings().settings.dfp.adUnitCode).done(e.proxy(function(){o.addClass("ndn_withAdStudy"),this.model.set("isShowingAdStudy",!0),this.hideCompanion().done(e.proxy(function(){this.updateSelectableVideos().done(function(){t.resolve()})},this))},this)).fail(function(){})},this)).promise()},hideAdStudy:function(){return e.Deferred(e.proxy(function(e){if(this.model.get("isShowingAdStudy")){var t=this.getDomElements(),i=t.thumbnailPages,n=t.adStudy;i.removeClass("ndn_withAdStudy"),n.html("").hide(),this.model.set("isShowingAdStudy",!1),this.updateSelectableVideos().done(function(){e.resolve()})}else e.resolve()},this)).promise()},getDomElements:function(){return{thumbnailPages:this.$el.find(".ndn_playlistThumbnailsPages"),paginator:this.$el.find(".ndn_playlistThumbnailsPagination"),companion:this.$el.find(".ndn_companion"),adStudy:this.$el.find(".ndn_adStudy")}},updateSelectableVideos:function(){var t=this.model,i=this;return e.Deferred(function(e){var n=i.getDomElements(),o=t.getThumbnailsPerPage();t.getThumbnailPagesHtmlData(t.getSelectedPlaylistTabIndex(),o).done(function(a){n.thumbnailPages.html(a.html),n.paginator.pagination("destroy").pagination({items:a.thumbnailCount,itemsOnPage:o,cssStyle:"pagination-centered",onPageClick:function(e,n){t.storeSelectedPage(e);var o=i.getDomElements().thumbnailPages;return o.find("> .ndn_playlistThumbnailsPage").hide(),o.find('> .ndn_playlistThumbnailsPage[data-page-number="'+e+'"]').show(),o.find(".ndn_videoTitle:visible, .ndn_videoMeta:visible").ellipsis({updateOnWindowResize:!0}),!1},prevText:"&laquo;",nextText:"&raquo;"}),i.updatePlaylistSelectedTab(t.getSelectedPlaylistTabIndex()),n.paginator.pagination("selectPage",t.getCurrentThumbnailPage()),n.paginator.toggle(n.paginator.pagination("getPagesCount")>1),e.resolve()})}).promise()},updatePlaylistSelectedTab:function(e){var t=this.$el.find(".ndn_playlistTabs"),i=t.find("li.ndn_active");i.children("a").data("playlistId")!==e&&(i.removeClass("ndn_active"),t.find("a[data-playlist-id="+e+"]").parents("li").addClass("ndn_active"))}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/default.html",[],function(){return'<div class="ndn_16-9-wrapper">\n    <div id="{{viewerContainerId}}" class="ndn_playerContainer"></div>\n</div>\n<!--LARGE DISPLAY CATEGORIES TABS START-->\n<ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_playlistTabs ndn_playlistSelectorMenu"></ul>\n<!--LARGE DISPLAY CATEGORIES TABS END--> \n<!--SMALL DISPLAY CATEGORIES TABS START-->\n<div class="ndn_accordion" id="accordion2">\n    <div class="ndn_accordion-group">\n        <div class="ndn_accordion-heading"></div>\n        <div class="ndn_openNav">\n        	<a class="ndn_accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"></a>\n        </div>\n        <div id="collapseOne" class="ndn_accordion-body ndn_in ndn_collapse">\n            <div class="ndn_accordion-inner">\n                <ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_nav-phone ndn_playlistTabs"></ul>\n            </div>\n        </div>\n    </div>\n</div>\n<!--SMALL DISPLAY CATEGORIES TABS END--> \n<!--COMPANION CONTAINER START-->\n<div class="ndn_companion" style="display:none;"></div>\n<div class="ndn_adStudy" style="display:none;"></div>\n<!--COMPANION CONTAINER END-->\n<!--THUMBNAILS START-->\n<div class="ndn_playlistThumbnailsPages ndn_selectableVideos"></div>\n<!--THUMBNAILS END--> \n<!--PAGINATION START-->\n<div class="ndn_playlistThumbnailsPagination ndn_js_pagination ndn_pagination ndn_pagination-centered"></div>\n<!--PAGINATION START-->'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistTabs.html",[],function(){return'{{#playlists}}\n	<li><a href="#" data-feeder-index="{{feederIndex}}" data-playlist-id="{{id}}">{{label}}</a></li>\n{{/playlists}}'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html",[],function(){return'{{#thumbnailPagesData}}\n	<ul class="ndn_playlistThumbnailsPage" data-page-number="{{pageNumber}}">\n		{{#videos}}\n			<li class="ndn_selectableVideo ndn_thumb ndn_js_playlistLi" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-video-id="{{videoData.videoId}}" data-selectable-video-index="{{selectableVideoIndex}}">\n		    	<div class="ndn_selectableVideoInner">\n		    		<div class="ndn_thumbContainer">\n		    			<img class="ndn_thbImage" src="{{videoData.thumbnailUrl}}" title="{{videoData.videoTitle}}" />\n		    			<div class="ndn_nowPlaying">Now Playing</div>\n		    			<div class="ndn_upcomingVideo">Up Next</div>\n		    		</div>\n		    		<p class="ndn_videoTitle">{{videoData.videoTitle}}</p>\n		    		<p class="ndn_videoMeta">{{videoData.displayDuration}} / {{videoData.provider.name}}</p>\n		    	</div>\n			</li>\n		{{/videos}}\n	</ul>\n{{/thumbnailPagesData}}'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/16x9Model",["jquery","mustache","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/16x9View","models/Ndn/VideoFeeder","text!templates/ndn/widget/video-player/16x9/default.html","text!templates/ndn/widget/video-player/16x9/playlistTabs.html","text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html"],function(e,t,i,n,o,a,r,s,l,d){return o.extend({defaults:{widgetView:a,templates:{"default":s,playlistTabs:l,playlistThumbnailsPage:d},playlists:null,selectedPlaylistId:null,videoFeeders:null,activeFeederIndex:null,selectedPlaylistTabIndex:null,selectedPageData:null,cachedThumbpagePagesHtml:null,isShowingCompanionAd:!1,isShowingAdStudy:!1,playlistItemsLimit:36},initialize:function(){o.prototype.initialize.apply(this,arguments),this.set({selectedPageData:{},videoFeeders:[]})},initializeVideoFeeder:function(){for(var e=this.getProductSettings(),t=this.getBehaviorSettings().videos,i=[],n=0;n<t.length;n++){var o=t[n],a=new r({productSettings:e,playlists:o.schedule});o.firstVideo&&a.setNextVideo(o.firstVideo),o.firstActiveFeeder&&this.set("activeFeederIndex",n),i.push(a)}this.set("videoFeeders",i)},initializeView:function(){o.prototype.initializeView.apply(this,arguments),this.get("view").updatePlaylistTabs(),this.selectPlaylistTab(this.getPlaylistTabIndexByPlaylistId(this.getConfig().playlistId))},selectVideo:function(e){this.set("activeFeederIndex",this.getSelectedPlaylistTabIndex()),o.prototype.selectVideo.apply(this,arguments)},getVideoFeeder:function(e){return e="number"==typeof e?e:this.get("activeFeederIndex"),this.get("videoFeeders")[e]},getSelectedPlaylistTabIndex:function(){return this.get("selectedPlaylistTabIndex")},embed:function(){return this.set("playlists",this.getProductSettings().associatedPlaylists),this.set("selectedPlaylistTabIndex",this.getPlaylistTabIndexByPlaylistId(this.getConfig().playlistId)),o.prototype.embed.apply(this,arguments)},getPlaylistTabIndexByPlaylistId:function(e){for(var t=this.get("playlists"),i=0;i<t.length;i++){var n=t[i];if(n.id==e)return i}},getThumbnailPageNumber:function(e){for(var t=this.getThumbnailsPerPage(),i=t-1,n=1;e>=i;i+=t)n++;return n},begin:function(){this.beginUi()},storeSelectedPage:function(e){var t=this.get("selectedPageData");t[this.get("selectedPlaylistId")]=(e-1)*this.getThumbnailsPerPage()},getCurrentThumbnailPage:function(){return this.getThumbnailPageNumber(this.get("selectedPageData")[this.get("selectedPlaylistId")])},getSelectedPlaylistId:function(){return this.get("selectedPlaylistId")},getSelectedPlaylistTabIndex:function(){return this.get("selectedPlaylistTabIndex")},getSelectedPlaylistData:function(){return e.Deferred(e.proxy(function(e){i.getPlaylistData(this.getSelectedPlaylistId(),this.getCachedSettings()).done(function(t){e.resolve(t)})},this)).promise()},selectPlaylistTab:function(e){this.set("selectedPlaylistTabIndex",e),this.trigger("playlistSelect")},selectPlaylist:function(e){this.set("selectedPlaylistId",e),this.trigger("playlistSelect")},setCachedThumbnailPagesHtmlData:function(e,t,i){this.get("cachedThumbnailPagesHtmlData")||this.set("cachedThumbnailPagesHtmlData",{});var n=this.get("cachedThumbnailPagesHtmlData");n[t]=n[t]||{},n[t][i]=e},getCachedThumbnailPagesHtmlData:function(e,t){this.get("cachedThumbnailPagesHtmlData")||this.set("cachedThumbnailPagesHtmlData",{});var i=this.get("cachedThumbnailPagesHtmlData");return i[e]=i[e]||{},i[e][t]},getThumbnailsPerPage:function(){return this.isShowingCompanionAdOrAdStudy()?8:12},getThumbnailPagesHtmlData:function(i,n){var o=this;return e.Deferred(function(e){var a=o.getCachedThumbnailPagesHtmlData(i,n);return a?e.resolve(a):void o.getVideoFeeder(i).peekNextVideos(o.getBehaviorSettings().playlistItemsLimit).done(function(a){for(var r=a,s=[],l=function(){var e=0;return function(){return e++}}(),c=0,u=1;c<r.length;c+=n){var p=c+n<=r.length?n:Math.min(r.length%n,n);s.push({pageNumber:u++,videos:r.slice(c,c+p),selectableVideoIndex:l})}var h={thumbnailCount:r.length,html:t.to_html(d,{thumbnailPagesData:s})};o.setCachedThumbnailPagesHtmlData(h,i,n),e.resolve(h)})}).promise()},isShowingCompanionAdOrAdStudy:function(){return this.get("isShowingCompanionAd")||this.get("isShowingAdStudy")}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/AbstractView",["jquery","views/Ndn/AbstractView"],function(e,t){return t.extend({})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/SliderView",["jquery","underscore","mustache","views/Ndn/Widget/VideoLauncher/AbstractView","models/Ndn/Carousel","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/DomElement","jquery_imagesloaded","jquery_bxslider","jquery_autoellipsis"],function(e,t,i,n,o,a,r){return n.extend({events:{"click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick","click .ndn_sliderContainer li a":"onThumbnailClick","click .ndn_sliderContainer .ndn_sliderControls":"onThumbnailClick","click .ndn_playlistThumbnails li a":"onThumbnailClick"},updateSelectableVideos:function(){var e=this,t=this.model,n=t.getVideoFeeder();n.peekNextVideos(3).done(function(n){e.$el.find(".ndn_selectableVideos").html(i.to_html(t.getTemplate("selectableVideos"),{videos:n,trackingGroup:t.getConfig().trackingGroup,selectableVideoIndex:function(){var e=0;return function(){return e++}}()})),t.getThumbnailsEnabled()?e.renderThumbnails():e.$el.find(".ndn_playlistThumbnails").hide(),e.initializeShowcaseCarousel()})},renderThumbnails:function(){var e=this.model,t=this,n=e.getVideoFeeder();n.peekNextVideos(3).done(function(n){t.$el.find(".ndn_playlistThumbnails").html(i.to_html(e.getTemplate("thumbnails"),{videos:n,trackingGroup:e.getConfig().trackingGroup,selectableVideoIndex:function(){var e=0;return function(){return e++}}()})),e.set("thumbnailCarousel",t.$el.find(".ndn_playlistThumbnailsList").bxSlider({pager:!1,controls:!1,maxSlides:3,minSlides:3,slideWidth:114,slideMargin:4,auto:!1,onSliderLoad:function(){t.loadImagesForSlide(0),t.centerThumbnails()},onSlideBefore:function(e,i,n){t.loadImagesForSlide(n)}})),t.$el.find(".ndn_playlistThumbnails .ndn_titleOverlay p").ellipsis({live:!0})})},centerThumbnails:function(){this.$el.find(".ndn_playlistThumbnailsList li, .ndn_sliderItems li").each(function(){var t=e(this).find("img:not(.ndn_providerLogo)"),i=t.width()-t.closest("li").width();i=(0-Math.max(i,0))/2,t.css("margin-left",i+"px")})},initializeShowcaseCarousel:function(){var t=this.model,i=this,n=this.model.getVideoFeeder();return e.Deferred(function(e){var a,s;n.peekNextVideos(3).done(function(e){r.onceMeetsCondition(t.getContainerElement().find(".ndn_selectableVideos"),function(e){var t=e.width(),i=e.height();if(t>=300&&350>=t){var n=250/300*t;if(i>=n-1&&n+1>=i)return a=t,s=i,!0}}).done(function(){var n=new o({containerElement:t.getContainerElement().find(".ndn_selectableVideos"),auto:!0}).on({carouselLoad:function(){var n=t.getContainerElement().find(".ndn_sliderTopContainer");i.$el.find(".ndn_selectableVideos > li").css({width:n.width()+"px",height:n.height()+"px"}),i.$el.find(".ndn_sliderControls").toggle(e.length>1),i.$el.find(".ndn_producerName, .ndn_sliderVideoTitle").ellipsis()},slideLoad:function(e){var n=e.slideIndex,o=e.previousSlideIndex;if(t.getThumbnailsEnabled()&&i.isShowcaseCarouselVisible()){i.clearCurrentVideoThumbnail(),i.setCurrentVideoThumbnail(e.slideElement.data("videoId"));var a=t.get("thumbnailCarousel"),r=a.getSlideCount();n%3==0?(n>o||0==n&&o==r-1)&&a.goToNextSlide():(n+1)%3==0&&(o>n||0==o&&n==r-1)&&a.goToPrevSlide()}}}).load();t.set("carousel",n)})})}).promise()},setVideoPlayerOnScreen:function(e){this.$el.find(".ndn_videoPlayerWrapper").toggleClass("ndn_videoPlayerWrapper_loading",!e),this.isShowcaseCarouselVisible()||this.clearCurrentVideoThumbnail()},isShowcaseCarouselVisible:function(){return this.$el.find(".ndn_videoPlayerWrapper").hasClass("ndn_videoPlayerWrapper_loading")},onPrevClick:function(){return this.model.get("carousel").visitPreviousSlide(),!1},onNextClick:function(){return this.model.get("carousel").visitNextSlide(),!1},setCurrentVideoThumbnail:function(e){this.isShowcaseCarouselVisible()&&this.$el.find('.ndn_playlistThumbnails [data-video-id="'+e+'"] .ndn_currentVideoThumbnail').fadeIn(400)},clearCurrentVideoThumbnail:function(){this.$el.find(".ndn_currentVideoThumbnail").fadeOut(400)},onThumbnailClick:function(i){var n="";if(void 0!==e(i.currentTarget).attr("href"))n=e(i.currentTarget).attr("href");else{var o=e(t.first(this.$el.find('[data-video-index="'+this.model.get("carousel").getCurrentSlide()+'"]')));n=o.find("a").attr("href")}return this.openNdnWindow(n),i.preventDefault(),!1}})}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/default.html",[],function(){return'<div class="ndn_responsiveContainer ndn_sliderTopContainer">\n	<div class="ndn_sliderContainer">\n		<div class="ndn_videoPlayerWrapper">\n			<div id="{{viewerContainerId}}" class="ndn_playerContainer"></div>\n		</div>\n		<ul class="ndn_sliderItems ndn_selectableVideos"></ul>\n		<div class="ndn_sliderControls">\n			<div class="ndn_sliderPrev ndn_sliderNavButton">\n				<div class="ndn_arrow"></div>\n			</div>\n			<div class="ndn_sliderNext ndn_sliderNavButton">\n				<div class="ndn_arrow"></div>\n			</div>\n		</div>\n	</div>\n</div>\n<div class="ndn_playlistThumbnails">\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/selectableVideos.html",[],function(){return'{{#videos}}\n    <li class="ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-selectable-video-index="{{selectableVideoIndex}}" data-video-id="{{videoData.videoId}}" title="{{videoData.videoTitle}}">\n        <a href="//launch.newsinc.com/embed.html?type=VideoPlayer/16x9&trackingGroup={{trackingGroup}}&widgetId=1&videoId={{videoData.videoId}}&playlistId={{playlistId}}">\n            <div class="ndn_sliderThumbnailOverlay">\n                <p class="ndn_sliderVideoTitle">{{videoData.videoTitle}}</p>\n                <p class="ndn_producerName">{{videoData.provider.name}}</p>\n                <div class="ndn_imagePlaceholder" data-src="{{videoData.provider.logoUrl}}" data-class="ndn_providerLogo"></div>\n            </div>\n            <div class="ndn_imagePlaceholder" data-src="{{videoData.stillImageUrl}}" data-class="ndn_centerImage"></div>\n            <div class="ndn_playButton"></div>\n        </a>\n    </li>\n{{/videos}}\n'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider/thumbnails.html",[],function(){return'<h4>More videos:</h4>\n<ul class="ndn_playlistThumbnailsList">\n	{{#videos}}\n	<li class="ndn_playlistVideoThumbnail ndn_thumbnail" data-video-index="{{videoIndex}}" data-playlist-index="{{playlistIndex}}" data-video-id="{{videoData.videoId}}" data-playlist-id="{{playlistId}}" title="{{videoData.videoTitle}}">\n			<div class="ndn_thumbnailContainer">\n				<a href="//launch.newsinc.com/embed.html?type=VideoPlayer/16x9&trackingGroup={{trackingGroup}}&widgetId=1&videoId={{videoData.videoId}}&playlistId={{playlistId}}">\n					<img src="{{videoData.stillImageUrl}}"/>\n					<div class="ndn_titleOverlay">\n						<div class="ndn_thumbTitle">{{videoData.videoTitle}}</div>\n					</div>\n				</a>\n			</div>\n			<div class="ndn_currentVideoThumbnail"></div>\n		</li>\n	{{/videos}}\n</ul>\n'}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/SliderModel",["jquery","underscore","mustache","models/Ndn/App","models/Ndn/Widget","models/Ndn/Utils/AspectRatio","views/Ndn/Widget/VideoLauncher/SliderView","models/Ndn/Widget/Params","models/Ndn/Viewer/ViewerModule/Amp","models/Ndn/Debug","text!templates/ndn/widget/video-launcher/slider/default.html","text!templates/ndn/widget/video-launcher/slider/selectableVideos.html","text!templates/ndn/widget/video-launcher/slider/thumbnails.html","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s,l,d,c,u,p){return o.extend({defaults:{widgetView:r,templates:{"default":c,selectableVideos:u,thumbnails:p},playlistItemsLimit:3,carousel:null,thumbnailCarousel:null,displayAdSpreePauses:0,hasMadeComscoreCall:!1},manageEvents:function(){o.prototype.manageEvents.apply(this,arguments);var e=this;this.on({viewerInitialized:function(){e.getViewer().on({"adStart videoStart":function(){e.toggleSliderCarousel(!1)},viewerModuleEnd:function(){e.toggleSliderCarousel(!0)}})}})},initializeView:function(){o.prototype.initializeView.apply(this,arguments),a.maintain(this.getContainerElement().find(".ndn_sliderTopContainer"),"6:5"),this.toggleSliderCarousel(!0)},begin:function(){var t=this,i=(this.getDeliverySettings(),this.getBehaviorSettings()),n=this.getBrowserSettings();return e.Deferred(function(e){n.isDesktop?t.steps(["B"]).done(function(){i.rmm.displayAdSpreeEnabled?t.steps(["DD"]).done(e.resolve):t.steps(["AA"]).done(e.resolve)}):t.steps(["AA"]).done(e.resolve)}).promise()},stepRX:function(){var e=this.getViewer().step("RX").start(),t=this.getDeliverySettings();return this.iterateStep("RD",t.rmm_cp).done(function(){e.end()})},stepRD:function(){var t=this.getProductSettings(),i=t.config,n=this.getViewer(),o=this.getVideoFeeder(),a=n.step("RD").start(),r=this;return e.Deferred(function(a){o.peekNextVideo().done(function(o){var l=!0,d=!1,c=!0,u=r.getDefaultPlaybackMode(),p=r.getCpvNumber(),h=o.videoData,g=!0,f=n.getViewerModule("inform"),m=f?f.getVideoLoadIndex()+1:0,y=!r.get("hasMadeComscoreCall"),v=s.getPlayerBehaviorId(t,l),_=s.getWgtValue(i,l),E=r.getPltValue();n.execute("inform",{dfp:{adTagUrl:s.getImaAdTagUrl({productSettings:t,videoData:h,viewerData:s.getViewerData(n.getContainerElement()),isMuted:c,isProviderAttributed:d,playbackMode:u,analyticsTimelineEventIndex:null,videoLoadIndex:m,cpvNumber:p,playerInstanceTypeId:r.getDeliverySettings().videojs?7:0,now:e.now(),pbValue:v,wgtValue:_,pltValue:E}),ppid:t.settings.dfp.publisherProvidedId,adBlockDetectionId:t.settings.browser.adBlockDetectionId},comscore:y&&s.getComscoreData({siteSection:i.siteSection,distributorName:t.distributor.name,isProviderAttributed:d,videoData:h}),share:!1,isMuted:c,playOnLoad:g,playOnMouseover:!1,playOnInView:!1,playbackMode:u,showControls:!1,pbValue:v,wgtValue:_,pltValue:E,videoIndex:o.videoIndex,videoLoadIndex:m,playlistId:o.playlistId,cpvNumber:r.getCpvNumber()}).done(a.resolve)})}).promise().done(function(){r.set("cpvNumber",r.getCpvNumber()+1),r.set("hasMadeComscoreCall",!0),a.end()})},stepA:function(){var e=this,t={},i=this.getDeliverySettings();return o.prototype.stepA.call(this,{easiTimeout:i.easiTimeout,allowEasiPlayerFlash:this.getBehaviorSettings().allowFlashForEasi,comscore:!this.get("hasMadeComscoreCall"),stepLog:t}).done(function(){t.hasMadeEasiComscoreCall&&e.set("hasMadeComscoreCall",!0)})},stepD:function(){var t=this.getDeliverySettings(),i=this.getBehaviorSettings(),n=this;return e.Deferred(function(e){o.prototype.stepD.call(n,{displayAdDuration:t[n.getBrowserSettings().isDesktop?"da_slider_d":"da_slider_nd"],displayAdOverrideSite:i.displayAdOverrideSite,displayAdOverrideZonesize:i.displayAdOverrideZonesize
}).done(function(t){if(t&&t.adsPlayed&&n.getBehaviorSettings().rmm.displayAdSpreeEnabled){var i=n.getNextDisplayAdSpreePause();d.log("displayAdSpreePause",i),i>0?setTimeout(e.resolve,1e3*i):e.resolve()}else e.resolve()})}).promise()},getNextDisplayAdSpreePause:function(){var e=this.getBehaviorSettings().rmm.displayAdSpreePauses,t=e[Math.min(this.get("displayAdSpreePauses"),e.length-1)];return this.set("displayAdSpreePauses",this.get("displayAdSpreePauses")+1),t},toggleSliderCarousel:function(e){this.get("view").setVideoPlayerOnScreen(!e)},getThumbnailsEnabled:function(){return!n.isEmbeddedByIframe()}},{initializeBehaviorSettings:function(e){var i=e.getBrowserSettings(),n=e.getDeliverySettings(),o=e.getBehaviorSettings(),a=o.rmm,r=i.isDesktop,s=i.isOnHomepage;a.adServer="spotx";var l=r?n.da_spree_d:0,d=i.ableToUseDisplayAdSpree&&r&&-1!=n[r?"da_slider_d":"da_slider_nd"]?l>0:!1;a.displayAdSpreeEnabled=d,d&&(a.displayAdSpreePauses=function(){for(var e=n.da_spree_pause.split(" "),t=[],i=0;i<e.length;i++){var o=parseInt(e[i]);isNaN(o)||t.push(o)}return t}());var c=n[r?"da_override_d":"da_override_nd"].split("/");a.rotatingEnabled=!s||d;var u=r&&n.easi_flash_slider&&!i.mayHaveDesktopFlashBlock,p=n[r?"da_slider_d":"da_slider_nd"];t.extend(o,{allowFlashForEasi:u,easiChannelId1:r?u?75776:171911:93697,easiChannelId2:u?109285:171912,displayAdDuration:p,displayAdsAllowed:-1!=p,displayAdOverrideSite:c[0]||null,displayAdOverrideZonesize:c[1]||null,displayAdHtml5:!r||n.da_html5_slider_d})}})}),Ndn_Require.define("text!templates/ndn/thumbnail-strip/container.html",[],function(){return'<div class="ndn_sliderPrev ndn_sliderNavButton">\n    <div class="ndn_sliderNavButtonContents">\n        <i class="ndn_icon_left-open-big" aria-hidden="true"></i>\n    </div>\n</div>\n<div class="ndn_sliderWrapper inform-selectable-videos inform-selectable-videos-normal">\n    <ul class="ndn_selectableVideos"></ul>\n</div>\n<div class="ndn_sliderWrapper inform-selectable-videos inform-selectable-videos-small">\n    <ul class="ndn_selectableVideos"></ul>\n</div>\n<div class="ndn_sliderNext ndn_sliderNavButton">\n    <div class="ndn_sliderNavButtonContents">\n        <i class="ndn_icon_right-open-big" aria-hidden="true"></i>\n    </div>\n</div>'}),Ndn_Require.define("text!templates/ndn/thumbnail-strip/pages.html",[],function(){return'{{#videoPages}}\n    <li class="ndn_videoPageContainer">\n        <ul class="ndn_videoPage" style="width:100%;height:100%;">\n            {{#.}}\n                <li class="ndn_selectableVideo" data-playlist-index="{{playlistIndex}}" data-video-index="{{videoIndex}}" data-playlist-id="{{playlistId}}" data-video-id="{{videoData.videoId}}" data-selectable-video-index="{{selectableVideoIndex}}" title="{{videoData.videoTitle}}">\n                    <div class="ndn_selectableVideoContainer">\n                        <div class="ndn_thumbContainer ndn_thumbnailContainer">\n                            <div class="inform-thumbnail-container" data-src="{{videoData.thumbnailUrl}}" style="background:url(\'{{videoData.thumbnailUrl}}\');background-size:cover;"></div>\n                            <div class="ndn_nowPlaying">Now Playing</div>\n                            <div class="ndn_upcomingVideo">Up Next</div>\n                            <div class="ndn_thumbnailBackground"></div>\n                            <div class="inform-video-duration">\n                                {{videoData.displayDuration}}\n                            </div>\n                            <div class="inform-play-icon"><div class="inform-play-icon-inner"></div></div>\n                        </div>\n                        <div class="inform-video-title" data-title="{{videoData.videoTitle}}"></div>\n                    </div>\n                </li>\n            {{/.}}\n        </ul>\n    </li>\n{{/videoPages}}'}),Ndn_Require.define("views/Ndn/ThumbnailStripView",["jquery","underscore","mustache","backbone","models/Ndn/Utils/AspectRatio","models/Ndn/Utils/Responsive","text!templates/ndn/thumbnail-strip/container.html","text!templates/ndn/thumbnail-strip/pages.html","jquery_autoellipsis","jquery_imagesloaded","jquery_bxslider"],function(e,t,i,n,o,a,r,s){return n.View.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_sliderNext":"visitNextCarouselSlide","click .ndn_sliderPrev":"visitPreviousCarouselSlide"},initialize:function(){n.View.prototype.initialize.apply(this,arguments),this.initializeDom(),this.initializeEventListeners(),this.synchronizeInterface()},initializeDom:function(){var e=this.$el;e.html(i.to_html(r)),this.model.setCarouselsData([[e.find(".inform-selectable-videos-normal > .ndn_selectableVideos"),4,"carousel"],[e.find(".inform-selectable-videos-small > .ndn_selectableVideos"),2,"smallCarousel"]])},initializeEventListeners:function(){var e=this.$el;o.maintain(e,"16:3"),a.addBreakpoints(e,{"min-width":[480,800,1200],"max-width":[481]})},updateCarouselSlide:function(){var t=e(this.getSelectedVideoElement().get(0)).data("selectableVideoIndex"),i=this.model.getCarousel();i&&i.goToSlide(Math.floor(t/(this.isUsingSmallCarousel()?2:4)))},isUsingSmallCarousel:function(){return this.$el.width()<=480},updateCarouselSlideContents:function(t){var i=this.model.getCarousel();if(i){i.processCurrentSlide(function(){e(this).find(".inform-video-title").each(function(){var t=e(this),i=t.clone().html(t.data("title"));t.replaceWith(i),i.ellipsis(),t=i;var n=t.parent().find("> .ndn_thumbnailContainer"),o=t.outerHeight(),a=t.parent().height();n.height(a-o)})})}},visitPreviousCarouselSlide:function(){this.model.getCarousel().visitPreviousSlide()},visitNextCarouselSlide:function(){this.model.getCarousel().visitNextSlide()},synchronizeInterface:function(){function e(e,n){for(var o=[],a=0;a<t.length;a+=n){for(var r=[],l=0;n>l;l++)r.push(t[a+l]);o.push(r)}e.html(i.to_html(s,{videoPages:o,selectableVideoIndex:function(){var e=0;return function(){return e++}}()})),e.find(".ndn_selectableVideo").last().data("isLast",!0)}for(var t=this.model.getVideos(),n=this.model.getCarouselsData(),o=0;o<n.length;o++){var a=n[o],r=a[0],l=a[1];e(r,l)}this.model.initializeCarousels()},onVideoSelect:function(t){var i=e(t.currentTarget);return this.model.trigger("videoSelect",{source:"selectableVideo",playlistIndex:i.data("playlistIndex"),videoIndex:i.data("videoIndex")}),!1}})}),Ndn_Require.define("models/Ndn/ThumbnailStripModel",["underscore","jquery","backbone","views/Ndn/ThumbnailStripView","models/Ndn/Carousel"],function(e,t,i,n,o){return i.Model.extend({defaults:{videos:null,view:null,carouselsData:null,carousel:null,smallCarousel:null},initialize:function(e){this.set({videos:e.videos,containerElement:e.containerElement,aspectRatio:e.aspectRatio?e.aspectRatio:"16:3"}),this.set("view",new n({model:this,el:this.getContainerElement().addClass("inform-thumbnail-strip").get(0)}))},getContainerElement:function(){return this.get("containerElement")},getView:function(){return this.get("view")},getVideos:function(){return this.get("videos")},setCarouselsData:function(e){this.set("carouselsData",e)},getCarouselsData:function(){return this.get("carouselsData")},getCarousel:function(){return this.get(this.getActiveCarouselName())},getActiveCarouselName:function(){return this.getView().isUsingSmallCarousel()?"smallCarousel":"carousel"},initializeCarousels:function(){for(var i=this,n=function(){i.getView().updateCarouselSlideContents()},a=e.debounce(function(){var e=i.getCarousel();e.once("carouselLoad",n),e.reload()},500),r=this.getCarouselsData(),s=0;s<r.length;s++){var l=r[s],d=l[0],c=(l[1],l[2]),u=new o({isSimple:!0,containerElement:d});u.once("carouselLoad",a),u.on("slideLoad",n),this.set(c,u.load())}t(window).resize(a)}})}),Ndn_Require.define("views/Ndn/Widget/InViewView",["jquery","mustache","models/Ndn/ThumbnailStripModel","views/Ndn/AbstractView"],function(e,t,i,n){return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments);var e=this.$el;e.html(t.to_html(this.model.getTemplate("default"),{viewerContainerId:this.model.getViewerContainerId()})),this.model.getDeliverySettings().thumbnails_inview&&this.model.initializeThumbnailStrip(e.find(".inform-thumbnails-container"))},hide:function(){this.$el.hide()},expand:function(){this.$el.slideDown()},collapse:function(){return this.$el.slideUp().promise()}})}),Ndn_Require.define("text!templates/ndn/widget/in-view/default.html",[],function(){return'<div class="ndn_playerContainer" id="{{viewerContainerId}}" style="width:100%;height:100%;position:relative;"></div>\n<div class="inform-thumbnails-container"></div>'}),Ndn_Require.define("models/Ndn/Widget/InViewModel",["underscore","jquery","models/Ndn/App","models/Ndn/Widget","models/Ndn/Enum/Wgt","models/Ndn/Widget/Params","models/Ndn/ThumbnailStripModel","models/Ndn/Utils/AspectRatio","views/Ndn/Widget/InViewView","text!templates/ndn/widget/in-view/default.html"],function(e,t,i,n,o,a,r,s,l,d){return n.extend({defaults:{widgetView:l,templates:{"default":d},playlistItemsLimit:1},initializeThumbnailStrip:function(e){var t=this;this.getVideoFeeder().peekNextVideos(4).done(function(i){var n=new r({videos:i,containerElement:e});n.on("videoSelect",function(e){t.selectVideo(e)})})},begin:function(){2==this.getDeliverySettings().inview_version?this.stepV2():this.stepV1()},stepV1:function(){var e=this.getViewer(),i=this.getProductSettings(),n=this.getBrowserSettings(),r=this.getBehaviorSettings(),s=this.getConfig(),l=e.step("V1").start(),d=this;return e.disableLoadingScreen(),t.Deferred(function(t){e.execute("easi",{adUnitType:"incontent",timeout:r.easiTimeout,channelId:r.easiChannelId,allowFlash:!0,customData:{adCampaignId:i.settings.dfp.adCampaignId,embedIndex:i.embedIndex,adBlockDetectionId:n.adBlockDetectionId,widgetId:s.widgetId,siteSection:s.siteSection,foldPositionId:a.getFoldPositionId(d.getContainerElement()),wgtValue:o.INVIEW,pltValue:d.getPltValue(),videoSizeId:a.getVideoSizeId(parseInt(e.getContainerElement().width()))}}).done(function(e){e.adsPlayed?t.resolve():d.steps(["D"]).done(t.resolve)})}).promise().done(function(){l.end(),d.get("view").collapse().done(function(){d.destruct()})})},stepV2:function(){var e=this,n=this.getProductSettings(),r=this.getDeliverySettings(),s=this.getConfig(),l=this.getViewer(),d=this.getVideoFeeder(),c=l.step("V2").start(),u=!1;return t.Deferred(function(c){return e.getBrowserSettings().isDesktop?void d.peekNextVideo().done(function(d){var p=!1,h=!1,g=!0,f=e.getDefaultPlaybackMode(),m=e.getCpvNumber(),y=d.videoData,v=!0,_=l.getViewerModule("inform"),E=_?_.getVideoLoadIndex()+1:0,A=a.getPlayerBehaviorId(n,p),b=o.INVIEW,C=e.getPltValue();l.execute("inform",{dfp:{adTagUrl:a.getImaAdTagUrl({productSettings:n,videoData:y,viewerData:a.getViewerData(l.getContainerElement()),isMuted:g,isProviderAttributed:h,playbackMode:f,analyticsTimelineEventIndex:null,videoLoadIndex:E,cpvNumber:m,playerInstanceTypeId:r.videojs?7:0,pbValue:A,wgtValue:b,pltValue:C,now:t.now()}),ppid:n.settings.dfp.publisherProvidedId,adBlockDetectionId:n.settings.browser.adBlockDetectionId},comscore:a.getComscoreData({siteSection:s.siteSection,distributorName:n.distributor.name,isProviderAttributed:h,videoData:y}),isMuted:g,isBumperVideo:u,playOnLoad:!1,playOnInView:!0,playOnInViewPercent:r.inview_stp_percent,unmuteOnMouseover:!0,playbackMode:f,showControls:v,stillImage:{small:y.stillImageUrl,large:y.stillImageXLUrl},forceInstantiation:i.allowOverride("forceInstantiation",!0),pbValue:A,wgtValue:b,pltValue:C,videoIndex:d.videoIndex,videoLoadIndex:E,playlistId:d.playlistId,cpvNumber:e.getCpvNumber()}).done(function(){e.stepB(e.getDeliverySettings().bumper_inview).done(c.resolve)})}):c.resolve()}).promise().done(function(){e.stepUI({playOnLoad:!1}).done(function(){e.stepCP().done(function(){c.end()})})})},stepD:function(){return n.prototype.stepD.call(this,{displayAdDuration:this.getBehaviorSettings().displayAdDuration})},initializeView:function(){n.prototype.initializeView.apply(this,arguments),s.maintain(t("#"+this.getViewerContainerId()),this.getConfig().aspectRatio)}},{initializeBehaviorSettings:function(t){var i=t.getBrowserSettings(),n=t.getDeliverySettings(),o=t.getBehaviorSettings(),a=i.isDesktop,r=n[a?"da_inview_d":"da_inview_nd"];e.extend(o,{easiTimeout:n[a?"easi_t_inview_d":"easi_t_inview_nd"],easiChannelId:a?94802:77940,displayAdDuration:r,displayAdsAllowed:-1!=r})}})}),Ndn_Require.define("models/Ndn/Widget",function(){});